<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <title>Docker容器搭建ELK AIO - 我的全新 Hugo 网站</title><meta name="Description" content="使用Docker容器，一键启动ELK stack，所有服务集中在一个容器内，真香！！"><meta property="og:title" content="Docker容器搭建ELK AIO" />
<meta property="og:description" content="使用Docker容器，一键启动ELK stack，所有服务集中在一个容器内，真香！！" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://example.org/docker%E5%AE%B9%E5%99%A8%E6%90%AD%E5%BB%BAelk-aio/" /><meta property="og:image" content="http://example.org/logo.png"/><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-01-23T10:20:21+00:00" />
<meta property="article:modified_time" content="2023-01-23T10:20:21+00:00" /><meta property="og:site_name" content="我的网站" />
<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="http://example.org/logo.png"/>

<meta name="twitter:title" content="Docker容器搭建ELK AIO"/>
<meta name="twitter:description" content="使用Docker容器，一键启动ELK stack，所有服务集中在一个容器内，真香！！"/>
<meta name="application-name" content="我的网站">
<meta name="apple-mobile-web-app-title" content="我的网站"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="http://example.org/docker%E5%AE%B9%E5%99%A8%E6%90%AD%E5%BB%BAelk-aio/" /><link rel="prev" href="http://example.org/%E4%BF%AE%E6%94%B9windows%E6%98%BE%E7%A4%BA%E5%AD%97%E4%BD%93%E5%85%BC%E5%85%B6%E4%BB%96windows%E7%BE%8E%E5%8C%96/" /><link rel="next" href="http://example.org/jupyter%E5%AE%B9%E5%99%A8%E6%90%AD%E5%BB%BA%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E8%BF%87%E7%A8%8B%E8%AE%B0%E5%BD%95/" /><link rel="stylesheet" href="/css/style.min.css"><link rel="preload" href="/lib/fontawesome-free/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="/lib/fontawesome-free/all.min.css"></noscript><link rel="preload" href="/lib/animate/animate.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="/lib/animate/animate.min.css"></noscript><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "Docker容器搭建ELK AIO",
        "inLanguage": "zh-CN",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "http:\/\/example.org\/docker%E5%AE%B9%E5%99%A8%E6%90%AD%E5%BB%BAelk-aio\/"
        },"genre": "posts","keywords": "Docker, ELK","wordcount":  494 ,
        "url": "http:\/\/example.org\/docker%E5%AE%B9%E5%99%A8%E6%90%AD%E5%BB%BAelk-aio\/","datePublished": "2023-01-23T10:20:21+00:00","dateModified": "2023-01-23T10:20:21+00:00","publisher": {
            "@type": "Organization",
            "name": ""},"author": {
                "@type": "Person",
                "name": "xxxx"
            },"description": "使用Docker容器，一键启动ELK stack，所有服务集中在一个容器内，真香！！"
    }
    </script></head>
    <body data-header-desktop="fixed" data-header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="我的全新 Hugo 网站"></a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/"> 文章 </a><a class="menu-item" href="/tags/"> 标签 </a><a class="menu-item" href="/categories/"> 分类 </a><span class="menu-item delimiter"></span><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="Search titles or contents..." id="search-input-desktop">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="Search">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="Clear">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </span><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                    <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
                </a></div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="我的全新 Hugo 网站"></a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="Search titles or contents..." id="search-input-mobile">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="Search">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="Clear">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </div>
                    <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
                        Cancel
                    </a>
                </div><a class="menu-item" href="/posts/" title="">文章</a><a class="menu-item" href="/tags/" title="">标签</a><a class="menu-item" href="/categories/" title="">分类</a><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
            </a></div>
    </div>
</header><div class="search-dropdown desktop">
        <div id="search-dropdown-desktop"></div>
    </div>
    <div class="search-dropdown mobile">
        <div id="search-dropdown-mobile"></div>
    </div><main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">Contents</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">Docker容器搭建ELK AIO</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="/" title="Author" rel="author" class="author"><i class="fas fa-user-circle fa-fw" aria-hidden="true"></i>xxxx</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw" aria-hidden="true"></i>&nbsp;<time datetime="2023-01-23">2023-01-23</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden="true"></i>&nbsp;494 words&nbsp;
                <i class="far fa-clock fa-fw" aria-hidden="true"></i>&nbsp;One minute&nbsp;</div>
        </div><div class="details toc" id="toc-static"  data-kept="true">
                <div class="details-summary toc-title">
                    <span>Contents</span>
                    <span><i class="details-icon fas fa-angle-right" aria-hidden="true"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#镜像地址">镜像地址</a></li>
    <li><a href="#参数说明">参数说明</a></li>
    <li><a href="#镜像使用手册文档">镜像使用手册文档</a></li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><h2 id="镜像地址">镜像地址</h2>
<p><a href="https://hub.docker.com/r/sebp/elk" target="_blank" rel="noopener noreffer ">https://hub.docker.com/r/sebp/elk</a></p>
<h2 id="参数说明">参数说明</h2>
<p><code>docker run -itd -p 5601:5601 -p 9200:9200 -p 5044:5044 --name=elk -e TZ=&quot;Asia/Shanghai&quot; sebp/elk</code></p>
<ul>
<li>
<p><code>TZ</code>: 时区 (这里查看 <a href="https://en.wikipedia.org/wiki/List_of_tz_database_time_zones" target="_blank" rel="noopener noreffer ">可用时区参数</a>), 例如 <code>Asia/Shanghai</code>、<code>America/Los_Angeles</code> (default is <code>Etc/UTC</code>, i.e. UTC).</p>
</li>
<li>
<p><code>ES_HEAP_SIZE</code>: Elasticsearch heap size，内存占用？ (default is 256MB min, 1G max)</p>
<p>Specifying a heap size – e.g. <code>2g</code> – will set both the min and max to the provided value. To set the min and max values separately, see the <code>ES_JAVA_OPTS</code> below.</p>
</li>
<li>
<p><code>ES_JAVA_OPTS</code>: additional Java options for Elasticsearch (default: <code>&quot;&quot;</code>)</p>
<p>For instance, to set the min and max heap size to 512MB and 2G, set this environment variable to <code>-Xms512m -Xmx2g</code>.</p>
</li>
<li>
<p><code>ES_CONNECT_RETRY</code>: number of seconds to wait for Elasticsearch to be up before starting Logstash and/or Kibana (default: <code>30</code>)</p>
</li>
<li>
<p><code>ES_PROTOCOL</code>: protocol to use to ping Elasticsearch&rsquo;s JSON interface URL (default: <code>http</code>)</p>
<p>Note that this variable is only used to test if Elasticsearch is up when starting up the services. It is not used to update Elasticsearch&rsquo;s URL in Logstash&rsquo;s and Kibana&rsquo;s configuration files.</p>
</li>
<li>
<p><code>CLUSTER_NAME</code>: the name of the Elasticsearch cluster (default: automatically resolved when the container starts if Elasticsearch requires no user authentication).</p>
<p>The name of the Elasticsearch cluster is used to set the name of the Elasticsearch log file that the container displays when running. By default the name of the cluster is resolved automatically at start-up time (and populates <code>CLUSTER_NAME</code>) by querying Elasticsearch&rsquo;s REST API anonymously. However, when Elasticsearch requires user authentication (as is the case by default when running X-Pack for instance), this query fails and the container stops as it assumes that Elasticsearch is not running properly. Therefore, the <code>CLUSTER_NAME</code> environment variable can be used to specify the name of the cluster and bypass the (failing) automatic resolution.</p>
</li>
<li>
<p><code>LS_HEAP_SIZE</code>: Logstash heap size (default: <code>&quot;500m&quot;</code>)</p>
</li>
<li>
<p><code>LS_OPTS</code>: Logstash options (default: <code>&quot;--auto-reload&quot;</code> in images with tags <code>es231_l231_k450</code> and <code>es232_l232_k450</code>, <code>&quot;&quot;</code> in <code>latest</code>; see <a href="https://elk-docker.readthedocs.io/#breaking-changes" target="_blank" rel="noopener noreffer ">Breaking changes</a>)</p>
</li>
<li>
<p><code>NODE_OPTIONS</code>: Node options for Kibana (default: <code>&quot;--max-old-space-size=250&quot;</code>)</p>
</li>
<li>
<p><code>MAX_MAP_COUNT</code>: limit on mmap counts (default: system default)</p>
<p><strong>Warning</strong> – This setting is system-dependent: not all systems allow this limit to be set from within the container, you may need to set this from the host before starting the container (see <a href="https://elk-docker.readthedocs.io/#prerequisites" target="_blank" rel="noopener noreffer ">Prerequisites</a>).</p>
</li>
<li>
<p><code>MAX_OPEN_FILES</code>: maximum number of open files (default: system default; Elasticsearch needs this amount to be equal to at least 65536)</p>
</li>
<li>
<p><code>KIBANA_CONNECT_RETRY</code>: number of seconds to wait for Kibana to be up before running the post-hook script (see <a href="https://elk-docker.readthedocs.io/#pre-post-hooks" target="_blank" rel="noopener noreffer ">Pre-hooks and post-hooks</a>) (default: <code>30</code>)</p>
</li>
<li>
<p><code>ES_HEAP_DISABLE</code> and <code>LS_HEAP_DISABLE</code>: disable <code>HeapDumpOnOutOfMemoryError</code> for Elasticsearch and Logstash respectively if non-zero (default: <code>HeapDumpOnOutOfMemoryError</code> is enabled).</p>
<p>Setting these environment variables avoids potentially large heap dumps if the services run out of memory.</p>
</li>
</ul>
<h2 id="镜像使用手册文档">镜像使用手册文档</h2>
<p><a href="https://elk-docker.readthedocs.io" target="_blank" rel="noopener noreffer ">https://elk-docker.readthedocs.io</a></p>
</div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>Updated on 2023-01-23</span>
            </div><div class="post-info-license">
                <span>false</span>
            </div></div>
        <div class="post-info-line">
            <div class="post-info-md"><span>
                            <a class="link-to-markdown" href="/docker%E5%AE%B9%E5%99%A8%E6%90%AD%E5%BB%BAelk-aio/index.md" target="_blank">Read Markdown</a>
                        </span></div>
            <div class="post-info-share">
                <span><a href="javascript:void(0);" title="Share on Twitter" data-sharer="twitter" data-url="http://example.org/docker%E5%AE%B9%E5%99%A8%E6%90%AD%E5%BB%BAelk-aio/" data-title="Docker容器搭建ELK AIO" data-via="xxxx" data-hashtags="Docker,ELK"><i class="fab fa-twitter fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Facebook" data-sharer="facebook" data-url="http://example.org/docker%E5%AE%B9%E5%99%A8%E6%90%AD%E5%BB%BAelk-aio/" data-hashtag="Docker"><i class="fab fa-facebook-square fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Hacker News" data-sharer="hackernews" data-url="http://example.org/docker%E5%AE%B9%E5%99%A8%E6%90%AD%E5%BB%BAelk-aio/" data-title="Docker容器搭建ELK AIO"><i class="fab fa-hacker-news fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Line" data-sharer="line" data-url="http://example.org/docker%E5%AE%B9%E5%99%A8%E6%90%AD%E5%BB%BAelk-aio/" data-title="Docker容器搭建ELK AIO"><i data-svg-src="/lib/simple-icons/icons/line.min.svg" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on 微博" data-sharer="weibo" data-url="http://example.org/docker%E5%AE%B9%E5%99%A8%E6%90%AD%E5%BB%BAelk-aio/" data-title="Docker容器搭建ELK AIO"><i class="fab fa-weibo fa-fw" aria-hidden="true"></i></a></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw" aria-hidden="true"></i>&nbsp;<a href="/tags/docker/">Docker</a>,&nbsp;<a href="/tags/elk/">ELK</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">Back</a></span>&nbsp;|&nbsp;<span><a href="/">Home</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/%E4%BF%AE%E6%94%B9windows%E6%98%BE%E7%A4%BA%E5%AD%97%E4%BD%93%E5%85%BC%E5%85%B6%E4%BB%96windows%E7%BE%8E%E5%8C%96/" class="prev" rel="prev" title="修改Windows显示字体"><i class="fas fa-angle-left fa-fw" aria-hidden="true"></i>修改Windows显示字体</a>
            <a href="/jupyter%E5%AE%B9%E5%99%A8%E6%90%AD%E5%BB%BA%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E8%BF%87%E7%A8%8B%E8%AE%B0%E5%BD%95/" class="next" rel="next" title="Jupyter容器搭建`开发环境`过程记录">Jupyter容器搭建`开发环境`过程记录<i class="fas fa-angle-right fa-fw" aria-hidden="true"></i></a></div>
</div>
</article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">Powered by <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.115.4">Hugo</a> | Theme - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="noopener noreffer" title="LoveIt 0.2.11"><i class="far fa-kiss-wink-heart fa-fw" aria-hidden="true"></i> LoveIt</a>
                </div><div class="footer-line" itemscope itemtype="http://schema.org/CreativeWork"><i class="far fa-copyright fa-fw" aria-hidden="true"></i><span itemprop="copyrightYear">2019 - 2023</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/" target="_blank">xxxx</a></span>&nbsp;|&nbsp;<span class="license"><a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="Back to Top">
                <i class="fas fa-arrow-up fa-fw" aria-hidden="true"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="View Comments">
                <i class="fas fa-comment fa-fw" aria-hidden="true"></i>
            </a>
        </div><link rel="stylesheet" href="/lib/cookieconsent/cookieconsent.min.css"><script type="text/javascript" src="/lib/autocomplete/autocomplete.min.js"></script><script type="text/javascript" src="/lib/lunr/lunr.min.js"></script><script type="text/javascript" src="/lib/lazysizes/lazysizes.min.js"></script><script type="text/javascript" src="/lib/clipboard/clipboard.min.js"></script><script type="text/javascript" src="/lib/sharer/sharer.min.js"></script><script type="text/javascript" src="/lib/cookieconsent/cookieconsent.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"Copy to clipboard","maxShownLines":50},"comment":{},"cookieconsent":{"content":{"dismiss":"Got it!","link":"Learn more","message":"This website uses Cookies to improve your experience."},"enable":true,"palette":{"button":{"background":"#f0f0f0"},"popup":{"background":"#1aa3ff"}},"theme":"edgeless"},"search":{"highlightTag":"em","lunrIndexURL":"/index.json","maxResultLength":10,"noResultsFound":"No results found","snippetLength":50,"type":"lunr"}};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
