<!DOCTYPE html><html lang="zh-CN" data-theme="dark"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Docker搭建Rclone-WebGui | BlackELK's Blog</title><meta name="keywords" content="docker"><meta name="author" content="黑麋鹿"><meta name="copyright" content="黑麋鹿"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#0d0d0d"><meta name="description" content="来源：https:&#x2F;&#x2F;github.com&#x2F;romancin&#x2F;rclonebrowser-docker rclonebrowser-dockerA repository for creating a docker container including RClone Browser with GUI interface, based on kapitainsky fork Thank you fo"><meta property="og:type" content="article"><meta property="og:title" content="Docker搭建Rclone-WebGui"><meta property="og:url" content="http://example.com/Docker%E6%90%AD%E5%BB%BARclone-WebGui/index.html"><meta property="og:site_name" content="BlackELK&#39;s Blog"><meta property="og:description" content="来源：https:&#x2F;&#x2F;github.com&#x2F;romancin&#x2F;rclonebrowser-docker rclonebrowser-dockerA repository for creating a docker container including RClone Browser with GUI interface, based on kapitainsky fork Thank you fo"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://i.loli.net/2021/08/19/HvgOmKncQGaVSed.png"><meta property="article:published_time" content="2021-08-16T10:41:00.000Z"><meta property="article:modified_time" content="2021-08-21T14:19:35.782Z"><meta property="article:author" content="黑麋鹿"><meta property="article:tag" content="docker"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://i.loli.net/2021/08/19/HvgOmKncQGaVSed.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://example.com/Docker%E6%90%AD%E5%BB%BARclone-WebGui/"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="//fonts.googleapis.com" crossorigin=""><link rel="preconnect" href="//busuanzi.ibruce.info"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap" media="print" onload='this.media="all"'><script>const GLOBAL_CONFIG={root:"/",algolia:void 0,localSearch:{path:"search.xml",languages:{hits_empty:"找不到您查询的内容：${query}"}},translate:{defaultEncoding:2,translateDelay:0,msgToTraditionalChinese:"繁",msgToSimplifiedChinese:"简"},noticeOutdate:void 0,highlight:{plugin:"highlighjs",highlightCopy:!0,highlightLang:!0,highlightHeightLimit:200},copy:{success:"复制成功",error:"复制错误",noSupport:"浏览器不支持"},relativeDate:{homepage:!1,post:!1},runtime:"",date_suffix:{just:"刚刚",min:"分钟前",hour:"小时前",day:"天前",month:"个月前"},copyright:void 0,lightbox:"fancybox",Snackbar:void 0,source:{jQuery:"https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js",justifiedGallery:{js:"https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js",css:"https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css"},fancybox:{js:"https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js",css:"https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"}},isPhotoFigcaption:!0,islazyload:!1,isanchor:!0}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={title:"Docker搭建Rclone-WebGui",isPost:!0,isHome:!1,isHighlightShrink:!1,isToc:!0,postUpdate:"2021-08-21 22:19:35"}</script><noscript><style type="text/css">#nav{opacity:1}.justified-gallery img{opacity:1}#post-meta time,#recent-posts time{display:inline!important}</style></noscript><script>(e=>{e.saveToLocal={set:function(e,t,o){if(0!==o){const a=new Date;o=864e5*o,o={value:t,expiry:a.getTime()+o};localStorage.setItem(e,JSON.stringify(o))}},get:function(e){var t=localStorage.getItem(e);if(t){t=JSON.parse(t);const o=new Date;if(!(o.getTime()>t.expiry))return t.value;localStorage.removeItem(e)}}},e.getScript=a=>new Promise((t,e)=>{const o=document.createElement("script");o.src=a,o.async=!0,o.onerror=e,o.onload=o.onreadystatechange=function(){var e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(o.onload=o.onreadystatechange=null,t())},document.head.appendChild(o)}),e.activateDarkMode=function(){document.documentElement.setAttribute("data-theme","dark"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#0d0d0d")},e.activateLightMode=function(){document.documentElement.setAttribute("data-theme","light"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#ffffff")};var t=saveToLocal.get("theme"),o=window.matchMedia("(prefers-color-scheme: dark)").matches,a=window.matchMedia("(prefers-color-scheme: light)").matches,c=window.matchMedia("(prefers-color-scheme: no-preference)").matches,e=!o&&!a&&!c;if(void 0===t){if(a)activateLightMode();else if(o)activateDarkMode();else if(c||e){const n=new Date;e=n.getHours();(e<=6||18<=e?activateDarkMode:activateLightMode)()}window.matchMedia("(prefers-color-scheme: dark)").addListener(function(e){void 0===saveToLocal.get("theme")&&(e.matches?activateDarkMode:activateLightMode)()})}else("light"===t?activateLightMode:activateDarkMode)();t=saveToLocal.get("aside-status");void 0!==t&&("hide"===t?document.documentElement.classList.add("hide-aside"):document.documentElement.classList.remove("hide-aside"));t=saveToLocal.get("global-font-size");void 0!==t&&document.documentElement.style.setProperty("--global-font-size",t+"px");t=()=>{GLOBAL_CONFIG_SITE.isHome&&/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)&&document.documentElement.classList.add("apple")};t(),document.addEventListener("pjax:complete",t)})(window)</script><link rel="stylesheet" href="/css/custom.css" media="defer" onload='this.media="all"'><meta name="generator" content="Hexo 5.4.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror='onerror=null,src="/img/friend_404.gif"' alt="avatar"></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">71</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">54</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">16</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image:url(https://i.loli.net/2021/08/19/HvgOmKncQGaVSed.png)"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">BlackELK's Blog</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Docker搭建Rclone-WebGui<a class="post-edit-link" href="https://github.com/sirliu/blogsource/edit/main/source/_posts/Docker搭建Rclone-WebGui.md" title="编辑" target="_blank"><i class="fas fa-pencil-alt"></i></a></h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2021-08-16T10:41:00.000Z" title="发表于 2021-08-16 18:41:00">2021-08-16</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2021-08-21T14:19:35.782Z" title="更新于 2021-08-21 22:19:35">2021-08-21</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/docker/">docker</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Docker搭建Rclone-WebGui"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><p>来源：<a target="_blank" rel="noopener" href="https://github.com/romancin/rclonebrowser-docker">https://github.com/romancin/rclonebrowser-docker</a></p><h1 id="rclonebrowser-docker"><a href="#rclonebrowser-docker" class="headerlink" title="rclonebrowser-docker"></a>rclonebrowser-docker</h1><p>A repository for creating a docker container including RClone Browser with GUI interface, based on <a target="_blank" rel="noopener" href="https://github.com/kapitainsky/RcloneBrowser">kapitainsky fork</a></p><p>Thank you for continue developing this awesome software :)</p><p><a target="_blank" rel="noopener" href="https://images.microbadger.com/badges/version/romancin/rclonebrowser.svg"><img src="http://www.sirliu.top:8000/usr/themes/Aria/assets/img/loading.svg" alt="img"></a><br><a target="_blank" rel="noopener" href="https://images.microbadger.com/badges/image/romancin/rclonebrowser.svg"><img src="http://www.sirliu.top:8000/usr/themes/Aria/assets/img/loading.svg" alt="img"></a><br><a target="_blank" rel="noopener" href="https://img.shields.io/badge/Donate-PayPal-green.svg"><img src="http://www.sirliu.top:8000/usr/themes/Aria/assets/img/loading.svg" alt="Donate"></a></p><p>You can invite me a beer if you want ;)</p><p>This is a completely funcional Docker image with RClone Browser kapytainskyfork.</p><p>Based on Alpine Linux, which provides a very small size.</p><p>Tested and working on Synology and QNAP, but should work on any x86_64 devices.</p><p>Thanks to @jlesage for a great base image for GUI apps.</p><p>Instructions:</p><ul><li>Map any local port to 5800 for web access</li><li>Map any local port to 5900 for VNC access</li><li>Map a local volume to /config Storesconfigurationdata</li><li>Map a local volume to /media Accessmediafiles</li></ul><p>Sample run command:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">docker run -d --name=rclonebrowser \</span><br><span class="line">-v /share/Container/rclonebrowser/config:/config \</span><br><span class="line">-v /share/Container/rclonebrowser/media:/media \</span><br><span class="line">-e GROUP_ID=0 -e USER_ID=0 -e TZ=Europe/Madrid \</span><br><span class="line">-p 5800:5800 \</span><br><span class="line">-p 5900:5900 \</span><br><span class="line">romancin/rclonebrowser:latest</span><br></pre></td></tr></table></figure><p>Browse to <code>http://your-host-ip:5800</code> to access the RClone Browser GUI.</p><h3 id="Environment-Variables"><a href="#Environment-Variables" class="headerlink" title="Environment Variables"></a>Environment Variables</h3><p>To customize some properties of the container, the following environment<br>variables can be passed via the <code>-e</code> parameter oneforeachvariable. Value<br>of this parameter has the format <code>&lt;VARIABLE_NAME&gt;=&lt;VALUE&gt;</code>.</p><table><thead><tr><th align="left">Variable</th><th align="left">Description</th><th align="left">Default</th></tr></thead><tbody><tr><td align="left"><code>USER_ID</code></td><td align="left">ID of the user the application runs as. See <a target="_blank" rel="noopener" href="http://www.sirliu.top:8000/archives/38/#usergroup-ids">User/Group IDs</a> to better understand when this should be set.</td><td align="left"><code>1000</code></td></tr><tr><td align="left"><code>GROUP_ID</code></td><td align="left">ID of the group the application runs as. See <a target="_blank" rel="noopener" href="http://www.sirliu.top:8000/archives/38/#usergroup-ids">User/Group IDs</a> to better understand when this should be set.</td><td align="left"><code>1000</code></td></tr><tr><td align="left"><code>SUP_GROUP_IDS</code></td><td align="left">Comma-separated list of supplementary group IDs of the application.</td><td align="left">unset</td></tr><tr><td align="left"><code>UMASK</code></td><td align="left">Mask that controls how file permissions are set for newly created files. The value of the mask is in octal notation. By default, this variable is not set and the default umask of <code>022</code> is used, meaning that newly created files are readable by everyone, but only writable by the owner. See the following online umask calculator: <a target="_blank" rel="noopener" href="http://wintelguy.com/umask-calc.pl">http://wintelguy.com/umask-calc.pl</a></td><td align="left">unset</td></tr><tr><td align="left"><code>TZ</code></td><td align="left">[TimeZone] of the container. Timezone can also be set by mapping <code>/etc/localtime</code> between the host and the container.</td><td align="left"><code>Etc/UTC</code></td></tr><tr><td align="left"><code>KEEP_APP_RUNNING</code></td><td align="left">When set to <code>1</code>, the application will be automatically restarted if it crashes or if user quits it.</td><td align="left"><code>0</code></td></tr><tr><td align="left"><code>APP_NICENESS</code></td><td align="left">Priority at which the application should run. A niceness value of -20 is the highest priority and 19 is the lowest priority. By default, niceness is not set, meaning that the default niceness of 0 is used. <strong>NOTE</strong>: A negative niceness priorityincrease requires additional permissions. In this case, the container should be run with the docker option <code>--cap-add=SYS_NICE</code>.</td><td align="left">unset</td></tr><tr><td align="left"><code>CLEAN_TMP_DIR</code></td><td align="left">When set to <code>1</code>, all files in the <code>/tmp</code> directory are delete during the container startup.</td><td align="left"><code>1</code></td></tr><tr><td align="left"><code>DISPLAY_WIDTH</code></td><td align="left">Width inpixels of the application’s window.</td><td align="left"><code>1280</code></td></tr><tr><td align="left"><code>DISPLAY_HEIGHT</code></td><td align="left">Height inpixels of the application’s window.</td><td align="left"><code>768</code></td></tr><tr><td align="left"><code>SECURE_CONNECTION</code></td><td align="left">When set to <code>1</code>, an encrypted connection is used to access the application’s GUI eitherviawebbrowserorVNCclient. See the <a target="_blank" rel="noopener" href="http://www.sirliu.top:8000/archives/38/#security">Security</a> section for more details.</td><td align="left"><code>0</code></td></tr><tr><td align="left"><code>VNC_PASSWORD</code></td><td align="left">Password needed to connect to the application’s GUI. See the <a target="_blank" rel="noopener" href="http://www.sirliu.top:8000/archives/38/#vnc-password">VNC Password</a> section for more details.</td><td align="left">unset</td></tr><tr><td align="left"><code>X11VNC_EXTRA_OPTS</code></td><td align="left">Extra options to pass to the x11vnc server running in the Docker container. <strong>WARNING</strong>: For advanced users. Do not use unless you know what you are doing.</td><td align="left">unset</td></tr><tr><td align="left"><code>ENABLE_CJK_FONT</code></td><td align="left">When set to <code>1</code>, open source computer font <code>WenQuanYi Zen Hei</code> is installed. This font contains a large range of Chinese/Japanese/Korean characters.</td><td align="left"><code>0</code></td></tr></tbody></table><h3 id="Data-Volumes"><a href="#Data-Volumes" class="headerlink" title="Data Volumes"></a>Data Volumes</h3><p>The following table describes data volumes used by the container. The mappings<br>are set via the <code>-v</code> parameter. Each mapping is specified with the following<br>format: <code>&lt;HOST_DIR&gt;:&lt;CONTAINER_DIR&gt;[:PERMISSIONS]</code>.</p><table><thead><tr><th align="left">Container path</th><th align="left">Permissions</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><code>/config</code></td><td align="left">rw</td><td align="left">This is where the application stores its configuration, log and any files needing persistency.</td></tr><tr><td align="left"><code>/media</code></td><td align="left">rw</td><td align="left">This is where downloaded files are stored, or where you put files in your host for uploading.</td></tr></tbody></table><h3 id="Ports"><a href="#Ports" class="headerlink" title="Ports"></a>Ports</h3><p>Here is the list of ports used by the container. They can be mapped to the host<br>via the <code>-p</code> parameter oneperportmapping. Each mapping is defined in the<br>following format: <code>&lt;HOST_PORT&gt;:&lt;CONTAINER_PORT&gt;</code>. The port number inside the<br>container cannot be changed, but you are free to use any port on the host side.</p><table><thead><tr><th align="left">Port</th><th align="left">Mapping to host</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left">5800</td><td align="left">Mandatory</td><td align="left">Port used to access the application’s GUI via the web interface.</td></tr><tr><td align="left">5900</td><td align="left">Optional</td><td align="left">Port used to access the application’s GUI via the VNC protocol. Optional if no VNC client is used.</td></tr></tbody></table><h2 id="User-Group-IDs"><a href="#User-Group-IDs" class="headerlink" title="User/Group IDs"></a>User/Group IDs</h2><p>When using data volumes (<code>-v</code> flags), permissions issues can occur between the<br>host and the container. For example, the user within the container may not<br>exists on the host. This could prevent the host from properly accessing files<br>and folders on the shared volume.</p><p>To avoid any problem, you can specify the user the application should run as.</p><p>This is done by passing the user ID and group ID to the container via the<br><code>USER_ID</code> and <code>GROUP_ID</code> environment variables.</p><p>To find the right IDs to use, issue the following command on the host, with the<br>user owning the data volume on the host:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">id &lt;username&gt;</span><br></pre></td></tr></table></figure><p>Which gives an output like this one:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uid=1000(myuser) gid=1000(myuser) groups=1000(myuser),4(adm),24(cdrom),27(sudo),46(plugdev),113(lpadmin)</span><br></pre></td></tr></table></figure><p>The value of <code>uid</code> userID and <code>gid</code> groupID are the ones that you should<br>be given the container.</p><h2 id="Security"><a href="#Security" class="headerlink" title="Security"></a>Security</h2><p>By default, access to the application’s GUI is done over an unencrypted<br>connection HTTPorVNC.</p><p>Secure connection can be enabled via the <code>SECURE_CONNECTION</code> environment<br>variable. See the <a target="_blank" rel="noopener" href="http://www.sirliu.top:8000/archives/38/#environment-variables">Environment Variables</a> section for<br>more details on how to set an environment variable.</p><p>When enabled, application’s GUI is performed over an HTTPs connection when<br>accessed with a browser. All HTTP accesses are automatically redirected to<br>HTTPs.</p><p>When using a VNC client, the VNC connection is performed over SSL. Note that<br>few VNC clients support this method. [SSVNC] is one of them.</p><h3 id="Certificates"><a href="#Certificates" class="headerlink" title="Certificates"></a>Certificates</h3><p>Here are the certificate files needed by the container. By default, when they<br>are missing, self-signed certificates are generated and used. All files have<br>PEM encoded, x509 certificates.</p><table><thead><tr><th align="left">Container Path</th><th align="left">Purpose</th><th align="left">Content</th></tr></thead><tbody><tr><td align="left"><code>/config/certs/vnc-server.pem</code></td><td align="left">VNC connection encryption.</td><td align="left">VNC server’s private key and certificate, bundled with any root and intermediate certificates.</td></tr><tr><td align="left"><code>/config/certs/web-privkey.pem</code></td><td align="left">HTTPs connection encryption.</td><td align="left">Web server’s private key.</td></tr><tr><td align="left"><code>/config/certs/web-fullchain.pem</code></td><td align="left">HTTPs connection encryption.</td><td align="left">Web server’s certificate, bundled with any root and intermediate certificates.</td></tr></tbody></table><p><strong>NOTE</strong>: To prevent any certificate validity warnings/errors from the browser<br>or VNC client, make sure to supply your own valid certificates.</p><p><strong>NOTE</strong>: Certificate files are monitored and relevant daemons are automatically<br>restarted when changes are detected.</p><h3 id="VNC-Password"><a href="#VNC-Password" class="headerlink" title="VNC Password"></a>VNC Password</h3><p>To restrict access to your application, a password can be specified. This can<br>be done via two methods:</p><ul><li>By using the <code>VNC_PASSWORD</code> environment variable.</li><li>By creating a <code>.vncpass_clear</code> file at the root of the <code>/config</code> volume.<br>This file should contains the password in clear-text. During the container<br>startup, content of the file is obfuscated and moved to <code>.vncpass</code>.</li></ul><p>The level of security provided by the VNC password depends on two things:</p><ul><li>The type of communication channel encrypted/unencrypted.</li><li>How secure access to the host is.</li></ul><p>When using a VNC password, it is highly desirable to enable the secure<br>connection to prevent sending the password in clear over an unencrypted channel.</p><p><strong>ATTENTION</strong>: Password is limited to 8 characters. This limitation comes from<br>the Remote Framebuffer Protocol <a target="_blank" rel="noopener" href="https://tools.ietf.org/html/rfc6143">RFC</a> (see<br>section <a target="_blank" rel="noopener" href="https://tools.ietf.org/html/rfc6143#section-7.2.2">7.2.2</a>). Any<br>characters beyhond the limit are ignored.</p><h2 id="Shell-Access"><a href="#Shell-Access" class="headerlink" title="Shell Access"></a>Shell Access</h2><p>To get shell access to a the running container, execute the following command:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker exec -ti CONTAINER sh</span><br></pre></td></tr></table></figure><p>Where <code>CONTAINER</code> is the ID or the name of the container used during its<br>creation (e.g. <code>crashplan-pro</code>).</p><h2 id="Reverse-Proxy"><a href="#Reverse-Proxy" class="headerlink" title="Reverse Proxy"></a>Reverse Proxy</h2><p>The following sections contains NGINX configuration that need to be added in<br>order to reverse proxy to this container.</p><p>A reverse proxy server can route HTTP requests based on the hostname or the URL<br>path.</p><h3 id="Routing-Based-on-Hostname"><a href="#Routing-Based-on-Hostname" class="headerlink" title="Routing Based on Hostname"></a>Routing Based on Hostname</h3><p>In this scenario, each hostname is routed to a different application/container.</p><p>For example, let’s say the reverse proxy server is running on the same machine<br>as this container. The server would proxy all HTTP requests sent to<br><code>rclonebrowser.domain.tld</code> to the container at <code>127.0.0.1:5800</code>.</p><p>Here are the relevant configuration elements that would be added to the NGINX<br>configuration:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">map $http_upgrade $connection_upgrade &#123;</span><br><span class="line">    default upgrade;</span><br><span class="line">    &#x27;&#x27;      close;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">upstream rclonebrowser &#123;</span><br><span class="line">    # If the reverse proxy server is not running on the same machine as the</span><br><span class="line">    # Docker container, use the IP of the Docker host here.</span><br><span class="line">    # Make sure to adjust the port according to how port 5800 of the</span><br><span class="line">    # container has been mapped on the host.</span><br><span class="line">    server 127.0.0.1:5800;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">server &#123;</span><br><span class="line">    [...]</span><br><span class="line"> </span><br><span class="line">    server_name rclonebrowser.domain.tld;</span><br><span class="line"> </span><br><span class="line">    location / &#123;</span><br><span class="line">            proxy_pass http://rclonebrowser;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    location /websockify &#123;</span><br><span class="line">        proxy_pass http://rclonebrowser;</span><br><span class="line">        proxy_http_version 1.1;</span><br><span class="line">        proxy_set_header Upgrade $http_upgrade;</span><br><span class="line">        proxy_set_header Connection $connection_upgrade;</span><br><span class="line">        proxy_read_timeout 86400;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Routing-Based-on-URL-Path"><a href="#Routing-Based-on-URL-Path" class="headerlink" title="Routing Based on URL Path"></a>Routing Based on URL Path</h3><p>In this scenario, the hostname is the same, but different URL paths are used to<br>route to different applications/containers.</p><p>For example, let’s say the reverse proxy server is running on the same machine<br>as this container. The server would proxy all HTTP requests for<br><code>server.domain.tld/rclonebrowser</code> to the container at <code>127.0.0.1:5800</code>.</p><p>Here are the relevant configuration elements that would be added to the NGINX<br>configuration:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">map $http_upgrade $connection_upgrade &#123;</span><br><span class="line">    default upgrade;</span><br><span class="line">    &#x27;&#x27;      close;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">upstream rclonebrowser &#123;</span><br><span class="line">    # If the reverse proxy server is not running on the same machine as the</span><br><span class="line">    # Docker container, use the IP of the Docker host here.</span><br><span class="line">    # Make sure to adjust the port according to how port 5800 of the</span><br><span class="line">    # container has been mapped on the host.</span><br><span class="line">    server 127.0.0.1:5800;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">server &#123;</span><br><span class="line">    [...]</span><br><span class="line"> </span><br><span class="line">    location = /rclonebrowser &#123;return 301 $scheme://$http_host/rclonebrowser/;&#125;</span><br><span class="line">    location /rclonebrowser/ &#123;</span><br><span class="line">        proxy_pass http://rclonebrowser/;</span><br><span class="line">        location /rclonebrowser/websockify &#123;</span><br><span class="line">            proxy_pass http://rclonebrowser/websockify/;</span><br><span class="line">            proxy_http_version 1.1;</span><br><span class="line">            proxy_set_header Upgrade $http_upgrade;</span><br><span class="line">            proxy_set_header Connection $connection_upgrade;</span><br><span class="line">            proxy_read_timeout 86400;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Support-or-Contact"><a href="#Support-or-Contact" class="headerlink" title="Support or Contact"></a>Support or Contact</h2><p>Having troubles with the container or have questions? Please<br>[create a new issue].</p><h2 id="Changelog"><a href="#Changelog" class="headerlink" title="Changelog"></a>Changelog</h2><p>v3.0.2 09/09/2020: Updated to Alpine 3.12 and Rclone current version<br>v3.0.0 22/03/2019: Updated to RcloneBrowser 1.8.0 version<br>v1.0.1 22/09/2019: Updated to latest image from jlesage and added Jenkinsfile for CI</p></article><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/docker/">docker</a></div><div class="post_share"></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror='this.onerror=null,this.src="/img/friend_404.gif"' alt="avatar"></div><div class="author-info__name">黑麋鹿</div><div class="author-info__description">折腾之路</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">71</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">54</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">16</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/sirliu"><i class="fab fa-github"></i><span>Github</span></a></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#rclonebrowser-docker"><span class="toc-number">1.</span> <span class="toc-text">rclonebrowser-docker</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Environment-Variables"><span class="toc-number">1.0.1.</span> <span class="toc-text">Environment Variables</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Data-Volumes"><span class="toc-number">1.0.2.</span> <span class="toc-text">Data Volumes</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Ports"><span class="toc-number">1.0.3.</span> <span class="toc-text">Ports</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#User-Group-IDs"><span class="toc-number">1.1.</span> <span class="toc-text">User&#x2F;Group IDs</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Security"><span class="toc-number">1.2.</span> <span class="toc-text">Security</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Certificates"><span class="toc-number">1.2.1.</span> <span class="toc-text">Certificates</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#VNC-Password"><span class="toc-number">1.2.2.</span> <span class="toc-text">VNC Password</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Shell-Access"><span class="toc-number">1.3.</span> <span class="toc-text">Shell Access</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Reverse-Proxy"><span class="toc-number">1.4.</span> <span class="toc-text">Reverse Proxy</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Routing-Based-on-Hostname"><span class="toc-number">1.4.1.</span> <span class="toc-text">Routing Based on Hostname</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Routing-Based-on-URL-Path"><span class="toc-number">1.4.2.</span> <span class="toc-text">Routing Based on URL Path</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Support-or-Contact"><span class="toc-number">1.5.</span> <span class="toc-text">Support or Contact</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Changelog"><span class="toc-number">1.6.</span> <span class="toc-text">Changelog</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/Hugo%E6%BC%82%E4%BA%AE%E4%B8%BB%E9%A2%98/" title="Hugo漂亮主题">Hugo漂亮主题</a><time datetime="2021-08-21T07:28:13.000Z" title="发表于 2021-08-21 15:28:13">2021-08-21</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/vscode-hexo-utils%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/" title="vscode-hexo-utils使用教程">vscode-hexo-utils使用教程</a><time datetime="2021-08-20T15:10:09.000Z" title="发表于 2021-08-20 23:10:09">2021-08-20</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/VSCODE%E5%86%99HEXO%E5%8D%9A%E5%AE%A2%E6%97%B6%E8%87%AA%E5%8A%A8%E6%8F%92%E5%85%A5FrontMatter%E7%9A%84%E5%AE%9E%E7%8E%B0/" title="VSCODE写HEXO博客时自动插入FrontMatter的实现">VSCODE写HEXO博客时自动插入FrontMatter的实现</a><time datetime="2021-08-20T04:39:57.000Z" title="发表于 2021-08-20 12:39:57">2021-08-20</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/%E8%83%8C%E6%99%AF%E5%9B%BE%E5%9C%B0%E5%9D%80%E5%A4%87%E4%BB%BD/" title="背景图地址备份">背景图地址备份</a><time datetime="2021-08-19T09:18:00.000Z" title="发表于 2021-08-19 17:18:00">2021-08-19</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/MongoDB%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E5%A4%87%E4%BB%BD%E5%92%8C%E6%81%A2%E5%A4%8D/" title="MongoDB数据库的备份和恢复">MongoDB数据库的备份和恢复</a><time datetime="2021-08-17T10:19:11.000Z" title="发表于 2021-08-17 18:19:11">2021-08-17</time></div></div></div></div></div></div></main><footer id="footer" style="background:#227a7a"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2021 By 黑麋鹿</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="font-plus" type="button" title="放大字体"><i class="fas fa-plus"></i></button><button id="font-minus" type="button" title="缩小字体"><i class="fas fa-minus"></i></button><button id="translateLink" type="button" title="简繁转换">简</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"></div></div></div><hr><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script>function panguFn(){"object"==typeof pangu?pangu.autoSpacingPage():getScript("https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js").then(()=>{pangu.autoSpacingPage()})}function panguInit(){panguFn()}document.addEventListener("DOMContentLoaded",panguInit)</script><script src="/js/search/local-search.js"></script><div class="js-pjax"></div><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zindex="-1" mobile="false" data-click="true"></script><script id="click-show-text" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/click-show-text.min.js" data-mobile="true" data-text="富强,民主,文明,和谐,自由,平等,公正,法治,爱国,敬业,诚信,友善" data-fontsize="15px" data-random="true" async="async"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors=["title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"];var pjax=new Pjax({elements:'a:not([target="_blank"])',selectors:pjaxSelectors,cacheBust:!1,analytics:!1,scrollRestoration:!1});document.addEventListener("pjax:send",function(){if(window.removeEventListener("scroll",window.tocScrollFn),window.removeEventListener("scroll",scrollCollect),"object"==typeof preloader&&preloader.initLoading(),window.aplayers)for(let e=0;e<window.aplayers.length;e++)window.aplayers[e].options.fixed||window.aplayers[e].destroy();"object"==typeof typed&&typed.destroy();const e=document.body.classList;e.contains("read-mode")&&e.remove("read-mode")}),document.addEventListener("pjax:complete",function(){window.refreshFn(),document.querySelectorAll("script[data-pjax]").forEach(e=>{const t=document.createElement("script");var o=e.text||e.textContent||e.innerHTML||"";Array.from(e.attributes).forEach(e=>t.setAttribute(e.name,e.value)),t.appendChild(document.createTextNode(o)),e.parentNode.replaceChild(t,e)}),GLOBAL_CONFIG.islazyload&&window.lazyLoadInstance.update(),"function"==typeof chatBtnFn&&chatBtnFn(),"function"==typeof panguInit&&panguInit(),"function"==typeof gtag&&gtag("config","",{page_path:window.location.pathname}),"object"==typeof _hmt&&_hmt.push(["_trackPageview",window.location.pathname]),"function"==typeof loadMeting&&document.getElementsByClassName("aplayer").length&&loadMeting(),"object"==typeof Prism&&Prism.highlightAll(),"object"==typeof preloader&&preloader.endLoading()}),document.addEventListener("pjax:error",e=>{404===e.request.status&&pjax.loadUrl("/404.html")})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>