<!-- build time:Sat Dec 09 2023 08:23:24 GMT+0800 (China Standard Time) --><!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#FFF"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"><link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="alternate" type="application/rss+xml" href="https://coloraven.github.io/rss.xml"><link rel="alternate" type="application/atom+xml" href="https://coloraven.github.io/atom.xml"><link rel="alternate" type="application/json" href="https://coloraven.github.io/feed.json"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CMicrosoft%20YaHei:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/css/app.css?v=0.2.5"><link rel="canonical" href="https://coloraven.github.io/2021/9/%E5%8D%B3%E5%88%BB%E5%9B%BE%E5%BA%8A%E6%BA%90%E7%A0%81/"><title>即刻图床源码 - Hexo | Black Elk = = 潛龍勿用</title><meta name="generator" content="Hexo 5.4.0"></head><body itemscope itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">即刻图床源码</h1><div class="meta"><span class="item" title="创建时间：2021-09-25 17:28:45"><span class="icon"><i class="ic i-calendar"></i> </span><span class="text">发表于</span> <time itemprop="dateCreated datePublished" datetime="2021-09-25T17:28:45+08:00">2021-09-25</time> </span><span class="item" title="本文字数"><span class="icon"><i class="ic i-pen"></i> </span><span class="text">本文字数</span> <span>211k</span> <span class="text">字</span> </span><span class="item" title="阅读时长"><span class="icon"><i class="ic i-clock"></i> </span><span class="text">阅读时长</span> <span>3:12</span></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="切换导航栏"><span class="line"></span> <span class="line"></span> <span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start">Black Elk</a></li></ul><ul class="right"><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div id="imgs" class="pjax"><ul><li class="item" data-background-image="https://dd-static.jd.com/ddimg/jfs/t1/204003/9/8114/4944080/614f3716E7526a6c6/2d13d474c96f32d1.png"></li><li class="item" data-background-image="https://dd-static.jd.com/ddimg/jfs/t1/160833/8/21336/1467800/614f2326E703d8983/ddaf7a80ed9e1fab.jpg"></li><li class="item" data-background-image="https://dd-static.jd.com/ddimg/jfs/t1/123662/10/19178/6971625/614f3609E0e5ae969/15a670f0ba032bec.png"></li><li class="item" data-background-image="https://images.pexels.com/photos/1424246/pexels-photo-1424246.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940"></li><li class="item" data-background-image="https://images.pexels.com/photos/1527934/pexels-photo-1527934.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940"></li><li class="item" data-background-image="https://dd-static.jd.com/ddimg/jfs/t1/6778/32/14575/1271660/614f2992Eff03e502/2ac01953d7159c82.jpg"></li></ul></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"/></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"/><use xlink:href="#gentle-wave" x="48" y="3"/><use xlink:href="#gentle-wave" x="48" y="5"/><use xlink:href="#gentle-wave" x="48" y="7"/></g></svg></div><main><div class="inner"><div id="main" class="pjax"><div class="article wrap"><div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i> <span><a href="/">首页</a></span><i class="ic i-angle-right"></i> <span class="current" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/Hexo/" itemprop="item" rel="index" title="分类于 Hexo"><span itemprop="name">Hexo</span></a><meta itemprop="position" content="1"></span></div><article itemscope itemtype="http://schema.org/Article" class="post block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://coloraven.github.io/2021/9/%E5%8D%B3%E5%88%BB%E5%9B%BE%E5%BA%8A%E6%BA%90%E7%A0%81/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="黑麋鹿"><meta itemprop="description" content="潛龍勿用, 折腾之路"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content=""></span><div class="body md" itemprop="articleBody"><p>chrome 商店地址：<span class="exturl" data-url="aHR0cHM6Ly9jaHJvbWUuZ29vZ2xlLmNvbS93ZWJzdG9yZS9kZXRhaWwvJUU1JThEJUIzJUU1JTg4JUJCJUU1JTlCJUJFJUU1JUJBJThBL2Rja2FlaW5vZWFvZ2VibWhpanBrcG1hY2lmbXBnbWNiP2hsPXpoLUNO">https://chrome.google.com/webstore/detail/ 即刻图床 /dckaeinoeaogebmhijpkpmacifmpgmcb?hl=zh-CN</span><br>update logs：<span class="exturl" data-url="aHR0cHM6Ly9qaWtldHVjaHVhbmcuY29tLw==">https://jiketuchuang.com/</span></p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/*! jQuery v3.4.1 | (c) JS Foundation and other contributors | jquery.org/license */</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token operator">!</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token string">"use strict"</span><span class="token punctuation">;</span><span class="token string">"object"</span><span class="token operator">==</span><span class="token keyword">typeof</span> module<span class="token operator">&amp;&amp;</span><span class="token string">"object"</span><span class="token operator">==</span><span class="token keyword">typeof</span> module<span class="token punctuation">.</span>exports<span class="token operator">?</span>module<span class="token punctuation">.</span>exports<span class="token operator">=</span>e<span class="token punctuation">.</span>document<span class="token operator">?</span><span class="token function">t</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>e<span class="token punctuation">.</span>document<span class="token punctuation">)</span><span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">"jQuery requires a window with a document"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token function">t</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token operator">:</span><span class="token function">t</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">(</span><span class="token string">"undefined"</span><span class="token operator">!=</span><span class="token keyword">typeof</span> window<span class="token operator">?</span>window<span class="token operator">:</span><span class="token keyword">this</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter"><span class="token constant">C</span><span class="token punctuation">,</span>e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token string">"use strict"</span><span class="token punctuation">;</span><span class="token keyword">var</span> t<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token constant">E</span><span class="token operator">=</span><span class="token constant">C</span><span class="token punctuation">.</span>document<span class="token punctuation">,</span>r<span class="token operator">=</span>Object<span class="token punctuation">.</span>getPrototypeOf<span class="token punctuation">,</span>s<span class="token operator">=</span>t<span class="token punctuation">.</span>slice<span class="token punctuation">,</span>g<span class="token operator">=</span>t<span class="token punctuation">.</span>concat<span class="token punctuation">,</span>u<span class="token operator">=</span>t<span class="token punctuation">.</span>push<span class="token punctuation">,</span>i<span class="token operator">=</span>t<span class="token punctuation">.</span>indexOf<span class="token punctuation">,</span>n<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>o<span class="token operator">=</span>n<span class="token punctuation">.</span>toString<span class="token punctuation">,</span>v<span class="token operator">=</span>n<span class="token punctuation">.</span>hasOwnProperty<span class="token punctuation">,</span>a<span class="token operator">=</span>v<span class="token punctuation">.</span>toString<span class="token punctuation">,</span>l<span class="token operator">=</span><span class="token function">a</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>Object<span class="token punctuation">)</span><span class="token punctuation">,</span>y<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">m</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span><span class="token string">"function"</span><span class="token operator">==</span><span class="token keyword">typeof</span> e<span class="token operator">&amp;&amp;</span><span class="token string">"number"</span><span class="token operator">!=</span><span class="token keyword">typeof</span> e<span class="token punctuation">.</span>nodeType<span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">x</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token keyword">null</span><span class="token operator">!=</span>e<span class="token operator">&amp;&amp;</span>e<span class="token operator">===</span>e<span class="token punctuation">.</span>window<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>c<span class="token operator">=</span><span class="token punctuation">&#123;</span>type<span class="token operator">:</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>src<span class="token operator">:</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>nonce<span class="token operator">:</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>noModule<span class="token operator">:</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">function</span> <span class="token function">b</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> r<span class="token punctuation">,</span>i<span class="token punctuation">,</span>o<span class="token operator">=</span><span class="token punctuation">(</span>n<span class="token operator">=</span>n<span class="token operator">||</span><span class="token constant">E</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"script"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>o<span class="token punctuation">.</span>text<span class="token operator">=</span>e<span class="token punctuation">,</span>t<span class="token punctuation">)</span><span class="token keyword">for</span><span class="token punctuation">(</span>r <span class="token keyword">in</span> c<span class="token punctuation">)</span><span class="token punctuation">(</span>i<span class="token operator">=</span>t<span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token operator">||</span>t<span class="token punctuation">.</span>getAttribute<span class="token operator">&amp;&amp;</span>t<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span>o<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>n<span class="token punctuation">.</span>head<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">function</span> <span class="token function">w</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token keyword">null</span><span class="token operator">==</span>e<span class="token operator">?</span>e<span class="token operator">+</span><span class="token string">""</span><span class="token operator">:</span><span class="token string">"object"</span><span class="token operator">==</span><span class="token keyword">typeof</span> e<span class="token operator">||</span><span class="token string">"function"</span><span class="token operator">==</span><span class="token keyword">typeof</span> e<span class="token operator">?</span>n<span class="token punctuation">[</span><span class="token function">o</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">||</span><span class="token string">"object"</span><span class="token operator">:</span><span class="token keyword">typeof</span> e<span class="token punctuation">&#125;</span><span class="token keyword">var</span> f<span class="token operator">=</span><span class="token string">"3.4.1"</span><span class="token punctuation">,</span><span class="token function-variable function">k</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">k<span class="token punctuation">.</span>fn<span class="token punctuation">.</span>init</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>t<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>p<span class="token operator">=</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">;</span><span class="token keyword">function</span> <span class="token function">d</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> t<span class="token operator">=</span><span class="token operator">!</span><span class="token operator">!</span>e<span class="token operator">&amp;&amp;</span><span class="token string">"length"</span><span class="token keyword">in</span> e<span class="token operator">&amp;&amp;</span>e<span class="token punctuation">.</span>length<span class="token punctuation">,</span>n<span class="token operator">=</span><span class="token function">w</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span><span class="token operator">!</span><span class="token function">m</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token operator">!</span><span class="token function">x</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span><span class="token string">"array"</span><span class="token operator">===</span>n<span class="token operator">||</span><span class="token number">0</span><span class="token operator">===</span>t<span class="token operator">||</span><span class="token string">"number"</span><span class="token operator">==</span><span class="token keyword">typeof</span> t<span class="token operator">&amp;&amp;</span><span class="token number">0</span><span class="token operator">&lt;</span>t<span class="token operator">&amp;&amp;</span>t<span class="token operator">-</span><span class="token number">1</span> <span class="token keyword">in</span> e<span class="token punctuation">)</span><span class="token punctuation">&#125;</span>k<span class="token punctuation">.</span>fn<span class="token operator">=</span>k<span class="token punctuation">.</span>prototype<span class="token operator">=</span><span class="token punctuation">&#123;</span>jquery<span class="token operator">:</span>f<span class="token punctuation">,</span>constructor<span class="token operator">:</span>k<span class="token punctuation">,</span>length<span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token function-variable function">toArray</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token function">s</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">get</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token keyword">null</span><span class="token operator">==</span>e<span class="token operator">?</span><span class="token function">s</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token operator">:</span>e<span class="token operator">&lt;</span><span class="token number">0</span><span class="token operator">?</span><span class="token keyword">this</span><span class="token punctuation">[</span>e<span class="token operator">+</span><span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">]</span><span class="token operator">:</span><span class="token keyword">this</span><span class="token punctuation">[</span>e<span class="token punctuation">]</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">pushStack</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> t<span class="token operator">=</span>k<span class="token punctuation">.</span><span class="token function">merge</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> t<span class="token punctuation">.</span>prevObject<span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">,</span>t<span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">each</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> k<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>e<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">map</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">pushStack</span><span class="token punctuation">(</span>k<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token function">n</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>e<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">slice</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">pushStack</span><span class="token punctuation">(</span><span class="token function">s</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>arguments<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">first</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">last</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">eq</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> t<span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">,</span>n<span class="token operator">=</span><span class="token operator">+</span>e<span class="token operator">+</span><span class="token punctuation">(</span>e<span class="token operator">&lt;</span><span class="token number">0</span><span class="token operator">?</span>t<span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">pushStack</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token operator">&lt;=</span>n<span class="token operator">&amp;&amp;</span>n<span class="token operator">&lt;</span>t<span class="token operator">?</span><span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">end</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>prevObject<span class="token operator">||</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>push<span class="token operator">:</span>u<span class="token punctuation">,</span>sort<span class="token operator">:</span>t<span class="token punctuation">.</span>sort<span class="token punctuation">,</span>splice<span class="token operator">:</span>t<span class="token punctuation">.</span>splice<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span>extend<span class="token operator">=</span>k<span class="token punctuation">.</span>fn<span class="token punctuation">.</span><span class="token function-variable function">extend</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n<span class="token punctuation">,</span>r<span class="token punctuation">,</span>i<span class="token punctuation">,</span>o<span class="token punctuation">,</span>a<span class="token operator">=</span>arguments<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">||</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>s<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span>u<span class="token operator">=</span>arguments<span class="token punctuation">.</span>length<span class="token punctuation">,</span>l<span class="token operator">=</span><span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token string">"boolean"</span><span class="token operator">==</span><span class="token keyword">typeof</span> a<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>l<span class="token operator">=</span>a<span class="token punctuation">,</span>a<span class="token operator">=</span>arguments<span class="token punctuation">[</span>s<span class="token punctuation">]</span><span class="token operator">||</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>s<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">"object"</span><span class="token operator">==</span><span class="token keyword">typeof</span> a<span class="token operator">||</span><span class="token function">m</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token operator">||</span><span class="token punctuation">(</span>a<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>s<span class="token operator">===</span>u<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>a<span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">,</span>s<span class="token operator">--</span><span class="token punctuation">)</span><span class="token punctuation">;</span>s<span class="token operator">&lt;</span>u<span class="token punctuation">;</span>s<span class="token operator">++</span><span class="token punctuation">)</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token operator">!=</span><span class="token punctuation">(</span>e<span class="token operator">=</span>arguments<span class="token punctuation">[</span>s<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">for</span><span class="token punctuation">(</span>t <span class="token keyword">in</span> e<span class="token punctuation">)</span>r<span class="token operator">=</span>e<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string">"__proto__"</span><span class="token operator">!==</span>t<span class="token operator">&amp;&amp;</span>a<span class="token operator">!==</span>r<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>l<span class="token operator">&amp;&amp;</span>r<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>k<span class="token punctuation">.</span><span class="token function">isPlainObject</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token operator">||</span><span class="token punctuation">(</span>i<span class="token operator">=</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">(</span>n<span class="token operator">=</span>a<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">,</span>o<span class="token operator">=</span>i<span class="token operator">&amp;&amp;</span><span class="token operator">!</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">:</span>i<span class="token operator">||</span>k<span class="token punctuation">.</span><span class="token function">isPlainObject</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token operator">?</span>n<span class="token operator">:</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>i<span class="token operator">=</span><span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">,</span>a<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token operator">=</span>k<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span>l<span class="token punctuation">,</span>o<span class="token punctuation">,</span>r<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">void</span> <span class="token number">0</span><span class="token operator">!==</span>r<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token operator">=</span>r<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> a<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>expando<span class="token operator">:</span><span class="token string">"jQuery"</span><span class="token operator">+</span><span class="token punctuation">(</span>f<span class="token operator">+</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\D</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">,</span>isReady<span class="token operator">:</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token function-variable function">error</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">noop</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">isPlainObject</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> t<span class="token punctuation">,</span>n<span class="token punctuation">;</span><span class="token keyword">return</span><span class="token operator">!</span><span class="token punctuation">(</span><span class="token operator">!</span>e<span class="token operator">||</span><span class="token string">"[object Object]"</span><span class="token operator">!==</span><span class="token function">o</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>t<span class="token operator">=</span><span class="token function">r</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">||</span><span class="token string">"function"</span><span class="token operator">==</span><span class="token keyword">typeof</span><span class="token punctuation">(</span>n<span class="token operator">=</span><span class="token function">v</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span><span class="token string">"constructor"</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span>t<span class="token punctuation">.</span>constructor<span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token function">a</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token operator">===</span>l<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">isEmptyObject</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> t<span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span>t <span class="token keyword">in</span> e<span class="token punctuation">)</span><span class="token keyword">return</span><span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token keyword">return</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">globalEval</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token function">b</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token punctuation">&#123;</span>nonce<span class="token operator">:</span>t<span class="token operator">&amp;&amp;</span>t<span class="token punctuation">.</span>nonce<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">each</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> n<span class="token punctuation">,</span>r<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">d</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">for</span><span class="token punctuation">(</span>n<span class="token operator">=</span>e<span class="token punctuation">.</span>length<span class="token punctuation">;</span>r<span class="token operator">&lt;</span>n<span class="token punctuation">;</span>r<span class="token operator">++</span><span class="token punctuation">)</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token number">1</span><span class="token operator">===</span><span class="token function">t</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>e<span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token punctuation">,</span>r<span class="token punctuation">,</span>e<span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">break</span><span class="token punctuation">&#125;</span><span class="token keyword">else</span> <span class="token keyword">for</span><span class="token punctuation">(</span>r <span class="token keyword">in</span> e<span class="token punctuation">)</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token number">1</span><span class="token operator">===</span><span class="token function">t</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>e<span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token punctuation">,</span>r<span class="token punctuation">,</span>e<span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">break</span><span class="token punctuation">;</span><span class="token keyword">return</span> e<span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">trim</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token keyword">null</span><span class="token operator">==</span>e<span class="token operator">?</span><span class="token string">""</span><span class="token operator">:</span><span class="token punctuation">(</span>e<span class="token operator">+</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>p<span class="token punctuation">,</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">makeArray</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> n<span class="token operator">=</span>t<span class="token operator">||</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token keyword">null</span><span class="token operator">!=</span>e<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token function">Object</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">?</span>k<span class="token punctuation">.</span><span class="token function">merge</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span><span class="token string">"string"</span><span class="token operator">==</span><span class="token keyword">typeof</span> e<span class="token operator">?</span><span class="token punctuation">[</span>e<span class="token punctuation">]</span><span class="token operator">:</span>e<span class="token punctuation">)</span><span class="token operator">:</span><span class="token function">u</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>n<span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">inArray</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token keyword">null</span><span class="token operator">==</span>t<span class="token operator">?</span><span class="token operator">-</span><span class="token number">1</span><span class="token operator">:</span><span class="token function">i</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span>e<span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">merge</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> n<span class="token operator">=</span><span class="token operator">+</span>t<span class="token punctuation">.</span>length<span class="token punctuation">,</span>r<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>i<span class="token operator">=</span>e<span class="token punctuation">.</span>length<span class="token punctuation">;</span>r<span class="token operator">&lt;</span>n<span class="token punctuation">;</span>r<span class="token operator">++</span><span class="token punctuation">)</span>e<span class="token punctuation">[</span>i<span class="token operator">++</span><span class="token punctuation">]</span><span class="token operator">=</span>t<span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">return</span> e<span class="token punctuation">.</span>length<span class="token operator">=</span>i<span class="token punctuation">,</span>e<span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">grep</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> r<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>o<span class="token operator">=</span>e<span class="token punctuation">.</span>length<span class="token punctuation">,</span>a<span class="token operator">=</span><span class="token operator">!</span>n<span class="token punctuation">;</span>i<span class="token operator">&lt;</span>o<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">!</span><span class="token function">t</span><span class="token punctuation">(</span>e<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>i<span class="token punctuation">)</span><span class="token operator">!==</span>a<span class="token operator">&amp;&amp;</span>r<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>e<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> r<span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">map</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> r<span class="token punctuation">,</span>i<span class="token punctuation">,</span>o<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>a<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">d</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">for</span><span class="token punctuation">(</span>r<span class="token operator">=</span>e<span class="token punctuation">.</span>length<span class="token punctuation">;</span>o<span class="token operator">&lt;</span>r<span class="token punctuation">;</span>o<span class="token operator">++</span><span class="token punctuation">)</span><span class="token keyword">null</span><span class="token operator">!=</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token function">t</span><span class="token punctuation">(</span>e<span class="token punctuation">[</span>o<span class="token punctuation">]</span><span class="token punctuation">,</span>o<span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span>a<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">else</span> <span class="token keyword">for</span><span class="token punctuation">(</span>o <span class="token keyword">in</span> e<span class="token punctuation">)</span><span class="token keyword">null</span><span class="token operator">!=</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token function">t</span><span class="token punctuation">(</span>e<span class="token punctuation">[</span>o<span class="token punctuation">]</span><span class="token punctuation">,</span>o<span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span>a<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token function">g</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>a<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>guid<span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span>support<span class="token operator">:</span>y<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">"function"</span><span class="token operator">==</span><span class="token keyword">typeof</span> Symbol<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>k<span class="token punctuation">.</span>fn<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token operator">=</span>t<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token string">"Boolean Number String Function Array Date RegExp Object Error Symbol"</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>n<span class="token punctuation">[</span><span class="token string">"[object "</span><span class="token operator">+</span>t<span class="token operator">+</span><span class="token string">"]"</span><span class="token punctuation">]</span><span class="token operator">=</span>t<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">var</span> <span class="token function-variable function">h</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> e<span class="token punctuation">,</span>d<span class="token punctuation">,</span>b<span class="token punctuation">,</span>o<span class="token punctuation">,</span>i<span class="token punctuation">,</span>h<span class="token punctuation">,</span>f<span class="token punctuation">,</span>g<span class="token punctuation">,</span>w<span class="token punctuation">,</span>u<span class="token punctuation">,</span>l<span class="token punctuation">,</span><span class="token constant">T</span><span class="token punctuation">,</span><span class="token constant">C</span><span class="token punctuation">,</span>a<span class="token punctuation">,</span><span class="token constant">E</span><span class="token punctuation">,</span>v<span class="token punctuation">,</span>s<span class="token punctuation">,</span>c<span class="token punctuation">,</span>y<span class="token punctuation">,</span>k<span class="token operator">=</span><span class="token string">"sizzle"</span><span class="token operator">+</span><span class="token number">1</span><span class="token operator">*</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">,</span>m<span class="token operator">=</span>n<span class="token punctuation">.</span>document<span class="token punctuation">,</span><span class="token constant">S</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>r<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>p<span class="token operator">=</span><span class="token function">ue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>x<span class="token operator">=</span><span class="token function">ue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token constant">N</span><span class="token operator">=</span><span class="token function">ue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token constant">A</span><span class="token operator">=</span><span class="token function">ue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function-variable function">D</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> e<span class="token operator">===</span>t<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>l<span class="token operator">=</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>j<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">.</span>hasOwnProperty<span class="token punctuation">,</span>t<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>q<span class="token operator">=</span>t<span class="token punctuation">.</span>pop<span class="token punctuation">,</span><span class="token constant">L</span><span class="token operator">=</span>t<span class="token punctuation">.</span>push<span class="token punctuation">,</span><span class="token constant">H</span><span class="token operator">=</span>t<span class="token punctuation">.</span>push<span class="token punctuation">,</span><span class="token constant">O</span><span class="token operator">=</span>t<span class="token punctuation">.</span>slice<span class="token punctuation">,</span><span class="token function-variable function">P</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> n<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>r<span class="token operator">=</span>e<span class="token punctuation">.</span>length<span class="token punctuation">;</span>n<span class="token operator">&lt;</span>r<span class="token punctuation">;</span>n<span class="token operator">++</span><span class="token punctuation">)</span><span class="token keyword">if</span><span class="token punctuation">(</span>e<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token operator">===</span>t<span class="token punctuation">)</span><span class="token keyword">return</span> n<span class="token punctuation">;</span><span class="token keyword">return</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token constant">R</span><span class="token operator">=</span><span class="token string">"checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped"</span><span class="token punctuation">,</span><span class="token constant">M</span><span class="token operator">=</span><span class="token string">"[\\x20\\t\\r\\n\\f]"</span><span class="token punctuation">,</span><span class="token constant">I</span><span class="token operator">=</span><span class="token string">"(?:\\\\.|[\\w-]|[^\0-\\xa0])+"</span><span class="token punctuation">,</span><span class="token constant">W</span><span class="token operator">=</span><span class="token string">"\\["</span><span class="token operator">+</span><span class="token constant">M</span><span class="token operator">+</span><span class="token string">"*("</span><span class="token operator">+</span><span class="token constant">I</span><span class="token operator">+</span><span class="token string">")(?:"</span><span class="token operator">+</span><span class="token constant">M</span><span class="token operator">+</span><span class="token string">"*([*^$|!~]?=)"</span><span class="token operator">+</span><span class="token constant">M</span><span class="token operator">+</span><span class="token string">"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("</span><span class="token operator">+</span><span class="token constant">I</span><span class="token operator">+</span><span class="token string">"))|)"</span><span class="token operator">+</span><span class="token constant">M</span><span class="token operator">+</span><span class="token string">"*\\]"</span><span class="token punctuation">,</span>$<span class="token operator">=</span><span class="token string">":("</span><span class="token operator">+</span><span class="token constant">I</span><span class="token operator">+</span><span class="token string">")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"</span><span class="token operator">+</span><span class="token constant">W</span><span class="token operator">+</span><span class="token string">")*)|.*)\\)|)"</span><span class="token punctuation">,</span><span class="token constant">F</span><span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token constant">M</span><span class="token operator">+</span><span class="token string">"+"</span><span class="token punctuation">,</span><span class="token string">"g"</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token constant">B</span><span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">"^"</span><span class="token operator">+</span><span class="token constant">M</span><span class="token operator">+</span><span class="token string">"+|((?:^|[^\\\\])(?:\\\\.)*)"</span><span class="token operator">+</span><span class="token constant">M</span><span class="token operator">+</span><span class="token string">"+$"</span><span class="token punctuation">,</span><span class="token string">"g"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>_<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">"^"</span><span class="token operator">+</span><span class="token constant">M</span><span class="token operator">+</span><span class="token string">"*,"</span><span class="token operator">+</span><span class="token constant">M</span><span class="token operator">+</span><span class="token string">"*"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>z<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">"^"</span><span class="token operator">+</span><span class="token constant">M</span><span class="token operator">+</span><span class="token string">"*([>+~]|"</span><span class="token operator">+</span><span class="token constant">M</span><span class="token operator">+</span><span class="token string">")"</span><span class="token operator">+</span><span class="token constant">M</span><span class="token operator">+</span><span class="token string">"*"</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token constant">U</span><span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token constant">M</span><span class="token operator">+</span><span class="token string">"|>"</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token constant">X</span><span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span>$<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token constant">V</span><span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">"^"</span><span class="token operator">+</span><span class="token constant">I</span><span class="token operator">+</span><span class="token string">"$"</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token constant">G</span><span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token constant">ID</span><span class="token operator">:</span><span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">"^#("</span><span class="token operator">+</span><span class="token constant">I</span><span class="token operator">+</span><span class="token string">")"</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token constant">CLASS</span><span class="token operator">:</span><span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">"^\\.("</span><span class="token operator">+</span><span class="token constant">I</span><span class="token operator">+</span><span class="token string">")"</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token constant">TAG</span><span class="token operator">:</span><span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">"^("</span><span class="token operator">+</span><span class="token constant">I</span><span class="token operator">+</span><span class="token string">"|[*])"</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token constant">ATTR</span><span class="token operator">:</span><span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">"^"</span><span class="token operator">+</span><span class="token constant">W</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token constant">PSEUDO</span><span class="token operator">:</span><span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">"^"</span><span class="token operator">+</span>$<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token constant">CHILD</span><span class="token operator">:</span><span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">"^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("</span><span class="token operator">+</span><span class="token constant">M</span><span class="token operator">+</span><span class="token string">"*(even|odd|(([+-]|)(\\d*)n|)"</span><span class="token operator">+</span><span class="token constant">M</span><span class="token operator">+</span><span class="token string">"*(?:([+-]|)"</span><span class="token operator">+</span><span class="token constant">M</span><span class="token operator">+</span><span class="token string">"*(\\d+)|))"</span><span class="token operator">+</span><span class="token constant">M</span><span class="token operator">+</span><span class="token string">"*\\)|)"</span><span class="token punctuation">,</span><span class="token string">"i"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>bool<span class="token operator">:</span><span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">"^(?:"</span><span class="token operator">+</span><span class="token constant">R</span><span class="token operator">+</span><span class="token string">")$"</span><span class="token punctuation">,</span><span class="token string">"i"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>needsContext<span class="token operator">:</span><span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">"^"</span><span class="token operator">+</span><span class="token constant">M</span><span class="token operator">+</span><span class="token string">"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("</span><span class="token operator">+</span><span class="token constant">M</span><span class="token operator">+</span><span class="token string">"*((?:-\\d)?\\d*)"</span><span class="token operator">+</span><span class="token constant">M</span><span class="token operator">+</span><span class="token string">"*\\)|)(?=[^-]|$)"</span><span class="token punctuation">,</span><span class="token string">"i"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token constant">Y</span><span class="token operator">=</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">HTML$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span><span class="token constant">Q</span><span class="token operator">=</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^(?:input|select|textarea|button)$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span><span class="token constant">J</span><span class="token operator">=</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^h\d$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span><span class="token constant">K</span><span class="token operator">=</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^[^&#123;]+\&#123;\s*\[native \w</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span><span class="token constant">Z</span><span class="token operator">=</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^(?:#([\w-]+)|(\w+)|\.([\w-]+))$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>ee<span class="token operator">=</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[+~]</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>te<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">"\\\\([\\da-f]&#123;1,6&#125;"</span><span class="token operator">+</span><span class="token constant">M</span><span class="token operator">+</span><span class="token string">"?|("</span><span class="token operator">+</span><span class="token constant">M</span><span class="token operator">+</span><span class="token string">")|.)"</span><span class="token punctuation">,</span><span class="token string">"ig"</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function-variable function">ne</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> r<span class="token operator">=</span><span class="token string">"0x"</span><span class="token operator">+</span>t<span class="token operator">-</span><span class="token number">65536</span><span class="token punctuation">;</span><span class="token keyword">return</span> r<span class="token operator">!=</span>r<span class="token operator">||</span>n<span class="token operator">?</span>t<span class="token operator">:</span>r<span class="token operator">&lt;</span><span class="token number">0</span><span class="token operator">?</span>String<span class="token punctuation">.</span><span class="token function">fromCharCode</span><span class="token punctuation">(</span>r<span class="token operator">+</span><span class="token number">65536</span><span class="token punctuation">)</span><span class="token operator">:</span>String<span class="token punctuation">.</span><span class="token function">fromCharCode</span><span class="token punctuation">(</span>r<span class="token operator">>></span><span class="token number">10</span><span class="token operator">|</span><span class="token number">55296</span><span class="token punctuation">,</span><span class="token number">1023</span><span class="token operator">&amp;</span>r<span class="token operator">|</span><span class="token number">56320</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>re<span class="token operator">=</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span><span class="token function-variable function">ie</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> t<span class="token operator">?</span><span class="token string">"\0"</span><span class="token operator">===</span>e<span class="token operator">?</span><span class="token string">"\ufffd"</span><span class="token operator">:</span>e<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"\\"</span><span class="token operator">+</span>e<span class="token punctuation">.</span><span class="token function">charCodeAt</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">" "</span><span class="token operator">:</span><span class="token string">"\\"</span><span class="token operator">+</span>e<span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">oe</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token constant">T</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>ae<span class="token operator">=</span><span class="token function">be</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span><span class="token operator">!</span><span class="token number">0</span><span class="token operator">===</span>e<span class="token punctuation">.</span>disabled<span class="token operator">&amp;&amp;</span><span class="token string">"fieldset"</span><span class="token operator">===</span>e<span class="token punctuation">.</span>nodeName<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">&#123;</span>dir<span class="token operator">:</span><span class="token string">"parentNode"</span><span class="token punctuation">,</span>next<span class="token operator">:</span><span class="token string">"legend"</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">try</span><span class="token punctuation">&#123;</span><span class="token constant">H</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>t<span class="token operator">=</span><span class="token constant">O</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>m<span class="token punctuation">.</span>childNodes<span class="token punctuation">)</span><span class="token punctuation">,</span>m<span class="token punctuation">.</span>childNodes<span class="token punctuation">)</span><span class="token punctuation">,</span>t<span class="token punctuation">[</span>m<span class="token punctuation">.</span>childNodes<span class="token punctuation">.</span>length<span class="token punctuation">]</span><span class="token punctuation">.</span>nodeType<span class="token punctuation">&#125;</span><span class="token keyword">catch</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token constant">H</span><span class="token operator">=</span><span class="token punctuation">&#123;</span>apply<span class="token operator">:</span>t<span class="token punctuation">.</span>length<span class="token operator">?</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token constant">L</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token constant">O</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> n<span class="token operator">=</span>e<span class="token punctuation">.</span>length<span class="token punctuation">,</span>r<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>e<span class="token punctuation">[</span>n<span class="token operator">++</span><span class="token punctuation">]</span><span class="token operator">=</span>t<span class="token punctuation">[</span>r<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>e<span class="token punctuation">.</span>length<span class="token operator">=</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">function</span> <span class="token function">se</span><span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span>e<span class="token punctuation">,</span>n<span class="token punctuation">,</span>r</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> i<span class="token punctuation">,</span>o<span class="token punctuation">,</span>a<span class="token punctuation">,</span>s<span class="token punctuation">,</span>u<span class="token punctuation">,</span>l<span class="token punctuation">,</span>c<span class="token punctuation">,</span>f<span class="token operator">=</span>e<span class="token operator">&amp;&amp;</span>e<span class="token punctuation">.</span>ownerDocument<span class="token punctuation">,</span>p<span class="token operator">=</span>e<span class="token operator">?</span>e<span class="token punctuation">.</span>nodeType<span class="token operator">:</span><span class="token number">9</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>n<span class="token operator">=</span>n<span class="token operator">||</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string">"string"</span><span class="token operator">!=</span><span class="token keyword">typeof</span> t<span class="token operator">||</span><span class="token operator">!</span>t<span class="token operator">||</span><span class="token number">1</span><span class="token operator">!==</span>p<span class="token operator">&amp;&amp;</span><span class="token number">9</span><span class="token operator">!==</span>p<span class="token operator">&amp;&amp;</span><span class="token number">11</span><span class="token operator">!==</span>p<span class="token punctuation">)</span><span class="token keyword">return</span> n<span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>r<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span><span class="token punctuation">(</span>e<span class="token operator">?</span>e<span class="token punctuation">.</span>ownerDocument<span class="token operator">||</span>e<span class="token operator">:</span>m<span class="token punctuation">)</span><span class="token operator">!==</span><span class="token constant">C</span><span class="token operator">&amp;&amp;</span><span class="token constant">T</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">,</span>e<span class="token operator">=</span>e<span class="token operator">||</span><span class="token constant">C</span><span class="token punctuation">,</span><span class="token constant">E</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token operator">!==</span>p<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>u<span class="token operator">=</span><span class="token constant">Z</span><span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">if</span><span class="token punctuation">(</span>i<span class="token operator">=</span>u<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token operator">===</span>p<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>a<span class="token operator">=</span>e<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">return</span> n<span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>id<span class="token operator">===</span>i<span class="token punctuation">)</span><span class="token keyword">return</span> n<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">,</span>n<span class="token punctuation">&#125;</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>f<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>a<span class="token operator">=</span>f<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token function">y</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>a<span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span>a<span class="token punctuation">.</span>id<span class="token operator">===</span>i<span class="token punctuation">)</span><span class="token keyword">return</span> n<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">,</span>n<span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span><span class="token keyword">if</span><span class="token punctuation">(</span>u<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">return</span> <span class="token constant">H</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span>e<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>n<span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>i<span class="token operator">=</span>u<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span>d<span class="token punctuation">.</span>getElementsByClassName<span class="token operator">&amp;&amp;</span>e<span class="token punctuation">.</span>getElementsByClassName<span class="token punctuation">)</span><span class="token keyword">return</span> <span class="token constant">H</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span>e<span class="token punctuation">.</span><span class="token function">getElementsByClassName</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>n<span class="token punctuation">&#125;</span><span class="token keyword">if</span><span class="token punctuation">(</span>d<span class="token punctuation">.</span>qsa<span class="token operator">&amp;&amp;</span><span class="token operator">!</span><span class="token constant">A</span><span class="token punctuation">[</span>t<span class="token operator">+</span><span class="token string">" "</span><span class="token punctuation">]</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span><span class="token operator">!</span>v<span class="token operator">||</span><span class="token operator">!</span>v<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">!==</span>p<span class="token operator">||</span><span class="token string">"object"</span><span class="token operator">!==</span>e<span class="token punctuation">.</span>nodeName<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">if</span><span class="token punctuation">(</span>c<span class="token operator">=</span>t<span class="token punctuation">,</span>f<span class="token operator">=</span>e<span class="token punctuation">,</span><span class="token number">1</span><span class="token operator">===</span>p<span class="token operator">&amp;&amp;</span><span class="token constant">U</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token punctuation">(</span>s<span class="token operator">=</span>e<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">?</span>s<span class="token operator">=</span>s<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>re<span class="token punctuation">,</span>ie<span class="token punctuation">)</span><span class="token operator">:</span>e<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">,</span>s<span class="token operator">=</span>k<span class="token punctuation">)</span><span class="token punctuation">,</span>o<span class="token operator">=</span><span class="token punctuation">(</span>l<span class="token operator">=</span><span class="token function">h</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>o<span class="token operator">--</span><span class="token punctuation">)</span>l<span class="token punctuation">[</span>o<span class="token punctuation">]</span><span class="token operator">=</span><span class="token string">"#"</span><span class="token operator">+</span>s<span class="token operator">+</span><span class="token string">" "</span><span class="token operator">+</span><span class="token function">xe</span><span class="token punctuation">(</span>l<span class="token punctuation">[</span>o<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>c<span class="token operator">=</span>l<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">","</span><span class="token punctuation">)</span><span class="token punctuation">,</span>f<span class="token operator">=</span>ee<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token function">ye</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>parentNode<span class="token punctuation">)</span><span class="token operator">||</span>e<span class="token punctuation">&#125;</span><span class="token keyword">try</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token constant">H</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span>f<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>n<span class="token punctuation">&#125;</span><span class="token keyword">catch</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token constant">A</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">finally</span><span class="token punctuation">&#123;</span>s<span class="token operator">===</span>k<span class="token operator">&amp;&amp;</span>e<span class="token punctuation">.</span><span class="token function">removeAttribute</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> <span class="token function">g</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token constant">B</span><span class="token punctuation">,</span><span class="token string">"$1"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>e<span class="token punctuation">,</span>n<span class="token punctuation">,</span>r<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">function</span> <span class="token function">ue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> r<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token function">e</span><span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span>n</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> r<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>t<span class="token operator">+</span><span class="token string">" "</span><span class="token punctuation">)</span><span class="token operator">></span>b<span class="token punctuation">.</span>cacheLength<span class="token operator">&amp;&amp;</span><span class="token keyword">delete</span> e<span class="token punctuation">[</span>r<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>e<span class="token punctuation">[</span>t<span class="token operator">+</span><span class="token string">" "</span><span class="token punctuation">]</span><span class="token operator">=</span>n<span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">function</span> <span class="token function">le</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> e<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token operator">=</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>e<span class="token punctuation">&#125;</span><span class="token keyword">function</span> <span class="token function">ce</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> t<span class="token operator">=</span><span class="token constant">C</span><span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"fieldset"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">try</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span><span class="token operator">!</span><span class="token operator">!</span><span class="token function">e</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">catch</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span><span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">&#125;</span><span class="token keyword">finally</span><span class="token punctuation">&#123;</span>t<span class="token punctuation">.</span>parentNode<span class="token operator">&amp;&amp;</span>t<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">,</span>t<span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">function</span> <span class="token function">fe</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> n<span class="token operator">=</span>e<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">"|"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>r<span class="token operator">=</span>n<span class="token punctuation">.</span>length<span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>r<span class="token operator">--</span><span class="token punctuation">)</span>b<span class="token punctuation">.</span>attrHandle<span class="token punctuation">[</span>n<span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">=</span>t<span class="token punctuation">&#125;</span><span class="token keyword">function</span> <span class="token function">pe</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> n<span class="token operator">=</span>t<span class="token operator">&amp;&amp;</span>e<span class="token punctuation">,</span>r<span class="token operator">=</span>n<span class="token operator">&amp;&amp;</span><span class="token number">1</span><span class="token operator">===</span>e<span class="token punctuation">.</span>nodeType<span class="token operator">&amp;&amp;</span><span class="token number">1</span><span class="token operator">===</span>t<span class="token punctuation">.</span>nodeType<span class="token operator">&amp;&amp;</span>e<span class="token punctuation">.</span>sourceIndex<span class="token operator">-</span>t<span class="token punctuation">.</span>sourceIndex<span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token keyword">return</span> r<span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token keyword">while</span><span class="token punctuation">(</span>n<span class="token operator">=</span>n<span class="token punctuation">.</span>nextSibling<span class="token punctuation">)</span><span class="token keyword">if</span><span class="token punctuation">(</span>n<span class="token operator">===</span>t<span class="token punctuation">)</span><span class="token keyword">return</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token keyword">return</span> e<span class="token operator">?</span><span class="token number">1</span><span class="token operator">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">&#125;</span><span class="token keyword">function</span> <span class="token function">de</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span><span class="token string">"input"</span><span class="token operator">===</span>e<span class="token punctuation">.</span>nodeName<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span>e<span class="token punctuation">.</span>type<span class="token operator">===</span>t<span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">function</span> <span class="token function">he</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> t<span class="token operator">=</span>e<span class="token punctuation">.</span>nodeName<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span><span class="token punctuation">(</span><span class="token string">"input"</span><span class="token operator">===</span>t<span class="token operator">||</span><span class="token string">"button"</span><span class="token operator">===</span>t<span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span>e<span class="token punctuation">.</span>type<span class="token operator">===</span>n<span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">function</span> <span class="token function">ge</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span><span class="token string">"form"</span><span class="token keyword">in</span> e<span class="token operator">?</span>e<span class="token punctuation">.</span>parentNode<span class="token operator">&amp;&amp;</span><span class="token operator">!</span><span class="token number">1</span><span class="token operator">===</span>e<span class="token punctuation">.</span>disabled<span class="token operator">?</span><span class="token string">"label"</span><span class="token keyword">in</span> e<span class="token operator">?</span><span class="token string">"label"</span><span class="token keyword">in</span> e<span class="token punctuation">.</span>parentNode<span class="token operator">?</span>e<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span>disabled<span class="token operator">===</span>t<span class="token operator">:</span>e<span class="token punctuation">.</span>disabled<span class="token operator">===</span>t<span class="token operator">:</span>e<span class="token punctuation">.</span>isDisabled<span class="token operator">===</span>t<span class="token operator">||</span>e<span class="token punctuation">.</span>isDisabled<span class="token operator">!==</span><span class="token operator">!</span>t<span class="token operator">&amp;&amp;</span><span class="token function">ae</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token operator">===</span>t<span class="token operator">:</span>e<span class="token punctuation">.</span>disabled<span class="token operator">===</span>t<span class="token operator">:</span><span class="token string">"label"</span><span class="token keyword">in</span> e<span class="token operator">&amp;&amp;</span>e<span class="token punctuation">.</span>disabled<span class="token operator">===</span>t<span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">function</span> <span class="token function">ve</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token function">le</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">o</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> o<span class="token operator">=</span><span class="token operator">+</span>o<span class="token punctuation">,</span><span class="token function">le</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> n<span class="token punctuation">,</span>r<span class="token operator">=</span><span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>e<span class="token punctuation">.</span>length<span class="token punctuation">,</span>o<span class="token punctuation">)</span><span class="token punctuation">,</span>i<span class="token operator">=</span>r<span class="token punctuation">.</span>length<span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>i<span class="token operator">--</span><span class="token punctuation">)</span>e<span class="token punctuation">[</span>n<span class="token operator">=</span>r<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>e<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token operator">=</span><span class="token operator">!</span><span class="token punctuation">(</span>t<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token operator">=</span>e<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">function</span> <span class="token function">ye</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> e<span class="token operator">&amp;&amp;</span><span class="token string">"undefined"</span><span class="token operator">!=</span><span class="token keyword">typeof</span> e<span class="token punctuation">.</span>getElementsByTagName<span class="token operator">&amp;&amp;</span>e<span class="token punctuation">&#125;</span><span class="token keyword">for</span><span class="token punctuation">(</span>e <span class="token keyword">in</span> d<span class="token operator">=</span>se<span class="token punctuation">.</span>support<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>i<span class="token operator">=</span>se<span class="token punctuation">.</span><span class="token function-variable function">isXML</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> t<span class="token operator">=</span>e<span class="token punctuation">.</span>namespaceURI<span class="token punctuation">,</span>n<span class="token operator">=</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>ownerDocument<span class="token operator">||</span>e<span class="token punctuation">)</span><span class="token punctuation">.</span>documentElement<span class="token punctuation">;</span><span class="token keyword">return</span><span class="token operator">!</span><span class="token constant">Y</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>t<span class="token operator">||</span>n<span class="token operator">&amp;&amp;</span>n<span class="token punctuation">.</span>nodeName<span class="token operator">||</span><span class="token string">"HTML"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token constant">T</span><span class="token operator">=</span>se<span class="token punctuation">.</span><span class="token function-variable function">setDocument</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> t<span class="token punctuation">,</span>n<span class="token punctuation">,</span>r<span class="token operator">=</span>e<span class="token operator">?</span>e<span class="token punctuation">.</span>ownerDocument<span class="token operator">||</span>e<span class="token operator">:</span>m<span class="token punctuation">;</span><span class="token keyword">return</span> r<span class="token operator">!==</span><span class="token constant">C</span><span class="token operator">&amp;&amp;</span><span class="token number">9</span><span class="token operator">===</span>r<span class="token punctuation">.</span>nodeType<span class="token operator">&amp;&amp;</span>r<span class="token punctuation">.</span>documentElement<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>a<span class="token operator">=</span><span class="token punctuation">(</span><span class="token constant">C</span><span class="token operator">=</span>r<span class="token punctuation">)</span><span class="token punctuation">.</span>documentElement<span class="token punctuation">,</span><span class="token constant">E</span><span class="token operator">=</span><span class="token operator">!</span><span class="token function">i</span><span class="token punctuation">(</span><span class="token constant">C</span><span class="token punctuation">)</span><span class="token punctuation">,</span>m<span class="token operator">!==</span><span class="token constant">C</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>n<span class="token operator">=</span><span class="token constant">C</span><span class="token punctuation">.</span>defaultView<span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span>n<span class="token punctuation">.</span>top<span class="token operator">!==</span>n<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>n<span class="token punctuation">.</span>addEventListener<span class="token operator">?</span>n<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"unload"</span><span class="token punctuation">,</span>oe<span class="token punctuation">,</span><span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">:</span>n<span class="token punctuation">.</span>attachEvent<span class="token operator">&amp;&amp;</span>n<span class="token punctuation">.</span><span class="token function">attachEvent</span><span class="token punctuation">(</span><span class="token string">"onunload"</span><span class="token punctuation">,</span>oe<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>d<span class="token punctuation">.</span>attributes<span class="token operator">=</span><span class="token function">ce</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> e<span class="token punctuation">.</span>className<span class="token operator">=</span><span class="token string">"i"</span><span class="token punctuation">,</span><span class="token operator">!</span>e<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"className"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>d<span class="token punctuation">.</span>getElementsByTagName<span class="token operator">=</span><span class="token function">ce</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> e<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span><span class="token constant">C</span><span class="token punctuation">.</span><span class="token function">createComment</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token operator">!</span>e<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">"*"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>d<span class="token punctuation">.</span>getElementsByClassName<span class="token operator">=</span><span class="token constant">K</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token constant">C</span><span class="token punctuation">.</span>getElementsByClassName<span class="token punctuation">)</span><span class="token punctuation">,</span>d<span class="token punctuation">.</span>getById<span class="token operator">=</span><span class="token function">ce</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> a<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">.</span>id<span class="token operator">=</span>k<span class="token punctuation">,</span><span class="token operator">!</span><span class="token constant">C</span><span class="token punctuation">.</span>getElementsByName<span class="token operator">||</span><span class="token operator">!</span><span class="token constant">C</span><span class="token punctuation">.</span><span class="token function">getElementsByName</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>d<span class="token punctuation">.</span>getById<span class="token operator">?</span><span class="token punctuation">(</span>b<span class="token punctuation">.</span>filter<span class="token punctuation">.</span><span class="token function-variable function">ID</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> t<span class="token operator">=</span>e<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>te<span class="token punctuation">,</span>ne<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> e<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token operator">===</span>t<span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>b<span class="token punctuation">.</span>find<span class="token punctuation">.</span><span class="token function-variable function">ID</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"undefined"</span><span class="token operator">!=</span><span class="token keyword">typeof</span> t<span class="token punctuation">.</span>getElementById<span class="token operator">&amp;&amp;</span><span class="token constant">E</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> n<span class="token operator">=</span>t<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> n<span class="token operator">?</span><span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token punctuation">(</span>b<span class="token punctuation">.</span>filter<span class="token punctuation">.</span><span class="token function-variable function">ID</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> n<span class="token operator">=</span>e<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>te<span class="token punctuation">,</span>ne<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> t<span class="token operator">=</span><span class="token string">"undefined"</span><span class="token operator">!=</span><span class="token keyword">typeof</span> e<span class="token punctuation">.</span>getAttributeNode<span class="token operator">&amp;&amp;</span>e<span class="token punctuation">.</span><span class="token function">getAttributeNode</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> t<span class="token operator">&amp;&amp;</span>t<span class="token punctuation">.</span>value<span class="token operator">===</span>n<span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>b<span class="token punctuation">.</span>find<span class="token punctuation">.</span><span class="token function-variable function">ID</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"undefined"</span><span class="token operator">!=</span><span class="token keyword">typeof</span> t<span class="token punctuation">.</span>getElementById<span class="token operator">&amp;&amp;</span><span class="token constant">E</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> n<span class="token punctuation">,</span>r<span class="token punctuation">,</span>i<span class="token punctuation">,</span>o<span class="token operator">=</span>t<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>n<span class="token operator">=</span>o<span class="token punctuation">.</span><span class="token function">getAttributeNode</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span>n<span class="token punctuation">.</span>value<span class="token operator">===</span>e<span class="token punctuation">)</span><span class="token keyword">return</span><span class="token punctuation">[</span>o<span class="token punctuation">]</span><span class="token punctuation">;</span>i<span class="token operator">=</span>t<span class="token punctuation">.</span><span class="token function">getElementsByName</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">,</span>r<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>o<span class="token operator">=</span>i<span class="token punctuation">[</span>r<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>n<span class="token operator">=</span>o<span class="token punctuation">.</span><span class="token function">getAttributeNode</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span>n<span class="token punctuation">.</span>value<span class="token operator">===</span>e<span class="token punctuation">)</span><span class="token keyword">return</span><span class="token punctuation">[</span>o<span class="token punctuation">]</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>b<span class="token punctuation">.</span>find<span class="token punctuation">.</span><span class="token constant">TAG</span><span class="token operator">=</span>d<span class="token punctuation">.</span>getElementsByTagName<span class="token operator">?</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span><span class="token string">"undefined"</span><span class="token operator">!=</span><span class="token keyword">typeof</span> t<span class="token punctuation">.</span>getElementsByTagName<span class="token operator">?</span>t<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token operator">:</span>d<span class="token punctuation">.</span>qsa<span class="token operator">?</span>t<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">void</span> <span class="token number">0</span><span class="token punctuation">&#125;</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> n<span class="token punctuation">,</span>r<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>o<span class="token operator">=</span>t<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"*"</span><span class="token operator">===</span>e<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">while</span><span class="token punctuation">(</span>n<span class="token operator">=</span>o<span class="token punctuation">[</span>i<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token number">1</span><span class="token operator">===</span>n<span class="token punctuation">.</span>nodeType<span class="token operator">&amp;&amp;</span>r<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> r<span class="token punctuation">&#125;</span><span class="token keyword">return</span> o<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>b<span class="token punctuation">.</span>find<span class="token punctuation">.</span><span class="token constant">CLASS</span><span class="token operator">=</span>d<span class="token punctuation">.</span>getElementsByClassName<span class="token operator">&amp;&amp;</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"undefined"</span><span class="token operator">!=</span><span class="token keyword">typeof</span> t<span class="token punctuation">.</span>getElementsByClassName<span class="token operator">&amp;&amp;</span><span class="token constant">E</span><span class="token punctuation">)</span><span class="token keyword">return</span> t<span class="token punctuation">.</span><span class="token function">getElementsByClassName</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>s<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>v<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">(</span>d<span class="token punctuation">.</span>qsa<span class="token operator">=</span><span class="token constant">K</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token constant">C</span><span class="token punctuation">.</span>querySelectorAll<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span><span class="token function">ce</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>a<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML<span class="token operator">=</span><span class="token string">"&lt;a id='"</span><span class="token operator">+</span>k<span class="token operator">+</span><span class="token string">"'>&lt;/a>&lt;select id='"</span><span class="token operator">+</span>k<span class="token operator">+</span><span class="token string">"-\r\\' msallowcapture=''>&lt;option selected=''>&lt;/option>&lt;/select>"</span><span class="token punctuation">,</span>e<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">"[msallowcapture^='']"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token operator">&amp;&amp;</span>v<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">"[*^$]="</span><span class="token operator">+</span><span class="token constant">M</span><span class="token operator">+</span><span class="token string">"*(?:''|\"\")"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>e<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">"[selected]"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token operator">||</span>v<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">"\\["</span><span class="token operator">+</span><span class="token constant">M</span><span class="token operator">+</span><span class="token string">"*(?:value|"</span><span class="token operator">+</span><span class="token constant">R</span><span class="token operator">+</span><span class="token string">")"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>e<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">"[id~="</span><span class="token operator">+</span>k<span class="token operator">+</span><span class="token string">"-]"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token operator">||</span>v<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">"~="</span><span class="token punctuation">)</span><span class="token punctuation">,</span>e<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">":checked"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token operator">||</span>v<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">":checked"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>e<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">"a#"</span><span class="token operator">+</span>k<span class="token operator">+</span><span class="token string">"+*"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token operator">||</span>v<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">".#.+[+~]"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">ce</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>e<span class="token punctuation">.</span>innerHTML<span class="token operator">=</span><span class="token string">"&lt;a href='' disabled='disabled'>&lt;/a>&lt;select disabled='disabled'>&lt;option/>&lt;/select>"</span><span class="token punctuation">;</span><span class="token keyword">var</span> t<span class="token operator">=</span><span class="token constant">C</span><span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"input"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>t<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"type"</span><span class="token punctuation">,</span><span class="token string">"hidden"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>e<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span><span class="token string">"D"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>e<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">"[name=d]"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token operator">&amp;&amp;</span>v<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token operator">+</span><span class="token constant">M</span><span class="token operator">+</span><span class="token string">"*[*^$|!~]?="</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token operator">!==</span>e<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">":enabled"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token operator">&amp;&amp;</span>v<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">":enabled"</span><span class="token punctuation">,</span><span class="token string">":disabled"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>a<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">.</span>disabled<span class="token operator">=</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token operator">!==</span>e<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">":disabled"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token operator">&amp;&amp;</span>v<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">":enabled"</span><span class="token punctuation">,</span><span class="token string">":disabled"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>e<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">"*,:x"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>v<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">",.*:"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span>d<span class="token punctuation">.</span>matchesSelector<span class="token operator">=</span><span class="token constant">K</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>c<span class="token operator">=</span>a<span class="token punctuation">.</span>matches<span class="token operator">||</span>a<span class="token punctuation">.</span>webkitMatchesSelector<span class="token operator">||</span>a<span class="token punctuation">.</span>mozMatchesSelector<span class="token operator">||</span>a<span class="token punctuation">.</span>oMatchesSelector<span class="token operator">||</span>a<span class="token punctuation">.</span>msMatchesSelector<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token function">ce</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>d<span class="token punctuation">.</span>disconnectedMatch<span class="token operator">=</span><span class="token function">c</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token string">"*"</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">c</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token string">"[s!='']:x"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>s<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">"!="</span><span class="token punctuation">,</span>$<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>v<span class="token operator">=</span>v<span class="token punctuation">.</span>length<span class="token operator">&amp;&amp;</span><span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">"|"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>s<span class="token operator">=</span>s<span class="token punctuation">.</span>length<span class="token operator">&amp;&amp;</span><span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">"|"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>t<span class="token operator">=</span><span class="token constant">K</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>compareDocumentPosition<span class="token punctuation">)</span><span class="token punctuation">,</span>y<span class="token operator">=</span>t<span class="token operator">||</span><span class="token constant">K</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>contains<span class="token punctuation">)</span><span class="token operator">?</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> n<span class="token operator">=</span><span class="token number">9</span><span class="token operator">===</span>e<span class="token punctuation">.</span>nodeType<span class="token operator">?</span>e<span class="token punctuation">.</span>documentElement<span class="token operator">:</span>e<span class="token punctuation">,</span>r<span class="token operator">=</span>t<span class="token operator">&amp;&amp;</span>t<span class="token punctuation">.</span>parentNode<span class="token punctuation">;</span><span class="token keyword">return</span> e<span class="token operator">===</span>r<span class="token operator">||</span><span class="token operator">!</span><span class="token punctuation">(</span><span class="token operator">!</span>r<span class="token operator">||</span><span class="token number">1</span><span class="token operator">!==</span>r<span class="token punctuation">.</span>nodeType<span class="token operator">||</span><span class="token operator">!</span><span class="token punctuation">(</span>n<span class="token punctuation">.</span>contains<span class="token operator">?</span>n<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token operator">:</span>e<span class="token punctuation">.</span>compareDocumentPosition<span class="token operator">&amp;&amp;</span><span class="token number">16</span><span class="token operator">&amp;</span>e<span class="token punctuation">.</span><span class="token function">compareDocumentPosition</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">if</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token keyword">while</span><span class="token punctuation">(</span>t<span class="token operator">=</span>t<span class="token punctuation">.</span>parentNode<span class="token punctuation">)</span><span class="token keyword">if</span><span class="token punctuation">(</span>t<span class="token operator">===</span>e<span class="token punctuation">)</span><span class="token keyword">return</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">return</span><span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token constant">D</span><span class="token operator">=</span>t<span class="token operator">?</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">if</span><span class="token punctuation">(</span>e<span class="token operator">===</span>t<span class="token punctuation">)</span><span class="token keyword">return</span> l<span class="token operator">=</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">var</span> n<span class="token operator">=</span><span class="token operator">!</span>e<span class="token punctuation">.</span>compareDocumentPosition<span class="token operator">-</span><span class="token operator">!</span>t<span class="token punctuation">.</span>compareDocumentPosition<span class="token punctuation">;</span><span class="token keyword">return</span> n<span class="token operator">||</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&amp;</span><span class="token punctuation">(</span>n<span class="token operator">=</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>ownerDocument<span class="token operator">||</span>e<span class="token punctuation">)</span><span class="token operator">===</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span>ownerDocument<span class="token operator">||</span>t<span class="token punctuation">)</span><span class="token operator">?</span>e<span class="token punctuation">.</span><span class="token function">compareDocumentPosition</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">||</span><span class="token operator">!</span>d<span class="token punctuation">.</span>sortDetached<span class="token operator">&amp;&amp;</span>t<span class="token punctuation">.</span><span class="token function">compareDocumentPosition</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token operator">===</span>n<span class="token operator">?</span>e<span class="token operator">===</span><span class="token constant">C</span><span class="token operator">||</span>e<span class="token punctuation">.</span>ownerDocument<span class="token operator">===</span>m<span class="token operator">&amp;&amp;</span><span class="token function">y</span><span class="token punctuation">(</span>m<span class="token punctuation">,</span>e<span class="token punctuation">)</span><span class="token operator">?</span><span class="token operator">-</span><span class="token number">1</span><span class="token operator">:</span>t<span class="token operator">===</span><span class="token constant">C</span><span class="token operator">||</span>t<span class="token punctuation">.</span>ownerDocument<span class="token operator">===</span>m<span class="token operator">&amp;&amp;</span><span class="token function">y</span><span class="token punctuation">(</span>m<span class="token punctuation">,</span>t<span class="token punctuation">)</span><span class="token operator">?</span><span class="token number">1</span><span class="token operator">:</span>u<span class="token operator">?</span><span class="token constant">P</span><span class="token punctuation">(</span>u<span class="token punctuation">,</span>e<span class="token punctuation">)</span><span class="token operator">-</span><span class="token constant">P</span><span class="token punctuation">(</span>u<span class="token punctuation">,</span>t<span class="token punctuation">)</span><span class="token operator">:</span><span class="token number">0</span><span class="token operator">:</span><span class="token number">4</span><span class="token operator">&amp;</span>n<span class="token operator">?</span><span class="token operator">-</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">if</span><span class="token punctuation">(</span>e<span class="token operator">===</span>t<span class="token punctuation">)</span><span class="token keyword">return</span> l<span class="token operator">=</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">var</span> n<span class="token punctuation">,</span>r<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>i<span class="token operator">=</span>e<span class="token punctuation">.</span>parentNode<span class="token punctuation">,</span>o<span class="token operator">=</span>t<span class="token punctuation">.</span>parentNode<span class="token punctuation">,</span>a<span class="token operator">=</span><span class="token punctuation">[</span>e<span class="token punctuation">]</span><span class="token punctuation">,</span>s<span class="token operator">=</span><span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>i<span class="token operator">||</span><span class="token operator">!</span>o<span class="token punctuation">)</span><span class="token keyword">return</span> e<span class="token operator">===</span><span class="token constant">C</span><span class="token operator">?</span><span class="token operator">-</span><span class="token number">1</span><span class="token operator">:</span>t<span class="token operator">===</span><span class="token constant">C</span><span class="token operator">?</span><span class="token number">1</span><span class="token operator">:</span>i<span class="token operator">?</span><span class="token operator">-</span><span class="token number">1</span><span class="token operator">:</span>o<span class="token operator">?</span><span class="token number">1</span><span class="token operator">:</span>u<span class="token operator">?</span><span class="token constant">P</span><span class="token punctuation">(</span>u<span class="token punctuation">,</span>e<span class="token punctuation">)</span><span class="token operator">-</span><span class="token constant">P</span><span class="token punctuation">(</span>u<span class="token punctuation">,</span>t<span class="token punctuation">)</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>i<span class="token operator">===</span>o<span class="token punctuation">)</span><span class="token keyword">return</span> <span class="token function">pe</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span>n<span class="token operator">=</span>e<span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>n<span class="token operator">=</span>n<span class="token punctuation">.</span>parentNode<span class="token punctuation">)</span>a<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>n<span class="token operator">=</span>t<span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>n<span class="token operator">=</span>n<span class="token punctuation">.</span>parentNode<span class="token punctuation">)</span>s<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token operator">===</span>s<span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token punctuation">)</span>r<span class="token operator">++</span><span class="token punctuation">;</span><span class="token keyword">return</span> r<span class="token operator">?</span><span class="token function">pe</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token punctuation">,</span>s<span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span>a<span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token operator">===</span>m<span class="token operator">?</span><span class="token operator">-</span><span class="token number">1</span><span class="token operator">:</span>s<span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token operator">===</span>m<span class="token operator">?</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token constant">C</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>se<span class="token punctuation">.</span><span class="token function-variable function">matches</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token function">se</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">,</span>t<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>se<span class="token punctuation">.</span><span class="token function-variable function">matchesSelector</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>ownerDocument<span class="token operator">||</span>e<span class="token punctuation">)</span><span class="token operator">!==</span><span class="token constant">C</span><span class="token operator">&amp;&amp;</span><span class="token constant">T</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">,</span>d<span class="token punctuation">.</span>matchesSelector<span class="token operator">&amp;&amp;</span><span class="token constant">E</span><span class="token operator">&amp;&amp;</span><span class="token operator">!</span><span class="token constant">A</span><span class="token punctuation">[</span>t<span class="token operator">+</span><span class="token string">" "</span><span class="token punctuation">]</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span><span class="token operator">!</span>s<span class="token operator">||</span><span class="token operator">!</span>s<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span><span class="token operator">!</span>v<span class="token operator">||</span><span class="token operator">!</span>v<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">try</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> n<span class="token operator">=</span><span class="token function">c</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>n<span class="token operator">||</span>d<span class="token punctuation">.</span>disconnectedMatch<span class="token operator">||</span>e<span class="token punctuation">.</span>document<span class="token operator">&amp;&amp;</span><span class="token number">11</span><span class="token operator">!==</span>e<span class="token punctuation">.</span>document<span class="token punctuation">.</span>nodeType<span class="token punctuation">)</span><span class="token keyword">return</span> n<span class="token punctuation">&#125;</span><span class="token keyword">catch</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token constant">A</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token operator">&lt;</span><span class="token function">se</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span><span class="token constant">C</span><span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">,</span><span class="token punctuation">[</span>e<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>se<span class="token punctuation">.</span><span class="token function-variable function">contains</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>ownerDocument<span class="token operator">||</span>e<span class="token punctuation">)</span><span class="token operator">!==</span><span class="token constant">C</span><span class="token operator">&amp;&amp;</span><span class="token constant">T</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">y</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>t<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>se<span class="token punctuation">.</span><span class="token function-variable function">attr</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>ownerDocument<span class="token operator">||</span>e<span class="token punctuation">)</span><span class="token operator">!==</span><span class="token constant">C</span><span class="token operator">&amp;&amp;</span><span class="token constant">T</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">var</span> n<span class="token operator">=</span>b<span class="token punctuation">.</span>attrHandle<span class="token punctuation">[</span>t<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>r<span class="token operator">=</span>n<span class="token operator">&amp;&amp;</span><span class="token function">j</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>b<span class="token punctuation">.</span>attrHandle<span class="token punctuation">,</span>t<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token function">n</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>t<span class="token punctuation">,</span><span class="token operator">!</span><span class="token constant">E</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">void</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token keyword">void</span> <span class="token number">0</span><span class="token operator">!==</span>r<span class="token operator">?</span>r<span class="token operator">:</span>d<span class="token punctuation">.</span>attributes<span class="token operator">||</span><span class="token operator">!</span><span class="token constant">E</span><span class="token operator">?</span>e<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token operator">:</span><span class="token punctuation">(</span>r<span class="token operator">=</span>e<span class="token punctuation">.</span><span class="token function">getAttributeNode</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span>r<span class="token punctuation">.</span>specified<span class="token operator">?</span>r<span class="token punctuation">.</span>value<span class="token operator">:</span><span class="token keyword">null</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>se<span class="token punctuation">.</span><span class="token function-variable function">escape</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span><span class="token punctuation">(</span>e<span class="token operator">+</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>re<span class="token punctuation">,</span>ie<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>se<span class="token punctuation">.</span><span class="token function-variable function">error</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">"Syntax error, unrecognized expression: "</span><span class="token operator">+</span>e<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>se<span class="token punctuation">.</span><span class="token function-variable function">uniqueSort</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> t<span class="token punctuation">,</span>n<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>r<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>l<span class="token operator">=</span><span class="token operator">!</span>d<span class="token punctuation">.</span>detectDuplicates<span class="token punctuation">,</span>u<span class="token operator">=</span><span class="token operator">!</span>d<span class="token punctuation">.</span>sortStable<span class="token operator">&amp;&amp;</span>e<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>e<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token constant">D</span><span class="token punctuation">)</span><span class="token punctuation">,</span>l<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">while</span><span class="token punctuation">(</span>t<span class="token operator">=</span>e<span class="token punctuation">[</span>i<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">)</span>t<span class="token operator">===</span>e<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>r<span class="token operator">=</span>n<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>r<span class="token operator">--</span><span class="token punctuation">)</span>e<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>n<span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> u<span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">,</span>e<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>o<span class="token operator">=</span>se<span class="token punctuation">.</span><span class="token function-variable function">getText</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> t<span class="token punctuation">,</span>n<span class="token operator">=</span><span class="token string">""</span><span class="token punctuation">,</span>r<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>i<span class="token operator">=</span>e<span class="token punctuation">.</span>nodeType<span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">===</span>i<span class="token operator">||</span><span class="token number">9</span><span class="token operator">===</span>i<span class="token operator">||</span><span class="token number">11</span><span class="token operator">===</span>i<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"string"</span><span class="token operator">==</span><span class="token keyword">typeof</span> e<span class="token punctuation">.</span>textContent<span class="token punctuation">)</span><span class="token keyword">return</span> e<span class="token punctuation">.</span>textContent<span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span>e<span class="token operator">=</span>e<span class="token punctuation">.</span>firstChild<span class="token punctuation">;</span>e<span class="token punctuation">;</span>e<span class="token operator">=</span>e<span class="token punctuation">.</span>nextSibling<span class="token punctuation">)</span>n<span class="token operator">+=</span><span class="token function">o</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token operator">===</span>i<span class="token operator">||</span><span class="token number">4</span><span class="token operator">===</span>i<span class="token punctuation">)</span><span class="token keyword">return</span> e<span class="token punctuation">.</span>nodeValue<span class="token punctuation">&#125;</span><span class="token keyword">else</span> <span class="token keyword">while</span><span class="token punctuation">(</span>t<span class="token operator">=</span>e<span class="token punctuation">[</span>r<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">)</span>n<span class="token operator">+=</span><span class="token function">o</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> n<span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">(</span>b<span class="token operator">=</span>se<span class="token punctuation">.</span>selectors<span class="token operator">=</span><span class="token punctuation">&#123;</span>cacheLength<span class="token operator">:</span><span class="token number">50</span><span class="token punctuation">,</span>createPseudo<span class="token operator">:</span>le<span class="token punctuation">,</span>match<span class="token operator">:</span><span class="token constant">G</span><span class="token punctuation">,</span>attrHandle<span class="token operator">:</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>find<span class="token operator">:</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>relative<span class="token operator">:</span><span class="token punctuation">&#123;</span><span class="token string">">"</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>dir<span class="token operator">:</span><span class="token string">"parentNode"</span><span class="token punctuation">,</span>first<span class="token operator">:</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token string">" "</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>dir<span class="token operator">:</span><span class="token string">"parentNode"</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token string">"+"</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>dir<span class="token operator">:</span><span class="token string">"previousSibling"</span><span class="token punctuation">,</span>first<span class="token operator">:</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token string">"~"</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>dir<span class="token operator">:</span><span class="token string">"previousSibling"</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>preFilter<span class="token operator">:</span><span class="token punctuation">&#123;</span><span class="token function-variable function">ATTR</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> e<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">=</span>e<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>te<span class="token punctuation">,</span>ne<span class="token punctuation">)</span><span class="token punctuation">,</span>e<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">(</span>e<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token operator">||</span>e<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token operator">||</span>e<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">||</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>te<span class="token punctuation">,</span>ne<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">"~="</span><span class="token operator">===</span>e<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>e<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token string">" "</span><span class="token operator">+</span>e<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">,</span>e<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">CHILD</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> e<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">=</span>e<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">"nth"</span><span class="token operator">===</span>e<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">(</span>e<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token operator">||</span>se<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>e<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>e<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token operator">+</span><span class="token punctuation">(</span>e<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token operator">?</span>e<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token punctuation">(</span>e<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token operator">||</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token number">2</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token string">"even"</span><span class="token operator">===</span>e<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token operator">||</span><span class="token string">"odd"</span><span class="token operator">===</span>e<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>e<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token operator">+</span><span class="token punctuation">(</span>e<span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span><span class="token operator">+</span>e<span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">]</span><span class="token operator">||</span><span class="token string">"odd"</span><span class="token operator">===</span>e<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">:</span>e<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token operator">&amp;&amp;</span>se<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>e<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>e<span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">PSEUDO</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> t<span class="token punctuation">,</span>n<span class="token operator">=</span><span class="token operator">!</span>e<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token operator">&amp;&amp;</span>e<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token constant">G</span><span class="token punctuation">.</span><span class="token constant">CHILD</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>e<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token keyword">null</span><span class="token operator">:</span><span class="token punctuation">(</span>e<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token operator">?</span>e<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">=</span>e<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token operator">||</span>e<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">||</span><span class="token string">""</span><span class="token operator">:</span>n<span class="token operator">&amp;&amp;</span><span class="token constant">X</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>t<span class="token operator">=</span><span class="token function">h</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>t<span class="token operator">=</span>n<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">")"</span><span class="token punctuation">,</span>n<span class="token punctuation">.</span>length<span class="token operator">-</span>t<span class="token punctuation">)</span><span class="token operator">-</span>n<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>e<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=</span>e<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>t<span class="token punctuation">)</span><span class="token punctuation">,</span>e<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">=</span>n<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>t<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>e<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>filter<span class="token operator">:</span><span class="token punctuation">&#123;</span><span class="token function-variable function">TAG</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> t<span class="token operator">=</span>e<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>te<span class="token punctuation">,</span>ne<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span><span class="token string">"*"</span><span class="token operator">===</span>e<span class="token operator">?</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">&#125;</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> e<span class="token punctuation">.</span>nodeName<span class="token operator">&amp;&amp;</span>e<span class="token punctuation">.</span>nodeName<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">===</span>t<span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">CLASS</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> t<span class="token operator">=</span>p<span class="token punctuation">[</span>e<span class="token operator">+</span><span class="token string">" "</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">return</span> t<span class="token operator">||</span><span class="token punctuation">(</span>t<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">"(^|"</span><span class="token operator">+</span><span class="token constant">M</span><span class="token operator">+</span><span class="token string">")"</span><span class="token operator">+</span>e<span class="token operator">+</span><span class="token string">"("</span><span class="token operator">+</span><span class="token constant">M</span><span class="token operator">+</span><span class="token string">"|$)"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token function">p</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> t<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">"string"</span><span class="token operator">==</span><span class="token keyword">typeof</span> e<span class="token punctuation">.</span>className<span class="token operator">&amp;&amp;</span>e<span class="token punctuation">.</span>className<span class="token operator">||</span><span class="token string">"undefined"</span><span class="token operator">!=</span><span class="token keyword">typeof</span> e<span class="token punctuation">.</span>getAttribute<span class="token operator">&amp;&amp;</span>e<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"class"</span><span class="token punctuation">)</span><span class="token operator">||</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">ATTR</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">n<span class="token punctuation">,</span>r<span class="token punctuation">,</span>i</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> t<span class="token operator">=</span>se<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token keyword">null</span><span class="token operator">==</span>t<span class="token operator">?</span><span class="token string">"!="</span><span class="token operator">===</span>r<span class="token operator">:</span><span class="token operator">!</span>r<span class="token operator">||</span><span class="token punctuation">(</span>t<span class="token operator">+=</span><span class="token string">""</span><span class="token punctuation">,</span><span class="token string">"="</span><span class="token operator">===</span>r<span class="token operator">?</span>t<span class="token operator">===</span>i<span class="token operator">:</span><span class="token string">"!="</span><span class="token operator">===</span>r<span class="token operator">?</span>t<span class="token operator">!==</span>i<span class="token operator">:</span><span class="token string">"^="</span><span class="token operator">===</span>r<span class="token operator">?</span>i<span class="token operator">&amp;&amp;</span><span class="token number">0</span><span class="token operator">===</span>t<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token operator">:</span><span class="token string">"*="</span><span class="token operator">===</span>r<span class="token operator">?</span>i<span class="token operator">&amp;&amp;</span><span class="token operator">-</span><span class="token number">1</span><span class="token operator">&lt;</span>t<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token operator">:</span><span class="token string">"$="</span><span class="token operator">===</span>r<span class="token operator">?</span>i<span class="token operator">&amp;&amp;</span>t<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token operator">-</span>i<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token operator">===</span>i<span class="token operator">:</span><span class="token string">"~="</span><span class="token operator">===</span>r<span class="token operator">?</span><span class="token operator">-</span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token string">" "</span><span class="token operator">+</span>t<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token constant">F</span><span class="token punctuation">,</span><span class="token string">" "</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token operator">:</span><span class="token string">"|="</span><span class="token operator">===</span>r<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>t<span class="token operator">===</span>i<span class="token operator">||</span>t<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>i<span class="token punctuation">.</span>length<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">===</span>i<span class="token operator">+</span><span class="token string">"-"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">CHILD</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">h<span class="token punctuation">,</span>e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>g<span class="token punctuation">,</span>v</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> y<span class="token operator">=</span><span class="token string">"nth"</span><span class="token operator">!==</span>h<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span>m<span class="token operator">=</span><span class="token string">"last"</span><span class="token operator">!==</span>h<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span>x<span class="token operator">=</span><span class="token string">"of-type"</span><span class="token operator">===</span>e<span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token number">1</span><span class="token operator">===</span>g<span class="token operator">&amp;&amp;</span><span class="token number">0</span><span class="token operator">===</span>v<span class="token operator">?</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span><span class="token operator">!</span><span class="token operator">!</span>e<span class="token punctuation">.</span>parentNode<span class="token punctuation">&#125;</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> r<span class="token punctuation">,</span>i<span class="token punctuation">,</span>o<span class="token punctuation">,</span>a<span class="token punctuation">,</span>s<span class="token punctuation">,</span>u<span class="token punctuation">,</span>l<span class="token operator">=</span>y<span class="token operator">!==</span>m<span class="token operator">?</span><span class="token string">"nextSibling"</span><span class="token operator">:</span><span class="token string">"previousSibling"</span><span class="token punctuation">,</span>c<span class="token operator">=</span>e<span class="token punctuation">.</span>parentNode<span class="token punctuation">,</span>f<span class="token operator">=</span>x<span class="token operator">&amp;&amp;</span>e<span class="token punctuation">.</span>nodeName<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>p<span class="token operator">=</span><span class="token operator">!</span>n<span class="token operator">&amp;&amp;</span><span class="token operator">!</span>x<span class="token punctuation">,</span>d<span class="token operator">=</span><span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">if</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">while</span><span class="token punctuation">(</span>l<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>a<span class="token operator">=</span>e<span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>a<span class="token operator">=</span>a<span class="token punctuation">[</span>l<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">if</span><span class="token punctuation">(</span>x<span class="token operator">?</span>a<span class="token punctuation">.</span>nodeName<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">===</span>f<span class="token operator">:</span><span class="token number">1</span><span class="token operator">===</span>a<span class="token punctuation">.</span>nodeType<span class="token punctuation">)</span><span class="token keyword">return</span><span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">;</span>u<span class="token operator">=</span>l<span class="token operator">=</span><span class="token string">"only"</span><span class="token operator">===</span>h<span class="token operator">&amp;&amp;</span><span class="token operator">!</span>u<span class="token operator">&amp;&amp;</span><span class="token string">"nextSibling"</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">&#125;</span><span class="token keyword">if</span><span class="token punctuation">(</span>u<span class="token operator">=</span><span class="token punctuation">[</span>m<span class="token operator">?</span>c<span class="token punctuation">.</span>firstChild<span class="token operator">:</span>c<span class="token punctuation">.</span>lastChild<span class="token punctuation">]</span><span class="token punctuation">,</span>m<span class="token operator">&amp;&amp;</span>p<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>d<span class="token operator">=</span><span class="token punctuation">(</span>s<span class="token operator">=</span><span class="token punctuation">(</span>r<span class="token operator">=</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token punctuation">(</span>o<span class="token operator">=</span><span class="token punctuation">(</span>a<span class="token operator">=</span>c<span class="token punctuation">)</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token operator">||</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">[</span>a<span class="token punctuation">.</span>uniqueID<span class="token punctuation">]</span><span class="token operator">||</span><span class="token punctuation">(</span>o<span class="token punctuation">[</span>a<span class="token punctuation">.</span>uniqueID<span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">[</span>h<span class="token punctuation">]</span><span class="token operator">||</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">===</span><span class="token constant">S</span><span class="token operator">&amp;&amp;</span>r<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span>r<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span>a<span class="token operator">=</span>s<span class="token operator">&amp;&amp;</span>c<span class="token punctuation">.</span>childNodes<span class="token punctuation">[</span>s<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>a<span class="token operator">=</span><span class="token operator">++</span>s<span class="token operator">&amp;&amp;</span>a<span class="token operator">&amp;&amp;</span>a<span class="token punctuation">[</span>l<span class="token punctuation">]</span><span class="token operator">||</span><span class="token punctuation">(</span>d<span class="token operator">=</span>s<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">||</span>u<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">===</span>a<span class="token punctuation">.</span>nodeType<span class="token operator">&amp;&amp;</span><span class="token operator">++</span>d<span class="token operator">&amp;&amp;</span>a<span class="token operator">===</span>e<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>i<span class="token punctuation">[</span>h<span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">[</span><span class="token constant">S</span><span class="token punctuation">,</span>s<span class="token punctuation">,</span>d<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">break</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>p<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>d<span class="token operator">=</span>s<span class="token operator">=</span><span class="token punctuation">(</span>r<span class="token operator">=</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token punctuation">(</span>o<span class="token operator">=</span><span class="token punctuation">(</span>a<span class="token operator">=</span>e<span class="token punctuation">)</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token operator">||</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">[</span>a<span class="token punctuation">.</span>uniqueID<span class="token punctuation">]</span><span class="token operator">||</span><span class="token punctuation">(</span>o<span class="token punctuation">[</span>a<span class="token punctuation">.</span>uniqueID<span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">[</span>h<span class="token punctuation">]</span><span class="token operator">||</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">===</span><span class="token constant">S</span><span class="token operator">&amp;&amp;</span>r<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token operator">!</span><span class="token number">1</span><span class="token operator">===</span>d<span class="token punctuation">)</span><span class="token keyword">while</span><span class="token punctuation">(</span>a<span class="token operator">=</span><span class="token operator">++</span>s<span class="token operator">&amp;&amp;</span>a<span class="token operator">&amp;&amp;</span>a<span class="token punctuation">[</span>l<span class="token punctuation">]</span><span class="token operator">||</span><span class="token punctuation">(</span>d<span class="token operator">=</span>s<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">||</span>u<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>x<span class="token operator">?</span>a<span class="token punctuation">.</span>nodeName<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">===</span>f<span class="token operator">:</span><span class="token number">1</span><span class="token operator">===</span>a<span class="token punctuation">.</span>nodeType<span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token operator">++</span>d<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>p<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token punctuation">(</span>o<span class="token operator">=</span>a<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token operator">||</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">[</span>a<span class="token punctuation">.</span>uniqueID<span class="token punctuation">]</span><span class="token operator">||</span><span class="token punctuation">(</span>o<span class="token punctuation">[</span>a<span class="token punctuation">.</span>uniqueID<span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">[</span>h<span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">[</span><span class="token constant">S</span><span class="token punctuation">,</span>d<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>a<span class="token operator">===</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">break</span><span class="token punctuation">;</span><span class="token keyword">return</span><span class="token punctuation">(</span>d<span class="token operator">-=</span>v<span class="token punctuation">)</span><span class="token operator">===</span>g<span class="token operator">||</span>d<span class="token operator">%</span>g<span class="token operator">==</span><span class="token number">0</span><span class="token operator">&amp;&amp;</span><span class="token number">0</span><span class="token operator">&lt;=</span>d<span class="token operator">/</span>g<span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">PSEUDO</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>o</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> t<span class="token punctuation">,</span>a<span class="token operator">=</span>b<span class="token punctuation">.</span>pseudos<span class="token punctuation">[</span>e<span class="token punctuation">]</span><span class="token operator">||</span>b<span class="token punctuation">.</span>setFilters<span class="token punctuation">[</span>e<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">||</span>se<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">"unsupported pseudo: "</span><span class="token operator">+</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> a<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token operator">?</span><span class="token function">a</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token operator">:</span><span class="token number">1</span><span class="token operator">&lt;</span>a<span class="token punctuation">.</span>length<span class="token operator">?</span><span class="token punctuation">(</span>t<span class="token operator">=</span><span class="token punctuation">[</span>e<span class="token punctuation">,</span>e<span class="token punctuation">,</span><span class="token string">""</span><span class="token punctuation">,</span>o<span class="token punctuation">]</span><span class="token punctuation">,</span>b<span class="token punctuation">.</span>setFilters<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token function">le</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> n<span class="token punctuation">,</span>r<span class="token operator">=</span><span class="token function">a</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>o<span class="token punctuation">)</span><span class="token punctuation">,</span>i<span class="token operator">=</span>r<span class="token punctuation">.</span>length<span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>i<span class="token operator">--</span><span class="token punctuation">)</span>e<span class="token punctuation">[</span>n<span class="token operator">=</span><span class="token constant">P</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>r<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token operator">!</span><span class="token punctuation">(</span>t<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token operator">=</span>r<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token function">a</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>t<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token operator">:</span>a<span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>pseudos<span class="token operator">:</span><span class="token punctuation">&#123;</span>not<span class="token operator">:</span><span class="token function">le</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> r<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>i<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>s<span class="token operator">=</span><span class="token function">f</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token constant">B</span><span class="token punctuation">,</span><span class="token string">"$1"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> s<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token operator">?</span><span class="token function">le</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n<span class="token punctuation">,</span>r</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> i<span class="token punctuation">,</span>o<span class="token operator">=</span><span class="token function">s</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">,</span>r<span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>a<span class="token operator">=</span>e<span class="token punctuation">.</span>length<span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>a<span class="token operator">--</span><span class="token punctuation">)</span><span class="token punctuation">(</span>i<span class="token operator">=</span>o<span class="token punctuation">[</span>a<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>e<span class="token punctuation">[</span>a<span class="token punctuation">]</span><span class="token operator">=</span><span class="token operator">!</span><span class="token punctuation">(</span>t<span class="token punctuation">[</span>a<span class="token punctuation">]</span><span class="token operator">=</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> r<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=</span>e<span class="token punctuation">,</span><span class="token function">s</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">,</span>n<span class="token punctuation">,</span>i<span class="token punctuation">)</span><span class="token punctuation">,</span>r<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">,</span><span class="token operator">!</span>i<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>has<span class="token operator">:</span><span class="token function">le</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token operator">&lt;</span><span class="token function">se</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span>e<span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>contains<span class="token operator">:</span><span class="token function">le</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> t<span class="token operator">=</span>t<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>te<span class="token punctuation">,</span>ne<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span><span class="token operator">-</span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>textContent<span class="token operator">||</span><span class="token function">o</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>lang<span class="token operator">:</span><span class="token function">le</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token constant">V</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>n<span class="token operator">||</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token operator">||</span>se<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">"unsupported lang: "</span><span class="token operator">+</span>n<span class="token punctuation">)</span><span class="token punctuation">,</span>n<span class="token operator">=</span>n<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>te<span class="token punctuation">,</span>ne<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> t<span class="token punctuation">;</span><span class="token keyword">do</span><span class="token punctuation">&#123;</span><span class="token keyword">if</span><span class="token punctuation">(</span>t<span class="token operator">=</span><span class="token constant">E</span><span class="token operator">?</span>e<span class="token punctuation">.</span>lang<span class="token operator">:</span>e<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"xml:lang"</span><span class="token punctuation">)</span><span class="token operator">||</span>e<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"lang"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">return</span><span class="token punctuation">(</span>t<span class="token operator">=</span>t<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">===</span>n<span class="token operator">||</span><span class="token number">0</span><span class="token operator">===</span>t<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>n<span class="token operator">+</span><span class="token string">"-"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">while</span><span class="token punctuation">(</span><span class="token punctuation">(</span>e<span class="token operator">=</span>e<span class="token punctuation">.</span>parentNode<span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token number">1</span><span class="token operator">===</span>e<span class="token punctuation">.</span>nodeType<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span><span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function-variable function">target</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> t<span class="token operator">=</span>n<span class="token punctuation">.</span>location<span class="token operator">&amp;&amp;</span>n<span class="token punctuation">.</span>location<span class="token punctuation">.</span>hash<span class="token punctuation">;</span><span class="token keyword">return</span> t<span class="token operator">&amp;&amp;</span>t<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">===</span>e<span class="token punctuation">.</span>id<span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">root</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> e<span class="token operator">===</span>a<span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">focus</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> e<span class="token operator">===</span><span class="token constant">C</span><span class="token punctuation">.</span>activeElement<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token constant">C</span><span class="token punctuation">.</span>hasFocus<span class="token operator">||</span><span class="token constant">C</span><span class="token punctuation">.</span><span class="token function">hasFocus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token operator">!</span><span class="token operator">!</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>type<span class="token operator">||</span>e<span class="token punctuation">.</span>href<span class="token operator">||</span><span class="token operator">~</span>e<span class="token punctuation">.</span>tabIndex<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>enabled<span class="token operator">:</span><span class="token function">ge</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>disabled<span class="token operator">:</span><span class="token function">ge</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function-variable function">checked</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> t<span class="token operator">=</span>e<span class="token punctuation">.</span>nodeName<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span><span class="token string">"input"</span><span class="token operator">===</span>t<span class="token operator">&amp;&amp;</span><span class="token operator">!</span><span class="token operator">!</span>e<span class="token punctuation">.</span>checked<span class="token operator">||</span><span class="token string">"option"</span><span class="token operator">===</span>t<span class="token operator">&amp;&amp;</span><span class="token operator">!</span><span class="token operator">!</span>e<span class="token punctuation">.</span>selected<span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">selected</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> e<span class="token punctuation">.</span>parentNode<span class="token operator">&amp;&amp;</span>e<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span>selectedIndex<span class="token punctuation">,</span><span class="token operator">!</span><span class="token number">0</span><span class="token operator">===</span>e<span class="token punctuation">.</span>selected<span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">empty</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">for</span><span class="token punctuation">(</span>e<span class="token operator">=</span>e<span class="token punctuation">.</span>firstChild<span class="token punctuation">;</span>e<span class="token punctuation">;</span>e<span class="token operator">=</span>e<span class="token punctuation">.</span>nextSibling<span class="token punctuation">)</span><span class="token keyword">if</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>nodeType<span class="token operator">&lt;</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token keyword">return</span><span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token keyword">return</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">parent</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span><span class="token operator">!</span>b<span class="token punctuation">.</span>pseudos<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">header</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token constant">J</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>nodeName<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">input</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token constant">Q</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>nodeName<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">button</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> t<span class="token operator">=</span>e<span class="token punctuation">.</span>nodeName<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span><span class="token string">"input"</span><span class="token operator">===</span>t<span class="token operator">&amp;&amp;</span><span class="token string">"button"</span><span class="token operator">===</span>e<span class="token punctuation">.</span>type<span class="token operator">||</span><span class="token string">"button"</span><span class="token operator">===</span>t<span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">text</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> t<span class="token punctuation">;</span><span class="token keyword">return</span><span class="token string">"input"</span><span class="token operator">===</span>e<span class="token punctuation">.</span>nodeName<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token string">"text"</span><span class="token operator">===</span>e<span class="token punctuation">.</span>type<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token operator">==</span><span class="token punctuation">(</span>t<span class="token operator">=</span>e<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"type"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">||</span><span class="token string">"text"</span><span class="token operator">===</span>t<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>first<span class="token operator">:</span><span class="token function">ve</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>last<span class="token operator">:</span><span class="token function">ve</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span><span class="token punctuation">[</span>t<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>eq<span class="token operator">:</span><span class="token function">ve</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span><span class="token punctuation">[</span>n<span class="token operator">&lt;</span><span class="token number">0</span><span class="token operator">?</span>n<span class="token operator">+</span>t<span class="token operator">:</span>n<span class="token punctuation">]</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>even<span class="token operator">:</span><span class="token function">ve</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> n<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>n<span class="token operator">&lt;</span>t<span class="token punctuation">;</span>n<span class="token operator">+=</span><span class="token number">2</span><span class="token punctuation">)</span>e<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> e<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>odd<span class="token operator">:</span><span class="token function">ve</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> n<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>n<span class="token operator">&lt;</span>t<span class="token punctuation">;</span>n<span class="token operator">+=</span><span class="token number">2</span><span class="token punctuation">)</span>e<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> e<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>lt<span class="token operator">:</span><span class="token function">ve</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> r<span class="token operator">=</span>n<span class="token operator">&lt;</span><span class="token number">0</span><span class="token operator">?</span>n<span class="token operator">+</span>t<span class="token operator">:</span>t<span class="token operator">&lt;</span>n<span class="token operator">?</span>t<span class="token operator">:</span>n<span class="token punctuation">;</span><span class="token number">0</span><span class="token operator">&lt;=</span><span class="token operator">--</span>r<span class="token punctuation">;</span><span class="token punctuation">)</span>e<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> e<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>gt<span class="token operator">:</span><span class="token function">ve</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> r<span class="token operator">=</span>n<span class="token operator">&lt;</span><span class="token number">0</span><span class="token operator">?</span>n<span class="token operator">+</span>t<span class="token operator">:</span>n<span class="token punctuation">;</span><span class="token operator">++</span>r<span class="token operator">&lt;</span>t<span class="token punctuation">;</span><span class="token punctuation">)</span>e<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> e<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>pseudos<span class="token punctuation">.</span>nth<span class="token operator">=</span>b<span class="token punctuation">.</span>pseudos<span class="token punctuation">.</span>eq<span class="token punctuation">,</span><span class="token punctuation">&#123;</span>radio<span class="token operator">:</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>checkbox<span class="token operator">:</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>file<span class="token operator">:</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>password<span class="token operator">:</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>image<span class="token operator">:</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span>b<span class="token punctuation">.</span>pseudos<span class="token punctuation">[</span>e<span class="token punctuation">]</span><span class="token operator">=</span><span class="token function">de</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span>e <span class="token keyword">in</span><span class="token punctuation">&#123;</span>submit<span class="token operator">:</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>reset<span class="token operator">:</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span>b<span class="token punctuation">.</span>pseudos<span class="token punctuation">[</span>e<span class="token punctuation">]</span><span class="token operator">=</span><span class="token function">he</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">function</span> <span class="token function">me</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token keyword">function</span> <span class="token function">xe</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> t<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>n<span class="token operator">=</span>e<span class="token punctuation">.</span>length<span class="token punctuation">,</span>r<span class="token operator">=</span><span class="token string">""</span><span class="token punctuation">;</span>t<span class="token operator">&lt;</span>n<span class="token punctuation">;</span>t<span class="token operator">++</span><span class="token punctuation">)</span>r<span class="token operator">+=</span>e<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">.</span>value<span class="token punctuation">;</span><span class="token keyword">return</span> r<span class="token punctuation">&#125;</span><span class="token keyword">function</span> <span class="token function">be</span><span class="token punctuation">(</span><span class="token parameter">s<span class="token punctuation">,</span>e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> u<span class="token operator">=</span>e<span class="token punctuation">.</span>dir<span class="token punctuation">,</span>l<span class="token operator">=</span>e<span class="token punctuation">.</span>next<span class="token punctuation">,</span>c<span class="token operator">=</span>l<span class="token operator">||</span>u<span class="token punctuation">,</span>f<span class="token operator">=</span>t<span class="token operator">&amp;&amp;</span><span class="token string">"parentNode"</span><span class="token operator">===</span>c<span class="token punctuation">,</span>p<span class="token operator">=</span>r<span class="token operator">++</span><span class="token punctuation">;</span><span class="token keyword">return</span> e<span class="token punctuation">.</span>first<span class="token operator">?</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">while</span><span class="token punctuation">(</span>e<span class="token operator">=</span>e<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">===</span>e<span class="token punctuation">.</span>nodeType<span class="token operator">||</span>f<span class="token punctuation">)</span><span class="token keyword">return</span> <span class="token function">s</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span><span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">&#125;</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> r<span class="token punctuation">,</span>i<span class="token punctuation">,</span>o<span class="token punctuation">,</span>a<span class="token operator">=</span><span class="token punctuation">[</span><span class="token constant">S</span><span class="token punctuation">,</span>p<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">while</span><span class="token punctuation">(</span>e<span class="token operator">=</span>e<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">===</span>e<span class="token punctuation">.</span>nodeType<span class="token operator">||</span>f<span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token function">s</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">return</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">&#125;</span><span class="token keyword">else</span> <span class="token keyword">while</span><span class="token punctuation">(</span>e<span class="token operator">=</span>e<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">===</span>e<span class="token punctuation">.</span>nodeType<span class="token operator">||</span>f<span class="token punctuation">)</span><span class="token keyword">if</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token punctuation">(</span>o<span class="token operator">=</span>e<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token operator">||</span><span class="token punctuation">(</span>e<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">[</span>e<span class="token punctuation">.</span>uniqueID<span class="token punctuation">]</span><span class="token operator">||</span><span class="token punctuation">(</span>o<span class="token punctuation">[</span>e<span class="token punctuation">.</span>uniqueID<span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>l<span class="token operator">&amp;&amp;</span>l<span class="token operator">===</span>e<span class="token punctuation">.</span>nodeName<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>e<span class="token operator">=</span>e<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token operator">||</span>e<span class="token punctuation">;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>r<span class="token operator">=</span>i<span class="token punctuation">[</span>c<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span>r<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">===</span><span class="token constant">S</span><span class="token operator">&amp;&amp;</span>r<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">===</span>p<span class="token punctuation">)</span><span class="token keyword">return</span> a<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">=</span>r<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>i<span class="token punctuation">[</span>c<span class="token punctuation">]</span><span class="token operator">=</span>a<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token function">s</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">return</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span><span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">function</span> <span class="token function">we</span><span class="token punctuation">(</span><span class="token parameter">i</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token number">1</span><span class="token operator">&lt;</span>i<span class="token punctuation">.</span>length<span class="token operator">?</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> r<span class="token operator">=</span>i<span class="token punctuation">.</span>length<span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>r<span class="token operator">--</span><span class="token punctuation">)</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>i<span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">return</span><span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token keyword">return</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">&#125;</span><span class="token operator">:</span>i<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">&#125;</span><span class="token keyword">function</span> <span class="token function">Te</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n<span class="token punctuation">,</span>r<span class="token punctuation">,</span>i</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> o<span class="token punctuation">,</span>a<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>s<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>u<span class="token operator">=</span>e<span class="token punctuation">.</span>length<span class="token punctuation">,</span>l<span class="token operator">=</span><span class="token keyword">null</span><span class="token operator">!=</span>t<span class="token punctuation">;</span>s<span class="token operator">&lt;</span>u<span class="token punctuation">;</span>s<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">(</span>o<span class="token operator">=</span>e<span class="token punctuation">[</span>s<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>n<span class="token operator">&amp;&amp;</span><span class="token operator">!</span><span class="token function">n</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span>r<span class="token punctuation">,</span>i<span class="token punctuation">)</span><span class="token operator">||</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">,</span>l<span class="token operator">&amp;&amp;</span>t<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> a<span class="token punctuation">&#125;</span><span class="token keyword">function</span> <span class="token function">Ce</span><span class="token punctuation">(</span><span class="token parameter">d<span class="token punctuation">,</span>h<span class="token punctuation">,</span>g<span class="token punctuation">,</span>v<span class="token punctuation">,</span>y<span class="token punctuation">,</span>e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> v<span class="token operator">&amp;&amp;</span><span class="token operator">!</span>v<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>v<span class="token operator">=</span><span class="token function">Ce</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>y<span class="token operator">&amp;&amp;</span><span class="token operator">!</span>y<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>y<span class="token operator">=</span><span class="token function">Ce</span><span class="token punctuation">(</span>y<span class="token punctuation">,</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">le</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n<span class="token punctuation">,</span>r</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> i<span class="token punctuation">,</span>o<span class="token punctuation">,</span>a<span class="token punctuation">,</span>s<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>u<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>l<span class="token operator">=</span>t<span class="token punctuation">.</span>length<span class="token punctuation">,</span>c<span class="token operator">=</span>e<span class="token operator">||</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> r<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>i<span class="token operator">=</span>t<span class="token punctuation">.</span>length<span class="token punctuation">;</span>r<span class="token operator">&lt;</span>i<span class="token punctuation">;</span>r<span class="token operator">++</span><span class="token punctuation">)</span><span class="token function">se</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>t<span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> n<span class="token punctuation">&#125;</span><span class="token punctuation">(</span>h<span class="token operator">||</span><span class="token string">"*"</span><span class="token punctuation">,</span>n<span class="token punctuation">.</span>nodeType<span class="token operator">?</span><span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token operator">:</span>n<span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>f<span class="token operator">=</span><span class="token operator">!</span>d<span class="token operator">||</span><span class="token operator">!</span>e<span class="token operator">&amp;&amp;</span>h<span class="token operator">?</span>c<span class="token operator">:</span><span class="token function">Te</span><span class="token punctuation">(</span>c<span class="token punctuation">,</span>s<span class="token punctuation">,</span>d<span class="token punctuation">,</span>n<span class="token punctuation">,</span>r<span class="token punctuation">)</span><span class="token punctuation">,</span>p<span class="token operator">=</span>g<span class="token operator">?</span>y<span class="token operator">||</span><span class="token punctuation">(</span>e<span class="token operator">?</span>d<span class="token operator">:</span>l<span class="token operator">||</span>v<span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">:</span>t<span class="token operator">:</span>f<span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>g<span class="token operator">&amp;&amp;</span><span class="token function">g</span><span class="token punctuation">(</span>f<span class="token punctuation">,</span>p<span class="token punctuation">,</span>n<span class="token punctuation">,</span>r<span class="token punctuation">)</span><span class="token punctuation">,</span>v<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>i<span class="token operator">=</span><span class="token function">Te</span><span class="token punctuation">(</span>p<span class="token punctuation">,</span>u<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">v</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>n<span class="token punctuation">,</span>r<span class="token punctuation">)</span><span class="token punctuation">,</span>o<span class="token operator">=</span>i<span class="token punctuation">.</span>length<span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>o<span class="token operator">--</span><span class="token punctuation">)</span><span class="token punctuation">(</span>a<span class="token operator">=</span>i<span class="token punctuation">[</span>o<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>p<span class="token punctuation">[</span>u<span class="token punctuation">[</span>o<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token operator">!</span><span class="token punctuation">(</span>f<span class="token punctuation">[</span>u<span class="token punctuation">[</span>o<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">=</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">if</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">if</span><span class="token punctuation">(</span>y<span class="token operator">||</span>d<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">if</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>i<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>o<span class="token operator">=</span>p<span class="token punctuation">.</span>length<span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>o<span class="token operator">--</span><span class="token punctuation">)</span><span class="token punctuation">(</span>a<span class="token operator">=</span>p<span class="token punctuation">[</span>o<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span>i<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>f<span class="token punctuation">[</span>o<span class="token punctuation">]</span><span class="token operator">=</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">y</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span>p<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>i<span class="token punctuation">,</span>r<span class="token punctuation">)</span><span class="token punctuation">&#125;</span>o<span class="token operator">=</span>p<span class="token punctuation">.</span>length<span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>o<span class="token operator">--</span><span class="token punctuation">)</span><span class="token punctuation">(</span>a<span class="token operator">=</span>p<span class="token punctuation">[</span>o<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token operator">-</span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token punctuation">(</span>i<span class="token operator">=</span>y<span class="token operator">?</span><span class="token constant">P</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>a<span class="token punctuation">)</span><span class="token operator">:</span>s<span class="token punctuation">[</span>o<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>e<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">=</span><span class="token operator">!</span><span class="token punctuation">(</span>t<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">=</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">else</span> p<span class="token operator">=</span><span class="token function">Te</span><span class="token punctuation">(</span>p<span class="token operator">===</span>t<span class="token operator">?</span>p<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>l<span class="token punctuation">,</span>p<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token operator">:</span>p<span class="token punctuation">)</span><span class="token punctuation">,</span>y<span class="token operator">?</span><span class="token function">y</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span>t<span class="token punctuation">,</span>p<span class="token punctuation">,</span>r<span class="token punctuation">)</span><span class="token operator">:</span><span class="token constant">H</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span>p<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">function</span> <span class="token function">Ee</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n<span class="token punctuation">,</span>r<span class="token operator">=</span>e<span class="token punctuation">.</span>length<span class="token punctuation">,</span>o<span class="token operator">=</span>b<span class="token punctuation">.</span>relative<span class="token punctuation">[</span>e<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>type<span class="token punctuation">]</span><span class="token punctuation">,</span>a<span class="token operator">=</span>o<span class="token operator">||</span>b<span class="token punctuation">.</span>relative<span class="token punctuation">[</span><span class="token string">" "</span><span class="token punctuation">]</span><span class="token punctuation">,</span>s<span class="token operator">=</span>o<span class="token operator">?</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>u<span class="token operator">=</span><span class="token function">be</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> e<span class="token operator">===</span>i<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>a<span class="token punctuation">,</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>l<span class="token operator">=</span><span class="token function">be</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span><span class="token operator">-</span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token constant">P</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span>e<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>a<span class="token punctuation">,</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>c<span class="token operator">=</span><span class="token punctuation">[</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> r<span class="token operator">=</span><span class="token operator">!</span>o<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>n<span class="token operator">||</span>t<span class="token operator">!==</span>w<span class="token punctuation">)</span><span class="token operator">||</span><span class="token punctuation">(</span><span class="token punctuation">(</span>i<span class="token operator">=</span>t<span class="token punctuation">)</span><span class="token punctuation">.</span>nodeType<span class="token operator">?</span><span class="token function">u</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token operator">:</span><span class="token function">l</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> i<span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">,</span>r<span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>s<span class="token operator">&lt;</span>r<span class="token punctuation">;</span>s<span class="token operator">++</span><span class="token punctuation">)</span><span class="token keyword">if</span><span class="token punctuation">(</span>t<span class="token operator">=</span>b<span class="token punctuation">.</span>relative<span class="token punctuation">[</span>e<span class="token punctuation">[</span>s<span class="token punctuation">]</span><span class="token punctuation">.</span>type<span class="token punctuation">]</span><span class="token punctuation">)</span>c<span class="token operator">=</span><span class="token punctuation">[</span><span class="token function">be</span><span class="token punctuation">(</span><span class="token function">we</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">,</span>t<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>t<span class="token operator">=</span>b<span class="token punctuation">.</span>filter<span class="token punctuation">[</span>e<span class="token punctuation">[</span>s<span class="token punctuation">]</span><span class="token punctuation">.</span>type<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span>e<span class="token punctuation">[</span>s<span class="token punctuation">]</span><span class="token punctuation">.</span>matches<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">for</span><span class="token punctuation">(</span>n<span class="token operator">=</span><span class="token operator">++</span>s<span class="token punctuation">;</span>n<span class="token operator">&lt;</span>r<span class="token punctuation">;</span>n<span class="token operator">++</span><span class="token punctuation">)</span><span class="token keyword">if</span><span class="token punctuation">(</span>b<span class="token punctuation">.</span>relative<span class="token punctuation">[</span>e<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">.</span>type<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">break</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token function">Ce</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&lt;</span>s<span class="token operator">&amp;&amp;</span><span class="token function">we</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token operator">&lt;</span>s<span class="token operator">&amp;&amp;</span><span class="token function">xe</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>s<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>value<span class="token operator">:</span><span class="token string">" "</span><span class="token operator">===</span>e<span class="token punctuation">[</span>s<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span>type<span class="token operator">?</span><span class="token string">"*"</span><span class="token operator">:</span><span class="token string">""</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token constant">B</span><span class="token punctuation">,</span><span class="token string">"$1"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>t<span class="token punctuation">,</span>s<span class="token operator">&lt;</span>n<span class="token operator">&amp;&amp;</span><span class="token function">Ee</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>n<span class="token operator">&lt;</span>r<span class="token operator">&amp;&amp;</span><span class="token function">Ee</span><span class="token punctuation">(</span>e<span class="token operator">=</span>e<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>n<span class="token operator">&lt;</span>r<span class="token operator">&amp;&amp;</span><span class="token function">xe</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span>c<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> <span class="token function">we</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> me<span class="token punctuation">.</span>prototype<span class="token operator">=</span>b<span class="token punctuation">.</span>filters<span class="token operator">=</span>b<span class="token punctuation">.</span>pseudos<span class="token punctuation">,</span>b<span class="token punctuation">.</span>setFilters<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">me</span><span class="token punctuation">,</span>h<span class="token operator">=</span>se<span class="token punctuation">.</span><span class="token function-variable function">tokenize</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> n<span class="token punctuation">,</span>r<span class="token punctuation">,</span>i<span class="token punctuation">,</span>o<span class="token punctuation">,</span>a<span class="token punctuation">,</span>s<span class="token punctuation">,</span>u<span class="token punctuation">,</span>l<span class="token operator">=</span>x<span class="token punctuation">[</span>e<span class="token operator">+</span><span class="token string">" "</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>l<span class="token punctuation">)</span><span class="token keyword">return</span> t<span class="token operator">?</span><span class="token number">0</span><span class="token operator">:</span>l<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>a<span class="token operator">=</span>e<span class="token punctuation">,</span>s<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>u<span class="token operator">=</span>b<span class="token punctuation">.</span>preFilter<span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">for</span><span class="token punctuation">(</span>o <span class="token keyword">in</span> n<span class="token operator">&amp;&amp;</span><span class="token operator">!</span><span class="token punctuation">(</span>r<span class="token operator">=</span>_<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">||</span><span class="token punctuation">(</span>r<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>a<span class="token operator">=</span>a<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>r<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token operator">||</span>a<span class="token punctuation">)</span><span class="token punctuation">,</span>s<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>n<span class="token operator">=</span><span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token punctuation">(</span>r<span class="token operator">=</span>z<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>n<span class="token operator">=</span>r<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>i<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>value<span class="token operator">:</span>n<span class="token punctuation">,</span>type<span class="token operator">:</span>r<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token constant">B</span><span class="token punctuation">,</span><span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>a<span class="token operator">=</span>a<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>n<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>b<span class="token punctuation">.</span>filter<span class="token punctuation">)</span><span class="token operator">!</span><span class="token punctuation">(</span>r<span class="token operator">=</span><span class="token constant">G</span><span class="token punctuation">[</span>o<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">||</span>u<span class="token punctuation">[</span>o<span class="token punctuation">]</span><span class="token operator">&amp;&amp;</span><span class="token operator">!</span><span class="token punctuation">(</span>r<span class="token operator">=</span>u<span class="token punctuation">[</span>o<span class="token punctuation">]</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">||</span><span class="token punctuation">(</span>n<span class="token operator">=</span>r<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>i<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>value<span class="token operator">:</span>n<span class="token punctuation">,</span>type<span class="token operator">:</span>o<span class="token punctuation">,</span>matches<span class="token operator">:</span>r<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>a<span class="token operator">=</span>a<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>n<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>n<span class="token punctuation">)</span><span class="token keyword">break</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> t<span class="token operator">?</span>a<span class="token punctuation">.</span>length<span class="token operator">:</span>a<span class="token operator">?</span>se<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token operator">:</span><span class="token function">x</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>s<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>f<span class="token operator">=</span>se<span class="token punctuation">.</span><span class="token function-variable function">compile</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> n<span class="token punctuation">,</span>v<span class="token punctuation">,</span>y<span class="token punctuation">,</span>m<span class="token punctuation">,</span>x<span class="token punctuation">,</span>r<span class="token punctuation">,</span>i<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>o<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>a<span class="token operator">=</span><span class="token constant">N</span><span class="token punctuation">[</span>e<span class="token operator">+</span><span class="token string">" "</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>a<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>t<span class="token operator">||</span><span class="token punctuation">(</span>t<span class="token operator">=</span><span class="token function">h</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>n<span class="token operator">=</span>t<span class="token punctuation">.</span>length<span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>n<span class="token operator">--</span><span class="token punctuation">)</span><span class="token punctuation">(</span>a<span class="token operator">=</span><span class="token function">Ee</span><span class="token punctuation">(</span>t<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token operator">?</span>i<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token operator">:</span>o<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">(</span>a<span class="token operator">=</span><span class="token constant">N</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token punctuation">(</span>v<span class="token operator">=</span>o<span class="token punctuation">,</span>m<span class="token operator">=</span><span class="token number">0</span><span class="token operator">&lt;</span><span class="token punctuation">(</span>y<span class="token operator">=</span>i<span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">,</span>x<span class="token operator">=</span><span class="token number">0</span><span class="token operator">&lt;</span>v<span class="token punctuation">.</span>length<span class="token punctuation">,</span><span class="token function-variable function">r</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n<span class="token punctuation">,</span>r<span class="token punctuation">,</span>i</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> o<span class="token punctuation">,</span>a<span class="token punctuation">,</span>s<span class="token punctuation">,</span>u<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>l<span class="token operator">=</span><span class="token string">"0"</span><span class="token punctuation">,</span>c<span class="token operator">=</span>e<span class="token operator">&amp;&amp;</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>f<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>p<span class="token operator">=</span>w<span class="token punctuation">,</span>d<span class="token operator">=</span>e<span class="token operator">||</span>x<span class="token operator">&amp;&amp;</span>b<span class="token punctuation">.</span>find<span class="token punctuation">.</span><span class="token constant">TAG</span><span class="token punctuation">(</span><span class="token string">"*"</span><span class="token punctuation">,</span>i<span class="token punctuation">)</span><span class="token punctuation">,</span>h<span class="token operator">=</span><span class="token constant">S</span><span class="token operator">+=</span><span class="token keyword">null</span><span class="token operator">==</span>p<span class="token operator">?</span><span class="token number">1</span><span class="token operator">:</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">||</span><span class="token number">.1</span><span class="token punctuation">,</span>g<span class="token operator">=</span>d<span class="token punctuation">.</span>length<span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>w<span class="token operator">=</span>t<span class="token operator">===</span><span class="token constant">C</span><span class="token operator">||</span>t<span class="token operator">||</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>l<span class="token operator">!==</span>g<span class="token operator">&amp;&amp;</span><span class="token keyword">null</span><span class="token operator">!=</span><span class="token punctuation">(</span>o<span class="token operator">=</span>d<span class="token punctuation">[</span>l<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>l<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">if</span><span class="token punctuation">(</span>x<span class="token operator">&amp;&amp;</span>o<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>a<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>t<span class="token operator">||</span>o<span class="token punctuation">.</span>ownerDocument<span class="token operator">===</span><span class="token constant">C</span><span class="token operator">||</span><span class="token punctuation">(</span><span class="token constant">T</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">,</span>n<span class="token operator">=</span><span class="token operator">!</span><span class="token constant">E</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>s<span class="token operator">=</span>v<span class="token punctuation">[</span>a<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">s</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span>t<span class="token operator">||</span><span class="token constant">C</span><span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>r<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">break</span><span class="token punctuation">&#125;</span>i<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span><span class="token constant">S</span><span class="token operator">=</span>h<span class="token punctuation">)</span><span class="token punctuation">&#125;</span>m<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span><span class="token punctuation">(</span>o<span class="token operator">=</span><span class="token operator">!</span>s<span class="token operator">&amp;&amp;</span>o<span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span>u<span class="token operator">--</span><span class="token punctuation">,</span>e<span class="token operator">&amp;&amp;</span>c<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">if</span><span class="token punctuation">(</span>u<span class="token operator">+=</span>l<span class="token punctuation">,</span>m<span class="token operator">&amp;&amp;</span>l<span class="token operator">!==</span>u<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>a<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>s<span class="token operator">=</span>y<span class="token punctuation">[</span>a<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token function">s</span><span class="token punctuation">(</span>c<span class="token punctuation">,</span>f<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token operator">&lt;</span>u<span class="token punctuation">)</span><span class="token keyword">while</span><span class="token punctuation">(</span>l<span class="token operator">--</span><span class="token punctuation">)</span>c<span class="token punctuation">[</span>l<span class="token punctuation">]</span><span class="token operator">||</span>f<span class="token punctuation">[</span>l<span class="token punctuation">]</span><span class="token operator">||</span><span class="token punctuation">(</span>f<span class="token punctuation">[</span>l<span class="token punctuation">]</span><span class="token operator">=</span><span class="token function">q</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>f<span class="token operator">=</span><span class="token function">Te</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token constant">H</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span>f<span class="token punctuation">)</span><span class="token punctuation">,</span>i<span class="token operator">&amp;&amp;</span><span class="token operator">!</span>e<span class="token operator">&amp;&amp;</span><span class="token number">0</span><span class="token operator">&lt;</span>f<span class="token punctuation">.</span>length<span class="token operator">&amp;&amp;</span><span class="token number">1</span><span class="token operator">&lt;</span>u<span class="token operator">+</span>y<span class="token punctuation">.</span>length<span class="token operator">&amp;&amp;</span>se<span class="token punctuation">.</span><span class="token function">uniqueSort</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> i<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span><span class="token constant">S</span><span class="token operator">=</span>h<span class="token punctuation">,</span>w<span class="token operator">=</span>p<span class="token punctuation">)</span><span class="token punctuation">,</span>c<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>m<span class="token operator">?</span><span class="token function">le</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token operator">:</span>r<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>selector<span class="token operator">=</span>e<span class="token punctuation">&#125;</span><span class="token keyword">return</span> a<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>g<span class="token operator">=</span>se<span class="token punctuation">.</span><span class="token function-variable function">select</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n<span class="token punctuation">,</span>r</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> i<span class="token punctuation">,</span>o<span class="token punctuation">,</span>a<span class="token punctuation">,</span>s<span class="token punctuation">,</span>u<span class="token punctuation">,</span>l<span class="token operator">=</span><span class="token string">"function"</span><span class="token operator">==</span><span class="token keyword">typeof</span> e<span class="token operator">&amp;&amp;</span>e<span class="token punctuation">,</span>c<span class="token operator">=</span><span class="token operator">!</span>r<span class="token operator">&amp;&amp;</span><span class="token function">h</span><span class="token punctuation">(</span>e<span class="token operator">=</span>l<span class="token punctuation">.</span>selector<span class="token operator">||</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>n<span class="token operator">=</span>n<span class="token operator">||</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token operator">===</span>c<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">&lt;</span><span class="token punctuation">(</span>o<span class="token operator">=</span>c<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=</span>c<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token operator">&amp;&amp;</span><span class="token string">"ID"</span><span class="token operator">===</span><span class="token punctuation">(</span>a<span class="token operator">=</span>o<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>type<span class="token operator">&amp;&amp;</span><span class="token number">9</span><span class="token operator">===</span>t<span class="token punctuation">.</span>nodeType<span class="token operator">&amp;&amp;</span><span class="token constant">E</span><span class="token operator">&amp;&amp;</span>b<span class="token punctuation">.</span>relative<span class="token punctuation">[</span>o<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>type<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>t<span class="token operator">=</span><span class="token punctuation">(</span>b<span class="token punctuation">.</span>find<span class="token punctuation">.</span><span class="token constant">ID</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>matches<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>te<span class="token punctuation">,</span>ne<span class="token punctuation">)</span><span class="token punctuation">,</span>t<span class="token punctuation">)</span><span class="token operator">||</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">return</span> n<span class="token punctuation">;</span>l<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>t<span class="token operator">=</span>t<span class="token punctuation">.</span>parentNode<span class="token punctuation">)</span><span class="token punctuation">,</span>e<span class="token operator">=</span>e<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>o<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">&#125;</span>i<span class="token operator">=</span><span class="token constant">G</span><span class="token punctuation">.</span>needsContext<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token operator">?</span><span class="token number">0</span><span class="token operator">:</span>o<span class="token punctuation">.</span>length<span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>i<span class="token operator">--</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">if</span><span class="token punctuation">(</span>a<span class="token operator">=</span>o<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>b<span class="token punctuation">.</span>relative<span class="token punctuation">[</span>s<span class="token operator">=</span>a<span class="token punctuation">.</span>type<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">break</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>u<span class="token operator">=</span>b<span class="token punctuation">.</span>find<span class="token punctuation">[</span>s<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>r<span class="token operator">=</span><span class="token function">u</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>matches<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>te<span class="token punctuation">,</span>ne<span class="token punctuation">)</span><span class="token punctuation">,</span>ee<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>o<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>type<span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token function">ye</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span>parentNode<span class="token punctuation">)</span><span class="token operator">||</span>t<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">if</span><span class="token punctuation">(</span>o<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token operator">!</span><span class="token punctuation">(</span>e<span class="token operator">=</span>r<span class="token punctuation">.</span>length<span class="token operator">&amp;&amp;</span><span class="token function">xe</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">return</span> <span class="token constant">H</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span>r<span class="token punctuation">)</span><span class="token punctuation">,</span>n<span class="token punctuation">;</span><span class="token keyword">break</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span><span class="token punctuation">(</span>l<span class="token operator">||</span><span class="token function">f</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>c<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span>t<span class="token punctuation">,</span><span class="token operator">!</span><span class="token constant">E</span><span class="token punctuation">,</span>n<span class="token punctuation">,</span><span class="token operator">!</span>t<span class="token operator">||</span>ee<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token function">ye</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span>parentNode<span class="token punctuation">)</span><span class="token operator">||</span>t<span class="token punctuation">)</span><span class="token punctuation">,</span>n<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>d<span class="token punctuation">.</span>sortStable<span class="token operator">=</span>k<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token constant">D</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token operator">===</span>k<span class="token punctuation">,</span>d<span class="token punctuation">.</span>detectDuplicates<span class="token operator">=</span><span class="token operator">!</span><span class="token operator">!</span>l<span class="token punctuation">,</span><span class="token constant">T</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>d<span class="token punctuation">.</span>sortDetached<span class="token operator">=</span><span class="token function">ce</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token number">1</span><span class="token operator">&amp;</span>e<span class="token punctuation">.</span><span class="token function">compareDocumentPosition</span><span class="token punctuation">(</span><span class="token constant">C</span><span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"fieldset"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">ce</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> e<span class="token punctuation">.</span>innerHTML<span class="token operator">=</span><span class="token string">"&lt;a href='#'>&lt;/a>"</span><span class="token punctuation">,</span><span class="token string">"#"</span><span class="token operator">===</span>e<span class="token punctuation">.</span>firstChild<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"href"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token operator">||</span><span class="token function">fe</span><span class="token punctuation">(</span><span class="token string">"type|href|height|width"</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>n<span class="token punctuation">)</span><span class="token keyword">return</span> e<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span><span class="token string">"type"</span><span class="token operator">===</span>t<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>d<span class="token punctuation">.</span>attributes<span class="token operator">&amp;&amp;</span><span class="token function">ce</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> e<span class="token punctuation">.</span>innerHTML<span class="token operator">=</span><span class="token string">"&lt;input/>"</span><span class="token punctuation">,</span>e<span class="token punctuation">.</span>firstChild<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"value"</span><span class="token punctuation">,</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">""</span><span class="token operator">===</span>e<span class="token punctuation">.</span>firstChild<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"value"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token operator">||</span><span class="token function">fe</span><span class="token punctuation">(</span><span class="token string">"value"</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>n<span class="token operator">&amp;&amp;</span><span class="token string">"input"</span><span class="token operator">===</span>e<span class="token punctuation">.</span>nodeName<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">return</span> e<span class="token punctuation">.</span>defaultValue<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">ce</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token keyword">null</span><span class="token operator">==</span>e<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"disabled"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token operator">||</span><span class="token function">fe</span><span class="token punctuation">(</span><span class="token constant">R</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> r<span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>n<span class="token punctuation">)</span><span class="token keyword">return</span><span class="token operator">!</span><span class="token number">0</span><span class="token operator">===</span>e<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token operator">?</span>t<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token punctuation">(</span>r<span class="token operator">=</span>e<span class="token punctuation">.</span><span class="token function">getAttributeNode</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span>r<span class="token punctuation">.</span>specified<span class="token operator">?</span>r<span class="token punctuation">.</span>value<span class="token operator">:</span><span class="token keyword">null</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>se<span class="token punctuation">&#125;</span><span class="token punctuation">(</span><span class="token constant">C</span><span class="token punctuation">)</span><span class="token punctuation">;</span>k<span class="token punctuation">.</span>find<span class="token operator">=</span>h<span class="token punctuation">,</span>k<span class="token punctuation">.</span>expr<span class="token operator">=</span>h<span class="token punctuation">.</span>selectors<span class="token punctuation">,</span>k<span class="token punctuation">.</span>expr<span class="token punctuation">[</span><span class="token string">":"</span><span class="token punctuation">]</span><span class="token operator">=</span>k<span class="token punctuation">.</span>expr<span class="token punctuation">.</span>pseudos<span class="token punctuation">,</span>k<span class="token punctuation">.</span>uniqueSort<span class="token operator">=</span>k<span class="token punctuation">.</span>unique<span class="token operator">=</span>h<span class="token punctuation">.</span>uniqueSort<span class="token punctuation">,</span>k<span class="token punctuation">.</span>text<span class="token operator">=</span>h<span class="token punctuation">.</span>getText<span class="token punctuation">,</span>k<span class="token punctuation">.</span>isXMLDoc<span class="token operator">=</span>h<span class="token punctuation">.</span>isXML<span class="token punctuation">,</span>k<span class="token punctuation">.</span>contains<span class="token operator">=</span>h<span class="token punctuation">.</span>contains<span class="token punctuation">,</span>k<span class="token punctuation">.</span>escapeSelector<span class="token operator">=</span>h<span class="token punctuation">.</span>escape<span class="token punctuation">;</span><span class="token keyword">var</span> <span class="token function-variable function">T</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> r<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>i<span class="token operator">=</span><span class="token keyword">void</span> <span class="token number">0</span><span class="token operator">!==</span>n<span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span><span class="token punctuation">(</span>e<span class="token operator">=</span>e<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token number">9</span><span class="token operator">!==</span>e<span class="token punctuation">.</span>nodeType<span class="token punctuation">)</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">===</span>e<span class="token punctuation">.</span>nodeType<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">if</span><span class="token punctuation">(</span>i<span class="token operator">&amp;&amp;</span><span class="token function">k</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">break</span><span class="token punctuation">;</span>r<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> r<span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">S</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> n<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>e<span class="token punctuation">;</span>e<span class="token operator">=</span>e<span class="token punctuation">.</span>nextSibling<span class="token punctuation">)</span><span class="token number">1</span><span class="token operator">===</span>e<span class="token punctuation">.</span>nodeType<span class="token operator">&amp;&amp;</span>e<span class="token operator">!==</span>t<span class="token operator">&amp;&amp;</span>n<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> n<span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token constant">N</span><span class="token operator">=</span>k<span class="token punctuation">.</span>expr<span class="token punctuation">.</span>match<span class="token punctuation">.</span>needsContext<span class="token punctuation">;</span><span class="token keyword">function</span> <span class="token constant">A</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> e<span class="token punctuation">.</span>nodeName<span class="token operator">&amp;&amp;</span>e<span class="token punctuation">.</span>nodeName<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">===</span>t<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">var</span> <span class="token constant">D</span><span class="token operator">=</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^&lt;([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:&lt;\/\1>|)$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">;</span><span class="token keyword">function</span> <span class="token function">j</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>n<span class="token punctuation">,</span>r</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token function">m</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token operator">?</span>k<span class="token punctuation">.</span><span class="token function">grep</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span><span class="token operator">!</span><span class="token operator">!</span><span class="token function">n</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>e<span class="token punctuation">)</span><span class="token operator">!==</span>r<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token operator">:</span>n<span class="token punctuation">.</span>nodeType<span class="token operator">?</span>k<span class="token punctuation">.</span><span class="token function">grep</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> e<span class="token operator">===</span>n<span class="token operator">!==</span>r<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token string">"string"</span><span class="token operator">!=</span><span class="token keyword">typeof</span> n<span class="token operator">?</span>k<span class="token punctuation">.</span><span class="token function">grep</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span><span class="token operator">-</span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token function">i</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span>e<span class="token punctuation">)</span><span class="token operator">!==</span>r<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token operator">:</span>k<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span>e<span class="token punctuation">,</span>r<span class="token punctuation">)</span><span class="token punctuation">&#125;</span>k<span class="token punctuation">.</span><span class="token function-variable function">filter</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> r<span class="token operator">=</span>t<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">return</span> n<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>e<span class="token operator">=</span><span class="token string">":not("</span><span class="token operator">+</span>e<span class="token operator">+</span><span class="token string">")"</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token operator">===</span>t<span class="token punctuation">.</span>length<span class="token operator">&amp;&amp;</span><span class="token number">1</span><span class="token operator">===</span>r<span class="token punctuation">.</span>nodeType<span class="token operator">?</span>k<span class="token punctuation">.</span>find<span class="token punctuation">.</span><span class="token function">matchesSelector</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span>e<span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">:</span>k<span class="token punctuation">.</span>find<span class="token punctuation">.</span><span class="token function">matches</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>k<span class="token punctuation">.</span><span class="token function">grep</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token number">1</span><span class="token operator">===</span>e<span class="token punctuation">.</span>nodeType<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span>fn<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token function-variable function">find</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> t<span class="token punctuation">,</span>n<span class="token punctuation">,</span>r<span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">,</span>i<span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"string"</span><span class="token operator">!=</span><span class="token keyword">typeof</span> e<span class="token punctuation">)</span><span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">pushStack</span><span class="token punctuation">(</span><span class="token function">k</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">for</span><span class="token punctuation">(</span>t<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>t<span class="token operator">&lt;</span>r<span class="token punctuation">;</span>t<span class="token operator">++</span><span class="token punctuation">)</span><span class="token keyword">if</span><span class="token punctuation">(</span>k<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>i<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">return</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span>n<span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">pushStack</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>t<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>t<span class="token operator">&lt;</span>r<span class="token punctuation">;</span>t<span class="token operator">++</span><span class="token punctuation">)</span>k<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>i<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token number">1</span><span class="token operator">&lt;</span>r<span class="token operator">?</span>k<span class="token punctuation">.</span><span class="token function">uniqueSort</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token operator">:</span>n<span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">filter</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">pushStack</span><span class="token punctuation">(</span><span class="token function">j</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>e<span class="token operator">||</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">not</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">pushStack</span><span class="token punctuation">(</span><span class="token function">j</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>e<span class="token operator">||</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">is</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span><span class="token operator">!</span><span class="token operator">!</span><span class="token function">j</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span><span class="token string">"string"</span><span class="token operator">==</span><span class="token keyword">typeof</span> e<span class="token operator">&amp;&amp;</span><span class="token constant">N</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token operator">?</span><span class="token function">k</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token operator">:</span>e<span class="token operator">||</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">var</span> q<span class="token punctuation">,</span><span class="token constant">L</span><span class="token operator">=</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^(?:\s*(&lt;[\w\W]+>)[^>]*|#([\w-]+))$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span><span class="token punctuation">(</span>k<span class="token punctuation">.</span>fn<span class="token punctuation">.</span><span class="token function-variable function">init</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> r<span class="token punctuation">,</span>i<span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>e<span class="token punctuation">)</span><span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>n<span class="token operator">=</span>n<span class="token operator">||</span>q<span class="token punctuation">,</span><span class="token string">"string"</span><span class="token operator">==</span><span class="token keyword">typeof</span> e<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>r<span class="token operator">=</span><span class="token string">"&lt;"</span><span class="token operator">===</span>e<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">&amp;&amp;</span><span class="token string">">"</span><span class="token operator">===</span>e<span class="token punctuation">[</span>e<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">&amp;&amp;</span><span class="token number">3</span><span class="token operator">&lt;=</span>e<span class="token punctuation">.</span>length<span class="token operator">?</span><span class="token punctuation">[</span><span class="token keyword">null</span><span class="token punctuation">,</span>e<span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">]</span><span class="token operator">:</span><span class="token constant">L</span><span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">||</span><span class="token operator">!</span>r<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">&amp;&amp;</span>t<span class="token punctuation">)</span><span class="token keyword">return</span><span class="token operator">!</span>t<span class="token operator">||</span>t<span class="token punctuation">.</span>jquery<span class="token operator">?</span><span class="token punctuation">(</span>t<span class="token operator">||</span>n<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">constructor</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>r<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">if</span><span class="token punctuation">(</span>t<span class="token operator">=</span>t <span class="token keyword">instanceof</span> <span class="token class-name">k</span><span class="token operator">?</span>t<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">:</span>t<span class="token punctuation">,</span>k<span class="token punctuation">.</span><span class="token function">merge</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span><span class="token function">parseHTML</span><span class="token punctuation">(</span>r<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>t<span class="token operator">&amp;&amp;</span>t<span class="token punctuation">.</span>nodeType<span class="token operator">?</span>t<span class="token punctuation">.</span>ownerDocument<span class="token operator">||</span>t<span class="token operator">:</span><span class="token constant">E</span><span class="token punctuation">,</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token constant">D</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>r<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span>k<span class="token punctuation">.</span><span class="token function">isPlainObject</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">for</span><span class="token punctuation">(</span>r <span class="token keyword">in</span> t<span class="token punctuation">)</span><span class="token function">m</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token keyword">this</span><span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token punctuation">(</span>t<span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span>t<span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token constant">E</span><span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span>r<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=</span>i<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> e<span class="token punctuation">.</span>nodeType<span class="token operator">?</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=</span>e<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token function">m</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token operator">?</span><span class="token keyword">void</span> <span class="token number">0</span><span class="token operator">!==</span>n<span class="token punctuation">.</span>ready<span class="token operator">?</span>n<span class="token punctuation">.</span><span class="token function">ready</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token operator">:</span><span class="token function">e</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span><span class="token operator">:</span>k<span class="token punctuation">.</span><span class="token function">makeArray</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>prototype<span class="token operator">=</span>k<span class="token punctuation">.</span>fn<span class="token punctuation">,</span>q<span class="token operator">=</span><span class="token function">k</span><span class="token punctuation">(</span><span class="token constant">E</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">var</span> <span class="token constant">H</span><span class="token operator">=</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^(?:parents|prev(?:Until|All))</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span><span class="token constant">O</span><span class="token operator">=</span><span class="token punctuation">&#123;</span>children<span class="token operator">:</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>contents<span class="token operator">:</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>next<span class="token operator">:</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>prev<span class="token operator">:</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">function</span> <span class="token constant">P</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">while</span><span class="token punctuation">(</span><span class="token punctuation">(</span>e<span class="token operator">=</span>e<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token number">1</span><span class="token operator">!==</span>e<span class="token punctuation">.</span>nodeType<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> e<span class="token punctuation">&#125;</span>k<span class="token punctuation">.</span>fn<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token function-variable function">has</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> t<span class="token operator">=</span><span class="token function">k</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">,</span>n<span class="token operator">=</span>t<span class="token punctuation">.</span>length<span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> e<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>e<span class="token operator">&lt;</span>n<span class="token punctuation">;</span>e<span class="token operator">++</span><span class="token punctuation">)</span><span class="token keyword">if</span><span class="token punctuation">(</span>k<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>t<span class="token punctuation">[</span>e<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">return</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">closest</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> n<span class="token punctuation">,</span>r<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>i<span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">,</span>o<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>a<span class="token operator">=</span><span class="token string">"string"</span><span class="token operator">!=</span><span class="token keyword">typeof</span> e<span class="token operator">&amp;&amp;</span><span class="token function">k</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token constant">N</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token punctuation">;</span>r<span class="token operator">&lt;</span>i<span class="token punctuation">;</span>r<span class="token operator">++</span><span class="token punctuation">)</span><span class="token keyword">for</span><span class="token punctuation">(</span>n<span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token punctuation">;</span>n<span class="token operator">&amp;&amp;</span>n<span class="token operator">!==</span>t<span class="token punctuation">;</span>n<span class="token operator">=</span>n<span class="token punctuation">.</span>parentNode<span class="token punctuation">)</span><span class="token keyword">if</span><span class="token punctuation">(</span>n<span class="token punctuation">.</span>nodeType<span class="token operator">&lt;</span><span class="token number">11</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>a<span class="token operator">?</span><span class="token operator">-</span><span class="token number">1</span><span class="token operator">&lt;</span>a<span class="token punctuation">.</span><span class="token function">index</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token operator">:</span><span class="token number">1</span><span class="token operator">===</span>n<span class="token punctuation">.</span>nodeType<span class="token operator">&amp;&amp;</span>k<span class="token punctuation">.</span>find<span class="token punctuation">.</span><span class="token function">matchesSelector</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>o<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">break</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">pushStack</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&lt;</span>o<span class="token punctuation">.</span>length<span class="token operator">?</span>k<span class="token punctuation">.</span><span class="token function">uniqueSort</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token operator">:</span>o<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">index</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> e<span class="token operator">?</span><span class="token string">"string"</span><span class="token operator">==</span><span class="token keyword">typeof</span> e<span class="token operator">?</span><span class="token function">i</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token function">k</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token function">i</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>e<span class="token punctuation">.</span>jquery<span class="token operator">?</span>e<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">:</span>e<span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">&amp;&amp;</span><span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>parentNode<span class="token operator">?</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">first</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">prevAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token operator">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">add</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">pushStack</span><span class="token punctuation">(</span>k<span class="token punctuation">.</span><span class="token function">uniqueSort</span><span class="token punctuation">(</span>k<span class="token punctuation">.</span><span class="token function">merge</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">k</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>t<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">addBack</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token operator">==</span>e<span class="token operator">?</span><span class="token keyword">this</span><span class="token punctuation">.</span>prevObject<span class="token operator">:</span><span class="token keyword">this</span><span class="token punctuation">.</span>prevObject<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token function-variable function">parent</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> t<span class="token operator">=</span>e<span class="token punctuation">.</span>parentNode<span class="token punctuation">;</span><span class="token keyword">return</span> t<span class="token operator">&amp;&amp;</span><span class="token number">11</span><span class="token operator">!==</span>t<span class="token punctuation">.</span>nodeType<span class="token operator">?</span>t<span class="token operator">:</span><span class="token keyword">null</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">parents</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token constant">T</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token string">"parentNode"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">parentsUntil</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token constant">T</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token string">"parentNode"</span><span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">next</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token constant">P</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token string">"nextSibling"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">prev</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token constant">P</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token string">"previousSibling"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">nextAll</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token constant">T</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token string">"nextSibling"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">prevAll</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token constant">T</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token string">"previousSibling"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">nextUntil</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token constant">T</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token string">"nextSibling"</span><span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">prevUntil</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token constant">T</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token string">"previousSibling"</span><span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">siblings</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token constant">S</span><span class="token punctuation">(</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>parentNode<span class="token operator">||</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>firstChild<span class="token punctuation">,</span>e<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">children</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token constant">S</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>firstChild<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">contents</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span><span class="token string">"undefined"</span><span class="token operator">!=</span><span class="token keyword">typeof</span> e<span class="token punctuation">.</span>contentDocument<span class="token operator">?</span>e<span class="token punctuation">.</span>contentDocument<span class="token operator">:</span><span class="token punctuation">(</span><span class="token constant">A</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token string">"template"</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>e<span class="token operator">=</span>e<span class="token punctuation">.</span>content<span class="token operator">||</span>e<span class="token punctuation">)</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span><span class="token function">merge</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>e<span class="token punctuation">.</span>childNodes<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">r<span class="token punctuation">,</span>i</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>k<span class="token punctuation">.</span>fn<span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> n<span class="token operator">=</span>k<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>i<span class="token punctuation">,</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span><span class="token string">"Until"</span><span class="token operator">!==</span>r<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>t<span class="token operator">=</span>e<span class="token punctuation">)</span><span class="token punctuation">,</span>t<span class="token operator">&amp;&amp;</span><span class="token string">"string"</span><span class="token operator">==</span><span class="token keyword">typeof</span> t<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>n<span class="token operator">=</span>k<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span><span class="token constant">O</span><span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token operator">||</span>k<span class="token punctuation">.</span><span class="token function">uniqueSort</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token constant">H</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span>n<span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">pushStack</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">var</span> <span class="token constant">R</span><span class="token operator">=</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[^\x20\t\r\n\f]+</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">;</span><span class="token keyword">function</span> <span class="token constant">M</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> e<span class="token punctuation">&#125;</span><span class="token keyword">function</span> <span class="token constant">I</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">throw</span> e<span class="token punctuation">&#125;</span><span class="token keyword">function</span> <span class="token constant">W</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n<span class="token punctuation">,</span>r</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> i<span class="token punctuation">;</span><span class="token keyword">try</span><span class="token punctuation">&#123;</span>e<span class="token operator">&amp;&amp;</span><span class="token function">m</span><span class="token punctuation">(</span>i<span class="token operator">=</span>e<span class="token punctuation">.</span>promise<span class="token punctuation">)</span><span class="token operator">?</span><span class="token function">i</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">done</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fail</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token operator">:</span>e<span class="token operator">&amp;&amp;</span><span class="token function">m</span><span class="token punctuation">(</span>i<span class="token operator">=</span>e<span class="token punctuation">.</span>then<span class="token punctuation">)</span><span class="token operator">?</span><span class="token function">i</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token operator">:</span><span class="token function">t</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token punctuation">[</span>e<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">catch</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token function">n</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token punctuation">[</span>e<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>k<span class="token punctuation">.</span><span class="token function-variable function">Callbacks</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">r</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> e<span class="token punctuation">,</span>n<span class="token punctuation">;</span>r<span class="token operator">=</span><span class="token string">"string"</span><span class="token operator">==</span><span class="token keyword">typeof</span> r<span class="token operator">?</span><span class="token punctuation">(</span>e<span class="token operator">=</span>r<span class="token punctuation">,</span>n<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token constant">R</span><span class="token punctuation">)</span><span class="token operator">||</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>n<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token operator">=</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token operator">:</span>k<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>r<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">var</span> i<span class="token punctuation">,</span>t<span class="token punctuation">,</span>o<span class="token punctuation">,</span>a<span class="token punctuation">,</span>s<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>u<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>l<span class="token operator">=</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token function-variable function">c</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">for</span><span class="token punctuation">(</span>a<span class="token operator">=</span>a<span class="token operator">||</span>r<span class="token punctuation">.</span>once<span class="token punctuation">,</span>o<span class="token operator">=</span>i<span class="token operator">=</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">;</span>u<span class="token punctuation">.</span>length<span class="token punctuation">;</span>l<span class="token operator">=</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>t<span class="token operator">=</span>u<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">++</span>l<span class="token operator">&lt;</span>s<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token operator">!</span><span class="token number">1</span><span class="token operator">===</span>s<span class="token punctuation">[</span>l<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>t<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>t<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span>r<span class="token punctuation">.</span>stopOnFalse<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>l<span class="token operator">=</span>s<span class="token punctuation">.</span>length<span class="token punctuation">,</span>t<span class="token operator">=</span><span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span>r<span class="token punctuation">.</span>memory<span class="token operator">||</span><span class="token punctuation">(</span>t<span class="token operator">=</span><span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>i<span class="token operator">=</span><span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">,</span>a<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>s<span class="token operator">=</span>t<span class="token operator">?</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">:</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>f<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token function-variable function">add</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> s<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>t<span class="token operator">&amp;&amp;</span><span class="token operator">!</span>i<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>l<span class="token operator">=</span>s<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>u<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">function</span> <span class="token function">n</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>k<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token function">m</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token operator">?</span>r<span class="token punctuation">.</span>unique<span class="token operator">&amp;&amp;</span>f<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token operator">||</span>s<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token operator">:</span>t<span class="token operator">&amp;&amp;</span>t<span class="token punctuation">.</span>length<span class="token operator">&amp;&amp;</span><span class="token string">"string"</span><span class="token operator">!==</span><span class="token function">w</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token function">n</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">,</span>t<span class="token operator">&amp;&amp;</span><span class="token operator">!</span>i<span class="token operator">&amp;&amp;</span><span class="token function">c</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">remove</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> k<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span>arguments<span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> n<span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token punctuation">(</span>n<span class="token operator">=</span>k<span class="token punctuation">.</span><span class="token function">inArray</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span>s<span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>s<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>n<span class="token operator">&lt;=</span>l<span class="token operator">&amp;&amp;</span>l<span class="token operator">--</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">has</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> e<span class="token operator">?</span><span class="token operator">-</span><span class="token number">1</span><span class="token operator">&lt;</span>k<span class="token punctuation">.</span><span class="token function">inArray</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>s<span class="token punctuation">)</span><span class="token operator">:</span><span class="token number">0</span><span class="token operator">&lt;</span>s<span class="token punctuation">.</span>length<span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">empty</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> s<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>s<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">disable</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> a<span class="token operator">=</span>u<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>s<span class="token operator">=</span>t<span class="token operator">=</span><span class="token string">""</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">disabled</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span><span class="token operator">!</span>s<span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">lock</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> a<span class="token operator">=</span>u<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>t<span class="token operator">||</span>i<span class="token operator">||</span><span class="token punctuation">(</span>s<span class="token operator">=</span>t<span class="token operator">=</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">locked</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span><span class="token operator">!</span><span class="token operator">!</span>a<span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">fireWith</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> a<span class="token operator">||</span><span class="token punctuation">(</span>t<span class="token operator">=</span><span class="token punctuation">[</span>e<span class="token punctuation">,</span><span class="token punctuation">(</span>t<span class="token operator">=</span>t<span class="token operator">||</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>slice<span class="token operator">?</span>t<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span>t<span class="token punctuation">]</span><span class="token punctuation">,</span>u<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">,</span>i<span class="token operator">||</span><span class="token function">c</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">fire</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> f<span class="token punctuation">.</span><span class="token function">fireWith</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>arguments<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">fired</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span><span class="token operator">!</span><span class="token operator">!</span>o<span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">return</span> f<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token function-variable function">Deferred</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> o<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">"notify"</span><span class="token punctuation">,</span><span class="token string">"progress"</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span><span class="token function">Callbacks</span><span class="token punctuation">(</span><span class="token string">"memory"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span><span class="token function">Callbacks</span><span class="token punctuation">(</span><span class="token string">"memory"</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token string">"resolve"</span><span class="token punctuation">,</span><span class="token string">"done"</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span><span class="token function">Callbacks</span><span class="token punctuation">(</span><span class="token string">"once memory"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span><span class="token function">Callbacks</span><span class="token punctuation">(</span><span class="token string">"once memory"</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">"resolved"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token string">"reject"</span><span class="token punctuation">,</span><span class="token string">"fail"</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span><span class="token function">Callbacks</span><span class="token punctuation">(</span><span class="token string">"once memory"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span><span class="token function">Callbacks</span><span class="token punctuation">(</span><span class="token string">"once memory"</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">"rejected"</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>i<span class="token operator">=</span><span class="token string">"pending"</span><span class="token punctuation">,</span>a<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token function-variable function">state</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> i<span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">always</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> s<span class="token punctuation">.</span><span class="token function">done</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fail</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token string">"catch"</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> a<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span>e<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">pipe</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> i<span class="token operator">=</span>arguments<span class="token punctuation">;</span><span class="token keyword">return</span> k<span class="token punctuation">.</span><span class="token function">Deferred</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">r</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>k<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> n<span class="token operator">=</span><span class="token function">m</span><span class="token punctuation">(</span>i<span class="token punctuation">[</span>t<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span>i<span class="token punctuation">[</span>t<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>s<span class="token punctuation">[</span>t<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> e<span class="token operator">=</span>n<span class="token operator">&amp;&amp;</span><span class="token function">n</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>e<span class="token operator">&amp;&amp;</span><span class="token function">m</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>promise<span class="token punctuation">)</span><span class="token operator">?</span>e<span class="token punctuation">.</span><span class="token function">promise</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">progress</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>notify<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">done</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>resolve<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fail</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>reject<span class="token punctuation">)</span><span class="token operator">:</span>r<span class="token punctuation">[</span>t<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token string">"With"</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>n<span class="token operator">?</span><span class="token punctuation">[</span>e<span class="token punctuation">]</span><span class="token operator">:</span>arguments<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>i<span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">promise</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">then</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span>n<span class="token punctuation">,</span>r</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> u<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">function</span> <span class="token function">l</span><span class="token punctuation">(</span><span class="token parameter">i<span class="token punctuation">,</span>o<span class="token punctuation">,</span>a<span class="token punctuation">,</span>s</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> n<span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">,</span>r<span class="token operator">=</span>arguments<span class="token punctuation">,</span><span class="token function-variable function">e</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> e<span class="token punctuation">,</span>t<span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>i<span class="token operator">&lt;</span>u<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>e<span class="token operator">=</span><span class="token function">a</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span>r<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">===</span>o<span class="token punctuation">.</span><span class="token function">promise</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">TypeError</span><span class="token punctuation">(</span><span class="token string">"Thenable self-resolution"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>t<span class="token operator">=</span>e<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span><span class="token string">"object"</span><span class="token operator">==</span><span class="token keyword">typeof</span> e<span class="token operator">||</span><span class="token string">"function"</span><span class="token operator">==</span><span class="token keyword">typeof</span> e<span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span>e<span class="token punctuation">.</span>then<span class="token punctuation">,</span><span class="token function">m</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token operator">?</span>s<span class="token operator">?</span><span class="token function">t</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token function">l</span><span class="token punctuation">(</span>u<span class="token punctuation">,</span>o<span class="token punctuation">,</span><span class="token constant">M</span><span class="token punctuation">,</span>s<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">l</span><span class="token punctuation">(</span>u<span class="token punctuation">,</span>o<span class="token punctuation">,</span><span class="token constant">I</span><span class="token punctuation">,</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token punctuation">(</span>u<span class="token operator">++</span><span class="token punctuation">,</span><span class="token function">t</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token function">l</span><span class="token punctuation">(</span>u<span class="token punctuation">,</span>o<span class="token punctuation">,</span><span class="token constant">M</span><span class="token punctuation">,</span>s<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">l</span><span class="token punctuation">(</span>u<span class="token punctuation">,</span>o<span class="token punctuation">,</span><span class="token constant">I</span><span class="token punctuation">,</span>s<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">l</span><span class="token punctuation">(</span>u<span class="token punctuation">,</span>o<span class="token punctuation">,</span><span class="token constant">M</span><span class="token punctuation">,</span>o<span class="token punctuation">.</span>notifyWith<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token punctuation">(</span>a<span class="token operator">!==</span><span class="token constant">M</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>n<span class="token operator">=</span><span class="token keyword">void</span> <span class="token number">0</span><span class="token punctuation">,</span>r<span class="token operator">=</span><span class="token punctuation">[</span>e<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span>s<span class="token operator">||</span>o<span class="token punctuation">.</span>resolveWith<span class="token punctuation">)</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span>r<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>t<span class="token operator">=</span>s<span class="token operator">?</span><span class="token function-variable function">e</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">try</span><span class="token punctuation">&#123;</span><span class="token function">e</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">catch</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>k<span class="token punctuation">.</span>Deferred<span class="token punctuation">.</span>exceptionHook<span class="token operator">&amp;&amp;</span>k<span class="token punctuation">.</span>Deferred<span class="token punctuation">.</span><span class="token function">exceptionHook</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>t<span class="token punctuation">.</span>stackTrace<span class="token punctuation">)</span><span class="token punctuation">,</span>u<span class="token operator">&lt;=</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>a<span class="token operator">!==</span><span class="token constant">I</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>n<span class="token operator">=</span><span class="token keyword">void</span> <span class="token number">0</span><span class="token punctuation">,</span>r<span class="token operator">=</span><span class="token punctuation">[</span>e<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>o<span class="token punctuation">.</span><span class="token function">rejectWith</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span>r<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>i<span class="token operator">?</span><span class="token function">t</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token punctuation">(</span>k<span class="token punctuation">.</span>Deferred<span class="token punctuation">.</span>getStackHook<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span>stackTrace<span class="token operator">=</span>k<span class="token punctuation">.</span>Deferred<span class="token punctuation">.</span><span class="token function">getStackHook</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token constant">C</span><span class="token punctuation">.</span><span class="token function">setTimeout</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> k<span class="token punctuation">.</span><span class="token function">Deferred</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>o<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token function">l</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>e<span class="token punctuation">,</span><span class="token function">m</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token operator">?</span>r<span class="token operator">:</span><span class="token constant">M</span><span class="token punctuation">,</span>e<span class="token punctuation">.</span>notifyWith<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>o<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token function">l</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>e<span class="token punctuation">,</span><span class="token function">m</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token operator">?</span>t<span class="token operator">:</span><span class="token constant">M</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>o<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token function">l</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>e<span class="token punctuation">,</span><span class="token function">m</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token operator">?</span>n<span class="token operator">:</span><span class="token constant">I</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">promise</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">promise</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token keyword">null</span><span class="token operator">!=</span>e<span class="token operator">?</span>k<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>a<span class="token punctuation">)</span><span class="token operator">:</span>a<span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>s<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">return</span> k<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> n<span class="token operator">=</span>t<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span>r<span class="token operator">=</span>t<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>a<span class="token punctuation">[</span>t<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">=</span>n<span class="token punctuation">.</span>add<span class="token punctuation">,</span>r<span class="token operator">&amp;&amp;</span>n<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>i<span class="token operator">=</span>r<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>o<span class="token punctuation">[</span><span class="token number">3</span><span class="token operator">-</span>e<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span>disable<span class="token punctuation">,</span>o<span class="token punctuation">[</span><span class="token number">3</span><span class="token operator">-</span>e<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span>disable<span class="token punctuation">,</span>o<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span>lock<span class="token punctuation">,</span>o<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span>lock<span class="token punctuation">)</span><span class="token punctuation">,</span>n<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>t<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span>fire<span class="token punctuation">)</span><span class="token punctuation">,</span>s<span class="token punctuation">[</span>t<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> s<span class="token punctuation">[</span>t<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token string">"With"</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token operator">===</span>s<span class="token operator">?</span><span class="token keyword">void</span> <span class="token number">0</span><span class="token operator">:</span><span class="token keyword">this</span><span class="token punctuation">,</span>arguments<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>s<span class="token punctuation">[</span>t<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token string">"With"</span><span class="token punctuation">]</span><span class="token operator">=</span>n<span class="token punctuation">.</span>fireWith<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>a<span class="token punctuation">.</span><span class="token function">promise</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">,</span>e<span class="token operator">&amp;&amp;</span><span class="token function">e</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span>s<span class="token punctuation">)</span><span class="token punctuation">,</span>s<span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">when</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> n<span class="token operator">=</span>arguments<span class="token punctuation">.</span>length<span class="token punctuation">,</span>t<span class="token operator">=</span>n<span class="token punctuation">,</span>r<span class="token operator">=</span><span class="token function">Array</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">,</span>i<span class="token operator">=</span><span class="token function">s</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">,</span>o<span class="token operator">=</span>k<span class="token punctuation">.</span><span class="token function">Deferred</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function-variable function">a</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>r<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">,</span>i<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">1</span><span class="token operator">&lt;</span>arguments<span class="token punctuation">.</span>length<span class="token operator">?</span><span class="token function">s</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token operator">:</span>e<span class="token punctuation">,</span><span class="token operator">--</span>n<span class="token operator">||</span>o<span class="token punctuation">.</span><span class="token function">resolveWith</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span>i<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>n<span class="token operator">&lt;=</span><span class="token number">1</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span><span class="token constant">W</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>o<span class="token punctuation">.</span><span class="token function">done</span><span class="token punctuation">(</span><span class="token function">a</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>resolve<span class="token punctuation">,</span>o<span class="token punctuation">.</span>reject<span class="token punctuation">,</span><span class="token operator">!</span>n<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">"pending"</span><span class="token operator">===</span>o<span class="token punctuation">.</span><span class="token function">state</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">||</span><span class="token function">m</span><span class="token punctuation">(</span>i<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token operator">&amp;&amp;</span>i<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">.</span>then<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">return</span> o<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>t<span class="token operator">--</span><span class="token punctuation">)</span><span class="token constant">W</span><span class="token punctuation">(</span>i<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token function">a</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">,</span>o<span class="token punctuation">.</span>reject<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> o<span class="token punctuation">.</span><span class="token function">promise</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">var</span> $<span class="token operator">=</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>k<span class="token punctuation">.</span>Deferred<span class="token punctuation">.</span><span class="token function-variable function">exceptionHook</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token constant">C</span><span class="token punctuation">.</span>console<span class="token operator">&amp;&amp;</span><span class="token constant">C</span><span class="token punctuation">.</span>console<span class="token punctuation">.</span>warn<span class="token operator">&amp;&amp;</span>e<span class="token operator">&amp;&amp;</span>$<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token constant">C</span><span class="token punctuation">.</span>console<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span><span class="token string">"jQuery.Deferred exception: "</span><span class="token operator">+</span>e<span class="token punctuation">.</span>message<span class="token punctuation">,</span>e<span class="token punctuation">.</span>stack<span class="token punctuation">,</span>t<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span><span class="token function-variable function">readyException</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token constant">C</span><span class="token punctuation">.</span><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">throw</span> e<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">var</span> <span class="token constant">F</span><span class="token operator">=</span>k<span class="token punctuation">.</span><span class="token function">Deferred</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">function</span> <span class="token constant">B</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token constant">E</span><span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">"DOMContentLoaded"</span><span class="token punctuation">,</span><span class="token constant">B</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token constant">C</span><span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">"load"</span><span class="token punctuation">,</span><span class="token constant">B</span><span class="token punctuation">)</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span><span class="token function">ready</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span>k<span class="token punctuation">.</span>fn<span class="token punctuation">.</span><span class="token function-variable function">ready</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token constant">F</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">"catch"</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>k<span class="token punctuation">.</span><span class="token function">readyException</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>isReady<span class="token operator">:</span><span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">,</span>readyWait<span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token function-variable function">ready</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token number">0</span><span class="token operator">===</span>e<span class="token operator">?</span><span class="token operator">--</span>k<span class="token punctuation">.</span>readyWait<span class="token operator">:</span>k<span class="token punctuation">.</span>isReady<span class="token punctuation">)</span><span class="token operator">||</span><span class="token punctuation">(</span>k<span class="token punctuation">.</span>isReady<span class="token operator">=</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">!==</span>e<span class="token operator">&amp;&amp;</span><span class="token number">0</span><span class="token operator">&lt;</span><span class="token operator">--</span>k<span class="token punctuation">.</span>readyWait<span class="token operator">||</span><span class="token constant">F</span><span class="token punctuation">.</span><span class="token function">resolveWith</span><span class="token punctuation">(</span><span class="token constant">E</span><span class="token punctuation">,</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span>ready<span class="token punctuation">.</span>then<span class="token operator">=</span><span class="token constant">F</span><span class="token punctuation">.</span>then<span class="token punctuation">,</span><span class="token string">"complete"</span><span class="token operator">===</span><span class="token constant">E</span><span class="token punctuation">.</span>readyState<span class="token operator">||</span><span class="token string">"loading"</span><span class="token operator">!==</span><span class="token constant">E</span><span class="token punctuation">.</span>readyState<span class="token operator">&amp;&amp;</span><span class="token operator">!</span><span class="token constant">E</span><span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>doScroll<span class="token operator">?</span><span class="token constant">C</span><span class="token punctuation">.</span><span class="token function">setTimeout</span><span class="token punctuation">(</span>k<span class="token punctuation">.</span>ready<span class="token punctuation">)</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token constant">E</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"DOMContentLoaded"</span><span class="token punctuation">,</span><span class="token constant">B</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token constant">C</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"load"</span><span class="token punctuation">,</span><span class="token constant">B</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">var</span> <span class="token function-variable function">_</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n<span class="token punctuation">,</span>r<span class="token punctuation">,</span>i<span class="token punctuation">,</span>o<span class="token punctuation">,</span>a</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> s<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>u<span class="token operator">=</span>e<span class="token punctuation">.</span>length<span class="token punctuation">,</span>l<span class="token operator">=</span><span class="token keyword">null</span><span class="token operator">==</span>n<span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"object"</span><span class="token operator">===</span><span class="token function">w</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">for</span><span class="token punctuation">(</span>s <span class="token keyword">in</span> i<span class="token operator">=</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token function">_</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>s<span class="token punctuation">,</span>n<span class="token punctuation">[</span>s<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>o<span class="token punctuation">,</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token number">0</span><span class="token operator">!==</span>r<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token function">m</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token operator">||</span><span class="token punctuation">(</span>a<span class="token operator">=</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>l<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>a<span class="token operator">?</span><span class="token punctuation">(</span><span class="token function">t</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>r<span class="token punctuation">)</span><span class="token punctuation">,</span>t<span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token punctuation">(</span>l<span class="token operator">=</span>t<span class="token punctuation">,</span><span class="token function-variable function">t</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token function">l</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token function">k</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>t<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token punctuation">;</span>s<span class="token operator">&lt;</span>u<span class="token punctuation">;</span>s<span class="token operator">++</span><span class="token punctuation">)</span><span class="token function">t</span><span class="token punctuation">(</span>e<span class="token punctuation">[</span>s<span class="token punctuation">]</span><span class="token punctuation">,</span>n<span class="token punctuation">,</span>a<span class="token operator">?</span>r<span class="token operator">:</span><span class="token function">r</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>e<span class="token punctuation">[</span>s<span class="token punctuation">]</span><span class="token punctuation">,</span>s<span class="token punctuation">,</span><span class="token function">t</span><span class="token punctuation">(</span>e<span class="token punctuation">[</span>s<span class="token punctuation">]</span><span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> i<span class="token operator">?</span>e<span class="token operator">:</span>l<span class="token operator">?</span><span class="token function">t</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token operator">:</span>u<span class="token operator">?</span><span class="token function">t</span><span class="token punctuation">(</span>e<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token operator">:</span>o<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>z<span class="token operator">=</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^-ms-</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span><span class="token constant">U</span><span class="token operator">=</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">-([a-z])</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">;</span><span class="token keyword">function</span> <span class="token constant">X</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> t<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">function</span> <span class="token constant">V</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> e<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>z<span class="token punctuation">,</span><span class="token string">"ms-"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token constant">U</span><span class="token punctuation">,</span><span class="token constant">X</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">var</span> <span class="token function-variable function">G</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token number">1</span><span class="token operator">===</span>e<span class="token punctuation">.</span>nodeType<span class="token operator">||</span><span class="token number">9</span><span class="token operator">===</span>e<span class="token punctuation">.</span>nodeType<span class="token operator">||</span><span class="token operator">!</span><span class="token operator">+</span>e<span class="token punctuation">.</span>nodeType<span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">function</span> <span class="token constant">Y</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>expando<span class="token operator">=</span>k<span class="token punctuation">.</span>expando<span class="token operator">+</span><span class="token constant">Y</span><span class="token punctuation">.</span>uid<span class="token operator">++</span><span class="token punctuation">&#125;</span><span class="token constant">Y</span><span class="token punctuation">.</span>uid<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token class-name">Y</span><span class="token punctuation">.</span>prototype<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token function-variable function">cache</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> t<span class="token operator">=</span>e<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>expando<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">return</span> t<span class="token operator">||</span><span class="token punctuation">(</span>t<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token constant">G</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>nodeType<span class="token operator">?</span>e<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>expando<span class="token punctuation">]</span><span class="token operator">=</span>t<span class="token operator">:</span>Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>expando<span class="token punctuation">,</span><span class="token punctuation">&#123;</span>value<span class="token operator">:</span>t<span class="token punctuation">,</span>configurable<span class="token operator">:</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>t<span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">set</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> r<span class="token punctuation">,</span>i<span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">cache</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"string"</span><span class="token operator">==</span><span class="token keyword">typeof</span> t<span class="token punctuation">)</span>i<span class="token punctuation">[</span><span class="token constant">V</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">=</span>n<span class="token punctuation">;</span><span class="token keyword">else</span> <span class="token keyword">for</span><span class="token punctuation">(</span>r <span class="token keyword">in</span> t<span class="token punctuation">)</span>i<span class="token punctuation">[</span><span class="token constant">V</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">=</span>t<span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">return</span> i<span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">get</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token keyword">void</span> <span class="token number">0</span><span class="token operator">===</span>t<span class="token operator">?</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">cache</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token operator">:</span>e<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>expando<span class="token punctuation">]</span><span class="token operator">&amp;&amp;</span>e<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>expando<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token constant">V</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">access</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token keyword">void</span> <span class="token number">0</span><span class="token operator">===</span>t<span class="token operator">||</span>t<span class="token operator">&amp;&amp;</span><span class="token string">"string"</span><span class="token operator">==</span><span class="token keyword">typeof</span> t<span class="token operator">&amp;&amp;</span><span class="token keyword">void</span> <span class="token number">0</span><span class="token operator">===</span>n<span class="token operator">?</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>t<span class="token punctuation">)</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">void</span> <span class="token number">0</span><span class="token operator">!==</span>n<span class="token operator">?</span>n<span class="token operator">:</span>t<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">remove</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> n<span class="token punctuation">,</span>r<span class="token operator">=</span>e<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>expando<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token number">0</span><span class="token operator">!==</span>r<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token number">0</span><span class="token operator">!==</span>t<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>n<span class="token operator">=</span><span class="token punctuation">(</span>t<span class="token operator">=</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token operator">?</span>t<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token constant">V</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token punctuation">(</span>t<span class="token operator">=</span><span class="token constant">V</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">in</span> r<span class="token operator">?</span><span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token operator">:</span>t<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token constant">R</span><span class="token punctuation">)</span><span class="token operator">||</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>n<span class="token operator">--</span><span class="token punctuation">)</span><span class="token keyword">delete</span> r<span class="token punctuation">[</span>t<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">&#125;</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token number">0</span><span class="token operator">===</span>t<span class="token operator">||</span>k<span class="token punctuation">.</span><span class="token function">isEmptyObject</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>nodeType<span class="token operator">?</span>e<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>expando<span class="token punctuation">]</span><span class="token operator">=</span><span class="token keyword">void</span> <span class="token number">0</span><span class="token operator">:</span><span class="token keyword">delete</span> e<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>expando<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">hasData</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> t<span class="token operator">=</span>e<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>expando<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token keyword">void</span> <span class="token number">0</span><span class="token operator">!==</span>t<span class="token operator">&amp;&amp;</span><span class="token operator">!</span>k<span class="token punctuation">.</span><span class="token function">isEmptyObject</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">var</span> <span class="token constant">Q</span><span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Y</span><span class="token punctuation">,</span><span class="token constant">J</span><span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Y</span><span class="token punctuation">,</span><span class="token constant">K</span><span class="token operator">=</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^(?:\&#123;[\w\W]*\&#125;|\[[\w\W]*\])$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span><span class="token constant">Z</span><span class="token operator">=</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[A-Z]</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">;</span><span class="token keyword">function</span> <span class="token function">ee</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> r<span class="token punctuation">,</span>i<span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token number">0</span><span class="token operator">===</span>n<span class="token operator">&amp;&amp;</span><span class="token number">1</span><span class="token operator">===</span>e<span class="token punctuation">.</span>nodeType<span class="token punctuation">)</span><span class="token keyword">if</span><span class="token punctuation">(</span>r<span class="token operator">=</span><span class="token string">"data-"</span><span class="token operator">+</span>t<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token constant">Z</span><span class="token punctuation">,</span><span class="token string">"-$&amp;"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">"string"</span><span class="token operator">==</span><span class="token keyword">typeof</span><span class="token punctuation">(</span>n<span class="token operator">=</span>e<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">try</span><span class="token punctuation">&#123;</span>n<span class="token operator">=</span><span class="token string">"true"</span><span class="token operator">===</span><span class="token punctuation">(</span>i<span class="token operator">=</span>n<span class="token punctuation">)</span><span class="token operator">||</span><span class="token string">"false"</span><span class="token operator">!==</span>i<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span><span class="token string">"null"</span><span class="token operator">===</span>i<span class="token operator">?</span><span class="token keyword">null</span><span class="token operator">:</span>i<span class="token operator">===</span><span class="token operator">+</span>i<span class="token operator">+</span><span class="token string">""</span><span class="token operator">?</span><span class="token operator">+</span>i<span class="token operator">:</span><span class="token constant">K</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token operator">?</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token operator">:</span>i<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">catch</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token constant">J</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">else</span> n<span class="token operator">=</span><span class="token keyword">void</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">return</span> n<span class="token punctuation">&#125;</span>k<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token function-variable function">hasData</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token constant">J</span><span class="token punctuation">.</span><span class="token function">hasData</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token operator">||</span><span class="token constant">Q</span><span class="token punctuation">.</span><span class="token function">hasData</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">data</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token constant">J</span><span class="token punctuation">.</span><span class="token function">access</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">removeData</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token constant">J</span><span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>t<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">_data</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token constant">Q</span><span class="token punctuation">.</span><span class="token function">access</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">_removeData</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token constant">Q</span><span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>t<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span>fn<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token function-variable function">data</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">n<span class="token punctuation">,</span>e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> t<span class="token punctuation">,</span>r<span class="token punctuation">,</span>i<span class="token punctuation">,</span>o<span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>a<span class="token operator">=</span>o<span class="token operator">&amp;&amp;</span>o<span class="token punctuation">.</span>attributes<span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token number">0</span><span class="token operator">===</span>n<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token constant">J</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token operator">===</span>o<span class="token punctuation">.</span>nodeType<span class="token operator">&amp;&amp;</span><span class="token operator">!</span><span class="token constant">Q</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span><span class="token string">"hasDataAttrs"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>t<span class="token operator">=</span>a<span class="token punctuation">.</span>length<span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>t<span class="token operator">--</span><span class="token punctuation">)</span>a<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token operator">&amp;&amp;</span><span class="token number">0</span><span class="token operator">===</span><span class="token punctuation">(</span>r<span class="token operator">=</span>a<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">"data-"</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>r<span class="token operator">=</span><span class="token constant">V</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">ee</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span>r<span class="token punctuation">,</span>i<span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token constant">Q</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span><span class="token string">"hasDataAttrs"</span><span class="token punctuation">,</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> i<span class="token punctuation">&#125;</span><span class="token keyword">return</span><span class="token string">"object"</span><span class="token operator">==</span><span class="token keyword">typeof</span> n<span class="token operator">?</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token constant">J</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token function">_</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> t<span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>o<span class="token operator">&amp;&amp;</span><span class="token keyword">void</span> <span class="token number">0</span><span class="token operator">===</span>e<span class="token punctuation">)</span><span class="token keyword">return</span> <span class="token keyword">void</span> <span class="token number">0</span><span class="token operator">!==</span><span class="token punctuation">(</span>t<span class="token operator">=</span><span class="token constant">J</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">?</span>t<span class="token operator">:</span><span class="token keyword">void</span> <span class="token number">0</span><span class="token operator">!==</span><span class="token punctuation">(</span>t<span class="token operator">=</span><span class="token function">ee</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">?</span>t<span class="token operator">:</span><span class="token keyword">void</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token constant">J</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>n<span class="token punctuation">,</span>e<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">,</span>e<span class="token punctuation">,</span><span class="token number">1</span><span class="token operator">&lt;</span>arguments<span class="token punctuation">.</span>length<span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">,</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">removeData</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token constant">J</span><span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>e<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token function-variable function">queue</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> r<span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token keyword">return</span> t<span class="token operator">=</span><span class="token punctuation">(</span>t<span class="token operator">||</span><span class="token string">"fx"</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"queue"</span><span class="token punctuation">,</span>r<span class="token operator">=</span><span class="token constant">Q</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>t<span class="token punctuation">)</span><span class="token punctuation">,</span>n<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span><span class="token operator">!</span>r<span class="token operator">||</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token operator">?</span>r<span class="token operator">=</span><span class="token constant">Q</span><span class="token punctuation">.</span><span class="token function">access</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>k<span class="token punctuation">.</span><span class="token function">makeArray</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">:</span>r<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>r<span class="token operator">||</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">dequeue</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>t<span class="token operator">=</span>t<span class="token operator">||</span><span class="token string">"fx"</span><span class="token punctuation">;</span><span class="token keyword">var</span> n<span class="token operator">=</span>k<span class="token punctuation">.</span><span class="token function">queue</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>t<span class="token punctuation">)</span><span class="token punctuation">,</span>r<span class="token operator">=</span>n<span class="token punctuation">.</span>length<span class="token punctuation">,</span>i<span class="token operator">=</span>n<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>o<span class="token operator">=</span>k<span class="token punctuation">.</span><span class="token function">_queueHooks</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token string">"inprogress"</span><span class="token operator">===</span>i<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>i<span class="token operator">=</span>n<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>r<span class="token operator">--</span><span class="token punctuation">)</span><span class="token punctuation">,</span>i<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span><span class="token string">"fx"</span><span class="token operator">===</span>t<span class="token operator">&amp;&amp;</span>n<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span><span class="token string">"inprogress"</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">delete</span> o<span class="token punctuation">.</span>stop<span class="token punctuation">,</span><span class="token function">i</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>k<span class="token punctuation">.</span><span class="token function">dequeue</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>t<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>o<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token operator">!</span>r<span class="token operator">&amp;&amp;</span>o<span class="token operator">&amp;&amp;</span>o<span class="token punctuation">.</span>empty<span class="token punctuation">.</span><span class="token function">fire</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">_queueHooks</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> n<span class="token operator">=</span>t<span class="token operator">+</span><span class="token string">"queueHooks"</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token constant">Q</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token operator">||</span><span class="token constant">Q</span><span class="token punctuation">.</span><span class="token function">access</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>n<span class="token punctuation">,</span><span class="token punctuation">&#123;</span>empty<span class="token operator">:</span>k<span class="token punctuation">.</span><span class="token function">Callbacks</span><span class="token punctuation">(</span><span class="token string">"once memory"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token constant">Q</span><span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token punctuation">[</span>t<span class="token operator">+</span><span class="token string">"queue"</span><span class="token punctuation">,</span>n<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span>fn<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token function-variable function">queue</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span>n</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> e<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">;</span><span class="token keyword">return</span><span class="token string">"string"</span><span class="token operator">!=</span><span class="token keyword">typeof</span> t<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>n<span class="token operator">=</span>t<span class="token punctuation">,</span>t<span class="token operator">=</span><span class="token string">"fx"</span><span class="token punctuation">,</span>e<span class="token operator">--</span><span class="token punctuation">)</span><span class="token punctuation">,</span>arguments<span class="token punctuation">.</span>length<span class="token operator">&lt;</span>e<span class="token operator">?</span>k<span class="token punctuation">.</span><span class="token function">queue</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>t<span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">void</span> <span class="token number">0</span><span class="token operator">===</span>n<span class="token operator">?</span><span class="token keyword">this</span><span class="token operator">:</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> e<span class="token operator">=</span>k<span class="token punctuation">.</span><span class="token function">queue</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>t<span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>k<span class="token punctuation">.</span><span class="token function">_queueHooks</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>t<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">"fx"</span><span class="token operator">===</span>t<span class="token operator">&amp;&amp;</span><span class="token string">"inprogress"</span><span class="token operator">!==</span>e<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">&amp;&amp;</span>k<span class="token punctuation">.</span><span class="token function">dequeue</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>t<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">dequeue</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>k<span class="token punctuation">.</span><span class="token function">dequeue</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>e<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">clearQueue</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">queue</span><span class="token punctuation">(</span>e<span class="token operator">||</span><span class="token string">"fx"</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">promise</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> n<span class="token punctuation">,</span>r<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span>i<span class="token operator">=</span>k<span class="token punctuation">.</span><span class="token function">Deferred</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>o<span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">,</span>a<span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">,</span><span class="token function-variable function">s</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token operator">--</span>r<span class="token operator">||</span>i<span class="token punctuation">.</span><span class="token function">resolveWith</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span><span class="token punctuation">[</span>o<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token string">"string"</span><span class="token operator">!=</span><span class="token keyword">typeof</span> e<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>t<span class="token operator">=</span>e<span class="token punctuation">,</span>e<span class="token operator">=</span><span class="token keyword">void</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>e<span class="token operator">=</span>e<span class="token operator">||</span><span class="token string">"fx"</span><span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>a<span class="token operator">--</span><span class="token punctuation">)</span><span class="token punctuation">(</span>n<span class="token operator">=</span><span class="token constant">Q</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>o<span class="token punctuation">[</span>a<span class="token punctuation">]</span><span class="token punctuation">,</span>e<span class="token operator">+</span><span class="token string">"queueHooks"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span>n<span class="token punctuation">.</span>empty<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>r<span class="token operator">++</span><span class="token punctuation">,</span>n<span class="token punctuation">.</span>empty<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token function">s</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>i<span class="token punctuation">.</span><span class="token function">promise</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">var</span> te<span class="token operator">=</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span>source<span class="token punctuation">,</span>ne<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">"^(?:([+-])=|)("</span><span class="token operator">+</span>te<span class="token operator">+</span><span class="token string">")([a-z%]*)$"</span><span class="token punctuation">,</span><span class="token string">"i"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>re<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">"Top"</span><span class="token punctuation">,</span><span class="token string">"Right"</span><span class="token punctuation">,</span><span class="token string">"Bottom"</span><span class="token punctuation">,</span><span class="token string">"Left"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>ie<span class="token operator">=</span><span class="token constant">E</span><span class="token punctuation">.</span>documentElement<span class="token punctuation">,</span><span class="token function-variable function">oe</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> k<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>ownerDocument<span class="token punctuation">,</span>e<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>ae<span class="token operator">=</span><span class="token punctuation">&#123;</span>composed<span class="token operator">:</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>ie<span class="token punctuation">.</span>getRootNode<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span><span class="token function-variable function">oe</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> k<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>ownerDocument<span class="token punctuation">,</span>e<span class="token punctuation">)</span><span class="token operator">||</span>e<span class="token punctuation">.</span><span class="token function">getRootNode</span><span class="token punctuation">(</span>ae<span class="token punctuation">)</span><span class="token operator">===</span>e<span class="token punctuation">.</span>ownerDocument<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">var</span> <span class="token function-variable function">se</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span><span class="token string">"none"</span><span class="token operator">===</span><span class="token punctuation">(</span>e<span class="token operator">=</span>t<span class="token operator">||</span>e<span class="token punctuation">)</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>display<span class="token operator">||</span><span class="token string">""</span><span class="token operator">===</span>e<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display<span class="token operator">&amp;&amp;</span><span class="token function">oe</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token string">"none"</span><span class="token operator">===</span>k<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token string">"display"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">ue</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n<span class="token punctuation">,</span>r</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> i<span class="token punctuation">,</span>o<span class="token punctuation">,</span>a<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span>o <span class="token keyword">in</span> t<span class="token punctuation">)</span>a<span class="token punctuation">[</span>o<span class="token punctuation">]</span><span class="token operator">=</span>e<span class="token punctuation">.</span>style<span class="token punctuation">[</span>o<span class="token punctuation">]</span><span class="token punctuation">,</span>e<span class="token punctuation">.</span>style<span class="token punctuation">[</span>o<span class="token punctuation">]</span><span class="token operator">=</span>t<span class="token punctuation">[</span>o<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span>o <span class="token keyword">in</span> i<span class="token operator">=</span><span class="token function">n</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>r<span class="token operator">||</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>t<span class="token punctuation">)</span>e<span class="token punctuation">.</span>style<span class="token punctuation">[</span>o<span class="token punctuation">]</span><span class="token operator">=</span>a<span class="token punctuation">[</span>o<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">return</span> i<span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">function</span> <span class="token function">le</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n<span class="token punctuation">,</span>r</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> i<span class="token punctuation">,</span>o<span class="token punctuation">,</span>a<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">,</span>s<span class="token operator">=</span>r<span class="token operator">?</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> r<span class="token punctuation">.</span><span class="token function">cur</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> k<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>t<span class="token punctuation">,</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>u<span class="token operator">=</span><span class="token function">s</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>l<span class="token operator">=</span>n<span class="token operator">&amp;&amp;</span>n<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token operator">||</span><span class="token punctuation">(</span>k<span class="token punctuation">.</span>cssNumber<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token operator">?</span><span class="token string">""</span><span class="token operator">:</span><span class="token string">"px"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>c<span class="token operator">=</span>e<span class="token punctuation">.</span>nodeType<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>k<span class="token punctuation">.</span>cssNumber<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token operator">||</span><span class="token string">"px"</span><span class="token operator">!==</span>l<span class="token operator">&amp;&amp;</span><span class="token operator">+</span>u<span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span>ne<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>k<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>t<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>c<span class="token operator">&amp;&amp;</span>c<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token operator">!==</span>l<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>u<span class="token operator">/=</span><span class="token number">2</span><span class="token punctuation">,</span>l<span class="token operator">=</span>l<span class="token operator">||</span>c<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span>c<span class="token operator">=</span><span class="token operator">+</span>u<span class="token operator">||</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>a<span class="token operator">--</span><span class="token punctuation">)</span>k<span class="token punctuation">.</span><span class="token function">style</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>c<span class="token operator">+</span>l<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">-</span>o<span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">-</span><span class="token punctuation">(</span>o<span class="token operator">=</span><span class="token function">s</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">/</span>u<span class="token operator">||</span><span class="token number">.5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&lt;=</span><span class="token number">0</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>a<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>c<span class="token operator">/=</span>o<span class="token punctuation">;</span>c<span class="token operator">*=</span><span class="token number">2</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span><span class="token function">style</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>c<span class="token operator">+</span>l<span class="token punctuation">)</span><span class="token punctuation">,</span>n<span class="token operator">=</span>n<span class="token operator">||</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> n<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>c<span class="token operator">=</span><span class="token operator">+</span>c<span class="token operator">||</span><span class="token operator">+</span>u<span class="token operator">||</span><span class="token number">0</span><span class="token punctuation">,</span>i<span class="token operator">=</span>n<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">?</span>c<span class="token operator">+</span><span class="token punctuation">(</span>n<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">*</span>n<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">:</span><span class="token operator">+</span>n<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span>r<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>unit<span class="token operator">=</span>l<span class="token punctuation">,</span>r<span class="token punctuation">.</span>start<span class="token operator">=</span>c<span class="token punctuation">,</span>r<span class="token punctuation">.</span>end<span class="token operator">=</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>i<span class="token punctuation">&#125;</span><span class="token keyword">var</span> ce<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">function</span> <span class="token function">fe</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> n<span class="token punctuation">,</span>r<span class="token punctuation">,</span>i<span class="token punctuation">,</span>o<span class="token punctuation">,</span>a<span class="token punctuation">,</span>s<span class="token punctuation">,</span>u<span class="token punctuation">,</span>l<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>c<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>f<span class="token operator">=</span>e<span class="token punctuation">.</span>length<span class="token punctuation">;</span>c<span class="token operator">&lt;</span>f<span class="token punctuation">;</span>c<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">(</span>r<span class="token operator">=</span>e<span class="token punctuation">[</span>c<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>style<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>n<span class="token operator">=</span>r<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display<span class="token punctuation">,</span>t<span class="token operator">?</span><span class="token punctuation">(</span><span class="token string">"none"</span><span class="token operator">===</span>n<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>l<span class="token punctuation">[</span>c<span class="token punctuation">]</span><span class="token operator">=</span><span class="token constant">Q</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span><span class="token string">"display"</span><span class="token punctuation">)</span><span class="token operator">||</span><span class="token keyword">null</span><span class="token punctuation">,</span>l<span class="token punctuation">[</span>c<span class="token punctuation">]</span><span class="token operator">||</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display<span class="token operator">=</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">""</span><span class="token operator">===</span>r<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display<span class="token operator">&amp;&amp;</span><span class="token function">se</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>l<span class="token punctuation">[</span>c<span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">(</span>u<span class="token operator">=</span>a<span class="token operator">=</span>o<span class="token operator">=</span><span class="token keyword">void</span> <span class="token number">0</span><span class="token punctuation">,</span>a<span class="token operator">=</span><span class="token punctuation">(</span>i<span class="token operator">=</span>r<span class="token punctuation">)</span><span class="token punctuation">.</span>ownerDocument<span class="token punctuation">,</span>s<span class="token operator">=</span>i<span class="token punctuation">.</span>nodeName<span class="token punctuation">,</span><span class="token punctuation">(</span>u<span class="token operator">=</span>ce<span class="token punctuation">[</span>s<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">||</span><span class="token punctuation">(</span>o<span class="token operator">=</span>a<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>u<span class="token operator">=</span>k<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span><span class="token string">"display"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>o<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">"none"</span><span class="token operator">===</span>u<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>u<span class="token operator">=</span><span class="token string">"block"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>ce<span class="token punctuation">[</span>s<span class="token punctuation">]</span><span class="token operator">=</span>u<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token string">"none"</span><span class="token operator">!==</span>n<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>l<span class="token punctuation">[</span>c<span class="token punctuation">]</span><span class="token operator">=</span><span class="token string">"none"</span><span class="token punctuation">,</span><span class="token constant">Q</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span><span class="token string">"display"</span><span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span>c<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>c<span class="token operator">&lt;</span>f<span class="token punctuation">;</span>c<span class="token operator">++</span><span class="token punctuation">)</span><span class="token keyword">null</span><span class="token operator">!=</span>l<span class="token punctuation">[</span>c<span class="token punctuation">]</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>e<span class="token punctuation">[</span>c<span class="token punctuation">]</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>display<span class="token operator">=</span>l<span class="token punctuation">[</span>c<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> e<span class="token punctuation">&#125;</span>k<span class="token punctuation">.</span>fn<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token function-variable function">show</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token function">fe</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">hide</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token function">fe</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">toggle</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span><span class="token string">"boolean"</span><span class="token operator">==</span><span class="token keyword">typeof</span> e<span class="token operator">?</span>e<span class="token operator">?</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token function">se</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token function">k</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token function">k</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">var</span> pe<span class="token operator">=</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^(?:checkbox|radio)$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>de<span class="token operator">=</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&lt;([a-z][^\/\0>\x20\t\r\n\f]*)</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>he<span class="token operator">=</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^$|^module$|\/(?:java|ecma)script</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>ge<span class="token operator">=</span><span class="token punctuation">&#123;</span>option<span class="token operator">:</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">"&lt;select multiple='multiple'>"</span><span class="token punctuation">,</span><span class="token string">"&lt;/select>"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>thead<span class="token operator">:</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">"&lt;table>"</span><span class="token punctuation">,</span><span class="token string">"&lt;/table>"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>col<span class="token operator">:</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">"&lt;table>&lt;colgroup>"</span><span class="token punctuation">,</span><span class="token string">"&lt;/colgroup>&lt;/table>"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>tr<span class="token operator">:</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">"&lt;table>&lt;tbody>"</span><span class="token punctuation">,</span><span class="token string">"&lt;/tbody>&lt;/table>"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>td<span class="token operator">:</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token string">"&lt;table>&lt;tbody>&lt;tr>"</span><span class="token punctuation">,</span><span class="token string">"&lt;/tr>&lt;/tbody>&lt;/table>"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>_default<span class="token operator">:</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">""</span><span class="token punctuation">,</span><span class="token string">""</span><span class="token punctuation">]</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">function</span> <span class="token function">ve</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> n<span class="token punctuation">;</span><span class="token keyword">return</span> n<span class="token operator">=</span><span class="token string">"undefined"</span><span class="token operator">!=</span><span class="token keyword">typeof</span> e<span class="token punctuation">.</span>getElementsByTagName<span class="token operator">?</span>e<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span>t<span class="token operator">||</span><span class="token string">"*"</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token string">"undefined"</span><span class="token operator">!=</span><span class="token keyword">typeof</span> e<span class="token punctuation">.</span>querySelectorAll<span class="token operator">?</span>e<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span>t<span class="token operator">||</span><span class="token string">"*"</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token keyword">void</span> <span class="token number">0</span><span class="token operator">===</span>t<span class="token operator">||</span>t<span class="token operator">&amp;&amp;</span><span class="token constant">A</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>t<span class="token punctuation">)</span><span class="token operator">?</span>k<span class="token punctuation">.</span><span class="token function">merge</span><span class="token punctuation">(</span><span class="token punctuation">[</span>e<span class="token punctuation">]</span><span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token operator">:</span>n<span class="token punctuation">&#125;</span><span class="token keyword">function</span> <span class="token function">ye</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> n<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>r<span class="token operator">=</span>e<span class="token punctuation">.</span>length<span class="token punctuation">;</span>n<span class="token operator">&lt;</span>r<span class="token punctuation">;</span>n<span class="token operator">++</span><span class="token punctuation">)</span><span class="token constant">Q</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>e<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string">"globalEval"</span><span class="token punctuation">,</span><span class="token operator">!</span>t<span class="token operator">||</span><span class="token constant">Q</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>t<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string">"globalEval"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span>ge<span class="token punctuation">.</span>optgroup<span class="token operator">=</span>ge<span class="token punctuation">.</span>option<span class="token punctuation">,</span>ge<span class="token punctuation">.</span>tbody<span class="token operator">=</span>ge<span class="token punctuation">.</span>tfoot<span class="token operator">=</span>ge<span class="token punctuation">.</span>colgroup<span class="token operator">=</span>ge<span class="token punctuation">.</span>caption<span class="token operator">=</span>ge<span class="token punctuation">.</span>thead<span class="token punctuation">,</span>ge<span class="token punctuation">.</span>th<span class="token operator">=</span>ge<span class="token punctuation">.</span>td<span class="token punctuation">;</span><span class="token keyword">var</span> me<span class="token punctuation">,</span>xe<span class="token punctuation">,</span>be<span class="token operator">=</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&lt;|&amp;#?\w+;</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span><span class="token keyword">function</span> <span class="token function">we</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n<span class="token punctuation">,</span>r<span class="token punctuation">,</span>i</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> o<span class="token punctuation">,</span>a<span class="token punctuation">,</span>s<span class="token punctuation">,</span>u<span class="token punctuation">,</span>l<span class="token punctuation">,</span>c<span class="token punctuation">,</span>f<span class="token operator">=</span>t<span class="token punctuation">.</span><span class="token function">createDocumentFragment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>p<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>d<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>h<span class="token operator">=</span>e<span class="token punctuation">.</span>length<span class="token punctuation">;</span>d<span class="token operator">&lt;</span>h<span class="token punctuation">;</span>d<span class="token operator">++</span><span class="token punctuation">)</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>o<span class="token operator">=</span>e<span class="token punctuation">[</span>d<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">||</span><span class="token number">0</span><span class="token operator">===</span>o<span class="token punctuation">)</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"object"</span><span class="token operator">===</span><span class="token function">w</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">)</span>k<span class="token punctuation">.</span><span class="token function">merge</span><span class="token punctuation">(</span>p<span class="token punctuation">,</span>o<span class="token punctuation">.</span>nodeType<span class="token operator">?</span><span class="token punctuation">[</span>o<span class="token punctuation">]</span><span class="token operator">:</span>o<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>be<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>a<span class="token operator">=</span>a<span class="token operator">||</span>f<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"div"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>s<span class="token operator">=</span><span class="token punctuation">(</span>de<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token operator">||</span><span class="token punctuation">[</span><span class="token string">""</span><span class="token punctuation">,</span><span class="token string">""</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>u<span class="token operator">=</span>ge<span class="token punctuation">[</span>s<span class="token punctuation">]</span><span class="token operator">||</span>ge<span class="token punctuation">.</span>_default<span class="token punctuation">,</span>a<span class="token punctuation">.</span>innerHTML<span class="token operator">=</span>u<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">+</span>k<span class="token punctuation">.</span><span class="token function">htmlPrefilter</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token operator">+</span>u<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span>c<span class="token operator">=</span>u<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>c<span class="token operator">--</span><span class="token punctuation">)</span>a<span class="token operator">=</span>a<span class="token punctuation">.</span>lastChild<span class="token punctuation">;</span>k<span class="token punctuation">.</span><span class="token function">merge</span><span class="token punctuation">(</span>p<span class="token punctuation">,</span>a<span class="token punctuation">.</span>childNodes<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span>a<span class="token operator">=</span>f<span class="token punctuation">.</span>firstChild<span class="token punctuation">)</span><span class="token punctuation">.</span>textContent<span class="token operator">=</span><span class="token string">""</span><span class="token punctuation">&#125;</span><span class="token keyword">else</span> p<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span><span class="token function">createTextNode</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>f<span class="token punctuation">.</span>textContent<span class="token operator">=</span><span class="token string">""</span><span class="token punctuation">,</span>d<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>o<span class="token operator">=</span>p<span class="token punctuation">[</span>d<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">if</span><span class="token punctuation">(</span>r<span class="token operator">&amp;&amp;</span><span class="token operator">-</span><span class="token number">1</span><span class="token operator">&lt;</span>k<span class="token punctuation">.</span><span class="token function">inArray</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span>r<span class="token punctuation">)</span><span class="token punctuation">)</span>i<span class="token operator">&amp;&amp;</span>i<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>l<span class="token operator">=</span><span class="token function">oe</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">,</span>a<span class="token operator">=</span><span class="token function">ve</span><span class="token punctuation">(</span>f<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">"script"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>l<span class="token operator">&amp;&amp;</span><span class="token function">ye</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>c<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>o<span class="token operator">=</span>a<span class="token punctuation">[</span>c<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">)</span>he<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>o<span class="token punctuation">.</span>type<span class="token operator">||</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span>n<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> f<span class="token punctuation">&#125;</span>me<span class="token operator">=</span><span class="token constant">E</span><span class="token punctuation">.</span><span class="token function">createDocumentFragment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span><span class="token constant">E</span><span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"div"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span>xe<span class="token operator">=</span><span class="token constant">E</span><span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"input"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"type"</span><span class="token punctuation">,</span><span class="token string">"radio"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>xe<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"checked"</span><span class="token punctuation">,</span><span class="token string">"checked"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>xe<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span><span class="token string">"t"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>me<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>xe<span class="token punctuation">)</span><span class="token punctuation">,</span>y<span class="token punctuation">.</span>checkClone<span class="token operator">=</span>me<span class="token punctuation">.</span><span class="token function">cloneNode</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">cloneNode</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span>lastChild<span class="token punctuation">.</span>checked<span class="token punctuation">,</span>me<span class="token punctuation">.</span>innerHTML<span class="token operator">=</span><span class="token string">"&lt;textarea>x&lt;/textarea>"</span><span class="token punctuation">,</span>y<span class="token punctuation">.</span>noCloneChecked<span class="token operator">=</span><span class="token operator">!</span><span class="token operator">!</span>me<span class="token punctuation">.</span><span class="token function">cloneNode</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span>lastChild<span class="token punctuation">.</span>defaultValue<span class="token punctuation">;</span><span class="token keyword">var</span> Te<span class="token operator">=</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^key</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>Ce<span class="token operator">=</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^(?:mouse|pointer|contextmenu|drag|drop)|click</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>Ee<span class="token operator">=</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^([^.]*)(?:\.(.+)|)</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span><span class="token keyword">function</span> <span class="token function">ke</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">&#125;</span><span class="token keyword">function</span> <span class="token function">Se</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span><span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">&#125;</span><span class="token keyword">function</span> <span class="token function">Ne</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> e<span class="token operator">===</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">try</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token constant">E</span><span class="token punctuation">.</span>activeElement<span class="token punctuation">&#125;</span><span class="token keyword">catch</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token punctuation">(</span><span class="token string">"focus"</span><span class="token operator">===</span>t<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">function</span> <span class="token function">Ae</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n<span class="token punctuation">,</span>r<span class="token punctuation">,</span>i<span class="token punctuation">,</span>o</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> a<span class="token punctuation">,</span>s<span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"object"</span><span class="token operator">==</span><span class="token keyword">typeof</span> t<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">for</span><span class="token punctuation">(</span>s <span class="token keyword">in</span><span class="token string">"string"</span><span class="token operator">!=</span><span class="token keyword">typeof</span> n<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>r<span class="token operator">=</span>r<span class="token operator">||</span>n<span class="token punctuation">,</span>n<span class="token operator">=</span><span class="token keyword">void</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>t<span class="token punctuation">)</span><span class="token function">Ae</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>s<span class="token punctuation">,</span>n<span class="token punctuation">,</span>r<span class="token punctuation">,</span>t<span class="token punctuation">[</span>s<span class="token punctuation">]</span><span class="token punctuation">,</span>o<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> e<span class="token punctuation">&#125;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token operator">==</span>r<span class="token operator">&amp;&amp;</span><span class="token keyword">null</span><span class="token operator">==</span>i<span class="token operator">?</span><span class="token punctuation">(</span>i<span class="token operator">=</span>n<span class="token punctuation">,</span>r<span class="token operator">=</span>n<span class="token operator">=</span><span class="token keyword">void</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">null</span><span class="token operator">==</span>i<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span><span class="token string">"string"</span><span class="token operator">==</span><span class="token keyword">typeof</span> n<span class="token operator">?</span><span class="token punctuation">(</span>i<span class="token operator">=</span>r<span class="token punctuation">,</span>r<span class="token operator">=</span><span class="token keyword">void</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token punctuation">(</span>i<span class="token operator">=</span>r<span class="token punctuation">,</span>r<span class="token operator">=</span>n<span class="token punctuation">,</span>n<span class="token operator">=</span><span class="token keyword">void</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token operator">!</span><span class="token number">1</span><span class="token operator">===</span>i<span class="token punctuation">)</span>i<span class="token operator">=</span>Se<span class="token punctuation">;</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>i<span class="token punctuation">)</span><span class="token keyword">return</span> e<span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token number">1</span><span class="token operator">===</span>o<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>a<span class="token operator">=</span>i<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token function-variable function">i</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token function">k</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">a</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>arguments<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>guid<span class="token operator">=</span>a<span class="token punctuation">.</span>guid<span class="token operator">||</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>guid<span class="token operator">=</span>k<span class="token punctuation">.</span>guid<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>e<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>k<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>t<span class="token punctuation">,</span>i<span class="token punctuation">,</span>r<span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">function</span> <span class="token function">De</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>i<span class="token punctuation">,</span>o</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>o<span class="token operator">?</span><span class="token punctuation">(</span><span class="token constant">Q</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>i<span class="token punctuation">,</span><span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>i<span class="token punctuation">,</span><span class="token punctuation">&#123;</span>namespace<span class="token operator">:</span><span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token function-variable function">handler</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> t<span class="token punctuation">,</span>n<span class="token punctuation">,</span>r<span class="token operator">=</span><span class="token constant">Q</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&amp;</span>e<span class="token punctuation">.</span>isTrigger<span class="token operator">&amp;&amp;</span><span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">if</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">(</span>k<span class="token punctuation">.</span>event<span class="token punctuation">.</span>special<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">||</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>delegateType<span class="token operator">&amp;&amp;</span>e<span class="token punctuation">.</span><span class="token function">stopPropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>r<span class="token operator">=</span><span class="token function">s</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token constant">Q</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>i<span class="token punctuation">,</span>r<span class="token punctuation">)</span><span class="token punctuation">,</span>t<span class="token operator">=</span><span class="token function">o</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>i<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>r<span class="token operator">!==</span><span class="token punctuation">(</span>n<span class="token operator">=</span><span class="token constant">Q</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">||</span>t<span class="token operator">?</span><span class="token constant">Q</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>i<span class="token punctuation">,</span><span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">:</span>n<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>r<span class="token operator">!==</span>n<span class="token punctuation">)</span><span class="token keyword">return</span> e<span class="token punctuation">.</span><span class="token function">stopImmediatePropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>n<span class="token punctuation">.</span>value<span class="token punctuation">&#125;</span><span class="token keyword">else</span> r<span class="token punctuation">.</span>length<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span><span class="token constant">Q</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>i<span class="token punctuation">,</span><span class="token punctuation">&#123;</span>value<span class="token operator">:</span>k<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span>k<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span>r<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span><span class="token class-name">Event</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">,</span>r<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>e<span class="token punctuation">.</span><span class="token function">stopImmediatePropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">void</span> <span class="token number">0</span><span class="token operator">===</span><span class="token constant">Q</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>i<span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span>k<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>i<span class="token punctuation">,</span>ke<span class="token punctuation">)</span><span class="token punctuation">&#125;</span>k<span class="token punctuation">.</span>event<span class="token operator">=</span><span class="token punctuation">&#123;</span>global<span class="token operator">:</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">add</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span>e<span class="token punctuation">,</span>n<span class="token punctuation">,</span>r<span class="token punctuation">,</span>i</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> o<span class="token punctuation">,</span>a<span class="token punctuation">,</span>s<span class="token punctuation">,</span>u<span class="token punctuation">,</span>l<span class="token punctuation">,</span>c<span class="token punctuation">,</span>f<span class="token punctuation">,</span>p<span class="token punctuation">,</span>d<span class="token punctuation">,</span>h<span class="token punctuation">,</span>g<span class="token punctuation">,</span>v<span class="token operator">=</span><span class="token constant">Q</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>n<span class="token punctuation">.</span>handler<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>n<span class="token operator">=</span><span class="token punctuation">(</span>o<span class="token operator">=</span>n<span class="token punctuation">)</span><span class="token punctuation">.</span>handler<span class="token punctuation">,</span>i<span class="token operator">=</span>o<span class="token punctuation">.</span>selector<span class="token punctuation">)</span><span class="token punctuation">,</span>i<span class="token operator">&amp;&amp;</span>k<span class="token punctuation">.</span>find<span class="token punctuation">.</span><span class="token function">matchesSelector</span><span class="token punctuation">(</span>ie<span class="token punctuation">,</span>i<span class="token punctuation">)</span><span class="token punctuation">,</span>n<span class="token punctuation">.</span>guid<span class="token operator">||</span><span class="token punctuation">(</span>n<span class="token punctuation">.</span>guid<span class="token operator">=</span>k<span class="token punctuation">.</span>guid<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span>u<span class="token operator">=</span>v<span class="token punctuation">.</span>events<span class="token punctuation">)</span><span class="token operator">||</span><span class="token punctuation">(</span>u<span class="token operator">=</span>v<span class="token punctuation">.</span>events<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span>a<span class="token operator">=</span>v<span class="token punctuation">.</span>handle<span class="token punctuation">)</span><span class="token operator">||</span><span class="token punctuation">(</span>a<span class="token operator">=</span>v<span class="token punctuation">.</span><span class="token function-variable function">handle</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span><span class="token string">"undefined"</span><span class="token operator">!=</span><span class="token keyword">typeof</span> k<span class="token operator">&amp;&amp;</span>k<span class="token punctuation">.</span>event<span class="token punctuation">.</span>triggered<span class="token operator">!==</span>e<span class="token punctuation">.</span>type<span class="token operator">?</span>k<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span>arguments<span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">void</span> <span class="token number">0</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>l<span class="token operator">=</span><span class="token punctuation">(</span>e<span class="token operator">=</span><span class="token punctuation">(</span>e<span class="token operator">||</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token constant">R</span><span class="token punctuation">)</span><span class="token operator">||</span><span class="token punctuation">[</span><span class="token string">""</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>l<span class="token operator">--</span><span class="token punctuation">)</span>d<span class="token operator">=</span>g<span class="token operator">=</span><span class="token punctuation">(</span>s<span class="token operator">=</span>Ee<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>e<span class="token punctuation">[</span>l<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">||</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>h<span class="token operator">=</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">||</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>d<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>f<span class="token operator">=</span>k<span class="token punctuation">.</span>event<span class="token punctuation">.</span>special<span class="token punctuation">[</span>d<span class="token punctuation">]</span><span class="token operator">||</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>d<span class="token operator">=</span><span class="token punctuation">(</span>i<span class="token operator">?</span>f<span class="token punctuation">.</span>delegateType<span class="token operator">:</span>f<span class="token punctuation">.</span>bindType<span class="token punctuation">)</span><span class="token operator">||</span>d<span class="token punctuation">,</span>f<span class="token operator">=</span>k<span class="token punctuation">.</span>event<span class="token punctuation">.</span>special<span class="token punctuation">[</span>d<span class="token punctuation">]</span><span class="token operator">||</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>c<span class="token operator">=</span>k<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>type<span class="token operator">:</span>d<span class="token punctuation">,</span>origType<span class="token operator">:</span>g<span class="token punctuation">,</span>data<span class="token operator">:</span>r<span class="token punctuation">,</span>handler<span class="token operator">:</span>n<span class="token punctuation">,</span>guid<span class="token operator">:</span>n<span class="token punctuation">.</span>guid<span class="token punctuation">,</span>selector<span class="token operator">:</span>i<span class="token punctuation">,</span>needsContext<span class="token operator">:</span>i<span class="token operator">&amp;&amp;</span>k<span class="token punctuation">.</span>expr<span class="token punctuation">.</span>match<span class="token punctuation">.</span>needsContext<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">,</span>namespace<span class="token operator">:</span>h<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>o<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span>p<span class="token operator">=</span>u<span class="token punctuation">[</span>d<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">||</span><span class="token punctuation">(</span><span class="token punctuation">(</span>p<span class="token operator">=</span>u<span class="token punctuation">[</span>d<span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>delegateCount<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>f<span class="token punctuation">.</span>setup<span class="token operator">&amp;&amp;</span><span class="token operator">!</span><span class="token number">1</span><span class="token operator">!==</span>f<span class="token punctuation">.</span><span class="token function">setup</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span>r<span class="token punctuation">,</span>h<span class="token punctuation">,</span>a<span class="token punctuation">)</span><span class="token operator">||</span>t<span class="token punctuation">.</span>addEventListener<span class="token operator">&amp;&amp;</span>t<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>d<span class="token punctuation">,</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>f<span class="token punctuation">.</span>add<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>f<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span>c<span class="token punctuation">)</span><span class="token punctuation">,</span>c<span class="token punctuation">.</span>handler<span class="token punctuation">.</span>guid<span class="token operator">||</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span>handler<span class="token punctuation">.</span>guid<span class="token operator">=</span>n<span class="token punctuation">.</span>guid<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>i<span class="token operator">?</span>p<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>delegateCount<span class="token operator">++</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>c<span class="token punctuation">)</span><span class="token operator">:</span>p<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span>event<span class="token punctuation">.</span>global<span class="token punctuation">[</span>d<span class="token punctuation">]</span><span class="token operator">=</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">remove</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n<span class="token punctuation">,</span>r<span class="token punctuation">,</span>i</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> o<span class="token punctuation">,</span>a<span class="token punctuation">,</span>s<span class="token punctuation">,</span>u<span class="token punctuation">,</span>l<span class="token punctuation">,</span>c<span class="token punctuation">,</span>f<span class="token punctuation">,</span>p<span class="token punctuation">,</span>d<span class="token punctuation">,</span>h<span class="token punctuation">,</span>g<span class="token punctuation">,</span>v<span class="token operator">=</span><span class="token constant">Q</span><span class="token punctuation">.</span><span class="token function">hasData</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token constant">Q</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>v<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>u<span class="token operator">=</span>v<span class="token punctuation">.</span>events<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>l<span class="token operator">=</span><span class="token punctuation">(</span>t<span class="token operator">=</span><span class="token punctuation">(</span>t<span class="token operator">||</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token constant">R</span><span class="token punctuation">)</span><span class="token operator">||</span><span class="token punctuation">[</span><span class="token string">""</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>l<span class="token operator">--</span><span class="token punctuation">)</span><span class="token keyword">if</span><span class="token punctuation">(</span>d<span class="token operator">=</span>g<span class="token operator">=</span><span class="token punctuation">(</span>s<span class="token operator">=</span>Ee<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>t<span class="token punctuation">[</span>l<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">||</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>h<span class="token operator">=</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">||</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>d<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>f<span class="token operator">=</span>k<span class="token punctuation">.</span>event<span class="token punctuation">.</span>special<span class="token punctuation">[</span>d<span class="token punctuation">]</span><span class="token operator">||</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>p<span class="token operator">=</span>u<span class="token punctuation">[</span>d<span class="token operator">=</span><span class="token punctuation">(</span>r<span class="token operator">?</span>f<span class="token punctuation">.</span>delegateType<span class="token operator">:</span>f<span class="token punctuation">.</span>bindType<span class="token punctuation">)</span><span class="token operator">||</span>d<span class="token punctuation">]</span><span class="token operator">||</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>s<span class="token operator">=</span>s<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">&amp;&amp;</span><span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">"(^|\\.)"</span><span class="token operator">+</span>h<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">"\\.(?:.*\\.|)"</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"(\\.|$)"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>a<span class="token operator">=</span>o<span class="token operator">=</span>p<span class="token punctuation">.</span>length<span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>o<span class="token operator">--</span><span class="token punctuation">)</span>c<span class="token operator">=</span>p<span class="token punctuation">[</span>o<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token operator">!</span>i<span class="token operator">&amp;&amp;</span>g<span class="token operator">!==</span>c<span class="token punctuation">.</span>origType<span class="token operator">||</span>n<span class="token operator">&amp;&amp;</span>n<span class="token punctuation">.</span>guid<span class="token operator">!==</span>c<span class="token punctuation">.</span>guid<span class="token operator">||</span>s<span class="token operator">&amp;&amp;</span><span class="token operator">!</span>s<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span>namespace<span class="token punctuation">)</span><span class="token operator">||</span>r<span class="token operator">&amp;&amp;</span>r<span class="token operator">!==</span>c<span class="token punctuation">.</span>selector<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span><span class="token string">"**"</span><span class="token operator">!==</span>r<span class="token operator">||</span><span class="token operator">!</span>c<span class="token punctuation">.</span>selector<span class="token punctuation">)</span><span class="token operator">||</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>c<span class="token punctuation">.</span>selector<span class="token operator">&amp;&amp;</span>p<span class="token punctuation">.</span>delegateCount<span class="token operator">--</span><span class="token punctuation">,</span>f<span class="token punctuation">.</span>remove<span class="token operator">&amp;&amp;</span>f<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>c<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>a<span class="token operator">&amp;&amp;</span><span class="token operator">!</span>p<span class="token punctuation">.</span>length<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>f<span class="token punctuation">.</span>teardown<span class="token operator">&amp;&amp;</span><span class="token operator">!</span><span class="token number">1</span><span class="token operator">!==</span>f<span class="token punctuation">.</span><span class="token function">teardown</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>h<span class="token punctuation">,</span>v<span class="token punctuation">.</span>handle<span class="token punctuation">)</span><span class="token operator">||</span>k<span class="token punctuation">.</span><span class="token function">removeEvent</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>d<span class="token punctuation">,</span>v<span class="token punctuation">.</span>handle<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">delete</span> u<span class="token punctuation">[</span>d<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">else</span> <span class="token keyword">for</span><span class="token punctuation">(</span>d <span class="token keyword">in</span> u<span class="token punctuation">)</span>k<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>d<span class="token operator">+</span>t<span class="token punctuation">[</span>l<span class="token punctuation">]</span><span class="token punctuation">,</span>n<span class="token punctuation">,</span>r<span class="token punctuation">,</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>k<span class="token punctuation">.</span><span class="token function">isEmptyObject</span><span class="token punctuation">(</span>u<span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token constant">Q</span><span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token string">"handle events"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">dispatch</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> t<span class="token punctuation">,</span>n<span class="token punctuation">,</span>r<span class="token punctuation">,</span>i<span class="token punctuation">,</span>o<span class="token punctuation">,</span>a<span class="token punctuation">,</span>s<span class="token operator">=</span>k<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">fix</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">,</span>u<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>arguments<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">,</span>l<span class="token operator">=</span><span class="token punctuation">(</span><span class="token constant">Q</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span><span class="token string">"events"</span><span class="token punctuation">)</span><span class="token operator">||</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">[</span>s<span class="token punctuation">.</span>type<span class="token punctuation">]</span><span class="token operator">||</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>c<span class="token operator">=</span>k<span class="token punctuation">.</span>event<span class="token punctuation">.</span>special<span class="token punctuation">[</span>s<span class="token punctuation">.</span>type<span class="token punctuation">]</span><span class="token operator">||</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span>u<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=</span>s<span class="token punctuation">,</span>t<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>t<span class="token operator">&lt;</span>arguments<span class="token punctuation">.</span>length<span class="token punctuation">;</span>t<span class="token operator">++</span><span class="token punctuation">)</span>u<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token operator">=</span>arguments<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>delegateTarget<span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">,</span><span class="token operator">!</span>c<span class="token punctuation">.</span>preDispatch<span class="token operator">||</span><span class="token operator">!</span><span class="token number">1</span><span class="token operator">!==</span>c<span class="token punctuation">.</span><span class="token function">preDispatch</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>a<span class="token operator">=</span>k<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">handlers</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>s<span class="token punctuation">,</span>l<span class="token punctuation">)</span><span class="token punctuation">,</span>t<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span><span class="token punctuation">(</span>i<span class="token operator">=</span>a<span class="token punctuation">[</span>t<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token operator">!</span>s<span class="token punctuation">.</span><span class="token function">isPropagationStopped</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>s<span class="token punctuation">.</span>currentTarget<span class="token operator">=</span>i<span class="token punctuation">.</span>elem<span class="token punctuation">,</span>n<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span><span class="token punctuation">(</span>o<span class="token operator">=</span>i<span class="token punctuation">.</span>handlers<span class="token punctuation">[</span>n<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token operator">!</span>s<span class="token punctuation">.</span><span class="token function">isImmediatePropagationStopped</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>s<span class="token punctuation">.</span>rnamespace<span class="token operator">&amp;&amp;</span><span class="token operator">!</span><span class="token number">1</span><span class="token operator">!==</span>o<span class="token punctuation">.</span>namespace<span class="token operator">&amp;&amp;</span><span class="token operator">!</span>s<span class="token punctuation">.</span>rnamespace<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>o<span class="token punctuation">.</span>namespace<span class="token punctuation">)</span><span class="token operator">||</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>handleObj<span class="token operator">=</span>o<span class="token punctuation">,</span>s<span class="token punctuation">.</span>data<span class="token operator">=</span>o<span class="token punctuation">.</span>data<span class="token punctuation">,</span><span class="token keyword">void</span> <span class="token number">0</span><span class="token operator">!==</span><span class="token punctuation">(</span>r<span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">(</span>k<span class="token punctuation">.</span>event<span class="token punctuation">.</span>special<span class="token punctuation">[</span>o<span class="token punctuation">.</span>origType<span class="token punctuation">]</span><span class="token operator">||</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>handle<span class="token operator">||</span>o<span class="token punctuation">.</span>handler<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>i<span class="token punctuation">.</span>elem<span class="token punctuation">,</span>u<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token operator">!</span><span class="token number">1</span><span class="token operator">===</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>result<span class="token operator">=</span>r<span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>s<span class="token punctuation">.</span><span class="token function">stopPropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> c<span class="token punctuation">.</span>postDispatch<span class="token operator">&amp;&amp;</span>c<span class="token punctuation">.</span><span class="token function">postDispatch</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>s<span class="token punctuation">)</span><span class="token punctuation">,</span>s<span class="token punctuation">.</span>result<span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">handlers</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> n<span class="token punctuation">,</span>r<span class="token punctuation">,</span>i<span class="token punctuation">,</span>o<span class="token punctuation">,</span>a<span class="token punctuation">,</span>s<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>u<span class="token operator">=</span>t<span class="token punctuation">.</span>delegateCount<span class="token punctuation">,</span>l<span class="token operator">=</span>e<span class="token punctuation">.</span>target<span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>u<span class="token operator">&amp;&amp;</span>l<span class="token punctuation">.</span>nodeType<span class="token operator">&amp;&amp;</span><span class="token operator">!</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token operator">===</span>e<span class="token punctuation">.</span>type<span class="token operator">&amp;&amp;</span><span class="token number">1</span><span class="token operator">&lt;=</span>e<span class="token punctuation">.</span>button<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token punctuation">;</span>l<span class="token operator">!==</span><span class="token keyword">this</span><span class="token punctuation">;</span>l<span class="token operator">=</span>l<span class="token punctuation">.</span>parentNode<span class="token operator">||</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">===</span>l<span class="token punctuation">.</span>nodeType<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token operator">!==</span>e<span class="token punctuation">.</span>type<span class="token operator">||</span><span class="token operator">!</span><span class="token number">0</span><span class="token operator">!==</span>l<span class="token punctuation">.</span>disabled<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">for</span><span class="token punctuation">(</span>o<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>a<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>n<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>n<span class="token operator">&lt;</span>u<span class="token punctuation">;</span>n<span class="token operator">++</span><span class="token punctuation">)</span><span class="token keyword">void</span> <span class="token number">0</span><span class="token operator">===</span>a<span class="token punctuation">[</span>i<span class="token operator">=</span><span class="token punctuation">(</span>r<span class="token operator">=</span>t<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>selector<span class="token operator">+</span><span class="token string">" "</span><span class="token punctuation">]</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">=</span>r<span class="token punctuation">.</span>needsContext<span class="token operator">?</span><span class="token operator">-</span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token function">k</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">index</span><span class="token punctuation">(</span>l<span class="token punctuation">)</span><span class="token operator">:</span>k<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">,</span><span class="token punctuation">[</span>l<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">,</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">&amp;&amp;</span>o<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">;</span>o<span class="token punctuation">.</span>length<span class="token operator">&amp;&amp;</span>s<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>elem<span class="token operator">:</span>l<span class="token punctuation">,</span>handlers<span class="token operator">:</span>o<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> l<span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">,</span>u<span class="token operator">&lt;</span>t<span class="token punctuation">.</span>length<span class="token operator">&amp;&amp;</span>s<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>elem<span class="token operator">:</span>l<span class="token punctuation">,</span>handlers<span class="token operator">:</span>t<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>u<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>s<span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">addProp</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span>e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>k<span class="token punctuation">.</span><span class="token class-name">Event</span><span class="token punctuation">.</span>prototype<span class="token punctuation">,</span>t<span class="token punctuation">,</span><span class="token punctuation">&#123;</span>enumerable<span class="token operator">:</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>configurable<span class="token operator">:</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>get<span class="token operator">:</span><span class="token function">m</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token operator">?</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>originalEvent<span class="token punctuation">)</span><span class="token keyword">return</span> <span class="token function">e</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>originalEvent<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>originalEvent<span class="token punctuation">)</span><span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>originalEvent<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">set</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>t<span class="token punctuation">,</span><span class="token punctuation">&#123;</span>enumerable<span class="token operator">:</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>configurable<span class="token operator">:</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>writable<span class="token operator">:</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>value<span class="token operator">:</span>e<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">fix</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> e<span class="token punctuation">[</span>k<span class="token punctuation">.</span>expando<span class="token punctuation">]</span><span class="token operator">?</span>e<span class="token operator">:</span><span class="token keyword">new</span> <span class="token class-name">k<span class="token punctuation">.</span>Event</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>special<span class="token operator">:</span><span class="token punctuation">&#123;</span>load<span class="token operator">:</span><span class="token punctuation">&#123;</span>noBubble<span class="token operator">:</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>click<span class="token operator">:</span><span class="token punctuation">&#123;</span><span class="token function-variable function">setup</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> t<span class="token operator">=</span><span class="token keyword">this</span><span class="token operator">||</span>e<span class="token punctuation">;</span><span class="token keyword">return</span> pe<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span>type<span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span>t<span class="token punctuation">.</span>click<span class="token operator">&amp;&amp;</span><span class="token constant">A</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span><span class="token string">"input"</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token function">De</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span><span class="token string">"click"</span><span class="token punctuation">,</span>ke<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">trigger</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> t<span class="token operator">=</span><span class="token keyword">this</span><span class="token operator">||</span>e<span class="token punctuation">;</span><span class="token keyword">return</span> pe<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span>type<span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span>t<span class="token punctuation">.</span>click<span class="token operator">&amp;&amp;</span><span class="token constant">A</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span><span class="token string">"input"</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token function">De</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span><span class="token string">"click"</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">_default</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> t<span class="token operator">=</span>e<span class="token punctuation">.</span>target<span class="token punctuation">;</span><span class="token keyword">return</span> pe<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span>type<span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span>t<span class="token punctuation">.</span>click<span class="token operator">&amp;&amp;</span><span class="token constant">A</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span><span class="token string">"input"</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token constant">Q</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span><span class="token string">"click"</span><span class="token punctuation">)</span><span class="token operator">||</span><span class="token constant">A</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span><span class="token string">"a"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>beforeunload<span class="token operator">:</span><span class="token punctuation">&#123;</span><span class="token function-variable function">postDispatch</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">void</span> <span class="token number">0</span><span class="token operator">!==</span>e<span class="token punctuation">.</span>result<span class="token operator">&amp;&amp;</span>e<span class="token punctuation">.</span>originalEvent<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>originalEvent<span class="token punctuation">.</span>returnValue<span class="token operator">=</span>e<span class="token punctuation">.</span>result<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span><span class="token function-variable function">removeEvent</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>e<span class="token punctuation">.</span>removeEventListener<span class="token operator">&amp;&amp;</span>e<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span><span class="token function-variable function">Event</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token keyword">instanceof</span> <span class="token class-name">k<span class="token punctuation">.</span>Event</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">k<span class="token punctuation">.</span>Event</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span>e<span class="token operator">&amp;&amp;</span>e<span class="token punctuation">.</span>type<span class="token operator">?</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>originalEvent<span class="token operator">=</span>e<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>type<span class="token operator">=</span>e<span class="token punctuation">.</span>type<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>isDefaultPrevented<span class="token operator">=</span>e<span class="token punctuation">.</span>defaultPrevented<span class="token operator">||</span><span class="token keyword">void</span> <span class="token number">0</span><span class="token operator">===</span>e<span class="token punctuation">.</span>defaultPrevented<span class="token operator">&amp;&amp;</span><span class="token operator">!</span><span class="token number">1</span><span class="token operator">===</span>e<span class="token punctuation">.</span>returnValue<span class="token operator">?</span>ke<span class="token operator">:</span>Se<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>target<span class="token operator">=</span>e<span class="token punctuation">.</span>target<span class="token operator">&amp;&amp;</span><span class="token number">3</span><span class="token operator">===</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>nodeType<span class="token operator">?</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>parentNode<span class="token operator">:</span>e<span class="token punctuation">.</span>target<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>currentTarget<span class="token operator">=</span>e<span class="token punctuation">.</span>currentTarget<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>relatedTarget<span class="token operator">=</span>e<span class="token punctuation">.</span>relatedTarget<span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">this</span><span class="token punctuation">.</span>type<span class="token operator">=</span>e<span class="token punctuation">,</span>t<span class="token operator">&amp;&amp;</span>k<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>t<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>timeStamp<span class="token operator">=</span>e<span class="token operator">&amp;&amp;</span>e<span class="token punctuation">.</span>timeStamp<span class="token operator">||</span>Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">[</span>k<span class="token punctuation">.</span>expando<span class="token punctuation">]</span><span class="token operator">=</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span><span class="token class-name">Event</span><span class="token punctuation">.</span>prototype<span class="token operator">=</span><span class="token punctuation">&#123;</span>constructor<span class="token operator">:</span>k<span class="token punctuation">.</span>Event<span class="token punctuation">,</span>isDefaultPrevented<span class="token operator">:</span>Se<span class="token punctuation">,</span>isPropagationStopped<span class="token operator">:</span>Se<span class="token punctuation">,</span>isImmediatePropagationStopped<span class="token operator">:</span>Se<span class="token punctuation">,</span>isSimulated<span class="token operator">:</span><span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token function-variable function">preventDefault</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> e<span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">.</span>originalEvent<span class="token punctuation">;</span><span class="token keyword">this</span><span class="token punctuation">.</span>isDefaultPrevented<span class="token operator">=</span>ke<span class="token punctuation">,</span>e<span class="token operator">&amp;&amp;</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>isSimulated<span class="token operator">&amp;&amp;</span>e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">stopPropagation</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> e<span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">.</span>originalEvent<span class="token punctuation">;</span><span class="token keyword">this</span><span class="token punctuation">.</span>isPropagationStopped<span class="token operator">=</span>ke<span class="token punctuation">,</span>e<span class="token operator">&amp;&amp;</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>isSimulated<span class="token operator">&amp;&amp;</span>e<span class="token punctuation">.</span><span class="token function">stopPropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">stopImmediatePropagation</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> e<span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">.</span>originalEvent<span class="token punctuation">;</span><span class="token keyword">this</span><span class="token punctuation">.</span>isImmediatePropagationStopped<span class="token operator">=</span>ke<span class="token punctuation">,</span>e<span class="token operator">&amp;&amp;</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>isSimulated<span class="token operator">&amp;&amp;</span>e<span class="token punctuation">.</span><span class="token function">stopImmediatePropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">stopPropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>altKey<span class="token operator">:</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>bubbles<span class="token operator">:</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>cancelable<span class="token operator">:</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>changedTouches<span class="token operator">:</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>ctrlKey<span class="token operator">:</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>detail<span class="token operator">:</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>eventPhase<span class="token operator">:</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>metaKey<span class="token operator">:</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>pageX<span class="token operator">:</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>pageY<span class="token operator">:</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>shiftKey<span class="token operator">:</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>view<span class="token operator">:</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">"char"</span><span class="token operator">:</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>code<span class="token operator">:</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>charCode<span class="token operator">:</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>key<span class="token operator">:</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>keyCode<span class="token operator">:</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>button<span class="token operator">:</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>buttons<span class="token operator">:</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>clientX<span class="token operator">:</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>clientY<span class="token operator">:</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>offsetX<span class="token operator">:</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>offsetY<span class="token operator">:</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>pointerId<span class="token operator">:</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>pointerType<span class="token operator">:</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>screenX<span class="token operator">:</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>screenY<span class="token operator">:</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>targetTouches<span class="token operator">:</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>toElement<span class="token operator">:</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>touches<span class="token operator">:</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token function-variable function">which</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> t<span class="token operator">=</span>e<span class="token punctuation">.</span>button<span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token keyword">null</span><span class="token operator">==</span>e<span class="token punctuation">.</span>which<span class="token operator">&amp;&amp;</span>Te<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>type<span class="token punctuation">)</span><span class="token operator">?</span><span class="token keyword">null</span><span class="token operator">!=</span>e<span class="token punctuation">.</span>charCode<span class="token operator">?</span>e<span class="token punctuation">.</span>charCode<span class="token operator">:</span>e<span class="token punctuation">.</span>keyCode<span class="token operator">:</span><span class="token operator">!</span>e<span class="token punctuation">.</span>which<span class="token operator">&amp;&amp;</span><span class="token keyword">void</span> <span class="token number">0</span><span class="token operator">!==</span>t<span class="token operator">&amp;&amp;</span>Ce<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>type<span class="token punctuation">)</span><span class="token operator">?</span><span class="token number">1</span><span class="token operator">&amp;</span>t<span class="token operator">?</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">2</span><span class="token operator">&amp;</span>t<span class="token operator">?</span><span class="token number">3</span><span class="token operator">:</span><span class="token number">4</span><span class="token operator">&amp;</span>t<span class="token operator">?</span><span class="token number">2</span><span class="token operator">:</span><span class="token number">0</span><span class="token operator">:</span>e<span class="token punctuation">.</span>which<span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span>event<span class="token punctuation">.</span>addProp<span class="token punctuation">)</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>focus<span class="token operator">:</span><span class="token string">"focusin"</span><span class="token punctuation">,</span>blur<span class="token operator">:</span><span class="token string">"focusout"</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>k<span class="token punctuation">.</span>event<span class="token punctuation">.</span>special<span class="token punctuation">[</span>e<span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token function-variable function">setup</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token function">De</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>e<span class="token punctuation">,</span>Ne<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">trigger</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token function">De</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>e<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>delegateType<span class="token operator">:</span>t<span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>mouseenter<span class="token operator">:</span><span class="token string">"mouseover"</span><span class="token punctuation">,</span>mouseleave<span class="token operator">:</span><span class="token string">"mouseout"</span><span class="token punctuation">,</span>pointerenter<span class="token operator">:</span><span class="token string">"pointerover"</span><span class="token punctuation">,</span>pointerleave<span class="token operator">:</span><span class="token string">"pointerout"</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>i</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>k<span class="token punctuation">.</span>event<span class="token punctuation">.</span>special<span class="token punctuation">[</span>e<span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">&#123;</span>delegateType<span class="token operator">:</span>i<span class="token punctuation">,</span>bindType<span class="token operator">:</span>i<span class="token punctuation">,</span><span class="token function-variable function">handle</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> t<span class="token punctuation">,</span>n<span class="token operator">=</span>e<span class="token punctuation">.</span>relatedTarget<span class="token punctuation">,</span>r<span class="token operator">=</span>e<span class="token punctuation">.</span>handleObj<span class="token punctuation">;</span><span class="token keyword">return</span> n<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>n<span class="token operator">===</span><span class="token keyword">this</span><span class="token operator">||</span>k<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">||</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>type<span class="token operator">=</span>r<span class="token punctuation">.</span>origType<span class="token punctuation">,</span>t<span class="token operator">=</span>r<span class="token punctuation">.</span><span class="token function">handler</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>arguments<span class="token punctuation">)</span><span class="token punctuation">,</span>e<span class="token punctuation">.</span>type<span class="token operator">=</span>i<span class="token punctuation">)</span><span class="token punctuation">,</span>t<span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span>fn<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token function-variable function">on</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n<span class="token punctuation">,</span>r</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token function">Ae</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n<span class="token punctuation">,</span>r<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">one</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n<span class="token punctuation">,</span>r</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token function">Ae</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n<span class="token punctuation">,</span>r<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">off</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> r<span class="token punctuation">,</span>i<span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>e<span class="token operator">&amp;&amp;</span>e<span class="token punctuation">.</span>preventDefault<span class="token operator">&amp;&amp;</span>e<span class="token punctuation">.</span>handleObj<span class="token punctuation">)</span><span class="token keyword">return</span> r<span class="token operator">=</span>e<span class="token punctuation">.</span>handleObj<span class="token punctuation">,</span><span class="token function">k</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>delegateTarget<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>namespace<span class="token operator">?</span>r<span class="token punctuation">.</span>origType<span class="token operator">+</span><span class="token string">"."</span><span class="token operator">+</span>r<span class="token punctuation">.</span>namespace<span class="token operator">:</span>r<span class="token punctuation">.</span>origType<span class="token punctuation">,</span>r<span class="token punctuation">.</span>selector<span class="token punctuation">,</span>r<span class="token punctuation">.</span>handler<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"object"</span><span class="token operator">==</span><span class="token keyword">typeof</span> e<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">for</span><span class="token punctuation">(</span>i <span class="token keyword">in</span> e<span class="token punctuation">)</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span>t<span class="token punctuation">,</span>e<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span><span class="token operator">!</span><span class="token number">1</span><span class="token operator">!==</span>t<span class="token operator">&amp;&amp;</span><span class="token string">"function"</span><span class="token operator">!=</span><span class="token keyword">typeof</span> t<span class="token operator">||</span><span class="token punctuation">(</span>n<span class="token operator">=</span>t<span class="token punctuation">,</span>t<span class="token operator">=</span><span class="token keyword">void</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token operator">!</span><span class="token number">1</span><span class="token operator">===</span>n<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>n<span class="token operator">=</span>Se<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>k<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>e<span class="token punctuation">,</span>n<span class="token punctuation">,</span>t<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">var</span> je<span class="token operator">=</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&lt;(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/></span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span><span class="token punctuation">,</span>qe<span class="token operator">=</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&lt;script|&lt;style|&lt;link</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>Le<span class="token operator">=</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">checked\s*(?:[^=]|=\s*.checked.)</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>He<span class="token operator">=</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\s*&lt;!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">;</span><span class="token keyword">function</span> <span class="token function">Oe</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token constant">A</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token string">"table"</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token constant">A</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token operator">!==</span>t<span class="token punctuation">.</span>nodeType<span class="token operator">?</span>t<span class="token operator">:</span>t<span class="token punctuation">.</span>firstChild<span class="token punctuation">,</span><span class="token string">"tr"</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token function">k</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">children</span><span class="token punctuation">(</span><span class="token string">"tbody"</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">||</span>e<span class="token punctuation">&#125;</span><span class="token keyword">function</span> <span class="token function">Pe</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> e<span class="token punctuation">.</span>type<span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token operator">!==</span>e<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"type"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"/"</span><span class="token operator">+</span>e<span class="token punctuation">.</span>type<span class="token punctuation">,</span>e<span class="token punctuation">&#125;</span><span class="token keyword">function</span> <span class="token function">Re</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span><span class="token string">"true/"</span><span class="token operator">===</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>type<span class="token operator">||</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token operator">?</span>e<span class="token punctuation">.</span>type<span class="token operator">=</span>e<span class="token punctuation">.</span>type<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token operator">:</span>e<span class="token punctuation">.</span><span class="token function">removeAttribute</span><span class="token punctuation">(</span><span class="token string">"type"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>e<span class="token punctuation">&#125;</span><span class="token keyword">function</span> <span class="token function">Me</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> n<span class="token punctuation">,</span>r<span class="token punctuation">,</span>i<span class="token punctuation">,</span>o<span class="token punctuation">,</span>a<span class="token punctuation">,</span>s<span class="token punctuation">,</span>u<span class="token punctuation">,</span>l<span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">===</span>t<span class="token punctuation">.</span>nodeType<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token constant">Q</span><span class="token punctuation">.</span><span class="token function">hasData</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>o<span class="token operator">=</span><span class="token constant">Q</span><span class="token punctuation">.</span><span class="token function">access</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">,</span>a<span class="token operator">=</span><span class="token constant">Q</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span>o<span class="token punctuation">)</span><span class="token punctuation">,</span>l<span class="token operator">=</span>o<span class="token punctuation">.</span>events<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">for</span><span class="token punctuation">(</span>i <span class="token keyword">in</span> <span class="token keyword">delete</span> a<span class="token punctuation">.</span>handle<span class="token punctuation">,</span>a<span class="token punctuation">.</span>events<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>l<span class="token punctuation">)</span><span class="token keyword">for</span><span class="token punctuation">(</span>n<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>r<span class="token operator">=</span>l<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span>n<span class="token operator">&lt;</span>r<span class="token punctuation">;</span>n<span class="token operator">++</span><span class="token punctuation">)</span>k<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span>i<span class="token punctuation">,</span>l<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token constant">J</span><span class="token punctuation">.</span><span class="token function">hasData</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>s<span class="token operator">=</span><span class="token constant">J</span><span class="token punctuation">.</span><span class="token function">access</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">,</span>u<span class="token operator">=</span>k<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>s<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token constant">J</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span>u<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">function</span> <span class="token function">Ie</span><span class="token punctuation">(</span><span class="token parameter">n<span class="token punctuation">,</span>r<span class="token punctuation">,</span>i<span class="token punctuation">,</span>o</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>r<span class="token operator">=</span><span class="token function">g</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>r<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">var</span> e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>a<span class="token punctuation">,</span>s<span class="token punctuation">,</span>u<span class="token punctuation">,</span>l<span class="token punctuation">,</span>c<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>f<span class="token operator">=</span>n<span class="token punctuation">.</span>length<span class="token punctuation">,</span>p<span class="token operator">=</span>f<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>d<span class="token operator">=</span>r<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>h<span class="token operator">=</span><span class="token function">m</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>h<span class="token operator">||</span><span class="token number">1</span><span class="token operator">&lt;</span>f<span class="token operator">&amp;&amp;</span><span class="token string">"string"</span><span class="token operator">==</span><span class="token keyword">typeof</span> d<span class="token operator">&amp;&amp;</span><span class="token operator">!</span>y<span class="token punctuation">.</span>checkClone<span class="token operator">&amp;&amp;</span>Le<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">return</span> n<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> t<span class="token operator">=</span>n<span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>h<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>r<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token function">d</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>e<span class="token punctuation">,</span>t<span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">Ie</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span>r<span class="token punctuation">,</span>i<span class="token punctuation">,</span>o<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>f<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>t<span class="token operator">=</span><span class="token punctuation">(</span>e<span class="token operator">=</span><span class="token function">we</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span>n<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>ownerDocument<span class="token punctuation">,</span><span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">,</span>n<span class="token punctuation">,</span>o<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>firstChild<span class="token punctuation">,</span><span class="token number">1</span><span class="token operator">===</span>e<span class="token punctuation">.</span>childNodes<span class="token punctuation">.</span>length<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>e<span class="token operator">=</span>t<span class="token punctuation">)</span><span class="token punctuation">,</span>t<span class="token operator">||</span>o<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">for</span><span class="token punctuation">(</span>s<span class="token operator">=</span><span class="token punctuation">(</span>a<span class="token operator">=</span>k<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token function">ve</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token string">"script"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>Pe<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span>c<span class="token operator">&lt;</span>f<span class="token punctuation">;</span>c<span class="token operator">++</span><span class="token punctuation">)</span>u<span class="token operator">=</span>e<span class="token punctuation">,</span>c<span class="token operator">!==</span>p<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>u<span class="token operator">=</span>k<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span>u<span class="token punctuation">,</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>s<span class="token operator">&amp;&amp;</span>k<span class="token punctuation">.</span><span class="token function">merge</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span><span class="token function">ve</span><span class="token punctuation">(</span>u<span class="token punctuation">,</span><span class="token string">"script"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">i</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>n<span class="token punctuation">[</span>c<span class="token punctuation">]</span><span class="token punctuation">,</span>u<span class="token punctuation">,</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token keyword">for</span><span class="token punctuation">(</span>l<span class="token operator">=</span>a<span class="token punctuation">[</span>a<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>ownerDocument<span class="token punctuation">,</span>k<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>Re<span class="token punctuation">)</span><span class="token punctuation">,</span>c<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>c<span class="token operator">&lt;</span>s<span class="token punctuation">;</span>c<span class="token operator">++</span><span class="token punctuation">)</span>u<span class="token operator">=</span>a<span class="token punctuation">[</span>c<span class="token punctuation">]</span><span class="token punctuation">,</span>he<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>u<span class="token punctuation">.</span>type<span class="token operator">||</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token operator">!</span><span class="token constant">Q</span><span class="token punctuation">.</span><span class="token function">access</span><span class="token punctuation">(</span>u<span class="token punctuation">,</span><span class="token string">"globalEval"</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span>k<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>l<span class="token punctuation">,</span>u<span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>u<span class="token punctuation">.</span>src<span class="token operator">&amp;&amp;</span><span class="token string">"module"</span><span class="token operator">!==</span><span class="token punctuation">(</span>u<span class="token punctuation">.</span>type<span class="token operator">||</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">?</span>k<span class="token punctuation">.</span>_evalUrl<span class="token operator">&amp;&amp;</span><span class="token operator">!</span>u<span class="token punctuation">.</span>noModule<span class="token operator">&amp;&amp;</span>k<span class="token punctuation">.</span><span class="token function">_evalUrl</span><span class="token punctuation">(</span>u<span class="token punctuation">.</span>src<span class="token punctuation">,</span><span class="token punctuation">&#123;</span>nonce<span class="token operator">:</span>u<span class="token punctuation">.</span>nonce<span class="token operator">||</span>u<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"nonce"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token function">b</span><span class="token punctuation">(</span>u<span class="token punctuation">.</span>textContent<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>He<span class="token punctuation">,</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">,</span>u<span class="token punctuation">,</span>l<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> n<span class="token punctuation">&#125;</span><span class="token keyword">function</span> <span class="token function">We</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> r<span class="token punctuation">,</span>i<span class="token operator">=</span>t<span class="token operator">?</span>k<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span>e<span class="token punctuation">)</span><span class="token operator">:</span>e<span class="token punctuation">,</span>o<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">null</span><span class="token operator">!=</span><span class="token punctuation">(</span>r<span class="token operator">=</span>i<span class="token punctuation">[</span>o<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>o<span class="token operator">++</span><span class="token punctuation">)</span>n<span class="token operator">||</span><span class="token number">1</span><span class="token operator">!==</span>r<span class="token punctuation">.</span>nodeType<span class="token operator">||</span>k<span class="token punctuation">.</span><span class="token function">cleanData</span><span class="token punctuation">(</span><span class="token function">ve</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>r<span class="token punctuation">.</span>parentNode<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>n<span class="token operator">&amp;&amp;</span><span class="token function">oe</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token function">ye</span><span class="token punctuation">(</span><span class="token function">ve</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span><span class="token string">"script"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>r<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> e<span class="token punctuation">&#125;</span>k<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token function-variable function">htmlPrefilter</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> e<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>je<span class="token punctuation">,</span><span class="token string">"&lt;$1>&lt;/$2>"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">clone</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> r<span class="token punctuation">,</span>i<span class="token punctuation">,</span>o<span class="token punctuation">,</span>a<span class="token punctuation">,</span>s<span class="token punctuation">,</span>u<span class="token punctuation">,</span>l<span class="token punctuation">,</span>c<span class="token operator">=</span>e<span class="token punctuation">.</span><span class="token function">cloneNode</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>f<span class="token operator">=</span><span class="token function">oe</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>y<span class="token punctuation">.</span>noCloneChecked<span class="token operator">||</span><span class="token number">1</span><span class="token operator">!==</span>e<span class="token punctuation">.</span>nodeType<span class="token operator">&amp;&amp;</span><span class="token number">11</span><span class="token operator">!==</span>e<span class="token punctuation">.</span>nodeType<span class="token operator">||</span>k<span class="token punctuation">.</span><span class="token function">isXMLDoc</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">for</span><span class="token punctuation">(</span>a<span class="token operator">=</span><span class="token function">ve</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">,</span>r<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>i<span class="token operator">=</span><span class="token punctuation">(</span>o<span class="token operator">=</span><span class="token function">ve</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span>r<span class="token operator">&lt;</span>i<span class="token punctuation">;</span>r<span class="token operator">++</span><span class="token punctuation">)</span>s<span class="token operator">=</span>o<span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token punctuation">,</span>u<span class="token operator">=</span>a<span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token keyword">void</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token string">"input"</span><span class="token operator">===</span><span class="token punctuation">(</span>l<span class="token operator">=</span>u<span class="token punctuation">.</span>nodeName<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span>pe<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>type<span class="token punctuation">)</span><span class="token operator">?</span>u<span class="token punctuation">.</span>checked<span class="token operator">=</span>s<span class="token punctuation">.</span>checked<span class="token operator">:</span><span class="token string">"input"</span><span class="token operator">!==</span>l<span class="token operator">&amp;&amp;</span><span class="token string">"textarea"</span><span class="token operator">!==</span>l<span class="token operator">||</span><span class="token punctuation">(</span>u<span class="token punctuation">.</span>defaultValue<span class="token operator">=</span>s<span class="token punctuation">.</span>defaultValue<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token keyword">if</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token keyword">for</span><span class="token punctuation">(</span>o<span class="token operator">=</span>o<span class="token operator">||</span><span class="token function">ve</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">,</span>a<span class="token operator">=</span>a<span class="token operator">||</span><span class="token function">ve</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">,</span>r<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>i<span class="token operator">=</span>o<span class="token punctuation">.</span>length<span class="token punctuation">;</span>r<span class="token operator">&lt;</span>i<span class="token punctuation">;</span>r<span class="token operator">++</span><span class="token punctuation">)</span><span class="token function">Me</span><span class="token punctuation">(</span>o<span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token punctuation">,</span>a<span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">else</span> <span class="token function">Me</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token operator">&lt;</span><span class="token punctuation">(</span>a<span class="token operator">=</span><span class="token function">ve</span><span class="token punctuation">(</span>c<span class="token punctuation">,</span><span class="token string">"script"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token operator">&amp;&amp;</span><span class="token function">ye</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span><span class="token operator">!</span>f<span class="token operator">&amp;&amp;</span><span class="token function">ve</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token string">"script"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>c<span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">cleanData</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> t<span class="token punctuation">,</span>n<span class="token punctuation">,</span>r<span class="token punctuation">,</span>i<span class="token operator">=</span>k<span class="token punctuation">.</span>event<span class="token punctuation">.</span>special<span class="token punctuation">,</span>o<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token number">0</span><span class="token operator">!==</span><span class="token punctuation">(</span>n<span class="token operator">=</span>e<span class="token punctuation">[</span>o<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>o<span class="token operator">++</span><span class="token punctuation">)</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token constant">G</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">if</span><span class="token punctuation">(</span>t<span class="token operator">=</span>n<span class="token punctuation">[</span><span class="token constant">Q</span><span class="token punctuation">.</span>expando<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">if</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span>events<span class="token punctuation">)</span><span class="token keyword">for</span><span class="token punctuation">(</span>r <span class="token keyword">in</span> t<span class="token punctuation">.</span>events<span class="token punctuation">)</span>i<span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token operator">?</span>k<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span>r<span class="token punctuation">)</span><span class="token operator">:</span>k<span class="token punctuation">.</span><span class="token function">removeEvent</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span>r<span class="token punctuation">,</span>t<span class="token punctuation">.</span>handle<span class="token punctuation">)</span><span class="token punctuation">;</span>n<span class="token punctuation">[</span><span class="token constant">Q</span><span class="token punctuation">.</span>expando<span class="token punctuation">]</span><span class="token operator">=</span><span class="token keyword">void</span> <span class="token number">0</span><span class="token punctuation">&#125;</span>n<span class="token punctuation">[</span><span class="token constant">J</span><span class="token punctuation">.</span>expando<span class="token punctuation">]</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>n<span class="token punctuation">[</span><span class="token constant">J</span><span class="token punctuation">.</span>expando<span class="token punctuation">]</span><span class="token operator">=</span><span class="token keyword">void</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span>fn<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token function-variable function">detach</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token function">We</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>e<span class="token punctuation">,</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">remove</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token function">We</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>e<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">text</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token function">_</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token keyword">void</span> <span class="token number">0</span><span class="token operator">===</span>e<span class="token operator">?</span>k<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token operator">!==</span><span class="token keyword">this</span><span class="token punctuation">.</span>nodeType<span class="token operator">&amp;&amp;</span><span class="token number">11</span><span class="token operator">!==</span><span class="token keyword">this</span><span class="token punctuation">.</span>nodeType<span class="token operator">&amp;&amp;</span><span class="token number">9</span><span class="token operator">!==</span><span class="token keyword">this</span><span class="token punctuation">.</span>nodeType<span class="token operator">||</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>textContent<span class="token operator">=</span>e<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">,</span>e<span class="token punctuation">,</span>arguments<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">append</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token function">Ie</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>arguments<span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token operator">!==</span><span class="token keyword">this</span><span class="token punctuation">.</span>nodeType<span class="token operator">&amp;&amp;</span><span class="token number">11</span><span class="token operator">!==</span><span class="token keyword">this</span><span class="token punctuation">.</span>nodeType<span class="token operator">&amp;&amp;</span><span class="token number">9</span><span class="token operator">!==</span><span class="token keyword">this</span><span class="token punctuation">.</span>nodeType<span class="token operator">||</span><span class="token function">Oe</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>e<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">prepend</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token function">Ie</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>arguments<span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">===</span><span class="token keyword">this</span><span class="token punctuation">.</span>nodeType<span class="token operator">||</span><span class="token number">11</span><span class="token operator">===</span><span class="token keyword">this</span><span class="token punctuation">.</span>nodeType<span class="token operator">||</span><span class="token number">9</span><span class="token operator">===</span><span class="token keyword">this</span><span class="token punctuation">.</span>nodeType<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> t<span class="token operator">=</span><span class="token function">Oe</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>t<span class="token punctuation">.</span><span class="token function">insertBefore</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>t<span class="token punctuation">.</span>firstChild<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">before</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token function">Ie</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>arguments<span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>parentNode<span class="token operator">&amp;&amp;</span><span class="token keyword">this</span><span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span><span class="token function">insertBefore</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">after</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token function">Ie</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>arguments<span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>parentNode<span class="token operator">&amp;&amp;</span><span class="token keyword">this</span><span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span><span class="token function">insertBefore</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>nextSibling<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">empty</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> e<span class="token punctuation">,</span>t<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">null</span><span class="token operator">!=</span><span class="token punctuation">(</span>e<span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>t<span class="token operator">++</span><span class="token punctuation">)</span><span class="token number">1</span><span class="token operator">===</span>e<span class="token punctuation">.</span>nodeType<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>k<span class="token punctuation">.</span><span class="token function">cleanData</span><span class="token punctuation">(</span><span class="token function">ve</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>e<span class="token punctuation">.</span>textContent<span class="token operator">=</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">clone</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> e<span class="token operator">=</span><span class="token keyword">null</span><span class="token operator">!=</span>e<span class="token operator">&amp;&amp;</span>e<span class="token punctuation">,</span>t<span class="token operator">=</span><span class="token keyword">null</span><span class="token operator">==</span>t<span class="token operator">?</span>e<span class="token operator">:</span>t<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> k<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>e<span class="token punctuation">,</span>t<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">html</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token function">_</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> t<span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">||</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>n<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>r<span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token number">0</span><span class="token operator">===</span>e<span class="token operator">&amp;&amp;</span><span class="token number">1</span><span class="token operator">===</span>t<span class="token punctuation">.</span>nodeType<span class="token punctuation">)</span><span class="token keyword">return</span> t<span class="token punctuation">.</span>innerHTML<span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"string"</span><span class="token operator">==</span><span class="token keyword">typeof</span> e<span class="token operator">&amp;&amp;</span><span class="token operator">!</span>qe<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token operator">!</span>ge<span class="token punctuation">[</span><span class="token punctuation">(</span>de<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token operator">||</span><span class="token punctuation">[</span><span class="token string">""</span><span class="token punctuation">,</span><span class="token string">""</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>e<span class="token operator">=</span>k<span class="token punctuation">.</span><span class="token function">htmlPrefilter</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">try</span><span class="token punctuation">&#123;</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token punctuation">;</span>n<span class="token operator">&lt;</span>r<span class="token punctuation">;</span>n<span class="token operator">++</span><span class="token punctuation">)</span><span class="token number">1</span><span class="token operator">===</span><span class="token punctuation">(</span>t<span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token operator">||</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>nodeType<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>k<span class="token punctuation">.</span><span class="token function">cleanData</span><span class="token punctuation">(</span><span class="token function">ve</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span><span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>t<span class="token punctuation">.</span>innerHTML<span class="token operator">=</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>t<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">&#125;</span><span class="token keyword">catch</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>t<span class="token operator">&amp;&amp;</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">,</span>e<span class="token punctuation">,</span>arguments<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">replaceWith</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> n<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token function">Ie</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>arguments<span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> t<span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">.</span>parentNode<span class="token punctuation">;</span>k<span class="token punctuation">.</span><span class="token function">inArray</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token number">0</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>k<span class="token punctuation">.</span><span class="token function">cleanData</span><span class="token punctuation">(</span><span class="token function">ve</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>t<span class="token operator">&amp;&amp;</span>t<span class="token punctuation">.</span><span class="token function">replaceChild</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>appendTo<span class="token operator">:</span><span class="token string">"append"</span><span class="token punctuation">,</span>prependTo<span class="token operator">:</span><span class="token string">"prepend"</span><span class="token punctuation">,</span>insertBefore<span class="token operator">:</span><span class="token string">"before"</span><span class="token punctuation">,</span>insertAfter<span class="token operator">:</span><span class="token string">"after"</span><span class="token punctuation">,</span>replaceAll<span class="token operator">:</span><span class="token string">"replaceWith"</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>a</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>k<span class="token punctuation">.</span>fn<span class="token punctuation">[</span>e<span class="token punctuation">]</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> t<span class="token punctuation">,</span>n<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>r<span class="token operator">=</span><span class="token function">k</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">,</span>i<span class="token operator">=</span>r<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>o<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>o<span class="token operator">&lt;=</span>i<span class="token punctuation">;</span>o<span class="token operator">++</span><span class="token punctuation">)</span>t<span class="token operator">=</span>o<span class="token operator">===</span>i<span class="token operator">?</span><span class="token keyword">this</span><span class="token operator">:</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">k</span><span class="token punctuation">(</span>r<span class="token punctuation">[</span>o<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">[</span>a<span class="token punctuation">]</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">u</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span>t<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">pushStack</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">var</span> $e<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">"^("</span><span class="token operator">+</span>te<span class="token operator">+</span><span class="token string">")(?!px)[a-z%]+$"</span><span class="token punctuation">,</span><span class="token string">"i"</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function-variable function">Fe</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> t<span class="token operator">=</span>e<span class="token punctuation">.</span>ownerDocument<span class="token punctuation">.</span>defaultView<span class="token punctuation">;</span><span class="token keyword">return</span> t<span class="token operator">&amp;&amp;</span>t<span class="token punctuation">.</span>opener<span class="token operator">||</span><span class="token punctuation">(</span>t<span class="token operator">=</span><span class="token constant">C</span><span class="token punctuation">)</span><span class="token punctuation">,</span>t<span class="token punctuation">.</span><span class="token function">getComputedStyle</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>Be<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span>re<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">"|"</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">"i"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">function</span> <span class="token function">_e</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> r<span class="token punctuation">,</span>i<span class="token punctuation">,</span>o<span class="token punctuation">,</span>a<span class="token punctuation">,</span>s<span class="token operator">=</span>e<span class="token punctuation">.</span>style<span class="token punctuation">;</span><span class="token keyword">return</span><span class="token punctuation">(</span>n<span class="token operator">=</span>n<span class="token operator">||</span><span class="token function">Fe</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token operator">!==</span><span class="token punctuation">(</span>a<span class="token operator">=</span>n<span class="token punctuation">.</span><span class="token function">getPropertyValue</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token operator">||</span>n<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">||</span><span class="token function">oe</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token operator">||</span><span class="token punctuation">(</span>a<span class="token operator">=</span>k<span class="token punctuation">.</span><span class="token function">style</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>t<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token operator">!</span>y<span class="token punctuation">.</span><span class="token function">pixelBoxStyles</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span>$e<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span>Be<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>r<span class="token operator">=</span>s<span class="token punctuation">.</span>width<span class="token punctuation">,</span>i<span class="token operator">=</span>s<span class="token punctuation">.</span>minWidth<span class="token punctuation">,</span>o<span class="token operator">=</span>s<span class="token punctuation">.</span>maxWidth<span class="token punctuation">,</span>s<span class="token punctuation">.</span>minWidth<span class="token operator">=</span>s<span class="token punctuation">.</span>maxWidth<span class="token operator">=</span>s<span class="token punctuation">.</span>width<span class="token operator">=</span>a<span class="token punctuation">,</span>a<span class="token operator">=</span>n<span class="token punctuation">.</span>width<span class="token punctuation">,</span>s<span class="token punctuation">.</span>width<span class="token operator">=</span>r<span class="token punctuation">,</span>s<span class="token punctuation">.</span>minWidth<span class="token operator">=</span>i<span class="token punctuation">,</span>s<span class="token punctuation">.</span>maxWidth<span class="token operator">=</span>o<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">void</span> <span class="token number">0</span><span class="token operator">!==</span>a<span class="token operator">?</span>a<span class="token operator">+</span><span class="token string">""</span><span class="token operator">:</span>a<span class="token punctuation">&#125;</span><span class="token keyword">function</span> <span class="token function">ze</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span><span class="token punctuation">&#123;</span><span class="token function-variable function">get</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">e</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">return</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>get<span class="token operator">=</span>t<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>arguments<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">delete</span> <span class="token keyword">this</span><span class="token punctuation">.</span>get<span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token operator">!</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">function</span> <span class="token function">e</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">if</span><span class="token punctuation">(</span>u<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>s<span class="token punctuation">.</span>style<span class="token punctuation">.</span>cssText<span class="token operator">=</span><span class="token string">"position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0"</span><span class="token punctuation">,</span>u<span class="token punctuation">.</span>style<span class="token punctuation">.</span>cssText<span class="token operator">=</span><span class="token string">"position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%"</span><span class="token punctuation">,</span>ie<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>u<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">var</span> e<span class="token operator">=</span><span class="token constant">C</span><span class="token punctuation">.</span><span class="token function">getComputedStyle</span><span class="token punctuation">(</span>u<span class="token punctuation">)</span><span class="token punctuation">;</span>n<span class="token operator">=</span><span class="token string">"1%"</span><span class="token operator">!==</span>e<span class="token punctuation">.</span>top<span class="token punctuation">,</span>a<span class="token operator">=</span><span class="token number">12</span><span class="token operator">===</span><span class="token function">t</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>marginLeft<span class="token punctuation">)</span><span class="token punctuation">,</span>u<span class="token punctuation">.</span>style<span class="token punctuation">.</span>right<span class="token operator">=</span><span class="token string">"60%"</span><span class="token punctuation">,</span>o<span class="token operator">=</span><span class="token number">36</span><span class="token operator">===</span><span class="token function">t</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>right<span class="token punctuation">)</span><span class="token punctuation">,</span>r<span class="token operator">=</span><span class="token number">36</span><span class="token operator">===</span><span class="token function">t</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>width<span class="token punctuation">)</span><span class="token punctuation">,</span>u<span class="token punctuation">.</span>style<span class="token punctuation">.</span>position<span class="token operator">=</span><span class="token string">"absolute"</span><span class="token punctuation">,</span>i<span class="token operator">=</span><span class="token number">12</span><span class="token operator">===</span><span class="token function">t</span><span class="token punctuation">(</span>u<span class="token punctuation">.</span>offsetWidth<span class="token operator">/</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span>ie<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">,</span>u<span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">function</span> <span class="token function">t</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span><span class="token function">parseFloat</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">var</span> n<span class="token punctuation">,</span>r<span class="token punctuation">,</span>i<span class="token punctuation">,</span>o<span class="token punctuation">,</span>a<span class="token punctuation">,</span>s<span class="token operator">=</span><span class="token constant">E</span><span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"div"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>u<span class="token operator">=</span><span class="token constant">E</span><span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"div"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>u<span class="token punctuation">.</span>style<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>u<span class="token punctuation">.</span>style<span class="token punctuation">.</span>backgroundClip<span class="token operator">=</span><span class="token string">"content-box"</span><span class="token punctuation">,</span>u<span class="token punctuation">.</span><span class="token function">cloneNode</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>backgroundClip<span class="token operator">=</span><span class="token string">""</span><span class="token punctuation">,</span>y<span class="token punctuation">.</span>clearCloneStyle<span class="token operator">=</span><span class="token string">"content-box"</span><span class="token operator">===</span>u<span class="token punctuation">.</span>style<span class="token punctuation">.</span>backgroundClip<span class="token punctuation">,</span>k<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span>y<span class="token punctuation">,</span><span class="token punctuation">&#123;</span><span class="token function-variable function">boxSizingReliable</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token function">e</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>r<span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">pixelBoxStyles</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token function">e</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>o<span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">pixelPosition</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token function">e</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>n<span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">reliableMarginLeft</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token function">e</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>a<span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">scrollboxSize</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token function">e</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>i<span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">var</span> Ue<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">"Webkit"</span><span class="token punctuation">,</span><span class="token string">"Moz"</span><span class="token punctuation">,</span><span class="token string">"ms"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>Xe<span class="token operator">=</span><span class="token constant">E</span><span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"div"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>style<span class="token punctuation">,</span>Ve<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">function</span> <span class="token function">Ge</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> t<span class="token operator">=</span>k<span class="token punctuation">.</span>cssProps<span class="token punctuation">[</span>e<span class="token punctuation">]</span><span class="token operator">||</span>Ve<span class="token punctuation">[</span>e<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">return</span> t<span class="token operator">||</span><span class="token punctuation">(</span>e <span class="token keyword">in</span> Xe<span class="token operator">?</span>e<span class="token operator">:</span>Ve<span class="token punctuation">[</span>e<span class="token punctuation">]</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> t<span class="token operator">=</span>e<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span>e<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>n<span class="token operator">=</span>Ue<span class="token punctuation">.</span>length<span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>n<span class="token operator">--</span><span class="token punctuation">)</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>e<span class="token operator">=</span>Ue<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token operator">+</span>t<span class="token punctuation">)</span><span class="token keyword">in</span> Xe<span class="token punctuation">)</span><span class="token keyword">return</span> e<span class="token punctuation">&#125;</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token operator">||</span>e<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">var</span> Ye<span class="token operator">=</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^(none|table(?!-c[ea]).+)</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>Qe<span class="token operator">=</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^--</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>Je<span class="token operator">=</span><span class="token punctuation">&#123;</span>position<span class="token operator">:</span><span class="token string">"absolute"</span><span class="token punctuation">,</span>visibility<span class="token operator">:</span><span class="token string">"hidden"</span><span class="token punctuation">,</span>display<span class="token operator">:</span><span class="token string">"block"</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>Ke<span class="token operator">=</span><span class="token punctuation">&#123;</span>letterSpacing<span class="token operator">:</span><span class="token string">"0"</span><span class="token punctuation">,</span>fontWeight<span class="token operator">:</span><span class="token string">"400"</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">function</span> <span class="token function">Ze</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> r<span class="token operator">=</span>ne<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> r<span class="token operator">?</span>Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>r<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">-</span><span class="token punctuation">(</span>n<span class="token operator">||</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token punctuation">(</span>r<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token operator">||</span><span class="token string">"px"</span><span class="token punctuation">)</span><span class="token operator">:</span>t<span class="token punctuation">&#125;</span><span class="token keyword">function</span> <span class="token function">et</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n<span class="token punctuation">,</span>r<span class="token punctuation">,</span>i<span class="token punctuation">,</span>o</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> a<span class="token operator">=</span><span class="token string">"width"</span><span class="token operator">===</span>t<span class="token operator">?</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>s<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>u<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>n<span class="token operator">===</span><span class="token punctuation">(</span>r<span class="token operator">?</span><span class="token string">"border"</span><span class="token operator">:</span><span class="token string">"content"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token punctuation">;</span>a<span class="token operator">&lt;</span><span class="token number">4</span><span class="token punctuation">;</span>a<span class="token operator">+=</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token string">"margin"</span><span class="token operator">===</span>n<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>u<span class="token operator">+=</span>k<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>n<span class="token operator">+</span>re<span class="token punctuation">[</span>a<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>r<span class="token operator">?</span><span class="token punctuation">(</span><span class="token string">"content"</span><span class="token operator">===</span>n<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>u<span class="token operator">-=</span>k<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token string">"padding"</span><span class="token operator">+</span>re<span class="token punctuation">[</span>a<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">"margin"</span><span class="token operator">!==</span>n<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>u<span class="token operator">-=</span>k<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token string">"border"</span><span class="token operator">+</span>re<span class="token punctuation">[</span>a<span class="token punctuation">]</span><span class="token operator">+</span><span class="token string">"Width"</span><span class="token punctuation">,</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token punctuation">(</span>u<span class="token operator">+=</span>k<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token string">"padding"</span><span class="token operator">+</span>re<span class="token punctuation">[</span>a<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>i<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">"padding"</span><span class="token operator">!==</span>n<span class="token operator">?</span>u<span class="token operator">+=</span>k<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token string">"border"</span><span class="token operator">+</span>re<span class="token punctuation">[</span>a<span class="token punctuation">]</span><span class="token operator">+</span><span class="token string">"Width"</span><span class="token punctuation">,</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>i<span class="token punctuation">)</span><span class="token operator">:</span>s<span class="token operator">+=</span>k<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token string">"border"</span><span class="token operator">+</span>re<span class="token punctuation">[</span>a<span class="token punctuation">]</span><span class="token operator">+</span><span class="token string">"Width"</span><span class="token punctuation">,</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span><span class="token operator">!</span>r<span class="token operator">&amp;&amp;</span><span class="token number">0</span><span class="token operator">&lt;=</span>o<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>u<span class="token operator">+=</span>Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span>e<span class="token punctuation">[</span><span class="token string">"offset"</span><span class="token operator">+</span>t<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span>t<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">-</span>o<span class="token operator">-</span>u<span class="token operator">-</span>s<span class="token operator">-</span><span class="token number">.5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">||</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>u<span class="token punctuation">&#125;</span><span class="token keyword">function</span> <span class="token function">tt</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> r<span class="token operator">=</span><span class="token function">Fe</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">,</span>i<span class="token operator">=</span><span class="token punctuation">(</span><span class="token operator">!</span>y<span class="token punctuation">.</span><span class="token function">boxSizingReliable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">||</span>n<span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token string">"border-box"</span><span class="token operator">===</span>k<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token string">"boxSizing"</span><span class="token punctuation">,</span><span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">,</span>r<span class="token punctuation">)</span><span class="token punctuation">,</span>o<span class="token operator">=</span>i<span class="token punctuation">,</span>a<span class="token operator">=</span><span class="token function">_e</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>r<span class="token punctuation">)</span><span class="token punctuation">,</span>s<span class="token operator">=</span><span class="token string">"offset"</span><span class="token operator">+</span>t<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span>t<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>$e<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>n<span class="token punctuation">)</span><span class="token keyword">return</span> a<span class="token punctuation">;</span>a<span class="token operator">=</span><span class="token string">"auto"</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span><span class="token punctuation">(</span><span class="token operator">!</span>y<span class="token punctuation">.</span><span class="token function">boxSizingReliable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span>i<span class="token operator">||</span><span class="token string">"auto"</span><span class="token operator">===</span>a<span class="token operator">||</span><span class="token operator">!</span><span class="token function">parseFloat</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token string">"inline"</span><span class="token operator">===</span>k<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token string">"display"</span><span class="token punctuation">,</span><span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">,</span>r<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span>e<span class="token punctuation">.</span><span class="token function">getClientRects</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token string">"border-box"</span><span class="token operator">===</span>k<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token string">"boxSizing"</span><span class="token punctuation">,</span><span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">,</span>r<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span>o<span class="token operator">=</span>s <span class="token keyword">in</span> e<span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>a<span class="token operator">=</span>e<span class="token punctuation">[</span>s<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span>a<span class="token operator">=</span><span class="token function">parseFloat</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token operator">||</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token function">et</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n<span class="token operator">||</span><span class="token punctuation">(</span>i<span class="token operator">?</span><span class="token string">"border"</span><span class="token operator">:</span><span class="token string">"content"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>o<span class="token punctuation">,</span>r<span class="token punctuation">,</span>a<span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"px"</span><span class="token punctuation">&#125;</span><span class="token keyword">function</span> <span class="token function">nt</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n<span class="token punctuation">,</span>r<span class="token punctuation">,</span>i</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">nt<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>init</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n<span class="token punctuation">,</span>r<span class="token punctuation">,</span>i<span class="token punctuation">)</span><span class="token punctuation">&#125;</span>k<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>cssHooks<span class="token operator">:</span><span class="token punctuation">&#123;</span>opacity<span class="token operator">:</span><span class="token punctuation">&#123;</span><span class="token function-variable function">get</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">if</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> n<span class="token operator">=</span><span class="token function">_e</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token string">"opacity"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span><span class="token string">""</span><span class="token operator">===</span>n<span class="token operator">?</span><span class="token string">"1"</span><span class="token operator">:</span>n<span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>cssNumber<span class="token operator">:</span><span class="token punctuation">&#123;</span>animationIterationCount<span class="token operator">:</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>columnCount<span class="token operator">:</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>fillOpacity<span class="token operator">:</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>flexGrow<span class="token operator">:</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>flexShrink<span class="token operator">:</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>fontWeight<span class="token operator">:</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>gridArea<span class="token operator">:</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>gridColumn<span class="token operator">:</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>gridColumnEnd<span class="token operator">:</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>gridColumnStart<span class="token operator">:</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>gridRow<span class="token operator">:</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>gridRowEnd<span class="token operator">:</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>gridRowStart<span class="token operator">:</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>lineHeight<span class="token operator">:</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>opacity<span class="token operator">:</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>order<span class="token operator">:</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>orphans<span class="token operator">:</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>widows<span class="token operator">:</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>zIndex<span class="token operator">:</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>zoom<span class="token operator">:</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>cssProps<span class="token operator">:</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">style</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n<span class="token punctuation">,</span>r</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">if</span><span class="token punctuation">(</span>e<span class="token operator">&amp;&amp;</span><span class="token number">3</span><span class="token operator">!==</span>e<span class="token punctuation">.</span>nodeType<span class="token operator">&amp;&amp;</span><span class="token number">8</span><span class="token operator">!==</span>e<span class="token punctuation">.</span>nodeType<span class="token operator">&amp;&amp;</span>e<span class="token punctuation">.</span>style<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> i<span class="token punctuation">,</span>o<span class="token punctuation">,</span>a<span class="token punctuation">,</span>s<span class="token operator">=</span><span class="token constant">V</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">,</span>u<span class="token operator">=</span>Qe<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">,</span>l<span class="token operator">=</span>e<span class="token punctuation">.</span>style<span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>u<span class="token operator">||</span><span class="token punctuation">(</span>t<span class="token operator">=</span><span class="token function">Ge</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>a<span class="token operator">=</span>k<span class="token punctuation">.</span>cssHooks<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token operator">||</span>k<span class="token punctuation">.</span>cssHooks<span class="token punctuation">[</span>s<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token keyword">void</span> <span class="token number">0</span><span class="token operator">===</span>n<span class="token punctuation">)</span><span class="token keyword">return</span> a<span class="token operator">&amp;&amp;</span><span class="token string">"get"</span><span class="token keyword">in</span> a<span class="token operator">&amp;&amp;</span><span class="token keyword">void</span> <span class="token number">0</span><span class="token operator">!==</span><span class="token punctuation">(</span>i<span class="token operator">=</span>a<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">,</span>r<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">?</span>i<span class="token operator">:</span>l<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token string">"string"</span><span class="token operator">===</span><span class="token punctuation">(</span>o<span class="token operator">=</span><span class="token keyword">typeof</span> n<span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>i<span class="token operator">=</span>ne<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span>i<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>n<span class="token operator">=</span><span class="token function">le</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>i<span class="token punctuation">)</span><span class="token punctuation">,</span>o<span class="token operator">=</span><span class="token string">"number"</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">null</span><span class="token operator">!=</span>n<span class="token operator">&amp;&amp;</span>n<span class="token operator">==</span>n<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span><span class="token string">"number"</span><span class="token operator">!==</span>o<span class="token operator">||</span>u<span class="token operator">||</span><span class="token punctuation">(</span>n<span class="token operator">+=</span>i<span class="token operator">&amp;&amp;</span>i<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token operator">||</span><span class="token punctuation">(</span>k<span class="token punctuation">.</span>cssNumber<span class="token punctuation">[</span>s<span class="token punctuation">]</span><span class="token operator">?</span><span class="token string">""</span><span class="token operator">:</span><span class="token string">"px"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>y<span class="token punctuation">.</span>clearCloneStyle<span class="token operator">||</span><span class="token string">""</span><span class="token operator">!==</span>n<span class="token operator">||</span><span class="token number">0</span><span class="token operator">!==</span>t<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">"background"</span><span class="token punctuation">)</span><span class="token operator">||</span><span class="token punctuation">(</span>l<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token operator">=</span><span class="token string">"inherit"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>a<span class="token operator">&amp;&amp;</span><span class="token string">"set"</span><span class="token keyword">in</span> a<span class="token operator">&amp;&amp;</span><span class="token keyword">void</span> <span class="token number">0</span><span class="token operator">===</span><span class="token punctuation">(</span>n<span class="token operator">=</span>a<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>n<span class="token punctuation">,</span>r<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">||</span><span class="token punctuation">(</span>u<span class="token operator">?</span>l<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token operator">:</span>l<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token operator">=</span>n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">css</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n<span class="token punctuation">,</span>r</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> i<span class="token punctuation">,</span>o<span class="token punctuation">,</span>a<span class="token punctuation">,</span>s<span class="token operator">=</span><span class="token constant">V</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> Qe<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token operator">||</span><span class="token punctuation">(</span>t<span class="token operator">=</span><span class="token function">Ge</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span>a<span class="token operator">=</span>k<span class="token punctuation">.</span>cssHooks<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token operator">||</span>k<span class="token punctuation">.</span>cssHooks<span class="token punctuation">[</span>s<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token string">"get"</span><span class="token keyword">in</span> a<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>i<span class="token operator">=</span>a<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">void</span> <span class="token number">0</span><span class="token operator">===</span>i<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token function">_e</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>r<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">"normal"</span><span class="token operator">===</span>i<span class="token operator">&amp;&amp;</span>t <span class="token keyword">in</span> Ke<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>i<span class="token operator">=</span>Ke<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">""</span><span class="token operator">===</span>n<span class="token operator">||</span>n<span class="token operator">?</span><span class="token punctuation">(</span>o<span class="token operator">=</span><span class="token function">parseFloat</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token operator">!</span><span class="token number">0</span><span class="token operator">===</span>n<span class="token operator">||</span><span class="token function">isFinite</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token operator">?</span>o<span class="token operator">||</span><span class="token number">0</span><span class="token operator">:</span>i<span class="token punctuation">)</span><span class="token operator">:</span>i<span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"height"</span><span class="token punctuation">,</span><span class="token string">"width"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>u</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>k<span class="token punctuation">.</span>cssHooks<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token function-variable function">get</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">if</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token keyword">return</span><span class="token operator">!</span>Ye<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>k<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token string">"display"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">||</span>e<span class="token punctuation">.</span><span class="token function">getClientRects</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token operator">&amp;&amp;</span>e<span class="token punctuation">.</span><span class="token function">getBoundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>width<span class="token operator">?</span><span class="token function">tt</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>u<span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token operator">:</span><span class="token function">ue</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>Je<span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token function">tt</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>u<span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">set</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> r<span class="token punctuation">,</span>i<span class="token operator">=</span><span class="token function">Fe</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">,</span>o<span class="token operator">=</span><span class="token operator">!</span>y<span class="token punctuation">.</span><span class="token function">scrollboxSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token string">"absolute"</span><span class="token operator">===</span>i<span class="token punctuation">.</span>position<span class="token punctuation">,</span>a<span class="token operator">=</span><span class="token punctuation">(</span>o<span class="token operator">||</span>n<span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token string">"border-box"</span><span class="token operator">===</span>k<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token string">"boxSizing"</span><span class="token punctuation">,</span><span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">,</span>i<span class="token punctuation">)</span><span class="token punctuation">,</span>s<span class="token operator">=</span>n<span class="token operator">?</span><span class="token function">et</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>u<span class="token punctuation">,</span>n<span class="token punctuation">,</span>a<span class="token punctuation">,</span>i<span class="token punctuation">)</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">return</span> a<span class="token operator">&amp;&amp;</span>o<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>s<span class="token operator">-=</span>Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span>e<span class="token punctuation">[</span><span class="token string">"offset"</span><span class="token operator">+</span>u<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span>u<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">-</span><span class="token function">parseFloat</span><span class="token punctuation">(</span>i<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token function">et</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>u<span class="token punctuation">,</span><span class="token string">"border"</span><span class="token punctuation">,</span><span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">,</span>i<span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">.5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>s<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>r<span class="token operator">=</span>ne<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token string">"px"</span><span class="token operator">!==</span><span class="token punctuation">(</span>r<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token operator">||</span><span class="token string">"px"</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>style<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token operator">=</span>t<span class="token punctuation">,</span>t<span class="token operator">=</span>k<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>u<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">Ze</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>t<span class="token punctuation">,</span>s<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span>cssHooks<span class="token punctuation">.</span>marginLeft<span class="token operator">=</span><span class="token function">ze</span><span class="token punctuation">(</span>y<span class="token punctuation">.</span>reliableMarginLeft<span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">if</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token keyword">return</span><span class="token punctuation">(</span><span class="token function">parseFloat</span><span class="token punctuation">(</span><span class="token function">_e</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token string">"marginLeft"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">||</span>e<span class="token punctuation">.</span><span class="token function">getBoundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>left<span class="token operator">-</span><span class="token function">ue</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token punctuation">&#123;</span>marginLeft<span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> e<span class="token punctuation">.</span><span class="token function">getBoundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>left<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"px"</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>margin<span class="token operator">:</span><span class="token string">""</span><span class="token punctuation">,</span>padding<span class="token operator">:</span><span class="token string">""</span><span class="token punctuation">,</span>border<span class="token operator">:</span><span class="token string">"Width"</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">i<span class="token punctuation">,</span>o</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>k<span class="token punctuation">.</span>cssHooks<span class="token punctuation">[</span>i<span class="token operator">+</span>o<span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token function-variable function">expand</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> t<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>n<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>r<span class="token operator">=</span><span class="token string">"string"</span><span class="token operator">==</span><span class="token keyword">typeof</span> e<span class="token operator">?</span>e<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">" "</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token punctuation">[</span>e<span class="token punctuation">]</span><span class="token punctuation">;</span>t<span class="token operator">&lt;</span><span class="token number">4</span><span class="token punctuation">;</span>t<span class="token operator">++</span><span class="token punctuation">)</span>n<span class="token punctuation">[</span>i<span class="token operator">+</span>re<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token operator">+</span>o<span class="token punctuation">]</span><span class="token operator">=</span>r<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token operator">||</span>r<span class="token punctuation">[</span>t<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">||</span>r<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">return</span> n<span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token string">"margin"</span><span class="token operator">!==</span>i<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>k<span class="token punctuation">.</span>cssHooks<span class="token punctuation">[</span>i<span class="token operator">+</span>o<span class="token punctuation">]</span><span class="token punctuation">.</span>set<span class="token operator">=</span>Ze<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span>fn<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token function-variable function">css</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token function">_</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> r<span class="token punctuation">,</span>i<span class="token punctuation">,</span>o<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>a<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">for</span><span class="token punctuation">(</span>r<span class="token operator">=</span><span class="token function">Fe</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">,</span>i<span class="token operator">=</span>t<span class="token punctuation">.</span>length<span class="token punctuation">;</span>a<span class="token operator">&lt;</span>i<span class="token punctuation">;</span>a<span class="token operator">++</span><span class="token punctuation">)</span>o<span class="token punctuation">[</span>t<span class="token punctuation">[</span>a<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">=</span>k<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>t<span class="token punctuation">[</span>a<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">,</span>r<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> o<span class="token punctuation">&#125;</span><span class="token keyword">return</span> <span class="token keyword">void</span> <span class="token number">0</span><span class="token operator">!==</span>n<span class="token operator">?</span>k<span class="token punctuation">.</span><span class="token function">style</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token operator">:</span>k<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>t<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>e<span class="token punctuation">,</span>t<span class="token punctuation">,</span><span class="token number">1</span><span class="token operator">&lt;</span>arguments<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">(</span>k<span class="token punctuation">.</span>Tween<span class="token operator">=</span>nt<span class="token punctuation">)</span><span class="token punctuation">.</span>prototype<span class="token operator">=</span><span class="token punctuation">&#123;</span>constructor<span class="token operator">:</span>nt<span class="token punctuation">,</span><span class="token function-variable function">init</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n<span class="token punctuation">,</span>r<span class="token punctuation">,</span>i<span class="token punctuation">,</span>o</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>elem<span class="token operator">=</span>e<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>prop<span class="token operator">=</span>n<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>easing<span class="token operator">=</span>i<span class="token operator">||</span>k<span class="token punctuation">.</span>easing<span class="token punctuation">.</span>_default<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token operator">=</span>t<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>start<span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">.</span>now<span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">cur</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>end<span class="token operator">=</span>r<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>unit<span class="token operator">=</span>o<span class="token operator">||</span><span class="token punctuation">(</span>k<span class="token punctuation">.</span>cssNumber<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token operator">?</span><span class="token string">""</span><span class="token operator">:</span><span class="token string">"px"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">cur</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> e<span class="token operator">=</span>nt<span class="token punctuation">.</span>propHooks<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>prop<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">return</span> e<span class="token operator">&amp;&amp;</span>e<span class="token punctuation">.</span>get<span class="token operator">?</span>e<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token operator">:</span>nt<span class="token punctuation">.</span>propHooks<span class="token punctuation">.</span>_default<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">run</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> t<span class="token punctuation">,</span>n<span class="token operator">=</span>nt<span class="token punctuation">.</span>propHooks<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>prop<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>duration<span class="token operator">?</span><span class="token keyword">this</span><span class="token punctuation">.</span>pos<span class="token operator">=</span>t<span class="token operator">=</span>k<span class="token punctuation">.</span>easing<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>easing<span class="token punctuation">]</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>duration<span class="token operator">*</span>e<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>duration<span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">this</span><span class="token punctuation">.</span>pos<span class="token operator">=</span>t<span class="token operator">=</span>e<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>now<span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>end<span class="token operator">-</span><span class="token keyword">this</span><span class="token punctuation">.</span>start<span class="token punctuation">)</span><span class="token operator">*</span>t<span class="token operator">+</span><span class="token keyword">this</span><span class="token punctuation">.</span>start<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>step<span class="token operator">&amp;&amp;</span><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span><span class="token function">step</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>elem<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>now<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">,</span>n<span class="token operator">&amp;&amp;</span>n<span class="token punctuation">.</span>set<span class="token operator">?</span>n<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token operator">:</span>nt<span class="token punctuation">.</span>propHooks<span class="token punctuation">.</span>_default<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>init<span class="token punctuation">.</span>prototype<span class="token operator">=</span>nt<span class="token punctuation">.</span>prototype<span class="token punctuation">,</span><span class="token punctuation">(</span>nt<span class="token punctuation">.</span>propHooks<span class="token operator">=</span><span class="token punctuation">&#123;</span>_default<span class="token operator">:</span><span class="token punctuation">&#123;</span><span class="token function-variable function">get</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> t<span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token number">1</span><span class="token operator">!==</span>e<span class="token punctuation">.</span>elem<span class="token punctuation">.</span>nodeType<span class="token operator">||</span><span class="token keyword">null</span><span class="token operator">!=</span>e<span class="token punctuation">.</span>elem<span class="token punctuation">[</span>e<span class="token punctuation">.</span>prop<span class="token punctuation">]</span><span class="token operator">&amp;&amp;</span><span class="token keyword">null</span><span class="token operator">==</span>e<span class="token punctuation">.</span>elem<span class="token punctuation">.</span>style<span class="token punctuation">[</span>e<span class="token punctuation">.</span>prop<span class="token punctuation">]</span><span class="token operator">?</span>e<span class="token punctuation">.</span>elem<span class="token punctuation">[</span>e<span class="token punctuation">.</span>prop<span class="token punctuation">]</span><span class="token operator">:</span><span class="token punctuation">(</span>t<span class="token operator">=</span>k<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>elem<span class="token punctuation">,</span>e<span class="token punctuation">.</span>prop<span class="token punctuation">,</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token string">"auto"</span><span class="token operator">!==</span>t<span class="token operator">?</span>t<span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">set</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>k<span class="token punctuation">.</span>fx<span class="token punctuation">.</span>step<span class="token punctuation">[</span>e<span class="token punctuation">.</span>prop<span class="token punctuation">]</span><span class="token operator">?</span>k<span class="token punctuation">.</span>fx<span class="token punctuation">.</span>step<span class="token punctuation">[</span>e<span class="token punctuation">.</span>prop<span class="token punctuation">]</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token operator">:</span><span class="token number">1</span><span class="token operator">!==</span>e<span class="token punctuation">.</span>elem<span class="token punctuation">.</span>nodeType<span class="token operator">||</span><span class="token operator">!</span>k<span class="token punctuation">.</span>cssHooks<span class="token punctuation">[</span>e<span class="token punctuation">.</span>prop<span class="token punctuation">]</span><span class="token operator">&amp;&amp;</span><span class="token keyword">null</span><span class="token operator">==</span>e<span class="token punctuation">.</span>elem<span class="token punctuation">.</span>style<span class="token punctuation">[</span><span class="token function">Ge</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>prop<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">?</span>e<span class="token punctuation">.</span>elem<span class="token punctuation">[</span>e<span class="token punctuation">.</span>prop<span class="token punctuation">]</span><span class="token operator">=</span>e<span class="token punctuation">.</span>now<span class="token operator">:</span>k<span class="token punctuation">.</span><span class="token function">style</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>elem<span class="token punctuation">,</span>e<span class="token punctuation">.</span>prop<span class="token punctuation">,</span>e<span class="token punctuation">.</span>now<span class="token operator">+</span>e<span class="token punctuation">.</span>unit<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>scrollTop<span class="token operator">=</span>nt<span class="token punctuation">.</span>propHooks<span class="token punctuation">.</span>scrollLeft<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token function-variable function">set</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>e<span class="token punctuation">.</span>elem<span class="token punctuation">.</span>nodeType<span class="token operator">&amp;&amp;</span>e<span class="token punctuation">.</span>elem<span class="token punctuation">.</span>parentNode<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>elem<span class="token punctuation">[</span>e<span class="token punctuation">.</span>prop<span class="token punctuation">]</span><span class="token operator">=</span>e<span class="token punctuation">.</span>now<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span>easing<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token function-variable function">linear</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> e<span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">swing</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span><span class="token number">.5</span><span class="token operator">-</span>Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span>e<span class="token operator">*</span>Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>_default<span class="token operator">:</span><span class="token string">"swing"</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span>fx<span class="token operator">=</span>nt<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>init<span class="token punctuation">,</span>k<span class="token punctuation">.</span>fx<span class="token punctuation">.</span>step<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">var</span> rt<span class="token punctuation">,</span>it<span class="token punctuation">,</span>ot<span class="token punctuation">,</span>at<span class="token punctuation">,</span>st<span class="token operator">=</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^(?:toggle|show|hide)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>ut<span class="token operator">=</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">queueHooks$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span><span class="token keyword">function</span> <span class="token function">lt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>it<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token number">1</span><span class="token operator">===</span><span class="token constant">E</span><span class="token punctuation">.</span>hidden<span class="token operator">&amp;&amp;</span><span class="token constant">C</span><span class="token punctuation">.</span>requestAnimationFrame<span class="token operator">?</span><span class="token constant">C</span><span class="token punctuation">.</span><span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>lt<span class="token punctuation">)</span><span class="token operator">:</span><span class="token constant">C</span><span class="token punctuation">.</span><span class="token function">setTimeout</span><span class="token punctuation">(</span>lt<span class="token punctuation">,</span>k<span class="token punctuation">.</span>fx<span class="token punctuation">.</span>interval<span class="token punctuation">)</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span>fx<span class="token punctuation">.</span><span class="token function">tick</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">function</span> <span class="token function">ct</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token constant">C</span><span class="token punctuation">.</span><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>rt<span class="token operator">=</span><span class="token keyword">void</span> <span class="token number">0</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>rt<span class="token operator">=</span>Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">function</span> <span class="token function">ft</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> n<span class="token punctuation">,</span>r<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>i<span class="token operator">=</span><span class="token punctuation">&#123;</span>height<span class="token operator">:</span>e<span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span>t<span class="token operator">=</span>t<span class="token operator">?</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">;</span>r<span class="token operator">&lt;</span><span class="token number">4</span><span class="token punctuation">;</span>r<span class="token operator">+=</span><span class="token number">2</span><span class="token operator">-</span>t<span class="token punctuation">)</span>i<span class="token punctuation">[</span><span class="token string">"margin"</span><span class="token operator">+</span><span class="token punctuation">(</span>n<span class="token operator">=</span>re<span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">=</span>i<span class="token punctuation">[</span><span class="token string">"padding"</span><span class="token operator">+</span>n<span class="token punctuation">]</span><span class="token operator">=</span>e<span class="token punctuation">;</span><span class="token keyword">return</span> t<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>i<span class="token punctuation">.</span>opacity<span class="token operator">=</span>i<span class="token punctuation">.</span>width<span class="token operator">=</span>e<span class="token punctuation">)</span><span class="token punctuation">,</span>i<span class="token punctuation">&#125;</span><span class="token keyword">function</span> <span class="token function">pt</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> r<span class="token punctuation">,</span>i<span class="token operator">=</span><span class="token punctuation">(</span>dt<span class="token punctuation">.</span>tweeners<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token operator">||</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>dt<span class="token punctuation">.</span>tweeners<span class="token punctuation">[</span><span class="token string">"*"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>o<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>a<span class="token operator">=</span>i<span class="token punctuation">.</span>length<span class="token punctuation">;</span>o<span class="token operator">&lt;</span>a<span class="token punctuation">;</span>o<span class="token operator">++</span><span class="token punctuation">)</span><span class="token keyword">if</span><span class="token punctuation">(</span>r<span class="token operator">=</span>i<span class="token punctuation">[</span>o<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span>t<span class="token punctuation">,</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">return</span> r<span class="token punctuation">&#125;</span><span class="token keyword">function</span> <span class="token function">dt</span><span class="token punctuation">(</span><span class="token parameter">o<span class="token punctuation">,</span>e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> n<span class="token punctuation">,</span>a<span class="token punctuation">,</span>r<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>i<span class="token operator">=</span>dt<span class="token punctuation">.</span>prefilters<span class="token punctuation">.</span>length<span class="token punctuation">,</span>s<span class="token operator">=</span>k<span class="token punctuation">.</span><span class="token function">Deferred</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">always</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">delete</span> u<span class="token punctuation">.</span>elem<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function-variable function">u</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">if</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token keyword">return</span><span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> e<span class="token operator">=</span>rt<span class="token operator">||</span><span class="token function">ct</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>t<span class="token operator">=</span>Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>l<span class="token punctuation">.</span>startTime<span class="token operator">+</span>l<span class="token punctuation">.</span>duration<span class="token operator">-</span>e<span class="token punctuation">)</span><span class="token punctuation">,</span>n<span class="token operator">=</span><span class="token number">1</span><span class="token operator">-</span><span class="token punctuation">(</span>t<span class="token operator">/</span>l<span class="token punctuation">.</span>duration<span class="token operator">||</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>r<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>i<span class="token operator">=</span>l<span class="token punctuation">.</span>tweens<span class="token punctuation">.</span>length<span class="token punctuation">;</span>r<span class="token operator">&lt;</span>i<span class="token punctuation">;</span>r<span class="token operator">++</span><span class="token punctuation">)</span>l<span class="token punctuation">.</span>tweens<span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> s<span class="token punctuation">.</span><span class="token function">notifyWith</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span><span class="token punctuation">[</span>l<span class="token punctuation">,</span>n<span class="token punctuation">,</span>t<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>n<span class="token operator">&lt;</span><span class="token number">1</span><span class="token operator">&amp;&amp;</span>i<span class="token operator">?</span>t<span class="token operator">:</span><span class="token punctuation">(</span>i<span class="token operator">||</span>s<span class="token punctuation">.</span><span class="token function">notifyWith</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span><span class="token punctuation">[</span>l<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>s<span class="token punctuation">.</span><span class="token function">resolveWith</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span><span class="token punctuation">[</span>l<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>l<span class="token operator">=</span>s<span class="token punctuation">.</span><span class="token function">promise</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>elem<span class="token operator">:</span>o<span class="token punctuation">,</span>props<span class="token operator">:</span>k<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>e<span class="token punctuation">)</span><span class="token punctuation">,</span>opts<span class="token operator">:</span>k<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token punctuation">&#123;</span>specialEasing<span class="token operator">:</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>easing<span class="token operator">:</span>k<span class="token punctuation">.</span>easing<span class="token punctuation">.</span>_default<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>t<span class="token punctuation">)</span><span class="token punctuation">,</span>originalProperties<span class="token operator">:</span>e<span class="token punctuation">,</span>originalOptions<span class="token operator">:</span>t<span class="token punctuation">,</span>startTime<span class="token operator">:</span>rt<span class="token operator">||</span><span class="token function">ct</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>duration<span class="token operator">:</span>t<span class="token punctuation">.</span>duration<span class="token punctuation">,</span>tweens<span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token function-variable function">createTween</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> n<span class="token operator">=</span>k<span class="token punctuation">.</span><span class="token function">Tween</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span>l<span class="token punctuation">.</span>opts<span class="token punctuation">,</span>e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>l<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>specialEasing<span class="token punctuation">[</span>e<span class="token punctuation">]</span><span class="token operator">||</span>l<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>easing<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> l<span class="token punctuation">.</span>tweens<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">,</span>n<span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">stop</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> t<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>n<span class="token operator">=</span>e<span class="token operator">?</span>l<span class="token punctuation">.</span>tweens<span class="token punctuation">.</span>length<span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span>a<span class="token operator">=</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">;</span>t<span class="token operator">&lt;</span>n<span class="token punctuation">;</span>t<span class="token operator">++</span><span class="token punctuation">)</span>l<span class="token punctuation">.</span>tweens<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> e<span class="token operator">?</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">notifyWith</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span><span class="token punctuation">[</span>l<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>s<span class="token punctuation">.</span><span class="token function">resolveWith</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span><span class="token punctuation">[</span>l<span class="token punctuation">,</span>e<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">:</span>s<span class="token punctuation">.</span><span class="token function">rejectWith</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span><span class="token punctuation">[</span>l<span class="token punctuation">,</span>e<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>c<span class="token operator">=</span>l<span class="token punctuation">.</span>props<span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> n<span class="token punctuation">,</span>r<span class="token punctuation">,</span>i<span class="token punctuation">,</span>o<span class="token punctuation">,</span>a<span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span>n <span class="token keyword">in</span> e<span class="token punctuation">)</span><span class="token keyword">if</span><span class="token punctuation">(</span>i<span class="token operator">=</span>t<span class="token punctuation">[</span>r<span class="token operator">=</span><span class="token constant">V</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>o<span class="token operator">=</span>e<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">,</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>i<span class="token operator">=</span>o<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>o<span class="token operator">=</span>e<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token operator">=</span>o<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>n<span class="token operator">!==</span>r<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>e<span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token operator">=</span>o<span class="token punctuation">,</span><span class="token keyword">delete</span> e<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span>a<span class="token operator">=</span>k<span class="token punctuation">.</span>cssHooks<span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token string">"expand"</span><span class="token keyword">in</span> a<span class="token punctuation">)</span><span class="token keyword">for</span><span class="token punctuation">(</span>n <span class="token keyword">in</span> o<span class="token operator">=</span>a<span class="token punctuation">.</span><span class="token function">expand</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">delete</span> e<span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token punctuation">,</span>o<span class="token punctuation">)</span>n <span class="token keyword">in</span> e<span class="token operator">||</span><span class="token punctuation">(</span>e<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token operator">=</span>o<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">,</span>t<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token operator">=</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">else</span> t<span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token operator">=</span>i<span class="token punctuation">&#125;</span><span class="token punctuation">(</span>c<span class="token punctuation">,</span>l<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>specialEasing<span class="token punctuation">)</span><span class="token punctuation">;</span>r<span class="token operator">&lt;</span>i<span class="token punctuation">;</span>r<span class="token operator">++</span><span class="token punctuation">)</span><span class="token keyword">if</span><span class="token punctuation">(</span>n<span class="token operator">=</span>dt<span class="token punctuation">.</span>prefilters<span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>l<span class="token punctuation">,</span>o<span class="token punctuation">,</span>c<span class="token punctuation">,</span>l<span class="token punctuation">.</span>opts<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">return</span> <span class="token function">m</span><span class="token punctuation">(</span>n<span class="token punctuation">.</span>stop<span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>k<span class="token punctuation">.</span><span class="token function">_queueHooks</span><span class="token punctuation">(</span>l<span class="token punctuation">.</span>elem<span class="token punctuation">,</span>l<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>queue<span class="token punctuation">)</span><span class="token punctuation">.</span>stop<span class="token operator">=</span>n<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>n<span class="token punctuation">;</span><span class="token keyword">return</span> k<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>c<span class="token punctuation">,</span>pt<span class="token punctuation">,</span>l<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">m</span><span class="token punctuation">(</span>l<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>start<span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span>l<span class="token punctuation">.</span>opts<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span>l<span class="token punctuation">)</span><span class="token punctuation">,</span>l<span class="token punctuation">.</span><span class="token function">progress</span><span class="token punctuation">(</span>l<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>progress<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">done</span><span class="token punctuation">(</span>l<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>done<span class="token punctuation">,</span>l<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>complete<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fail</span><span class="token punctuation">(</span>l<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>fail<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">always</span><span class="token punctuation">(</span>l<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>always<span class="token punctuation">)</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span>fx<span class="token punctuation">.</span><span class="token function">timer</span><span class="token punctuation">(</span>k<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span>u<span class="token punctuation">,</span><span class="token punctuation">&#123;</span>elem<span class="token operator">:</span>o<span class="token punctuation">,</span>anim<span class="token operator">:</span>l<span class="token punctuation">,</span>queue<span class="token operator">:</span>l<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>queue<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>l<span class="token punctuation">&#125;</span>k<span class="token punctuation">.</span>Animation<span class="token operator">=</span>k<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span>dt<span class="token punctuation">,</span><span class="token punctuation">&#123;</span>tweeners<span class="token operator">:</span><span class="token punctuation">&#123;</span><span class="token string">"*"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> n<span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">createTween</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token function">le</span><span class="token punctuation">(</span>n<span class="token punctuation">.</span>elem<span class="token punctuation">,</span>e<span class="token punctuation">,</span>ne<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">,</span>n<span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">tweener</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token function">m</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">(</span>t<span class="token operator">=</span>e<span class="token punctuation">,</span>e<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">"*"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span>e<span class="token operator">=</span>e<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token constant">R</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> n<span class="token punctuation">,</span>r<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>i<span class="token operator">=</span>e<span class="token punctuation">.</span>length<span class="token punctuation">;</span>r<span class="token operator">&lt;</span>i<span class="token punctuation">;</span>r<span class="token operator">++</span><span class="token punctuation">)</span>n<span class="token operator">=</span>e<span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token punctuation">,</span>dt<span class="token punctuation">.</span>tweeners<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token operator">=</span>dt<span class="token punctuation">.</span>tweeners<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token operator">||</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>dt<span class="token punctuation">.</span>tweeners<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>prefilters<span class="token operator">:</span><span class="token punctuation">[</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> r<span class="token punctuation">,</span>i<span class="token punctuation">,</span>o<span class="token punctuation">,</span>a<span class="token punctuation">,</span>s<span class="token punctuation">,</span>u<span class="token punctuation">,</span>l<span class="token punctuation">,</span>c<span class="token punctuation">,</span>f<span class="token operator">=</span><span class="token string">"width"</span><span class="token keyword">in</span> t<span class="token operator">||</span><span class="token string">"height"</span><span class="token keyword">in</span> t<span class="token punctuation">,</span>p<span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">,</span>d<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>h<span class="token operator">=</span>e<span class="token punctuation">.</span>style<span class="token punctuation">,</span>g<span class="token operator">=</span>e<span class="token punctuation">.</span>nodeType<span class="token operator">&amp;&amp;</span><span class="token function">se</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">,</span>v<span class="token operator">=</span><span class="token constant">Q</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token string">"fxshow"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span>r <span class="token keyword">in</span> n<span class="token punctuation">.</span>queue<span class="token operator">||</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token operator">==</span><span class="token punctuation">(</span>a<span class="token operator">=</span>k<span class="token punctuation">.</span><span class="token function">_queueHooks</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token string">"fx"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>unqueued<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>unqueued<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>s<span class="token operator">=</span>a<span class="token punctuation">.</span>empty<span class="token punctuation">.</span>fire<span class="token punctuation">,</span>a<span class="token punctuation">.</span>empty<span class="token punctuation">.</span><span class="token function-variable function">fire</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>a<span class="token punctuation">.</span>unqueued<span class="token operator">||</span><span class="token function">s</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>a<span class="token punctuation">.</span>unqueued<span class="token operator">++</span><span class="token punctuation">,</span>p<span class="token punctuation">.</span><span class="token function">always</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>p<span class="token punctuation">.</span><span class="token function">always</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>a<span class="token punctuation">.</span>unqueued<span class="token operator">--</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span><span class="token function">queue</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token string">"fx"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token operator">||</span>a<span class="token punctuation">.</span>empty<span class="token punctuation">.</span><span class="token function">fire</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>t<span class="token punctuation">)</span><span class="token keyword">if</span><span class="token punctuation">(</span>i<span class="token operator">=</span>t<span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token punctuation">,</span>st<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">delete</span> t<span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token punctuation">,</span>o<span class="token operator">=</span>o<span class="token operator">||</span><span class="token string">"toggle"</span><span class="token operator">===</span>i<span class="token punctuation">,</span>i<span class="token operator">===</span><span class="token punctuation">(</span>g<span class="token operator">?</span><span class="token string">"hide"</span><span class="token operator">:</span><span class="token string">"show"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"show"</span><span class="token operator">!==</span>i<span class="token operator">||</span><span class="token operator">!</span>v<span class="token operator">||</span><span class="token keyword">void</span> <span class="token number">0</span><span class="token operator">===</span>v<span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">continue</span><span class="token punctuation">;</span>g<span class="token operator">=</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">&#125;</span>d<span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token operator">=</span>v<span class="token operator">&amp;&amp;</span>v<span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token operator">||</span>k<span class="token punctuation">.</span><span class="token function">style</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>r<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>u<span class="token operator">=</span><span class="token operator">!</span>k<span class="token punctuation">.</span><span class="token function">isEmptyObject</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">||</span><span class="token operator">!</span>k<span class="token punctuation">.</span><span class="token function">isEmptyObject</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">for</span><span class="token punctuation">(</span>r <span class="token keyword">in</span> f<span class="token operator">&amp;&amp;</span><span class="token number">1</span><span class="token operator">===</span>e<span class="token punctuation">.</span>nodeType<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>n<span class="token punctuation">.</span>overflow<span class="token operator">=</span><span class="token punctuation">[</span>h<span class="token punctuation">.</span>overflow<span class="token punctuation">,</span>h<span class="token punctuation">.</span>overflowX<span class="token punctuation">,</span>h<span class="token punctuation">.</span>overflowY<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token keyword">null</span><span class="token operator">==</span><span class="token punctuation">(</span>l<span class="token operator">=</span>v<span class="token operator">&amp;&amp;</span>v<span class="token punctuation">.</span>display<span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>l<span class="token operator">=</span><span class="token constant">Q</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token string">"display"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">"none"</span><span class="token operator">===</span><span class="token punctuation">(</span>c<span class="token operator">=</span>k<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token string">"display"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>l<span class="token operator">?</span>c<span class="token operator">=</span>l<span class="token operator">:</span><span class="token punctuation">(</span><span class="token function">fe</span><span class="token punctuation">(</span><span class="token punctuation">[</span>e<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>l<span class="token operator">=</span>e<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display<span class="token operator">||</span>l<span class="token punctuation">,</span>c<span class="token operator">=</span>k<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token string">"display"</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">fe</span><span class="token punctuation">(</span><span class="token punctuation">[</span>e<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token string">"inline"</span><span class="token operator">===</span>c<span class="token operator">||</span><span class="token string">"inline-block"</span><span class="token operator">===</span>c<span class="token operator">&amp;&amp;</span><span class="token keyword">null</span><span class="token operator">!=</span>l<span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token string">"none"</span><span class="token operator">===</span>k<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token string">"float"</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>u<span class="token operator">||</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span><span class="token function">done</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>h<span class="token punctuation">.</span>display<span class="token operator">=</span>l<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">null</span><span class="token operator">==</span>l<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>c<span class="token operator">=</span>h<span class="token punctuation">.</span>display<span class="token punctuation">,</span>l<span class="token operator">=</span><span class="token string">"none"</span><span class="token operator">===</span>c<span class="token operator">?</span><span class="token string">""</span><span class="token operator">:</span>c<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>h<span class="token punctuation">.</span>display<span class="token operator">=</span><span class="token string">"inline-block"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>n<span class="token punctuation">.</span>overflow<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>h<span class="token punctuation">.</span>overflow<span class="token operator">=</span><span class="token string">"hidden"</span><span class="token punctuation">,</span>p<span class="token punctuation">.</span><span class="token function">always</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>h<span class="token punctuation">.</span>overflow<span class="token operator">=</span>n<span class="token punctuation">.</span>overflow<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>h<span class="token punctuation">.</span>overflowX<span class="token operator">=</span>n<span class="token punctuation">.</span>overflow<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>h<span class="token punctuation">.</span>overflowY<span class="token operator">=</span>n<span class="token punctuation">.</span>overflow<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>u<span class="token operator">=</span><span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">,</span>d<span class="token punctuation">)</span>u<span class="token operator">||</span><span class="token punctuation">(</span>v<span class="token operator">?</span><span class="token string">"hidden"</span><span class="token keyword">in</span> v<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>g<span class="token operator">=</span>v<span class="token punctuation">.</span>hidden<span class="token punctuation">)</span><span class="token operator">:</span>v<span class="token operator">=</span><span class="token constant">Q</span><span class="token punctuation">.</span><span class="token function">access</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token string">"fxshow"</span><span class="token punctuation">,</span><span class="token punctuation">&#123;</span>display<span class="token operator">:</span>l<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>o<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span>hidden<span class="token operator">=</span><span class="token operator">!</span>g<span class="token punctuation">)</span><span class="token punctuation">,</span>g<span class="token operator">&amp;&amp;</span><span class="token function">fe</span><span class="token punctuation">(</span><span class="token punctuation">[</span>e<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>p<span class="token punctuation">.</span><span class="token function">done</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">for</span><span class="token punctuation">(</span>r <span class="token keyword">in</span> g<span class="token operator">||</span><span class="token function">fe</span><span class="token punctuation">(</span><span class="token punctuation">[</span>e<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token constant">Q</span><span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token string">"fxshow"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>d<span class="token punctuation">)</span>k<span class="token punctuation">.</span><span class="token function">style</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>r<span class="token punctuation">,</span>d<span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>u<span class="token operator">=</span><span class="token function">pt</span><span class="token punctuation">(</span>g<span class="token operator">?</span>v<span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>r<span class="token punctuation">,</span>p<span class="token punctuation">)</span><span class="token punctuation">,</span>r <span class="token keyword">in</span> v<span class="token operator">||</span><span class="token punctuation">(</span>v<span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token operator">=</span>u<span class="token punctuation">.</span>start<span class="token punctuation">,</span>g<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>u<span class="token punctuation">.</span>end<span class="token operator">=</span>u<span class="token punctuation">.</span>start<span class="token punctuation">,</span>u<span class="token punctuation">.</span>start<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token function-variable function">prefilter</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>t<span class="token operator">?</span>dt<span class="token punctuation">.</span>prefilters<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token operator">:</span>dt<span class="token punctuation">.</span>prefilters<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span><span class="token function-variable function">speed</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> r<span class="token operator">=</span>e<span class="token operator">&amp;&amp;</span><span class="token string">"object"</span><span class="token operator">==</span><span class="token keyword">typeof</span> e<span class="token operator">?</span>k<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>e<span class="token punctuation">)</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>complete<span class="token operator">:</span>n<span class="token operator">||</span><span class="token operator">!</span>n<span class="token operator">&amp;&amp;</span>t<span class="token operator">||</span><span class="token function">m</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span>e<span class="token punctuation">,</span>duration<span class="token operator">:</span>e<span class="token punctuation">,</span>easing<span class="token operator">:</span>n<span class="token operator">&amp;&amp;</span>t<span class="token operator">||</span>t<span class="token operator">&amp;&amp;</span><span class="token operator">!</span><span class="token function">m</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span>t<span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">return</span> k<span class="token punctuation">.</span>fx<span class="token punctuation">.</span>off<span class="token operator">?</span>r<span class="token punctuation">.</span>duration<span class="token operator">=</span><span class="token number">0</span><span class="token operator">:</span><span class="token string">"number"</span><span class="token operator">!=</span><span class="token keyword">typeof</span> r<span class="token punctuation">.</span>duration<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>duration <span class="token keyword">in</span> k<span class="token punctuation">.</span>fx<span class="token punctuation">.</span>speeds<span class="token operator">?</span>r<span class="token punctuation">.</span>duration<span class="token operator">=</span>k<span class="token punctuation">.</span>fx<span class="token punctuation">.</span>speeds<span class="token punctuation">[</span>r<span class="token punctuation">.</span>duration<span class="token punctuation">]</span><span class="token operator">:</span>r<span class="token punctuation">.</span>duration<span class="token operator">=</span>k<span class="token punctuation">.</span>fx<span class="token punctuation">.</span>speeds<span class="token punctuation">.</span>_default<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">null</span><span class="token operator">!=</span>r<span class="token punctuation">.</span>queue<span class="token operator">&amp;&amp;</span><span class="token operator">!</span><span class="token number">0</span><span class="token operator">!==</span>r<span class="token punctuation">.</span>queue<span class="token operator">||</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>queue<span class="token operator">=</span><span class="token string">"fx"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>r<span class="token punctuation">.</span>old<span class="token operator">=</span>r<span class="token punctuation">.</span>complete<span class="token punctuation">,</span>r<span class="token punctuation">.</span><span class="token function-variable function">complete</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token function">m</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>old<span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span>r<span class="token punctuation">.</span><span class="token function">old</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">,</span>r<span class="token punctuation">.</span>queue<span class="token operator">&amp;&amp;</span>k<span class="token punctuation">.</span><span class="token function">dequeue</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>r<span class="token punctuation">.</span>queue<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>r<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span>fn<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token function-variable function">fadeTo</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n<span class="token punctuation">,</span>r</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>se<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">"opacity"</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>opacity<span class="token operator">:</span>t<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>e<span class="token punctuation">,</span>n<span class="token punctuation">,</span>r<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">animate</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span>e<span class="token punctuation">,</span>n<span class="token punctuation">,</span>r</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> i<span class="token operator">=</span>k<span class="token punctuation">.</span><span class="token function">isEmptyObject</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">,</span>o<span class="token operator">=</span>k<span class="token punctuation">.</span><span class="token function">speed</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>n<span class="token punctuation">,</span>r<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function-variable function">a</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> e<span class="token operator">=</span><span class="token function">dt</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>t<span class="token punctuation">)</span><span class="token punctuation">,</span>o<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">(</span>i<span class="token operator">||</span><span class="token constant">Q</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span><span class="token string">"finish"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span>e<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">return</span> a<span class="token punctuation">.</span>finish<span class="token operator">=</span>a<span class="token punctuation">,</span>i<span class="token operator">||</span><span class="token operator">!</span><span class="token number">1</span><span class="token operator">===</span>o<span class="token punctuation">.</span>queue<span class="token operator">?</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">queue</span><span class="token punctuation">(</span>o<span class="token punctuation">.</span>queue<span class="token punctuation">,</span>a<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">stop</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">i<span class="token punctuation">,</span>e<span class="token punctuation">,</span>o</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> <span class="token function-variable function">a</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> t<span class="token operator">=</span>e<span class="token punctuation">.</span>stop<span class="token punctuation">;</span><span class="token keyword">delete</span> e<span class="token punctuation">.</span>stop<span class="token punctuation">,</span><span class="token function">t</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">return</span><span class="token string">"string"</span><span class="token operator">!=</span><span class="token keyword">typeof</span> i<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>o<span class="token operator">=</span>e<span class="token punctuation">,</span>e<span class="token operator">=</span>i<span class="token punctuation">,</span>i<span class="token operator">=</span><span class="token keyword">void</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>e<span class="token operator">&amp;&amp;</span><span class="token operator">!</span><span class="token number">1</span><span class="token operator">!==</span>i<span class="token operator">&amp;&amp;</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">queue</span><span class="token punctuation">(</span>i<span class="token operator">||</span><span class="token string">"fx"</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> e<span class="token operator">=</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>t<span class="token operator">=</span><span class="token keyword">null</span><span class="token operator">!=</span>i<span class="token operator">&amp;&amp;</span>i<span class="token operator">+</span><span class="token string">"queueHooks"</span><span class="token punctuation">,</span>n<span class="token operator">=</span>k<span class="token punctuation">.</span>timers<span class="token punctuation">,</span>r<span class="token operator">=</span><span class="token constant">Q</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span>r<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token operator">&amp;&amp;</span>r<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">.</span>stop<span class="token operator">&amp;&amp;</span><span class="token function">a</span><span class="token punctuation">(</span>r<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">else</span> <span class="token keyword">for</span><span class="token punctuation">(</span>t <span class="token keyword">in</span> r<span class="token punctuation">)</span>r<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token operator">&amp;&amp;</span>r<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">.</span>stop<span class="token operator">&amp;&amp;</span>ut<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token function">a</span><span class="token punctuation">(</span>r<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span>t<span class="token operator">=</span>n<span class="token punctuation">.</span>length<span class="token punctuation">;</span>t<span class="token operator">--</span><span class="token punctuation">;</span><span class="token punctuation">)</span>n<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">.</span>elem<span class="token operator">!==</span><span class="token keyword">this</span><span class="token operator">||</span><span class="token keyword">null</span><span class="token operator">!=</span>i<span class="token operator">&amp;&amp;</span>n<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">.</span>queue<span class="token operator">!==</span>i<span class="token operator">||</span><span class="token punctuation">(</span>n<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">.</span>anim<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">,</span>e<span class="token operator">=</span><span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">,</span>n<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token operator">!</span>e<span class="token operator">&amp;&amp;</span>o<span class="token operator">||</span>k<span class="token punctuation">.</span><span class="token function">dequeue</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>i<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">finish</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span><span class="token operator">!</span><span class="token number">1</span><span class="token operator">!==</span>a<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>a<span class="token operator">=</span>a<span class="token operator">||</span><span class="token string">"fx"</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> e<span class="token punctuation">,</span>t<span class="token operator">=</span><span class="token constant">Q</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">,</span>n<span class="token operator">=</span>t<span class="token punctuation">[</span>a<span class="token operator">+</span><span class="token string">"queue"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>r<span class="token operator">=</span>t<span class="token punctuation">[</span>a<span class="token operator">+</span><span class="token string">"queueHooks"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>i<span class="token operator">=</span>k<span class="token punctuation">.</span>timers<span class="token punctuation">,</span>o<span class="token operator">=</span>n<span class="token operator">?</span>n<span class="token punctuation">.</span>length<span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span>finish<span class="token operator">=</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span><span class="token function">queue</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>a<span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>r<span class="token operator">&amp;&amp;</span>r<span class="token punctuation">.</span>stop<span class="token operator">&amp;&amp;</span>r<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>e<span class="token operator">=</span>i<span class="token punctuation">.</span>length<span class="token punctuation">;</span>e<span class="token operator">--</span><span class="token punctuation">;</span><span class="token punctuation">)</span>i<span class="token punctuation">[</span>e<span class="token punctuation">]</span><span class="token punctuation">.</span>elem<span class="token operator">===</span><span class="token keyword">this</span><span class="token operator">&amp;&amp;</span>i<span class="token punctuation">[</span>e<span class="token punctuation">]</span><span class="token punctuation">.</span>queue<span class="token operator">===</span>a<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>i<span class="token punctuation">[</span>e<span class="token punctuation">]</span><span class="token punctuation">.</span>anim<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>i<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span>e<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>e<span class="token operator">&lt;</span>o<span class="token punctuation">;</span>e<span class="token operator">++</span><span class="token punctuation">)</span>n<span class="token punctuation">[</span>e<span class="token punctuation">]</span><span class="token operator">&amp;&amp;</span>n<span class="token punctuation">[</span>e<span class="token punctuation">]</span><span class="token punctuation">.</span>finish<span class="token operator">&amp;&amp;</span>n<span class="token punctuation">[</span>e<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">finish</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">delete</span> t<span class="token punctuation">.</span>finish<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"toggle"</span><span class="token punctuation">,</span><span class="token string">"show"</span><span class="token punctuation">,</span><span class="token string">"hide"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>r</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> i<span class="token operator">=</span>k<span class="token punctuation">.</span>fn<span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token punctuation">;</span>k<span class="token punctuation">.</span>fn<span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token keyword">null</span><span class="token operator">==</span>e<span class="token operator">||</span><span class="token string">"boolean"</span><span class="token operator">==</span><span class="token keyword">typeof</span> e<span class="token operator">?</span><span class="token function">i</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>arguments<span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span><span class="token function">ft</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>slideDown<span class="token operator">:</span><span class="token function">ft</span><span class="token punctuation">(</span><span class="token string">"show"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>slideUp<span class="token operator">:</span><span class="token function">ft</span><span class="token punctuation">(</span><span class="token string">"hide"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>slideToggle<span class="token operator">:</span><span class="token function">ft</span><span class="token punctuation">(</span><span class="token string">"toggle"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>fadeIn<span class="token operator">:</span><span class="token punctuation">&#123;</span>opacity<span class="token operator">:</span><span class="token string">"show"</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>fadeOut<span class="token operator">:</span><span class="token punctuation">&#123;</span>opacity<span class="token operator">:</span><span class="token string">"hide"</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>fadeToggle<span class="token operator">:</span><span class="token punctuation">&#123;</span>opacity<span class="token operator">:</span><span class="token string">"toggle"</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>r</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>k<span class="token punctuation">.</span>fn<span class="token punctuation">[</span>e<span class="token punctuation">]</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span>e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span>timers<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span>fx<span class="token punctuation">.</span><span class="token function-variable function">tick</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> e<span class="token punctuation">,</span>t<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>n<span class="token operator">=</span>k<span class="token punctuation">.</span>timers<span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span>rt<span class="token operator">=</span>Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>t<span class="token operator">&lt;</span>n<span class="token punctuation">.</span>length<span class="token punctuation">;</span>t<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">(</span>e<span class="token operator">=</span>n<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">||</span>n<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token operator">!==</span>e<span class="token operator">||</span>n<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>t<span class="token operator">--</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>n<span class="token punctuation">.</span>length<span class="token operator">||</span>k<span class="token punctuation">.</span>fx<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>rt<span class="token operator">=</span><span class="token keyword">void</span> <span class="token number">0</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span>fx<span class="token punctuation">.</span><span class="token function-variable function">timer</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>k<span class="token punctuation">.</span>timers<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span>fx<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span>fx<span class="token punctuation">.</span>interval<span class="token operator">=</span><span class="token number">13</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span>fx<span class="token punctuation">.</span><span class="token function-variable function">start</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>it<span class="token operator">||</span><span class="token punctuation">(</span>it<span class="token operator">=</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token function">lt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span>fx<span class="token punctuation">.</span><span class="token function-variable function">stop</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>it<span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span>fx<span class="token punctuation">.</span>speeds<span class="token operator">=</span><span class="token punctuation">&#123;</span>slow<span class="token operator">:</span><span class="token number">600</span><span class="token punctuation">,</span>fast<span class="token operator">:</span><span class="token number">200</span><span class="token punctuation">,</span>_default<span class="token operator">:</span><span class="token number">400</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span>fn<span class="token punctuation">.</span><span class="token function-variable function">delay</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">r<span class="token punctuation">,</span>e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> r<span class="token operator">=</span>k<span class="token punctuation">.</span>fx<span class="token operator">&amp;&amp;</span>k<span class="token punctuation">.</span>fx<span class="token punctuation">.</span>speeds<span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token operator">||</span>r<span class="token punctuation">,</span>e<span class="token operator">=</span>e<span class="token operator">||</span><span class="token string">"fx"</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">queue</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> n<span class="token operator">=</span><span class="token constant">C</span><span class="token punctuation">.</span><span class="token function">setTimeout</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>r<span class="token punctuation">)</span><span class="token punctuation">;</span>t<span class="token punctuation">.</span><span class="token function-variable function">stop</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token constant">C</span><span class="token punctuation">.</span><span class="token function">clearTimeout</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>ot<span class="token operator">=</span><span class="token constant">E</span><span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"input"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>at<span class="token operator">=</span><span class="token constant">E</span><span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"select"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span><span class="token constant">E</span><span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"option"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>ot<span class="token punctuation">.</span>type<span class="token operator">=</span><span class="token string">"checkbox"</span><span class="token punctuation">,</span>y<span class="token punctuation">.</span>checkOn<span class="token operator">=</span><span class="token string">""</span><span class="token operator">!==</span>ot<span class="token punctuation">.</span>value<span class="token punctuation">,</span>y<span class="token punctuation">.</span>optSelected<span class="token operator">=</span>at<span class="token punctuation">.</span>selected<span class="token punctuation">,</span><span class="token punctuation">(</span>ot<span class="token operator">=</span><span class="token constant">E</span><span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"input"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token operator">=</span><span class="token string">"t"</span><span class="token punctuation">,</span>ot<span class="token punctuation">.</span>type<span class="token operator">=</span><span class="token string">"radio"</span><span class="token punctuation">,</span>y<span class="token punctuation">.</span>radioValue<span class="token operator">=</span><span class="token string">"t"</span><span class="token operator">===</span>ot<span class="token punctuation">.</span>value<span class="token punctuation">;</span><span class="token keyword">var</span> ht<span class="token punctuation">,</span>gt<span class="token operator">=</span>k<span class="token punctuation">.</span>expr<span class="token punctuation">.</span>attrHandle<span class="token punctuation">;</span>k<span class="token punctuation">.</span>fn<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token function-variable function">attr</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token function">_</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span>attr<span class="token punctuation">,</span>e<span class="token punctuation">,</span>t<span class="token punctuation">,</span><span class="token number">1</span><span class="token operator">&lt;</span>arguments<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">removeAttr</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>k<span class="token punctuation">.</span><span class="token function">removeAttr</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>e<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token function-variable function">attr</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> r<span class="token punctuation">,</span>i<span class="token punctuation">,</span>o<span class="token operator">=</span>e<span class="token punctuation">.</span>nodeType<span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token operator">!==</span>o<span class="token operator">&amp;&amp;</span><span class="token number">8</span><span class="token operator">!==</span>o<span class="token operator">&amp;&amp;</span><span class="token number">2</span><span class="token operator">!==</span>o<span class="token punctuation">)</span><span class="token keyword">return</span><span class="token string">"undefined"</span><span class="token operator">==</span><span class="token keyword">typeof</span> e<span class="token punctuation">.</span>getAttribute<span class="token operator">?</span>k<span class="token punctuation">.</span><span class="token function">prop</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">===</span>o<span class="token operator">&amp;&amp;</span>k<span class="token punctuation">.</span><span class="token function">isXMLDoc</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token operator">||</span><span class="token punctuation">(</span>i<span class="token operator">=</span>k<span class="token punctuation">.</span>attrHooks<span class="token punctuation">[</span>t<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">||</span><span class="token punctuation">(</span>k<span class="token punctuation">.</span>expr<span class="token punctuation">.</span>match<span class="token punctuation">.</span>bool<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token operator">?</span>ht<span class="token operator">:</span><span class="token keyword">void</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">void</span> <span class="token number">0</span><span class="token operator">!==</span>n<span class="token operator">?</span><span class="token keyword">null</span><span class="token operator">===</span>n<span class="token operator">?</span><span class="token keyword">void</span> k<span class="token punctuation">.</span><span class="token function">removeAttr</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>t<span class="token punctuation">)</span><span class="token operator">:</span>i<span class="token operator">&amp;&amp;</span><span class="token string">"set"</span><span class="token keyword">in</span> i<span class="token operator">&amp;&amp;</span><span class="token keyword">void</span> <span class="token number">0</span><span class="token operator">!==</span><span class="token punctuation">(</span>r<span class="token operator">=</span>i<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>n<span class="token punctuation">,</span>t<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">?</span>r<span class="token operator">:</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span>n<span class="token operator">+</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token operator">:</span>i<span class="token operator">&amp;&amp;</span><span class="token string">"get"</span><span class="token keyword">in</span> i<span class="token operator">&amp;&amp;</span><span class="token keyword">null</span><span class="token operator">!==</span><span class="token punctuation">(</span>r<span class="token operator">=</span>i<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>t<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">?</span>r<span class="token operator">:</span><span class="token keyword">null</span><span class="token operator">==</span><span class="token punctuation">(</span>r<span class="token operator">=</span>k<span class="token punctuation">.</span>find<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>t<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token keyword">void</span> <span class="token number">0</span><span class="token operator">:</span>r<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>attrHooks<span class="token operator">:</span><span class="token punctuation">&#123;</span>type<span class="token operator">:</span><span class="token punctuation">&#123;</span><span class="token function-variable function">set</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>y<span class="token punctuation">.</span>radioValue<span class="token operator">&amp;&amp;</span><span class="token string">"radio"</span><span class="token operator">===</span>t<span class="token operator">&amp;&amp;</span><span class="token constant">A</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token string">"input"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> n<span class="token operator">=</span>e<span class="token punctuation">.</span>value<span class="token punctuation">;</span><span class="token keyword">return</span> e<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"type"</span><span class="token punctuation">,</span>t<span class="token punctuation">)</span><span class="token punctuation">,</span>n<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>value<span class="token operator">=</span>n<span class="token punctuation">)</span><span class="token punctuation">,</span>t<span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">removeAttr</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> n<span class="token punctuation">,</span>r<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>i<span class="token operator">=</span>t<span class="token operator">&amp;&amp;</span>t<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token constant">R</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>i<span class="token operator">&amp;&amp;</span><span class="token number">1</span><span class="token operator">===</span>e<span class="token punctuation">.</span>nodeType<span class="token punctuation">)</span><span class="token keyword">while</span><span class="token punctuation">(</span>n<span class="token operator">=</span>i<span class="token punctuation">[</span>r<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">)</span>e<span class="token punctuation">.</span><span class="token function">removeAttribute</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>ht<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token function-variable function">set</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span><span class="token operator">!</span><span class="token number">1</span><span class="token operator">===</span>t<span class="token operator">?</span>k<span class="token punctuation">.</span><span class="token function">removeAttr</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token operator">:</span>e<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">,</span>n<span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span>k<span class="token punctuation">.</span>expr<span class="token punctuation">.</span>match<span class="token punctuation">.</span>bool<span class="token punctuation">.</span>source<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\w+</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> a<span class="token operator">=</span>gt<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token operator">||</span>k<span class="token punctuation">.</span>find<span class="token punctuation">.</span>attr<span class="token punctuation">;</span>gt<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> r<span class="token punctuation">,</span>i<span class="token punctuation">,</span>o<span class="token operator">=</span>t<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> n<span class="token operator">||</span><span class="token punctuation">(</span>i<span class="token operator">=</span>gt<span class="token punctuation">[</span>o<span class="token punctuation">]</span><span class="token punctuation">,</span>gt<span class="token punctuation">[</span>o<span class="token punctuation">]</span><span class="token operator">=</span>r<span class="token punctuation">,</span>r<span class="token operator">=</span><span class="token keyword">null</span><span class="token operator">!=</span><span class="token function">a</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token operator">?</span>o<span class="token operator">:</span><span class="token keyword">null</span><span class="token punctuation">,</span>gt<span class="token punctuation">[</span>o<span class="token punctuation">]</span><span class="token operator">=</span>i<span class="token punctuation">)</span><span class="token punctuation">,</span>r<span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">var</span> vt<span class="token operator">=</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^(?:input|select|textarea|button)$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>yt<span class="token operator">=</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^(?:a|area)$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">;</span><span class="token keyword">function</span> <span class="token function">mt</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token constant">R</span><span class="token punctuation">)</span><span class="token operator">||</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">function</span> <span class="token function">xt</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> e<span class="token punctuation">.</span>getAttribute<span class="token operator">&amp;&amp;</span>e<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"class"</span><span class="token punctuation">)</span><span class="token operator">||</span><span class="token string">""</span><span class="token punctuation">&#125;</span><span class="token keyword">function</span> <span class="token function">bt</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token operator">?</span>e<span class="token operator">:</span><span class="token string">"string"</span><span class="token operator">==</span><span class="token keyword">typeof</span> e<span class="token operator">&amp;&amp;</span>e<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token constant">R</span><span class="token punctuation">)</span><span class="token operator">||</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">&#125;</span>k<span class="token punctuation">.</span>fn<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token function-variable function">prop</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token function">_</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span>prop<span class="token punctuation">,</span>e<span class="token punctuation">,</span>t<span class="token punctuation">,</span><span class="token number">1</span><span class="token operator">&lt;</span>arguments<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">removeProp</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">delete</span> <span class="token keyword">this</span><span class="token punctuation">[</span>k<span class="token punctuation">.</span>propFix<span class="token punctuation">[</span>e<span class="token punctuation">]</span><span class="token operator">||</span>e<span class="token punctuation">]</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token function-variable function">prop</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> r<span class="token punctuation">,</span>i<span class="token punctuation">,</span>o<span class="token operator">=</span>e<span class="token punctuation">.</span>nodeType<span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token operator">!==</span>o<span class="token operator">&amp;&amp;</span><span class="token number">8</span><span class="token operator">!==</span>o<span class="token operator">&amp;&amp;</span><span class="token number">2</span><span class="token operator">!==</span>o<span class="token punctuation">)</span><span class="token keyword">return</span> <span class="token number">1</span><span class="token operator">===</span>o<span class="token operator">&amp;&amp;</span>k<span class="token punctuation">.</span><span class="token function">isXMLDoc</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token operator">||</span><span class="token punctuation">(</span>t<span class="token operator">=</span>k<span class="token punctuation">.</span>propFix<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token operator">||</span>t<span class="token punctuation">,</span>i<span class="token operator">=</span>k<span class="token punctuation">.</span>propHooks<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">void</span> <span class="token number">0</span><span class="token operator">!==</span>n<span class="token operator">?</span>i<span class="token operator">&amp;&amp;</span><span class="token string">"set"</span><span class="token keyword">in</span> i<span class="token operator">&amp;&amp;</span><span class="token keyword">void</span> <span class="token number">0</span><span class="token operator">!==</span><span class="token punctuation">(</span>r<span class="token operator">=</span>i<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>n<span class="token punctuation">,</span>t<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">?</span>r<span class="token operator">:</span>e<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token operator">=</span>n<span class="token operator">:</span>i<span class="token operator">&amp;&amp;</span><span class="token string">"get"</span><span class="token keyword">in</span> i<span class="token operator">&amp;&amp;</span><span class="token keyword">null</span><span class="token operator">!==</span><span class="token punctuation">(</span>r<span class="token operator">=</span>i<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>t<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">?</span>r<span class="token operator">:</span>e<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>propHooks<span class="token operator">:</span><span class="token punctuation">&#123;</span>tabIndex<span class="token operator">:</span><span class="token punctuation">&#123;</span><span class="token function-variable function">get</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> t<span class="token operator">=</span>k<span class="token punctuation">.</span>find<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token string">"tabindex"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> t<span class="token operator">?</span><span class="token function">parseInt</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token operator">:</span>vt<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>nodeName<span class="token punctuation">)</span><span class="token operator">||</span>yt<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>nodeName<span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span>e<span class="token punctuation">.</span>href<span class="token operator">?</span><span class="token number">0</span><span class="token operator">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>propFix<span class="token operator">:</span><span class="token punctuation">&#123;</span><span class="token string">"for"</span><span class="token operator">:</span><span class="token string">"htmlFor"</span><span class="token punctuation">,</span><span class="token string">"class"</span><span class="token operator">:</span><span class="token string">"className"</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>y<span class="token punctuation">.</span>optSelected<span class="token operator">||</span><span class="token punctuation">(</span>k<span class="token punctuation">.</span>propHooks<span class="token punctuation">.</span>selected<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token function-variable function">get</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> t<span class="token operator">=</span>e<span class="token punctuation">.</span>parentNode<span class="token punctuation">;</span><span class="token keyword">return</span> t<span class="token operator">&amp;&amp;</span>t<span class="token punctuation">.</span>parentNode<span class="token operator">&amp;&amp;</span>t<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span>selectedIndex<span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">set</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> t<span class="token operator">=</span>e<span class="token punctuation">.</span>parentNode<span class="token punctuation">;</span>t<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span>selectedIndex<span class="token punctuation">,</span>t<span class="token punctuation">.</span>parentNode<span class="token operator">&amp;&amp;</span>t<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span>selectedIndex<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"tabIndex"</span><span class="token punctuation">,</span><span class="token string">"readOnly"</span><span class="token punctuation">,</span><span class="token string">"maxLength"</span><span class="token punctuation">,</span><span class="token string">"cellSpacing"</span><span class="token punctuation">,</span><span class="token string">"cellPadding"</span><span class="token punctuation">,</span><span class="token string">"rowSpan"</span><span class="token punctuation">,</span><span class="token string">"colSpan"</span><span class="token punctuation">,</span><span class="token string">"useMap"</span><span class="token punctuation">,</span><span class="token string">"frameBorder"</span><span class="token punctuation">,</span><span class="token string">"contentEditable"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>k<span class="token punctuation">.</span>propFix<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span>fn<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token function-variable function">addClass</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> e<span class="token punctuation">,</span>n<span class="token punctuation">,</span>r<span class="token punctuation">,</span>i<span class="token punctuation">,</span>o<span class="token punctuation">,</span>a<span class="token punctuation">,</span>s<span class="token punctuation">,</span>u<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">m</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token function">k</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token function">t</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>e<span class="token punctuation">,</span><span class="token function">xt</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>e<span class="token operator">=</span><span class="token function">bt</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token keyword">while</span><span class="token punctuation">(</span>n<span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">[</span>u<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">if</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token function">xt</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">,</span>r<span class="token operator">=</span><span class="token number">1</span><span class="token operator">===</span>n<span class="token punctuation">.</span>nodeType<span class="token operator">&amp;&amp;</span><span class="token string">" "</span><span class="token operator">+</span><span class="token function">mt</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>a<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>o<span class="token operator">=</span>e<span class="token punctuation">[</span>a<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">)</span>r<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">" "</span><span class="token operator">+</span>o<span class="token operator">+</span><span class="token string">" "</span><span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token number">0</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>r<span class="token operator">+=</span>o<span class="token operator">+</span><span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>i<span class="token operator">!==</span><span class="token punctuation">(</span>s<span class="token operator">=</span><span class="token function">mt</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span>n<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"class"</span><span class="token punctuation">,</span>s<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">removeClass</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> e<span class="token punctuation">,</span>n<span class="token punctuation">,</span>r<span class="token punctuation">,</span>i<span class="token punctuation">,</span>o<span class="token punctuation">,</span>a<span class="token punctuation">,</span>s<span class="token punctuation">,</span>u<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">m</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token function">k</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">removeClass</span><span class="token punctuation">(</span><span class="token function">t</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>e<span class="token punctuation">,</span><span class="token function">xt</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>arguments<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">"class"</span><span class="token punctuation">,</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>e<span class="token operator">=</span><span class="token function">bt</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token keyword">while</span><span class="token punctuation">(</span>n<span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">[</span>u<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">if</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token function">xt</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">,</span>r<span class="token operator">=</span><span class="token number">1</span><span class="token operator">===</span>n<span class="token punctuation">.</span>nodeType<span class="token operator">&amp;&amp;</span><span class="token string">" "</span><span class="token operator">+</span><span class="token function">mt</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>a<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>o<span class="token operator">=</span>e<span class="token punctuation">[</span>a<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token operator">&lt;</span>r<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">" "</span><span class="token operator">+</span>o<span class="token operator">+</span><span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">)</span>r<span class="token operator">=</span>r<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">" "</span><span class="token operator">+</span>o<span class="token operator">+</span><span class="token string">" "</span><span class="token punctuation">,</span><span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>i<span class="token operator">!==</span><span class="token punctuation">(</span>s<span class="token operator">=</span><span class="token function">mt</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span>n<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"class"</span><span class="token punctuation">,</span>s<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">toggleClass</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">i<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> o<span class="token operator">=</span><span class="token keyword">typeof</span> i<span class="token punctuation">,</span>a<span class="token operator">=</span><span class="token string">"string"</span><span class="token operator">===</span>o<span class="token operator">||</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span><span class="token string">"boolean"</span><span class="token operator">==</span><span class="token keyword">typeof</span> t<span class="token operator">&amp;&amp;</span>a<span class="token operator">?</span>t<span class="token operator">?</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">removeClass</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token operator">:</span><span class="token function">m</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token operator">?</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token function">k</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toggleClass</span><span class="token punctuation">(</span><span class="token function">i</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>e<span class="token punctuation">,</span><span class="token function">xt</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">,</span>t<span class="token punctuation">)</span><span class="token punctuation">,</span>t<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n<span class="token punctuation">,</span>r<span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>t<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>n<span class="token operator">=</span><span class="token function">k</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">,</span>r<span class="token operator">=</span><span class="token function">bt</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>e<span class="token operator">=</span>r<span class="token punctuation">[</span>t<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">)</span>n<span class="token punctuation">.</span><span class="token function">hasClass</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token operator">?</span>n<span class="token punctuation">.</span><span class="token function">removeClass</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token operator">:</span>n<span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">else</span> <span class="token keyword">void</span> <span class="token number">0</span><span class="token operator">!==</span>i<span class="token operator">&amp;&amp;</span><span class="token string">"boolean"</span><span class="token operator">!==</span>o<span class="token operator">||</span><span class="token punctuation">(</span><span class="token punctuation">(</span>e<span class="token operator">=</span><span class="token function">xt</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token constant">Q</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span><span class="token string">"__className__"</span><span class="token punctuation">,</span>e<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>setAttribute<span class="token operator">&amp;&amp;</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"class"</span><span class="token punctuation">,</span>e<span class="token operator">||</span><span class="token operator">!</span><span class="token number">1</span><span class="token operator">===</span>i<span class="token operator">?</span><span class="token string">""</span><span class="token operator">:</span><span class="token constant">Q</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span><span class="token string">"__className__"</span><span class="token punctuation">)</span><span class="token operator">||</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">hasClass</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> t<span class="token punctuation">,</span>n<span class="token punctuation">,</span>r<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>t<span class="token operator">=</span><span class="token string">" "</span><span class="token operator">+</span>e<span class="token operator">+</span><span class="token string">" "</span><span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>n<span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">[</span>r<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">===</span>n<span class="token punctuation">.</span>nodeType<span class="token operator">&amp;&amp;</span><span class="token operator">-</span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token string">" "</span><span class="token operator">+</span><span class="token function">mt</span><span class="token punctuation">(</span><span class="token function">xt</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">return</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">return</span><span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">var</span> wt<span class="token operator">=</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\r</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">;</span>k<span class="token punctuation">.</span>fn<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token function-variable function">val</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> r<span class="token punctuation">,</span>e<span class="token punctuation">,</span>i<span class="token punctuation">,</span>t<span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">return</span> arguments<span class="token punctuation">.</span>length<span class="token operator">?</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token function">m</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> t<span class="token punctuation">;</span><span class="token number">1</span><span class="token operator">===</span><span class="token keyword">this</span><span class="token punctuation">.</span>nodeType<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token operator">==</span><span class="token punctuation">(</span>t<span class="token operator">=</span>i<span class="token operator">?</span><span class="token function">n</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>e<span class="token punctuation">,</span><span class="token function">k</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">:</span>n<span class="token punctuation">)</span><span class="token operator">?</span>t<span class="token operator">=</span><span class="token string">""</span><span class="token operator">:</span><span class="token string">"number"</span><span class="token operator">==</span><span class="token keyword">typeof</span> t<span class="token operator">?</span>t<span class="token operator">+=</span><span class="token string">""</span><span class="token operator">:</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>t<span class="token operator">=</span>k<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token keyword">null</span><span class="token operator">==</span>e<span class="token operator">?</span><span class="token string">""</span><span class="token operator">:</span>e<span class="token operator">+</span><span class="token string">""</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span>r<span class="token operator">=</span>k<span class="token punctuation">.</span>valHooks<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>type<span class="token punctuation">]</span><span class="token operator">||</span>k<span class="token punctuation">.</span>valHooks<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>nodeName<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token string">"set"</span><span class="token keyword">in</span> r<span class="token operator">&amp;&amp;</span><span class="token keyword">void</span> <span class="token number">0</span><span class="token operator">!==</span>r<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>t<span class="token punctuation">,</span><span class="token string">"value"</span><span class="token punctuation">)</span><span class="token operator">||</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token operator">=</span>t<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">:</span>t<span class="token operator">?</span><span class="token punctuation">(</span>r<span class="token operator">=</span>k<span class="token punctuation">.</span>valHooks<span class="token punctuation">[</span>t<span class="token punctuation">.</span>type<span class="token punctuation">]</span><span class="token operator">||</span>k<span class="token punctuation">.</span>valHooks<span class="token punctuation">[</span>t<span class="token punctuation">.</span>nodeName<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token string">"get"</span><span class="token keyword">in</span> r<span class="token operator">&amp;&amp;</span><span class="token keyword">void</span> <span class="token number">0</span><span class="token operator">!==</span><span class="token punctuation">(</span>e<span class="token operator">=</span>r<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span><span class="token string">"value"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">?</span>e<span class="token operator">:</span><span class="token string">"string"</span><span class="token operator">==</span><span class="token keyword">typeof</span><span class="token punctuation">(</span>e<span class="token operator">=</span>t<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token operator">?</span>e<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>wt<span class="token punctuation">,</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">null</span><span class="token operator">==</span>e<span class="token operator">?</span><span class="token string">""</span><span class="token operator">:</span>e<span class="token operator">:</span><span class="token keyword">void</span> <span class="token number">0</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>valHooks<span class="token operator">:</span><span class="token punctuation">&#123;</span>option<span class="token operator">:</span><span class="token punctuation">&#123;</span><span class="token function-variable function">get</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> t<span class="token operator">=</span>k<span class="token punctuation">.</span>find<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token string">"value"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token keyword">null</span><span class="token operator">!=</span>t<span class="token operator">?</span>t<span class="token operator">:</span><span class="token function">mt</span><span class="token punctuation">(</span>k<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>select<span class="token operator">:</span><span class="token punctuation">&#123;</span><span class="token function-variable function">get</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> t<span class="token punctuation">,</span>n<span class="token punctuation">,</span>r<span class="token punctuation">,</span>i<span class="token operator">=</span>e<span class="token punctuation">.</span>options<span class="token punctuation">,</span>o<span class="token operator">=</span>e<span class="token punctuation">.</span>selectedIndex<span class="token punctuation">,</span>a<span class="token operator">=</span><span class="token string">"select-one"</span><span class="token operator">===</span>e<span class="token punctuation">.</span>type<span class="token punctuation">,</span>s<span class="token operator">=</span>a<span class="token operator">?</span><span class="token keyword">null</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>u<span class="token operator">=</span>a<span class="token operator">?</span>o<span class="token operator">+</span><span class="token number">1</span><span class="token operator">:</span>i<span class="token punctuation">.</span>length<span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span>r<span class="token operator">=</span>o<span class="token operator">&lt;</span><span class="token number">0</span><span class="token operator">?</span>u<span class="token operator">:</span>a<span class="token operator">?</span>o<span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">;</span>r<span class="token operator">&lt;</span>u<span class="token punctuation">;</span>r<span class="token operator">++</span><span class="token punctuation">)</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span>n<span class="token operator">=</span>i<span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>selected<span class="token operator">||</span>r<span class="token operator">===</span>o<span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token operator">!</span>n<span class="token punctuation">.</span>disabled<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span><span class="token operator">!</span>n<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span>disabled<span class="token operator">||</span><span class="token operator">!</span><span class="token constant">A</span><span class="token punctuation">(</span>n<span class="token punctuation">.</span>parentNode<span class="token punctuation">,</span><span class="token string">"optgroup"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">if</span><span class="token punctuation">(</span>t<span class="token operator">=</span><span class="token function">k</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>a<span class="token punctuation">)</span><span class="token keyword">return</span> t<span class="token punctuation">;</span>s<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> s<span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">set</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> n<span class="token punctuation">,</span>r<span class="token punctuation">,</span>i<span class="token operator">=</span>e<span class="token punctuation">.</span>options<span class="token punctuation">,</span>o<span class="token operator">=</span>k<span class="token punctuation">.</span><span class="token function">makeArray</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">,</span>a<span class="token operator">=</span>i<span class="token punctuation">.</span>length<span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>a<span class="token operator">--</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">(</span>r<span class="token operator">=</span>i<span class="token punctuation">[</span>a<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>selected<span class="token operator">=</span><span class="token operator">-</span><span class="token number">1</span><span class="token operator">&lt;</span>k<span class="token punctuation">.</span><span class="token function">inArray</span><span class="token punctuation">(</span>k<span class="token punctuation">.</span>valHooks<span class="token punctuation">.</span>option<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">,</span>o<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>n<span class="token operator">=</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> n<span class="token operator">||</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>selectedIndex<span class="token operator">=</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>o<span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"radio"</span><span class="token punctuation">,</span><span class="token string">"checkbox"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>k<span class="token punctuation">.</span>valHooks<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token function-variable function">set</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">if</span><span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">return</span> e<span class="token punctuation">.</span>checked<span class="token operator">=</span><span class="token operator">-</span><span class="token number">1</span><span class="token operator">&lt;</span>k<span class="token punctuation">.</span><span class="token function">inArray</span><span class="token punctuation">(</span><span class="token function">k</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>t<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>y<span class="token punctuation">.</span>checkOn<span class="token operator">||</span><span class="token punctuation">(</span>k<span class="token punctuation">.</span>valHooks<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function-variable function">get</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token keyword">null</span><span class="token operator">===</span>e<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"value"</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token string">"on"</span><span class="token operator">:</span>e<span class="token punctuation">.</span>value<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>y<span class="token punctuation">.</span>focusin<span class="token operator">=</span><span class="token string">"onfocusin"</span><span class="token keyword">in</span> <span class="token constant">C</span><span class="token punctuation">;</span><span class="token keyword">var</span> Tt<span class="token operator">=</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^(?:focusinfocus|focusoutblur)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span><span class="token function-variable function">Ct</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>e<span class="token punctuation">.</span><span class="token function">stopPropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>k<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span>k<span class="token punctuation">.</span>event<span class="token punctuation">,</span><span class="token punctuation">&#123;</span><span class="token function-variable function">trigger</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n<span class="token punctuation">,</span>r</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> i<span class="token punctuation">,</span>o<span class="token punctuation">,</span>a<span class="token punctuation">,</span>s<span class="token punctuation">,</span>u<span class="token punctuation">,</span>l<span class="token punctuation">,</span>c<span class="token punctuation">,</span>f<span class="token punctuation">,</span>p<span class="token operator">=</span><span class="token punctuation">[</span>n<span class="token operator">||</span><span class="token constant">E</span><span class="token punctuation">]</span><span class="token punctuation">,</span>d<span class="token operator">=</span><span class="token function">v</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token string">"type"</span><span class="token punctuation">)</span><span class="token operator">?</span>e<span class="token punctuation">.</span>type<span class="token operator">:</span>e<span class="token punctuation">,</span>h<span class="token operator">=</span><span class="token function">v</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token string">"namespace"</span><span class="token punctuation">)</span><span class="token operator">?</span>e<span class="token punctuation">.</span>namespace<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>o<span class="token operator">=</span>f<span class="token operator">=</span>a<span class="token operator">=</span>n<span class="token operator">=</span>n<span class="token operator">||</span><span class="token constant">E</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token operator">!==</span>n<span class="token punctuation">.</span>nodeType<span class="token operator">&amp;&amp;</span><span class="token number">8</span><span class="token operator">!==</span>n<span class="token punctuation">.</span>nodeType<span class="token operator">&amp;&amp;</span><span class="token operator">!</span>Tt<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>d<span class="token operator">+</span>k<span class="token punctuation">.</span>event<span class="token punctuation">.</span>triggered<span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token operator">&lt;</span>d<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>d<span class="token operator">=</span><span class="token punctuation">(</span>h<span class="token operator">=</span>d<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>h<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>u<span class="token operator">=</span>d<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">":"</span><span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token number">0</span><span class="token operator">&amp;&amp;</span><span class="token string">"on"</span><span class="token operator">+</span>d<span class="token punctuation">,</span><span class="token punctuation">(</span>e<span class="token operator">=</span>e<span class="token punctuation">[</span>k<span class="token punctuation">.</span>expando<span class="token punctuation">]</span><span class="token operator">?</span>e<span class="token operator">:</span><span class="token keyword">new</span> <span class="token class-name">k<span class="token punctuation">.</span>Event</span><span class="token punctuation">(</span>d<span class="token punctuation">,</span><span class="token string">"object"</span><span class="token operator">==</span><span class="token keyword">typeof</span> e<span class="token operator">&amp;&amp;</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>isTrigger<span class="token operator">=</span>r<span class="token operator">?</span><span class="token number">2</span><span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">,</span>e<span class="token punctuation">.</span>namespace<span class="token operator">=</span>h<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token punctuation">,</span>e<span class="token punctuation">.</span>rnamespace<span class="token operator">=</span>e<span class="token punctuation">.</span>namespace<span class="token operator">?</span><span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">"(^|\\.)"</span><span class="token operator">+</span>h<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">"\\.(?:.*\\.|)"</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"(\\.|$)"</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">null</span><span class="token punctuation">,</span>e<span class="token punctuation">.</span>result<span class="token operator">=</span><span class="token keyword">void</span> <span class="token number">0</span><span class="token punctuation">,</span>e<span class="token punctuation">.</span>target<span class="token operator">||</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token operator">=</span>n<span class="token punctuation">)</span><span class="token punctuation">,</span>t<span class="token operator">=</span><span class="token keyword">null</span><span class="token operator">==</span>t<span class="token operator">?</span><span class="token punctuation">[</span>e<span class="token punctuation">]</span><span class="token operator">:</span>k<span class="token punctuation">.</span><span class="token function">makeArray</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span><span class="token punctuation">[</span>e<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>c<span class="token operator">=</span>k<span class="token punctuation">.</span>event<span class="token punctuation">.</span>special<span class="token punctuation">[</span>d<span class="token punctuation">]</span><span class="token operator">||</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>r<span class="token operator">||</span><span class="token operator">!</span>c<span class="token punctuation">.</span>trigger<span class="token operator">||</span><span class="token operator">!</span><span class="token number">1</span><span class="token operator">!==</span>c<span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span>t<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>r<span class="token operator">&amp;&amp;</span><span class="token operator">!</span>c<span class="token punctuation">.</span>noBubble<span class="token operator">&amp;&amp;</span><span class="token operator">!</span><span class="token function">x</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">for</span><span class="token punctuation">(</span>s<span class="token operator">=</span>c<span class="token punctuation">.</span>delegateType<span class="token operator">||</span>d<span class="token punctuation">,</span>Tt<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>s<span class="token operator">+</span>d<span class="token punctuation">)</span><span class="token operator">||</span><span class="token punctuation">(</span>o<span class="token operator">=</span>o<span class="token punctuation">.</span>parentNode<span class="token punctuation">)</span><span class="token punctuation">;</span>o<span class="token punctuation">;</span>o<span class="token operator">=</span>o<span class="token punctuation">.</span>parentNode<span class="token punctuation">)</span>p<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">,</span>a<span class="token operator">=</span>o<span class="token punctuation">;</span>a<span class="token operator">===</span><span class="token punctuation">(</span>n<span class="token punctuation">.</span>ownerDocument<span class="token operator">||</span><span class="token constant">E</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span>p<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>defaultView<span class="token operator">||</span>a<span class="token punctuation">.</span>parentWindow<span class="token operator">||</span><span class="token constant">C</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span><span class="token punctuation">(</span>o<span class="token operator">=</span>p<span class="token punctuation">[</span>i<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token operator">!</span>e<span class="token punctuation">.</span><span class="token function">isPropagationStopped</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>f<span class="token operator">=</span>o<span class="token punctuation">,</span>e<span class="token punctuation">.</span>type<span class="token operator">=</span><span class="token number">1</span><span class="token operator">&lt;</span>i<span class="token operator">?</span>s<span class="token operator">:</span>c<span class="token punctuation">.</span>bindType<span class="token operator">||</span>d<span class="token punctuation">,</span><span class="token punctuation">(</span>l<span class="token operator">=</span><span class="token punctuation">(</span><span class="token constant">Q</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span><span class="token string">"events"</span><span class="token punctuation">)</span><span class="token operator">||</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">[</span>e<span class="token punctuation">.</span>type<span class="token punctuation">]</span><span class="token operator">&amp;&amp;</span><span class="token constant">Q</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span><span class="token string">"handle"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token function">l</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span>t<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span>l<span class="token operator">=</span>u<span class="token operator">&amp;&amp;</span>o<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span>l<span class="token punctuation">.</span>apply<span class="token operator">&amp;&amp;</span><span class="token constant">G</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>result<span class="token operator">=</span><span class="token function">l</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span>t<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token operator">!</span><span class="token number">1</span><span class="token operator">===</span>e<span class="token punctuation">.</span>result<span class="token operator">&amp;&amp;</span>e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> e<span class="token punctuation">.</span>type<span class="token operator">=</span>d<span class="token punctuation">,</span>r<span class="token operator">||</span>e<span class="token punctuation">.</span><span class="token function">isDefaultPrevented</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">||</span>c<span class="token punctuation">.</span>_default<span class="token operator">&amp;&amp;</span><span class="token operator">!</span><span class="token number">1</span><span class="token operator">!==</span>c<span class="token punctuation">.</span><span class="token function">_default</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>t<span class="token punctuation">)</span><span class="token operator">||</span><span class="token operator">!</span><span class="token constant">G</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token operator">||</span>u<span class="token operator">&amp;&amp;</span><span class="token function">m</span><span class="token punctuation">(</span>n<span class="token punctuation">[</span>d<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token operator">!</span><span class="token function">x</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span><span class="token punctuation">(</span>a<span class="token operator">=</span>n<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>n<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span>event<span class="token punctuation">.</span>triggered<span class="token operator">=</span>d<span class="token punctuation">,</span>e<span class="token punctuation">.</span><span class="token function">isPropagationStopped</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span>f<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>d<span class="token punctuation">,</span>Ct<span class="token punctuation">)</span><span class="token punctuation">,</span>n<span class="token punctuation">[</span>d<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>e<span class="token punctuation">.</span><span class="token function">isPropagationStopped</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span>f<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span>d<span class="token punctuation">,</span>Ct<span class="token punctuation">)</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span>event<span class="token punctuation">.</span>triggered<span class="token operator">=</span><span class="token keyword">void</span> <span class="token number">0</span><span class="token punctuation">,</span>a<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>n<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token operator">=</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>e<span class="token punctuation">.</span>result<span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">simulate</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> r<span class="token operator">=</span>k<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">k<span class="token punctuation">.</span>Event</span><span class="token punctuation">,</span>n<span class="token punctuation">,</span><span class="token punctuation">&#123;</span>type<span class="token operator">:</span>e<span class="token punctuation">,</span>isSimulated<span class="token operator">:</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>k<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">,</span>t<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span>fn<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token function-variable function">trigger</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>k<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>t<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">triggerHandler</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> n<span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token keyword">return</span> k<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n<span class="token punctuation">,</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>y<span class="token punctuation">.</span>focusin<span class="token operator">||</span>k<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>focus<span class="token operator">:</span><span class="token string">"focusin"</span><span class="token punctuation">,</span>blur<span class="token operator">:</span><span class="token string">"focusout"</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">n<span class="token punctuation">,</span>r</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> <span class="token function-variable function">i</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>k<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">simulate</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span>e<span class="token punctuation">.</span>target<span class="token punctuation">,</span>k<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">fix</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>k<span class="token punctuation">.</span>event<span class="token punctuation">.</span>special<span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token function-variable function">setup</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> e<span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">.</span>ownerDocument<span class="token operator">||</span><span class="token keyword">this</span><span class="token punctuation">,</span>t<span class="token operator">=</span><span class="token constant">Q</span><span class="token punctuation">.</span><span class="token function">access</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>r<span class="token punctuation">)</span><span class="token punctuation">;</span>t<span class="token operator">||</span>e<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span>i<span class="token punctuation">,</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token constant">Q</span><span class="token punctuation">.</span><span class="token function">access</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>r<span class="token punctuation">,</span><span class="token punctuation">(</span>t<span class="token operator">||</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">teardown</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> e<span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">.</span>ownerDocument<span class="token operator">||</span><span class="token keyword">this</span><span class="token punctuation">,</span>t<span class="token operator">=</span><span class="token constant">Q</span><span class="token punctuation">.</span><span class="token function">access</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>r<span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>t<span class="token operator">?</span><span class="token constant">Q</span><span class="token punctuation">.</span><span class="token function">access</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>r<span class="token punctuation">,</span>t<span class="token punctuation">)</span><span class="token operator">:</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span>i<span class="token punctuation">,</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token constant">Q</span><span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>r<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">var</span> Et<span class="token operator">=</span><span class="token constant">C</span><span class="token punctuation">.</span>location<span class="token punctuation">,</span>kt<span class="token operator">=</span>Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>St<span class="token operator">=</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\?</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>k<span class="token punctuation">.</span><span class="token function-variable function">parseXML</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> t<span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>e<span class="token operator">||</span><span class="token string">"string"</span><span class="token operator">!=</span><span class="token keyword">typeof</span> e<span class="token punctuation">)</span><span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span><span class="token keyword">try</span><span class="token punctuation">&#123;</span>t<span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">C<span class="token punctuation">.</span>DOMParser</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parseFromString</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token string">"text/xml"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">catch</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>t<span class="token operator">=</span><span class="token keyword">void</span> <span class="token number">0</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> t<span class="token operator">&amp;&amp;</span><span class="token operator">!</span>t<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">"parsererror"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token operator">||</span>k<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">"Invalid XML: "</span><span class="token operator">+</span>e<span class="token punctuation">)</span><span class="token punctuation">,</span>t<span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">var</span> Nt<span class="token operator">=</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\[\]$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>At<span class="token operator">=</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\r?\n</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span>Dt<span class="token operator">=</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^(?:submit|button|image|reset|file)$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>jt<span class="token operator">=</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^(?:input|select|textarea|keygen)</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">;</span><span class="token keyword">function</span> <span class="token function">qt</span><span class="token punctuation">(</span><span class="token parameter">n<span class="token punctuation">,</span>e<span class="token punctuation">,</span>r<span class="token punctuation">,</span>i</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> t<span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span>k<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>r<span class="token operator">||</span>Nt<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token operator">?</span><span class="token function">i</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span>t<span class="token punctuation">)</span><span class="token operator">:</span><span class="token function">qt</span><span class="token punctuation">(</span>n<span class="token operator">+</span><span class="token string">"["</span><span class="token operator">+</span><span class="token punctuation">(</span><span class="token string">"object"</span><span class="token operator">==</span><span class="token keyword">typeof</span> t<span class="token operator">&amp;&amp;</span><span class="token keyword">null</span><span class="token operator">!=</span>t<span class="token operator">?</span>e<span class="token operator">:</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"]"</span><span class="token punctuation">,</span>t<span class="token punctuation">,</span>r<span class="token punctuation">,</span>i<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>r<span class="token operator">||</span><span class="token string">"object"</span><span class="token operator">!==</span><span class="token function">w</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token function">i</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">else</span> <span class="token keyword">for</span><span class="token punctuation">(</span>t <span class="token keyword">in</span> e<span class="token punctuation">)</span><span class="token function">qt</span><span class="token punctuation">(</span>n<span class="token operator">+</span><span class="token string">"["</span><span class="token operator">+</span>t<span class="token operator">+</span><span class="token string">"]"</span><span class="token punctuation">,</span>e<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">,</span>r<span class="token punctuation">,</span>i<span class="token punctuation">)</span><span class="token punctuation">&#125;</span>k<span class="token punctuation">.</span><span class="token function-variable function">param</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> n<span class="token punctuation">,</span>r<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token function-variable function">i</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> n<span class="token operator">=</span><span class="token function">m</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token operator">?</span><span class="token function">t</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span>t<span class="token punctuation">;</span>r<span class="token punctuation">[</span>r<span class="token punctuation">.</span>length<span class="token punctuation">]</span><span class="token operator">=</span><span class="token function">encodeURIComponent</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"="</span><span class="token operator">+</span><span class="token function">encodeURIComponent</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token operator">==</span>n<span class="token operator">?</span><span class="token string">""</span><span class="token operator">:</span>n<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token operator">==</span>e<span class="token punctuation">)</span><span class="token keyword">return</span><span class="token string">""</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token operator">||</span>e<span class="token punctuation">.</span>jquery<span class="token operator">&amp;&amp;</span><span class="token operator">!</span>k<span class="token punctuation">.</span><span class="token function">isPlainObject</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span>k<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token function">i</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">else</span> <span class="token keyword">for</span><span class="token punctuation">(</span>n <span class="token keyword">in</span> e<span class="token punctuation">)</span><span class="token function">qt</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span>e<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">,</span>t<span class="token punctuation">,</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> r<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">"&amp;"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span>fn<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token function-variable function">serialize</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> k<span class="token punctuation">.</span><span class="token function">param</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">serializeArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">serializeArray</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> e<span class="token operator">=</span>k<span class="token punctuation">.</span><span class="token function">prop</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span><span class="token string">"elements"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> e<span class="token operator">?</span>k<span class="token punctuation">.</span><span class="token function">makeArray</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">this</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> e<span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">.</span>type<span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token operator">&amp;&amp;</span><span class="token operator">!</span><span class="token function">k</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span><span class="token string">":disabled"</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span>jt<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>nodeName<span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token operator">!</span>Dt<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>checked<span class="token operator">||</span><span class="token operator">!</span>pe<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> n<span class="token operator">=</span><span class="token function">k</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token keyword">null</span><span class="token operator">==</span>n<span class="token operator">?</span><span class="token keyword">null</span><span class="token operator">:</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token operator">?</span>k<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span><span class="token punctuation">&#123;</span>name<span class="token operator">:</span>t<span class="token punctuation">.</span>name<span class="token punctuation">,</span>value<span class="token operator">:</span>e<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>At<span class="token punctuation">,</span><span class="token string">"\r\n"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>name<span class="token operator">:</span>t<span class="token punctuation">.</span>name<span class="token punctuation">,</span>value<span class="token operator">:</span>n<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>At<span class="token punctuation">,</span><span class="token string">"\r\n"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">var</span> Lt<span class="token operator">=</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">%20</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span>Ht<span class="token operator">=</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">#.*$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>Ot<span class="token operator">=</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">([?&amp;])_=[^&amp;]*</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>Pt<span class="token operator">=</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^(.*?):[ \t]*([^\r\n]*)$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">gm</span></span><span class="token punctuation">,</span>Rt<span class="token operator">=</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^(?:GET|HEAD)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>Mt<span class="token operator">=</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\/\/</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>It<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>Wt<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>$t<span class="token operator">=</span><span class="token string">"*/"</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token string">"*"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>Ft<span class="token operator">=</span><span class="token constant">E</span><span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">function</span> <span class="token function">Bt</span><span class="token punctuation">(</span><span class="token parameter">o</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token string">"string"</span><span class="token operator">!=</span><span class="token keyword">typeof</span> e<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>t<span class="token operator">=</span>e<span class="token punctuation">,</span>e<span class="token operator">=</span><span class="token string">"*"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">var</span> n<span class="token punctuation">,</span>r<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>i<span class="token operator">=</span>e<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token constant">R</span><span class="token punctuation">)</span><span class="token operator">||</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">m</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">while</span><span class="token punctuation">(</span>n<span class="token operator">=</span>i<span class="token punctuation">[</span>r<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token string">"+"</span><span class="token operator">===</span>n<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">?</span><span class="token punctuation">(</span>n<span class="token operator">=</span>n<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">||</span><span class="token string">"*"</span><span class="token punctuation">,</span><span class="token punctuation">(</span>o<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token operator">=</span>o<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token operator">||</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token punctuation">(</span>o<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token operator">=</span>o<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token operator">||</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">function</span> <span class="token function">_t</span><span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span>i<span class="token punctuation">,</span>o<span class="token punctuation">,</span>a</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> s<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>u<span class="token operator">=</span>t<span class="token operator">===</span>Wt<span class="token punctuation">;</span><span class="token keyword">function</span> <span class="token function">l</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> r<span class="token punctuation">;</span><span class="token keyword">return</span> s<span class="token punctuation">[</span>e<span class="token punctuation">]</span><span class="token operator">=</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span>t<span class="token punctuation">[</span>e<span class="token punctuation">]</span><span class="token operator">||</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> n<span class="token operator">=</span><span class="token function">t</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span>o<span class="token punctuation">,</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span><span class="token string">"string"</span><span class="token operator">!=</span><span class="token keyword">typeof</span> n<span class="token operator">||</span>u<span class="token operator">||</span>s<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token operator">?</span>u<span class="token operator">?</span><span class="token operator">!</span><span class="token punctuation">(</span>r<span class="token operator">=</span>n<span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">void</span> <span class="token number">0</span><span class="token operator">:</span><span class="token punctuation">(</span>i<span class="token punctuation">.</span>dataTypes<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">l</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>r<span class="token punctuation">&#125;</span><span class="token keyword">return</span> <span class="token function">l</span><span class="token punctuation">(</span>i<span class="token punctuation">.</span>dataTypes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">||</span><span class="token operator">!</span>s<span class="token punctuation">[</span><span class="token string">"*"</span><span class="token punctuation">]</span><span class="token operator">&amp;&amp;</span><span class="token function">l</span><span class="token punctuation">(</span><span class="token string">"*"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">function</span> <span class="token function">zt</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> n<span class="token punctuation">,</span>r<span class="token punctuation">,</span>i<span class="token operator">=</span>k<span class="token punctuation">.</span>ajaxSettings<span class="token punctuation">.</span>flatOptions<span class="token operator">||</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span>n <span class="token keyword">in</span> t<span class="token punctuation">)</span><span class="token keyword">void</span> <span class="token number">0</span><span class="token operator">!==</span>t<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span><span class="token punctuation">(</span>i<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token operator">?</span>e<span class="token operator">:</span>r<span class="token operator">||</span><span class="token punctuation">(</span>r<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token operator">=</span>t<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> r<span class="token operator">&amp;&amp;</span>k<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>e<span class="token punctuation">,</span>r<span class="token punctuation">)</span><span class="token punctuation">,</span>e<span class="token punctuation">&#125;</span>Ft<span class="token punctuation">.</span>href<span class="token operator">=</span>Et<span class="token punctuation">.</span>href<span class="token punctuation">,</span>k<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>active<span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>lastModified<span class="token operator">:</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>etag<span class="token operator">:</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>ajaxSettings<span class="token operator">:</span><span class="token punctuation">&#123;</span>url<span class="token operator">:</span>Et<span class="token punctuation">.</span>href<span class="token punctuation">,</span>type<span class="token operator">:</span><span class="token string">"GET"</span><span class="token punctuation">,</span>isLocal<span class="token operator">:</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^(?:about|app|app-storage|.+-extension|file|res|widget):$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>Et<span class="token punctuation">.</span>protocol<span class="token punctuation">)</span><span class="token punctuation">,</span>global<span class="token operator">:</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>processData<span class="token operator">:</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>async<span class="token operator">:</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>contentType<span class="token operator">:</span><span class="token string">"application/x-www-form-urlencoded; charset=UTF-8"</span><span class="token punctuation">,</span>accepts<span class="token operator">:</span><span class="token punctuation">&#123;</span><span class="token string">"*"</span><span class="token operator">:</span>$t<span class="token punctuation">,</span>text<span class="token operator">:</span><span class="token string">"text/plain"</span><span class="token punctuation">,</span>html<span class="token operator">:</span><span class="token string">"text/html"</span><span class="token punctuation">,</span>xml<span class="token operator">:</span><span class="token string">"application/xml, text/xml"</span><span class="token punctuation">,</span>json<span class="token operator">:</span><span class="token string">"application/json, text/javascript"</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>contents<span class="token operator">:</span><span class="token punctuation">&#123;</span>xml<span class="token operator">:</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\bxml\b</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>html<span class="token operator">:</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\bhtml</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>json<span class="token operator">:</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\bjson\b</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>responseFields<span class="token operator">:</span><span class="token punctuation">&#123;</span>xml<span class="token operator">:</span><span class="token string">"responseXML"</span><span class="token punctuation">,</span>text<span class="token operator">:</span><span class="token string">"responseText"</span><span class="token punctuation">,</span>json<span class="token operator">:</span><span class="token string">"responseJSON"</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>converters<span class="token operator">:</span><span class="token punctuation">&#123;</span><span class="token string">"* text"</span><span class="token operator">:</span>String<span class="token punctuation">,</span><span class="token string">"text html"</span><span class="token operator">:</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">"text json"</span><span class="token operator">:</span><span class="token constant">JSON</span><span class="token punctuation">.</span>parse<span class="token punctuation">,</span><span class="token string">"text xml"</span><span class="token operator">:</span>k<span class="token punctuation">.</span>parseXML<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>flatOptions<span class="token operator">:</span><span class="token punctuation">&#123;</span>url<span class="token operator">:</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>context<span class="token operator">:</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">ajaxSetup</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> t<span class="token operator">?</span><span class="token function">zt</span><span class="token punctuation">(</span><span class="token function">zt</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>k<span class="token punctuation">.</span>ajaxSettings<span class="token punctuation">)</span><span class="token punctuation">,</span>t<span class="token punctuation">)</span><span class="token operator">:</span><span class="token function">zt</span><span class="token punctuation">(</span>k<span class="token punctuation">.</span>ajaxSettings<span class="token punctuation">,</span>e<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>ajaxPrefilter<span class="token operator">:</span><span class="token function">Bt</span><span class="token punctuation">(</span>It<span class="token punctuation">)</span><span class="token punctuation">,</span>ajaxTransport<span class="token operator">:</span><span class="token function">Bt</span><span class="token punctuation">(</span>Wt<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function-variable function">ajax</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token string">"object"</span><span class="token operator">==</span><span class="token keyword">typeof</span> e<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>t<span class="token operator">=</span>e<span class="token punctuation">,</span>e<span class="token operator">=</span><span class="token keyword">void</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>t<span class="token operator">=</span>t<span class="token operator">||</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">var</span> c<span class="token punctuation">,</span>f<span class="token punctuation">,</span>p<span class="token punctuation">,</span>n<span class="token punctuation">,</span>d<span class="token punctuation">,</span>r<span class="token punctuation">,</span>h<span class="token punctuation">,</span>g<span class="token punctuation">,</span>i<span class="token punctuation">,</span>o<span class="token punctuation">,</span>v<span class="token operator">=</span>k<span class="token punctuation">.</span><span class="token function">ajaxSetup</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>t<span class="token punctuation">)</span><span class="token punctuation">,</span>y<span class="token operator">=</span>v<span class="token punctuation">.</span>context<span class="token operator">||</span>v<span class="token punctuation">,</span>m<span class="token operator">=</span>v<span class="token punctuation">.</span>context<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>y<span class="token punctuation">.</span>nodeType<span class="token operator">||</span>y<span class="token punctuation">.</span>jquery<span class="token punctuation">)</span><span class="token operator">?</span><span class="token function">k</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token operator">:</span>k<span class="token punctuation">.</span>event<span class="token punctuation">,</span>x<span class="token operator">=</span>k<span class="token punctuation">.</span><span class="token function">Deferred</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>b<span class="token operator">=</span>k<span class="token punctuation">.</span><span class="token function">Callbacks</span><span class="token punctuation">(</span><span class="token string">"once memory"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>w<span class="token operator">=</span>v<span class="token punctuation">.</span>statusCode<span class="token operator">||</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>a<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>s<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>u<span class="token operator">=</span><span class="token string">"canceled"</span><span class="token punctuation">,</span><span class="token constant">T</span><span class="token operator">=</span><span class="token punctuation">&#123;</span>readyState<span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token function-variable function">getResponseHeader</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> t<span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>h<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>n<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>n<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>t<span class="token operator">=</span>Pt<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">)</span>n<span class="token punctuation">[</span>t<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">" "</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">(</span>n<span class="token punctuation">[</span>t<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">" "</span><span class="token punctuation">]</span><span class="token operator">||</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>t<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span>t<span class="token operator">=</span>n<span class="token punctuation">[</span>e<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">" "</span><span class="token punctuation">]</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> <span class="token keyword">null</span><span class="token operator">==</span>t<span class="token operator">?</span><span class="token keyword">null</span><span class="token operator">:</span>t<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">", "</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">getAllResponseHeaders</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> h<span class="token operator">?</span>p<span class="token operator">:</span><span class="token keyword">null</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">setRequestHeader</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token keyword">null</span><span class="token operator">==</span>h<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>e<span class="token operator">=</span>s<span class="token punctuation">[</span>e<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">=</span>s<span class="token punctuation">[</span>e<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">||</span>e<span class="token punctuation">,</span>a<span class="token punctuation">[</span>e<span class="token punctuation">]</span><span class="token operator">=</span>t<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">overrideMimeType</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token keyword">null</span><span class="token operator">==</span>h<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span>mimeType<span class="token operator">=</span>e<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">statusCode</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> t<span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token keyword">if</span><span class="token punctuation">(</span>h<span class="token punctuation">)</span><span class="token constant">T</span><span class="token punctuation">.</span><span class="token function">always</span><span class="token punctuation">(</span>e<span class="token punctuation">[</span><span class="token constant">T</span><span class="token punctuation">.</span>status<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">else</span> <span class="token keyword">for</span><span class="token punctuation">(</span>t <span class="token keyword">in</span> e<span class="token punctuation">)</span>w<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">[</span>w<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">,</span>e<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">abort</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> t<span class="token operator">=</span>e<span class="token operator">||</span>u<span class="token punctuation">;</span><span class="token keyword">return</span> c<span class="token operator">&amp;&amp;</span>c<span class="token punctuation">.</span><span class="token function">abort</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">l</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>t<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span><span class="token function">promise</span><span class="token punctuation">(</span><span class="token constant">T</span><span class="token punctuation">)</span><span class="token punctuation">,</span>v<span class="token punctuation">.</span>url<span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">(</span>e<span class="token operator">||</span>v<span class="token punctuation">.</span>url<span class="token operator">||</span>Et<span class="token punctuation">.</span>href<span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>Mt<span class="token punctuation">,</span>Et<span class="token punctuation">.</span>protocol<span class="token operator">+</span><span class="token string">"//"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>v<span class="token punctuation">.</span>type<span class="token operator">=</span>t<span class="token punctuation">.</span>method<span class="token operator">||</span>t<span class="token punctuation">.</span>type<span class="token operator">||</span>v<span class="token punctuation">.</span>method<span class="token operator">||</span>v<span class="token punctuation">.</span>type<span class="token punctuation">,</span>v<span class="token punctuation">.</span>dataTypes<span class="token operator">=</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span>dataType<span class="token operator">||</span><span class="token string">"*"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token constant">R</span><span class="token punctuation">)</span><span class="token operator">||</span><span class="token punctuation">[</span><span class="token string">""</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token keyword">null</span><span class="token operator">==</span>v<span class="token punctuation">.</span>crossDomain<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>r<span class="token operator">=</span><span class="token constant">E</span><span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">try</span><span class="token punctuation">&#123;</span>r<span class="token punctuation">.</span>href<span class="token operator">=</span>v<span class="token punctuation">.</span>url<span class="token punctuation">,</span>r<span class="token punctuation">.</span>href<span class="token operator">=</span>r<span class="token punctuation">.</span>href<span class="token punctuation">,</span>v<span class="token punctuation">.</span>crossDomain<span class="token operator">=</span>Ft<span class="token punctuation">.</span>protocol<span class="token operator">+</span><span class="token string">"//"</span><span class="token operator">+</span>Ft<span class="token punctuation">.</span>host<span class="token operator">!=</span>r<span class="token punctuation">.</span>protocol<span class="token operator">+</span><span class="token string">"//"</span><span class="token operator">+</span>r<span class="token punctuation">.</span>host<span class="token punctuation">&#125;</span><span class="token keyword">catch</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>v<span class="token punctuation">.</span>crossDomain<span class="token operator">=</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">if</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span>data<span class="token operator">&amp;&amp;</span>v<span class="token punctuation">.</span>processData<span class="token operator">&amp;&amp;</span><span class="token string">"string"</span><span class="token operator">!=</span><span class="token keyword">typeof</span> v<span class="token punctuation">.</span>data<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span>data<span class="token operator">=</span>k<span class="token punctuation">.</span><span class="token function">param</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span>data<span class="token punctuation">,</span>v<span class="token punctuation">.</span>traditional<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">_t</span><span class="token punctuation">(</span>It<span class="token punctuation">,</span>v<span class="token punctuation">,</span>t<span class="token punctuation">,</span><span class="token constant">T</span><span class="token punctuation">)</span><span class="token punctuation">,</span>h<span class="token punctuation">)</span><span class="token keyword">return</span> <span class="token constant">T</span><span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span>i <span class="token keyword">in</span><span class="token punctuation">(</span>g<span class="token operator">=</span>k<span class="token punctuation">.</span>event<span class="token operator">&amp;&amp;</span>v<span class="token punctuation">.</span>global<span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token number">0</span><span class="token operator">==</span>k<span class="token punctuation">.</span>active<span class="token operator">++</span><span class="token operator">&amp;&amp;</span>k<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span><span class="token string">"ajaxStart"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>v<span class="token punctuation">.</span>type<span class="token operator">=</span>v<span class="token punctuation">.</span>type<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>v<span class="token punctuation">.</span>hasContent<span class="token operator">=</span><span class="token operator">!</span>Rt<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span>type<span class="token punctuation">)</span><span class="token punctuation">,</span>f<span class="token operator">=</span>v<span class="token punctuation">.</span>url<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>Ht<span class="token punctuation">,</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">,</span>v<span class="token punctuation">.</span>hasContent<span class="token operator">?</span>v<span class="token punctuation">.</span>data<span class="token operator">&amp;&amp;</span>v<span class="token punctuation">.</span>processData<span class="token operator">&amp;&amp;</span><span class="token number">0</span><span class="token operator">===</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span>contentType<span class="token operator">||</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">"application/x-www-form-urlencoded"</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span>data<span class="token operator">=</span>v<span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>Lt<span class="token punctuation">,</span><span class="token string">"+"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token punctuation">(</span>o<span class="token operator">=</span>v<span class="token punctuation">.</span>url<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>f<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">,</span>v<span class="token punctuation">.</span>data<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span>processData<span class="token operator">||</span><span class="token string">"string"</span><span class="token operator">==</span><span class="token keyword">typeof</span> v<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>f<span class="token operator">+=</span><span class="token punctuation">(</span>St<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token operator">?</span><span class="token string">"&amp;"</span><span class="token operator">:</span><span class="token string">"?"</span><span class="token punctuation">)</span><span class="token operator">+</span>v<span class="token punctuation">.</span>data<span class="token punctuation">,</span><span class="token keyword">delete</span> v<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token operator">!</span><span class="token number">1</span><span class="token operator">===</span>v<span class="token punctuation">.</span>cache<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>f<span class="token operator">=</span>f<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>Ot<span class="token punctuation">,</span><span class="token string">"$1"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>o<span class="token operator">=</span><span class="token punctuation">(</span>St<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token operator">?</span><span class="token string">"&amp;"</span><span class="token operator">:</span><span class="token string">"?"</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"_="</span><span class="token operator">+</span>kt<span class="token operator">++</span><span class="token operator">+</span>o<span class="token punctuation">)</span><span class="token punctuation">,</span>v<span class="token punctuation">.</span>url<span class="token operator">=</span>f<span class="token operator">+</span>o<span class="token punctuation">)</span><span class="token punctuation">,</span>v<span class="token punctuation">.</span>ifModified<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>k<span class="token punctuation">.</span>lastModified<span class="token punctuation">[</span>f<span class="token punctuation">]</span><span class="token operator">&amp;&amp;</span><span class="token constant">T</span><span class="token punctuation">.</span><span class="token function">setRequestHeader</span><span class="token punctuation">(</span><span class="token string">"If-Modified-Since"</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span>lastModified<span class="token punctuation">[</span>f<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span>etag<span class="token punctuation">[</span>f<span class="token punctuation">]</span><span class="token operator">&amp;&amp;</span><span class="token constant">T</span><span class="token punctuation">.</span><span class="token function">setRequestHeader</span><span class="token punctuation">(</span><span class="token string">"If-None-Match"</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span>etag<span class="token punctuation">[</span>f<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span>data<span class="token operator">&amp;&amp;</span>v<span class="token punctuation">.</span>hasContent<span class="token operator">&amp;&amp;</span><span class="token operator">!</span><span class="token number">1</span><span class="token operator">!==</span>v<span class="token punctuation">.</span>contentType<span class="token operator">||</span>t<span class="token punctuation">.</span>contentType<span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token constant">T</span><span class="token punctuation">.</span><span class="token function">setRequestHeader</span><span class="token punctuation">(</span><span class="token string">"Content-Type"</span><span class="token punctuation">,</span>v<span class="token punctuation">.</span>contentType<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token constant">T</span><span class="token punctuation">.</span><span class="token function">setRequestHeader</span><span class="token punctuation">(</span><span class="token string">"Accept"</span><span class="token punctuation">,</span>v<span class="token punctuation">.</span>dataTypes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">&amp;&amp;</span>v<span class="token punctuation">.</span>accepts<span class="token punctuation">[</span>v<span class="token punctuation">.</span>dataTypes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">?</span>v<span class="token punctuation">.</span>accepts<span class="token punctuation">[</span>v<span class="token punctuation">.</span>dataTypes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token punctuation">(</span><span class="token string">"*"</span><span class="token operator">!==</span>v<span class="token punctuation">.</span>dataTypes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">?</span><span class="token string">", "</span><span class="token operator">+</span>$t<span class="token operator">+</span><span class="token string">"; q=0.01"</span><span class="token operator">:</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token operator">:</span>v<span class="token punctuation">.</span>accepts<span class="token punctuation">[</span><span class="token string">"*"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>v<span class="token punctuation">.</span>headers<span class="token punctuation">)</span><span class="token constant">T</span><span class="token punctuation">.</span><span class="token function">setRequestHeader</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span>v<span class="token punctuation">.</span>headers<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span>beforeSend<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token number">1</span><span class="token operator">===</span>v<span class="token punctuation">.</span><span class="token function">beforeSend</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>y<span class="token punctuation">,</span><span class="token constant">T</span><span class="token punctuation">,</span>v<span class="token punctuation">)</span><span class="token operator">||</span>h<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">return</span> <span class="token constant">T</span><span class="token punctuation">.</span><span class="token function">abort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>u<span class="token operator">=</span><span class="token string">"abort"</span><span class="token punctuation">,</span>b<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span>complete<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token constant">T</span><span class="token punctuation">.</span><span class="token function">done</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span>success<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token constant">T</span><span class="token punctuation">.</span><span class="token function">fail</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span>error<span class="token punctuation">)</span><span class="token punctuation">,</span>c<span class="token operator">=</span><span class="token function">_t</span><span class="token punctuation">(</span>Wt<span class="token punctuation">,</span>v<span class="token punctuation">,</span>t<span class="token punctuation">,</span><span class="token constant">T</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token constant">T</span><span class="token punctuation">.</span>readyState<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span>g<span class="token operator">&amp;&amp;</span>m<span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span><span class="token string">"ajaxSend"</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token constant">T</span><span class="token punctuation">,</span>v<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>h<span class="token punctuation">)</span><span class="token keyword">return</span> <span class="token constant">T</span><span class="token punctuation">;</span>v<span class="token punctuation">.</span>async<span class="token operator">&amp;&amp;</span><span class="token number">0</span><span class="token operator">&lt;</span>v<span class="token punctuation">.</span>timeout<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>d<span class="token operator">=</span><span class="token constant">C</span><span class="token punctuation">.</span><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token constant">T</span><span class="token punctuation">.</span><span class="token function">abort</span><span class="token punctuation">(</span><span class="token string">"timeout"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>v<span class="token punctuation">.</span>timeout<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">try</span><span class="token punctuation">&#123;</span>h<span class="token operator">=</span><span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">,</span>c<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>l<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">catch</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">if</span><span class="token punctuation">(</span>h<span class="token punctuation">)</span><span class="token keyword">throw</span> e<span class="token punctuation">;</span><span class="token function">l</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>e<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">else</span> <span class="token function">l</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">"No Transport"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">function</span> <span class="token function">l</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n<span class="token punctuation">,</span>r</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> i<span class="token punctuation">,</span>o<span class="token punctuation">,</span>a<span class="token punctuation">,</span>s<span class="token punctuation">,</span>u<span class="token punctuation">,</span>l<span class="token operator">=</span>t<span class="token punctuation">;</span>h<span class="token operator">||</span><span class="token punctuation">(</span>h<span class="token operator">=</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>d<span class="token operator">&amp;&amp;</span><span class="token constant">C</span><span class="token punctuation">.</span><span class="token function">clearTimeout</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">,</span>c<span class="token operator">=</span><span class="token keyword">void</span> <span class="token number">0</span><span class="token punctuation">,</span>p<span class="token operator">=</span>r<span class="token operator">||</span><span class="token string">""</span><span class="token punctuation">,</span><span class="token constant">T</span><span class="token punctuation">.</span>readyState<span class="token operator">=</span><span class="token number">0</span><span class="token operator">&lt;</span>e<span class="token operator">?</span><span class="token number">4</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>i<span class="token operator">=</span><span class="token number">200</span><span class="token operator">&lt;=</span>e<span class="token operator">&amp;&amp;</span>e<span class="token operator">&lt;</span><span class="token number">300</span><span class="token operator">||</span><span class="token number">304</span><span class="token operator">===</span>e<span class="token punctuation">,</span>n<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span><span class="token function-variable function">s</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> r<span class="token punctuation">,</span>i<span class="token punctuation">,</span>o<span class="token punctuation">,</span>a<span class="token punctuation">,</span>s<span class="token operator">=</span>e<span class="token punctuation">.</span>contents<span class="token punctuation">,</span>u<span class="token operator">=</span>e<span class="token punctuation">.</span>dataTypes<span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span><span class="token string">"*"</span><span class="token operator">===</span>u<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>u<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">void</span> <span class="token number">0</span><span class="token operator">===</span>r<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>r<span class="token operator">=</span>e<span class="token punctuation">.</span>mimeType<span class="token operator">||</span>t<span class="token punctuation">.</span><span class="token function">getResponseHeader</span><span class="token punctuation">(</span><span class="token string">"Content-Type"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token keyword">for</span><span class="token punctuation">(</span>i <span class="token keyword">in</span> s<span class="token punctuation">)</span><span class="token keyword">if</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">&amp;&amp;</span>s<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>u<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">break</span><span class="token punctuation">&#125;</span><span class="token keyword">if</span><span class="token punctuation">(</span>u<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token keyword">in</span> n<span class="token punctuation">)</span>o<span class="token operator">=</span>u<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span><span class="token keyword">for</span><span class="token punctuation">(</span>i <span class="token keyword">in</span> n<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>u<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">||</span>e<span class="token punctuation">.</span>converters<span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token string">" "</span><span class="token operator">+</span>u<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>o<span class="token operator">=</span>i<span class="token punctuation">;</span><span class="token keyword">break</span><span class="token punctuation">&#125;</span>a<span class="token operator">||</span><span class="token punctuation">(</span>a<span class="token operator">=</span>i<span class="token punctuation">)</span><span class="token punctuation">&#125;</span>o<span class="token operator">=</span>o<span class="token operator">||</span>a<span class="token punctuation">&#125;</span><span class="token keyword">if</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token keyword">return</span> o<span class="token operator">!==</span>u<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">&amp;&amp;</span>u<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">,</span>n<span class="token punctuation">[</span>o<span class="token punctuation">]</span><span class="token punctuation">&#125;</span><span class="token punctuation">(</span>v<span class="token punctuation">,</span><span class="token constant">T</span><span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function-variable function">s</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n<span class="token punctuation">,</span>r</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> i<span class="token punctuation">,</span>o<span class="token punctuation">,</span>a<span class="token punctuation">,</span>s<span class="token punctuation">,</span>u<span class="token punctuation">,</span>l<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>c<span class="token operator">=</span>e<span class="token punctuation">.</span>dataTypes<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>c<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">for</span><span class="token punctuation">(</span>a <span class="token keyword">in</span> e<span class="token punctuation">.</span>converters<span class="token punctuation">)</span>l<span class="token punctuation">[</span>a<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">=</span>e<span class="token punctuation">.</span>converters<span class="token punctuation">[</span>a<span class="token punctuation">]</span><span class="token punctuation">;</span>o<span class="token operator">=</span>c<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token keyword">if</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>responseFields<span class="token punctuation">[</span>o<span class="token punctuation">]</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>n<span class="token punctuation">[</span>e<span class="token punctuation">.</span>responseFields<span class="token punctuation">[</span>o<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">=</span>t<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token operator">!</span>u<span class="token operator">&amp;&amp;</span>r<span class="token operator">&amp;&amp;</span>e<span class="token punctuation">.</span>dataFilter<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>t<span class="token operator">=</span>e<span class="token punctuation">.</span><span class="token function">dataFilter</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span>e<span class="token punctuation">.</span>dataType<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>u<span class="token operator">=</span>o<span class="token punctuation">,</span>o<span class="token operator">=</span>c<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"*"</span><span class="token operator">===</span>o<span class="token punctuation">)</span>o<span class="token operator">=</span>u<span class="token punctuation">;</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"*"</span><span class="token operator">!==</span>u<span class="token operator">&amp;&amp;</span>u<span class="token operator">!==</span>o<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>a<span class="token operator">=</span>l<span class="token punctuation">[</span>u<span class="token operator">+</span><span class="token string">" "</span><span class="token operator">+</span>o<span class="token punctuation">]</span><span class="token operator">||</span>l<span class="token punctuation">[</span><span class="token string">"* "</span><span class="token operator">+</span>o<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">for</span><span class="token punctuation">(</span>i <span class="token keyword">in</span> l<span class="token punctuation">)</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>s<span class="token operator">=</span>i<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">===</span>o<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>a<span class="token operator">=</span>l<span class="token punctuation">[</span>u<span class="token operator">+</span><span class="token string">" "</span><span class="token operator">+</span>s<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">||</span>l<span class="token punctuation">[</span><span class="token string">"* "</span><span class="token operator">+</span>s<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token operator">!</span><span class="token number">0</span><span class="token operator">===</span>a<span class="token operator">?</span>a<span class="token operator">=</span>l<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">:</span><span class="token operator">!</span><span class="token number">0</span><span class="token operator">!==</span>l<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>o<span class="token operator">=</span>s<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>c<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">break</span><span class="token punctuation">&#125;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token number">0</span><span class="token operator">!==</span>a<span class="token punctuation">)</span><span class="token keyword">if</span><span class="token punctuation">(</span>a<span class="token operator">&amp;&amp;</span>e<span class="token punctuation">[</span><span class="token string">"throws"</span><span class="token punctuation">]</span><span class="token punctuation">)</span>t<span class="token operator">=</span><span class="token function">a</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">else</span> <span class="token keyword">try</span><span class="token punctuation">&#123;</span>t<span class="token operator">=</span><span class="token function">a</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">catch</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span><span class="token punctuation">&#123;</span>state<span class="token operator">:</span><span class="token string">"parsererror"</span><span class="token punctuation">,</span>error<span class="token operator">:</span>a<span class="token operator">?</span>e<span class="token operator">:</span><span class="token string">"No conversion from "</span><span class="token operator">+</span>u<span class="token operator">+</span><span class="token string">" to "</span><span class="token operator">+</span>o<span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span><span class="token punctuation">&#123;</span>state<span class="token operator">:</span><span class="token string">"success"</span><span class="token punctuation">,</span>data<span class="token operator">:</span>t<span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">(</span>v<span class="token punctuation">,</span>s<span class="token punctuation">,</span><span class="token constant">T</span><span class="token punctuation">,</span>i<span class="token punctuation">)</span><span class="token punctuation">,</span>i<span class="token operator">?</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span>ifModified<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span><span class="token punctuation">(</span>u<span class="token operator">=</span><span class="token constant">T</span><span class="token punctuation">.</span><span class="token function">getResponseHeader</span><span class="token punctuation">(</span><span class="token string">"Last-Modified"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>k<span class="token punctuation">.</span>lastModified<span class="token punctuation">[</span>f<span class="token punctuation">]</span><span class="token operator">=</span>u<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span>u<span class="token operator">=</span><span class="token constant">T</span><span class="token punctuation">.</span><span class="token function">getResponseHeader</span><span class="token punctuation">(</span><span class="token string">"etag"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>k<span class="token punctuation">.</span>etag<span class="token punctuation">[</span>f<span class="token punctuation">]</span><span class="token operator">=</span>u<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">204</span><span class="token operator">===</span>e<span class="token operator">||</span><span class="token string">"HEAD"</span><span class="token operator">===</span>v<span class="token punctuation">.</span>type<span class="token operator">?</span>l<span class="token operator">=</span><span class="token string">"nocontent"</span><span class="token operator">:</span><span class="token number">304</span><span class="token operator">===</span>e<span class="token operator">?</span>l<span class="token operator">=</span><span class="token string">"notmodified"</span><span class="token operator">:</span><span class="token punctuation">(</span>l<span class="token operator">=</span>s<span class="token punctuation">.</span>state<span class="token punctuation">,</span>o<span class="token operator">=</span>s<span class="token punctuation">.</span>data<span class="token punctuation">,</span>i<span class="token operator">=</span><span class="token operator">!</span><span class="token punctuation">(</span>a<span class="token operator">=</span>s<span class="token punctuation">.</span>error<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token punctuation">(</span>a<span class="token operator">=</span>l<span class="token punctuation">,</span><span class="token operator">!</span>e<span class="token operator">&amp;&amp;</span>l<span class="token operator">||</span><span class="token punctuation">(</span>l<span class="token operator">=</span><span class="token string">"error"</span><span class="token punctuation">,</span>e<span class="token operator">&lt;</span><span class="token number">0</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>e<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token constant">T</span><span class="token punctuation">.</span>status<span class="token operator">=</span>e<span class="token punctuation">,</span><span class="token constant">T</span><span class="token punctuation">.</span>statusText<span class="token operator">=</span><span class="token punctuation">(</span>t<span class="token operator">||</span>l<span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">""</span><span class="token punctuation">,</span>i<span class="token operator">?</span>x<span class="token punctuation">.</span><span class="token function">resolveWith</span><span class="token punctuation">(</span>y<span class="token punctuation">,</span><span class="token punctuation">[</span>o<span class="token punctuation">,</span>l<span class="token punctuation">,</span><span class="token constant">T</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span>x<span class="token punctuation">.</span><span class="token function">rejectWith</span><span class="token punctuation">(</span>y<span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token constant">T</span><span class="token punctuation">,</span>l<span class="token punctuation">,</span>a<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token constant">T</span><span class="token punctuation">.</span><span class="token function">statusCode</span><span class="token punctuation">(</span>w<span class="token punctuation">)</span><span class="token punctuation">,</span>w<span class="token operator">=</span><span class="token keyword">void</span> <span class="token number">0</span><span class="token punctuation">,</span>g<span class="token operator">&amp;&amp;</span>m<span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span>i<span class="token operator">?</span><span class="token string">"ajaxSuccess"</span><span class="token operator">:</span><span class="token string">"ajaxError"</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token constant">T</span><span class="token punctuation">,</span>v<span class="token punctuation">,</span>i<span class="token operator">?</span>o<span class="token operator">:</span>a<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>b<span class="token punctuation">.</span><span class="token function">fireWith</span><span class="token punctuation">(</span>y<span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token constant">T</span><span class="token punctuation">,</span>l<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>g<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>m<span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span><span class="token string">"ajaxComplete"</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token constant">T</span><span class="token punctuation">,</span>v<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token operator">--</span>k<span class="token punctuation">.</span>active<span class="token operator">||</span>k<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span><span class="token string">"ajaxStop"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> <span class="token constant">T</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">getJSON</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> k<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n<span class="token punctuation">,</span><span class="token string">"json"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">getScript</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> k<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token keyword">void</span> <span class="token number">0</span><span class="token punctuation">,</span>t<span class="token punctuation">,</span><span class="token string">"script"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"get"</span><span class="token punctuation">,</span><span class="token string">"post"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>i</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>k<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n<span class="token punctuation">,</span>r</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token function">m</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>r<span class="token operator">=</span>r<span class="token operator">||</span>n<span class="token punctuation">,</span>n<span class="token operator">=</span>t<span class="token punctuation">,</span>t<span class="token operator">=</span><span class="token keyword">void</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span>k<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>url<span class="token operator">:</span>e<span class="token punctuation">,</span>type<span class="token operator">:</span>i<span class="token punctuation">,</span>dataType<span class="token operator">:</span>r<span class="token punctuation">,</span>data<span class="token operator">:</span>t<span class="token punctuation">,</span>success<span class="token operator">:</span>n<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span><span class="token function">isPlainObject</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span><span class="token function-variable function">_evalUrl</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> k<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>url<span class="token operator">:</span>e<span class="token punctuation">,</span>type<span class="token operator">:</span><span class="token string">"GET"</span><span class="token punctuation">,</span>dataType<span class="token operator">:</span><span class="token string">"script"</span><span class="token punctuation">,</span>cache<span class="token operator">:</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>async<span class="token operator">:</span><span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">,</span>global<span class="token operator">:</span><span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">,</span>converters<span class="token operator">:</span><span class="token punctuation">&#123;</span><span class="token string">"text script"</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">dataFilter</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>k<span class="token punctuation">.</span><span class="token function">globalEval</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>t<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span>fn<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token function-variable function">wrapAll</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> t<span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span><span class="token function">m</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>e<span class="token operator">=</span><span class="token function">e</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>t<span class="token operator">=</span><span class="token function">k</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>ownerDocument<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>parentNode<span class="token operator">&amp;&amp;</span>t<span class="token punctuation">.</span><span class="token function">insertBefore</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>t<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> e<span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>firstElementChild<span class="token punctuation">)</span>e<span class="token operator">=</span>e<span class="token punctuation">.</span>firstElementChild<span class="token punctuation">;</span><span class="token keyword">return</span> e<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">wrapInner</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token function">m</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token operator">?</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token function">k</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">wrapInner</span><span class="token punctuation">(</span><span class="token function">n</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> e<span class="token operator">=</span><span class="token function">k</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">,</span>t<span class="token operator">=</span>e<span class="token punctuation">.</span><span class="token function">contents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>t<span class="token punctuation">.</span>length<span class="token operator">?</span>t<span class="token punctuation">.</span><span class="token function">wrapAll</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token operator">:</span>e<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">wrap</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> n<span class="token operator">=</span><span class="token function">m</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token function">k</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">wrapAll</span><span class="token punctuation">(</span>n<span class="token operator">?</span><span class="token function">t</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>e<span class="token punctuation">)</span><span class="token operator">:</span>t<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">unwrap</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">parent</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">not</span><span class="token punctuation">(</span><span class="token string">"body"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token function">k</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replaceWith</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>childNodes<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span>expr<span class="token punctuation">.</span>pseudos<span class="token punctuation">.</span><span class="token function-variable function">hidden</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span><span class="token operator">!</span>k<span class="token punctuation">.</span>expr<span class="token punctuation">.</span>pseudos<span class="token punctuation">.</span><span class="token function">visible</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span>expr<span class="token punctuation">.</span>pseudos<span class="token punctuation">.</span><span class="token function-variable function">visible</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span><span class="token operator">!</span><span class="token operator">!</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>offsetWidth<span class="token operator">||</span>e<span class="token punctuation">.</span>offsetHeight<span class="token operator">||</span>e<span class="token punctuation">.</span><span class="token function">getClientRects</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span>ajaxSettings<span class="token punctuation">.</span><span class="token function-variable function">xhr</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">try</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">C<span class="token punctuation">.</span>XMLHttpRequest</span><span class="token punctuation">&#125;</span><span class="token keyword">catch</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">var</span> Ut<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token number">0</span><span class="token operator">:</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">1223</span><span class="token operator">:</span><span class="token number">204</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>Xt<span class="token operator">=</span>k<span class="token punctuation">.</span>ajaxSettings<span class="token punctuation">.</span><span class="token function">xhr</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>y<span class="token punctuation">.</span>cors<span class="token operator">=</span><span class="token operator">!</span><span class="token operator">!</span>Xt<span class="token operator">&amp;&amp;</span><span class="token string">"withCredentials"</span><span class="token keyword">in</span> Xt<span class="token punctuation">,</span>y<span class="token punctuation">.</span>ajax<span class="token operator">=</span>Xt<span class="token operator">=</span><span class="token operator">!</span><span class="token operator">!</span>Xt<span class="token punctuation">,</span>k<span class="token punctuation">.</span><span class="token function">ajaxTransport</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">i</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> o<span class="token punctuation">,</span>a<span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>y<span class="token punctuation">.</span>cors<span class="token operator">||</span>Xt<span class="token operator">&amp;&amp;</span><span class="token operator">!</span>i<span class="token punctuation">.</span>crossDomain<span class="token punctuation">)</span><span class="token keyword">return</span><span class="token punctuation">&#123;</span><span class="token function-variable function">send</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> n<span class="token punctuation">,</span>r<span class="token operator">=</span>i<span class="token punctuation">.</span><span class="token function">xhr</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>i<span class="token punctuation">.</span>type<span class="token punctuation">,</span>i<span class="token punctuation">.</span>url<span class="token punctuation">,</span>i<span class="token punctuation">.</span>async<span class="token punctuation">,</span>i<span class="token punctuation">.</span>username<span class="token punctuation">,</span>i<span class="token punctuation">.</span>password<span class="token punctuation">)</span><span class="token punctuation">,</span>i<span class="token punctuation">.</span>xhrFields<span class="token punctuation">)</span><span class="token keyword">for</span><span class="token punctuation">(</span>n <span class="token keyword">in</span> i<span class="token punctuation">.</span>xhrFields<span class="token punctuation">)</span>r<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token operator">=</span>i<span class="token punctuation">.</span>xhrFields<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span>n <span class="token keyword">in</span> i<span class="token punctuation">.</span>mimeType<span class="token operator">&amp;&amp;</span>r<span class="token punctuation">.</span>overrideMimeType<span class="token operator">&amp;&amp;</span>r<span class="token punctuation">.</span><span class="token function">overrideMimeType</span><span class="token punctuation">(</span>i<span class="token punctuation">.</span>mimeType<span class="token punctuation">)</span><span class="token punctuation">,</span>i<span class="token punctuation">.</span>crossDomain<span class="token operator">||</span>e<span class="token punctuation">[</span><span class="token string">"X-Requested-With"</span><span class="token punctuation">]</span><span class="token operator">||</span><span class="token punctuation">(</span>e<span class="token punctuation">[</span><span class="token string">"X-Requested-With"</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token string">"XMLHttpRequest"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>e<span class="token punctuation">)</span>r<span class="token punctuation">.</span><span class="token function">setRequestHeader</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span>e<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function-variable function">o</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>o<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>o<span class="token operator">=</span>a<span class="token operator">=</span>r<span class="token punctuation">.</span>onload<span class="token operator">=</span>r<span class="token punctuation">.</span>onerror<span class="token operator">=</span>r<span class="token punctuation">.</span>onabort<span class="token operator">=</span>r<span class="token punctuation">.</span>ontimeout<span class="token operator">=</span>r<span class="token punctuation">.</span>onreadystatechange<span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">,</span><span class="token string">"abort"</span><span class="token operator">===</span>e<span class="token operator">?</span>r<span class="token punctuation">.</span><span class="token function">abort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token string">"error"</span><span class="token operator">===</span>e<span class="token operator">?</span><span class="token string">"number"</span><span class="token operator">!=</span><span class="token keyword">typeof</span> r<span class="token punctuation">.</span>status<span class="token operator">?</span><span class="token function">t</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">"error"</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token function">t</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>status<span class="token punctuation">,</span>r<span class="token punctuation">.</span>statusText<span class="token punctuation">)</span><span class="token operator">:</span><span class="token function">t</span><span class="token punctuation">(</span>Ut<span class="token punctuation">[</span>r<span class="token punctuation">.</span>status<span class="token punctuation">]</span><span class="token operator">||</span>r<span class="token punctuation">.</span>status<span class="token punctuation">,</span>r<span class="token punctuation">.</span>statusText<span class="token punctuation">,</span><span class="token string">"text"</span><span class="token operator">!==</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>responseType<span class="token operator">||</span><span class="token string">"text"</span><span class="token punctuation">)</span><span class="token operator">||</span><span class="token string">"string"</span><span class="token operator">!=</span><span class="token keyword">typeof</span> r<span class="token punctuation">.</span>responseText<span class="token operator">?</span><span class="token punctuation">&#123;</span>binary<span class="token operator">:</span>r<span class="token punctuation">.</span>response<span class="token punctuation">&#125;</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>text<span class="token operator">:</span>r<span class="token punctuation">.</span>responseText<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>r<span class="token punctuation">.</span><span class="token function">getAllResponseHeaders</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>r<span class="token punctuation">.</span>onload<span class="token operator">=</span><span class="token function">o</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>a<span class="token operator">=</span>r<span class="token punctuation">.</span>onerror<span class="token operator">=</span>r<span class="token punctuation">.</span>ontimeout<span class="token operator">=</span><span class="token function">o</span><span class="token punctuation">(</span><span class="token string">"error"</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">void</span> <span class="token number">0</span><span class="token operator">!==</span>r<span class="token punctuation">.</span>onabort<span class="token operator">?</span>r<span class="token punctuation">.</span>onabort<span class="token operator">=</span>a<span class="token operator">:</span>r<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token number">4</span><span class="token operator">===</span>r<span class="token punctuation">.</span>readyState<span class="token operator">&amp;&amp;</span><span class="token constant">C</span><span class="token punctuation">.</span><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>o<span class="token operator">&amp;&amp;</span><span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>o<span class="token operator">=</span><span class="token function">o</span><span class="token punctuation">(</span><span class="token string">"abort"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">try</span><span class="token punctuation">&#123;</span>r<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>i<span class="token punctuation">.</span>hasContent<span class="token operator">&amp;&amp;</span>i<span class="token punctuation">.</span>data<span class="token operator">||</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">catch</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">if</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token keyword">throw</span> e<span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">abort</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>o<span class="token operator">&amp;&amp;</span><span class="token function">o</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span><span class="token function">ajaxPrefilter</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>e<span class="token punctuation">.</span>crossDomain<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>contents<span class="token punctuation">.</span>script<span class="token operator">=</span><span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span><span class="token function">ajaxSetup</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>accepts<span class="token operator">:</span><span class="token punctuation">&#123;</span>script<span class="token operator">:</span><span class="token string">"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>contents<span class="token operator">:</span><span class="token punctuation">&#123;</span>script<span class="token operator">:</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\b(?:java|ecma)script\b</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>converters<span class="token operator">:</span><span class="token punctuation">&#123;</span><span class="token string">"text script"</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> k<span class="token punctuation">.</span><span class="token function">globalEval</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">,</span>e<span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span><span class="token function">ajaxPrefilter</span><span class="token punctuation">(</span><span class="token string">"script"</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">void</span> <span class="token number">0</span><span class="token operator">===</span>e<span class="token punctuation">.</span>cache<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>cache<span class="token operator">=</span><span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>e<span class="token punctuation">.</span>crossDomain<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>type<span class="token operator">=</span><span class="token string">"GET"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span><span class="token function">ajaxTransport</span><span class="token punctuation">(</span><span class="token string">"script"</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> r<span class="token punctuation">,</span>i<span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>n<span class="token punctuation">.</span>crossDomain<span class="token operator">||</span>n<span class="token punctuation">.</span>scriptAttrs<span class="token punctuation">)</span><span class="token keyword">return</span><span class="token punctuation">&#123;</span><span class="token function-variable function">send</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>r<span class="token operator">=</span><span class="token function">k</span><span class="token punctuation">(</span><span class="token string">"&lt;script>"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span>n<span class="token punctuation">.</span>scriptAttrs<span class="token operator">||</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">prop</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>charset<span class="token operator">:</span>n<span class="token punctuation">.</span>scriptCharset<span class="token punctuation">,</span>src<span class="token operator">:</span>n<span class="token punctuation">.</span>url<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">"load error"</span><span class="token punctuation">,</span><span class="token function-variable function">i</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>r<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>i<span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">,</span>e<span class="token operator">&amp;&amp;</span><span class="token function">t</span><span class="token punctuation">(</span><span class="token string">"error"</span><span class="token operator">===</span>e<span class="token punctuation">.</span>type<span class="token operator">?</span><span class="token number">404</span><span class="token operator">:</span><span class="token number">200</span><span class="token punctuation">,</span>e<span class="token punctuation">.</span>type<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token constant">E</span><span class="token punctuation">.</span>head<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>r<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">abort</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>i<span class="token operator">&amp;&amp;</span><span class="token function">i</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">var</span> Vt<span class="token punctuation">,</span>Gt<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>Yt<span class="token operator">=</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(=)\?(?=&amp;|$)|\?\?</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>k<span class="token punctuation">.</span><span class="token function">ajaxSetup</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>jsonp<span class="token operator">:</span><span class="token string">"callback"</span><span class="token punctuation">,</span><span class="token function-variable function">jsonpCallback</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> e<span class="token operator">=</span>Gt<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">||</span>k<span class="token punctuation">.</span>expando<span class="token operator">+</span><span class="token string">"_"</span><span class="token operator">+</span>kt<span class="token operator">++</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">[</span>e<span class="token punctuation">]</span><span class="token operator">=</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>e<span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span><span class="token function">ajaxPrefilter</span><span class="token punctuation">(</span><span class="token string">"json jsonp"</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> r<span class="token punctuation">,</span>i<span class="token punctuation">,</span>o<span class="token punctuation">,</span>a<span class="token operator">=</span><span class="token operator">!</span><span class="token number">1</span><span class="token operator">!==</span>e<span class="token punctuation">.</span>jsonp<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>Yt<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token operator">?</span><span class="token string">"url"</span><span class="token operator">:</span><span class="token string">"string"</span><span class="token operator">==</span><span class="token keyword">typeof</span> e<span class="token punctuation">.</span>data<span class="token operator">&amp;&amp;</span><span class="token number">0</span><span class="token operator">===</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>contentType<span class="token operator">||</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">"application/x-www-form-urlencoded"</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span>Yt<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token string">"data"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>a<span class="token operator">||</span><span class="token string">"jsonp"</span><span class="token operator">===</span>e<span class="token punctuation">.</span>dataTypes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">return</span> r<span class="token operator">=</span>e<span class="token punctuation">.</span>jsonpCallback<span class="token operator">=</span><span class="token function">m</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>jsonpCallback<span class="token punctuation">)</span><span class="token operator">?</span>e<span class="token punctuation">.</span><span class="token function">jsonpCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span>e<span class="token punctuation">.</span>jsonpCallback<span class="token punctuation">,</span>a<span class="token operator">?</span>e<span class="token punctuation">[</span>a<span class="token punctuation">]</span><span class="token operator">=</span>e<span class="token punctuation">[</span>a<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>Yt<span class="token punctuation">,</span><span class="token string">"$1"</span><span class="token operator">+</span>r<span class="token punctuation">)</span><span class="token operator">:</span><span class="token operator">!</span><span class="token number">1</span><span class="token operator">!==</span>e<span class="token punctuation">.</span>jsonp<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>url<span class="token operator">+=</span><span class="token punctuation">(</span>St<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token operator">?</span><span class="token string">"&amp;"</span><span class="token operator">:</span><span class="token string">"?"</span><span class="token punctuation">)</span><span class="token operator">+</span>e<span class="token punctuation">.</span>jsonp<span class="token operator">+</span><span class="token string">"="</span><span class="token operator">+</span>r<span class="token punctuation">)</span><span class="token punctuation">,</span>e<span class="token punctuation">.</span>converters<span class="token punctuation">[</span><span class="token string">"script json"</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> o<span class="token operator">||</span>k<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>r<span class="token operator">+</span><span class="token string">" was not called"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>o<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>e<span class="token punctuation">.</span>dataTypes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token string">"json"</span><span class="token punctuation">,</span>i<span class="token operator">=</span><span class="token constant">C</span><span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token constant">C</span><span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>o<span class="token operator">=</span>arguments<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>n<span class="token punctuation">.</span><span class="token function">always</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">void</span> <span class="token number">0</span><span class="token operator">===</span>i<span class="token operator">?</span><span class="token function">k</span><span class="token punctuation">(</span><span class="token constant">C</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">removeProp</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token operator">:</span><span class="token constant">C</span><span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token operator">=</span>i<span class="token punctuation">,</span>e<span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>jsonpCallback<span class="token operator">=</span>t<span class="token punctuation">.</span>jsonpCallback<span class="token punctuation">,</span>Gt<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>o<span class="token operator">&amp;&amp;</span><span class="token function">m</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token function">i</span><span class="token punctuation">(</span>o<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>o<span class="token operator">=</span>i<span class="token operator">=</span><span class="token keyword">void</span> <span class="token number">0</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">"script"</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>y<span class="token punctuation">.</span>createHTMLDocument<span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">(</span>Vt<span class="token operator">=</span><span class="token constant">E</span><span class="token punctuation">.</span>implementation<span class="token punctuation">.</span><span class="token function">createHTMLDocument</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML<span class="token operator">=</span><span class="token string">"&lt;form>&lt;/form>&lt;form>&lt;/form>"</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token operator">===</span>Vt<span class="token punctuation">.</span>childNodes<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span><span class="token function-variable function">parseHTML</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span><span class="token string">"string"</span><span class="token operator">!=</span><span class="token keyword">typeof</span> e<span class="token operator">?</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token string">"boolean"</span><span class="token operator">==</span><span class="token keyword">typeof</span> t<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>n<span class="token operator">=</span>t<span class="token punctuation">,</span>t<span class="token operator">=</span><span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>t<span class="token operator">||</span><span class="token punctuation">(</span>y<span class="token punctuation">.</span>createHTMLDocument<span class="token operator">?</span><span class="token punctuation">(</span><span class="token punctuation">(</span>r<span class="token operator">=</span><span class="token punctuation">(</span>t<span class="token operator">=</span><span class="token constant">E</span><span class="token punctuation">.</span>implementation<span class="token punctuation">.</span><span class="token function">createHTMLDocument</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"base"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>href<span class="token operator">=</span><span class="token constant">E</span><span class="token punctuation">.</span>location<span class="token punctuation">.</span>href<span class="token punctuation">,</span>t<span class="token punctuation">.</span>head<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">:</span>t<span class="token operator">=</span><span class="token constant">E</span><span class="token punctuation">)</span><span class="token punctuation">,</span>o<span class="token operator">=</span><span class="token operator">!</span>n<span class="token operator">&amp;&amp;</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token constant">D</span><span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">[</span>t<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span>i<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">:</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token function">we</span><span class="token punctuation">(</span><span class="token punctuation">[</span>e<span class="token punctuation">]</span><span class="token punctuation">,</span>t<span class="token punctuation">,</span>o<span class="token punctuation">)</span><span class="token punctuation">,</span>o<span class="token operator">&amp;&amp;</span>o<span class="token punctuation">.</span>length<span class="token operator">&amp;&amp;</span><span class="token function">k</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span><span class="token function">merge</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>i<span class="token punctuation">.</span>childNodes<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">var</span> r<span class="token punctuation">,</span>i<span class="token punctuation">,</span>o<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span>fn<span class="token punctuation">.</span><span class="token function-variable function">load</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> r<span class="token punctuation">,</span>i<span class="token punctuation">,</span>o<span class="token punctuation">,</span>a<span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">,</span>s<span class="token operator">=</span>e<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span><span class="token operator">-</span><span class="token number">1</span><span class="token operator">&lt;</span>s<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>r<span class="token operator">=</span><span class="token function">mt</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>e<span class="token operator">=</span>e<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">m</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">(</span>n<span class="token operator">=</span>t<span class="token punctuation">,</span>t<span class="token operator">=</span><span class="token keyword">void</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">:</span>t<span class="token operator">&amp;&amp;</span><span class="token string">"object"</span><span class="token operator">==</span><span class="token keyword">typeof</span> t<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token string">"POST"</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token operator">&lt;</span>a<span class="token punctuation">.</span>length<span class="token operator">&amp;&amp;</span>k<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>url<span class="token operator">:</span>e<span class="token punctuation">,</span>type<span class="token operator">:</span>i<span class="token operator">||</span><span class="token string">"GET"</span><span class="token punctuation">,</span>dataType<span class="token operator">:</span><span class="token string">"html"</span><span class="token punctuation">,</span>data<span class="token operator">:</span>t<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">done</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>o<span class="token operator">=</span>arguments<span class="token punctuation">,</span>a<span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span>r<span class="token operator">?</span><span class="token function">k</span><span class="token punctuation">(</span><span class="token string">"&lt;div>"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>k<span class="token punctuation">.</span><span class="token function">parseHTML</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token operator">:</span>e<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">always</span><span class="token punctuation">(</span>n<span class="token operator">&amp;&amp;</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>a<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token function">n</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>o<span class="token operator">||</span><span class="token punctuation">[</span>e<span class="token punctuation">.</span>responseText<span class="token punctuation">,</span>t<span class="token punctuation">,</span>e<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"ajaxStart"</span><span class="token punctuation">,</span><span class="token string">"ajaxStop"</span><span class="token punctuation">,</span><span class="token string">"ajaxComplete"</span><span class="token punctuation">,</span><span class="token string">"ajaxError"</span><span class="token punctuation">,</span><span class="token string">"ajaxSuccess"</span><span class="token punctuation">,</span><span class="token string">"ajaxSend"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>k<span class="token punctuation">.</span>fn<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span>e<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span>expr<span class="token punctuation">.</span>pseudos<span class="token punctuation">.</span><span class="token function-variable function">animated</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> k<span class="token punctuation">.</span><span class="token function">grep</span><span class="token punctuation">(</span>k<span class="token punctuation">.</span>timers<span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> t<span class="token operator">===</span>e<span class="token punctuation">.</span>elem<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span>offset<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token function-variable function">setOffset</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> r<span class="token punctuation">,</span>i<span class="token punctuation">,</span>o<span class="token punctuation">,</span>a<span class="token punctuation">,</span>s<span class="token punctuation">,</span>u<span class="token punctuation">,</span>l<span class="token operator">=</span>k<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token string">"position"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>c<span class="token operator">=</span><span class="token function">k</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">,</span>f<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token string">"static"</span><span class="token operator">===</span>l<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>style<span class="token punctuation">.</span>position<span class="token operator">=</span><span class="token string">"relative"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>s<span class="token operator">=</span>c<span class="token punctuation">.</span><span class="token function">offset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>o<span class="token operator">=</span>k<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token string">"top"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>u<span class="token operator">=</span>k<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token string">"left"</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token string">"absolute"</span><span class="token operator">===</span>l<span class="token operator">||</span><span class="token string">"fixed"</span><span class="token operator">===</span>l<span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token operator">-</span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token punctuation">(</span>o<span class="token operator">+</span>u<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">"auto"</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">(</span>a<span class="token operator">=</span><span class="token punctuation">(</span>r<span class="token operator">=</span>c<span class="token punctuation">.</span><span class="token function">position</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>top<span class="token punctuation">,</span>i<span class="token operator">=</span>r<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token operator">:</span><span class="token punctuation">(</span>a<span class="token operator">=</span><span class="token function">parseFloat</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token operator">||</span><span class="token number">0</span><span class="token punctuation">,</span>i<span class="token operator">=</span><span class="token function">parseFloat</span><span class="token punctuation">(</span>u<span class="token punctuation">)</span><span class="token operator">||</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">m</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>t<span class="token operator">=</span><span class="token function">t</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>n<span class="token punctuation">,</span>k<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">null</span><span class="token operator">!=</span>t<span class="token punctuation">.</span>top<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>f<span class="token punctuation">.</span>top<span class="token operator">=</span>t<span class="token punctuation">.</span>top<span class="token operator">-</span>s<span class="token punctuation">.</span>top<span class="token operator">+</span>a<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">null</span><span class="token operator">!=</span>t<span class="token punctuation">.</span>left<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>f<span class="token punctuation">.</span>left<span class="token operator">=</span>t<span class="token punctuation">.</span>left<span class="token operator">-</span>s<span class="token punctuation">.</span>left<span class="token operator">+</span>i<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">"using"</span><span class="token keyword">in</span> t<span class="token operator">?</span>t<span class="token punctuation">.</span><span class="token function">using</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>f<span class="token punctuation">)</span><span class="token operator">:</span>c<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span>fn<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token function-variable function">offset</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">if</span><span class="token punctuation">(</span>arguments<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token keyword">return</span> <span class="token keyword">void</span> <span class="token number">0</span><span class="token operator">===</span>t<span class="token operator">?</span><span class="token keyword">this</span><span class="token operator">:</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>k<span class="token punctuation">.</span>offset<span class="token punctuation">.</span><span class="token function">setOffset</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>t<span class="token punctuation">,</span>e<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">var</span> e<span class="token punctuation">,</span>n<span class="token punctuation">,</span>r<span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">return</span> r<span class="token operator">?</span>r<span class="token punctuation">.</span><span class="token function">getClientRects</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token operator">?</span><span class="token punctuation">(</span>e<span class="token operator">=</span>r<span class="token punctuation">.</span><span class="token function">getBoundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>n<span class="token operator">=</span>r<span class="token punctuation">.</span>ownerDocument<span class="token punctuation">.</span>defaultView<span class="token punctuation">,</span><span class="token punctuation">&#123;</span>top<span class="token operator">:</span>e<span class="token punctuation">.</span>top<span class="token operator">+</span>n<span class="token punctuation">.</span>pageYOffset<span class="token punctuation">,</span>left<span class="token operator">:</span>e<span class="token punctuation">.</span>left<span class="token operator">+</span>n<span class="token punctuation">.</span>pageXOffset<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>top<span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>left<span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">&#125;</span><span class="token operator">:</span><span class="token keyword">void</span> <span class="token number">0</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">position</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n<span class="token punctuation">,</span>r<span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>i<span class="token operator">=</span><span class="token punctuation">&#123;</span>top<span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>left<span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"fixed"</span><span class="token operator">===</span>k<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span><span class="token string">"position"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>t<span class="token operator">=</span>r<span class="token punctuation">.</span><span class="token function">getBoundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span>t<span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">offset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>n<span class="token operator">=</span>r<span class="token punctuation">.</span>ownerDocument<span class="token punctuation">,</span>e<span class="token operator">=</span>r<span class="token punctuation">.</span>offsetParent<span class="token operator">||</span>n<span class="token punctuation">.</span>documentElement<span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>e<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>e<span class="token operator">===</span>n<span class="token punctuation">.</span>body<span class="token operator">||</span>e<span class="token operator">===</span>n<span class="token punctuation">.</span>documentElement<span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token string">"static"</span><span class="token operator">===</span>k<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token string">"position"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>e<span class="token operator">=</span>e<span class="token punctuation">.</span>parentNode<span class="token punctuation">;</span>e<span class="token operator">&amp;&amp;</span>e<span class="token operator">!==</span>r<span class="token operator">&amp;&amp;</span><span class="token number">1</span><span class="token operator">===</span>e<span class="token punctuation">.</span>nodeType<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token function">k</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">offset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>top<span class="token operator">+=</span>k<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token string">"borderTopWidth"</span><span class="token punctuation">,</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>i<span class="token punctuation">.</span>left<span class="token operator">+=</span>k<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token string">"borderLeftWidth"</span><span class="token punctuation">,</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span><span class="token punctuation">&#123;</span>top<span class="token operator">:</span>t<span class="token punctuation">.</span>top<span class="token operator">-</span>i<span class="token punctuation">.</span>top<span class="token operator">-</span>k<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span><span class="token string">"marginTop"</span><span class="token punctuation">,</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>left<span class="token operator">:</span>t<span class="token punctuation">.</span>left<span class="token operator">-</span>i<span class="token punctuation">.</span>left<span class="token operator">-</span>k<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span><span class="token string">"marginLeft"</span><span class="token punctuation">,</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">offsetParent</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> e<span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">.</span>offsetParent<span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>e<span class="token operator">&amp;&amp;</span><span class="token string">"static"</span><span class="token operator">===</span>k<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token string">"position"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>e<span class="token operator">=</span>e<span class="token punctuation">.</span>offsetParent<span class="token punctuation">;</span><span class="token keyword">return</span> e<span class="token operator">||</span>ie<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>scrollLeft<span class="token operator">:</span><span class="token string">"pageXOffset"</span><span class="token punctuation">,</span>scrollTop<span class="token operator">:</span><span class="token string">"pageYOffset"</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span>i</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> o<span class="token operator">=</span><span class="token string">"pageYOffset"</span><span class="token operator">===</span>i<span class="token punctuation">;</span>k<span class="token punctuation">.</span>fn<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token function">_</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> r<span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">x</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token operator">?</span>r<span class="token operator">=</span>e<span class="token operator">:</span><span class="token number">9</span><span class="token operator">===</span>e<span class="token punctuation">.</span>nodeType<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>r<span class="token operator">=</span>e<span class="token punctuation">.</span>defaultView<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">void</span> <span class="token number">0</span><span class="token operator">===</span>n<span class="token punctuation">)</span><span class="token keyword">return</span> r<span class="token operator">?</span>r<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">:</span>e<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">;</span>r<span class="token operator">?</span>r<span class="token punctuation">.</span><span class="token function">scrollTo</span><span class="token punctuation">(</span>o<span class="token operator">?</span>r<span class="token punctuation">.</span>pageXOffset<span class="token operator">:</span>n<span class="token punctuation">,</span>o<span class="token operator">?</span>n<span class="token operator">:</span>r<span class="token punctuation">.</span>pageYOffset<span class="token punctuation">)</span><span class="token operator">:</span>e<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token operator">=</span>n<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>t<span class="token punctuation">,</span>e<span class="token punctuation">,</span>arguments<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"top"</span><span class="token punctuation">,</span><span class="token string">"left"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>n</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>k<span class="token punctuation">.</span>cssHooks<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token operator">=</span><span class="token function">ze</span><span class="token punctuation">(</span>y<span class="token punctuation">.</span>pixelPosition<span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">if</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token keyword">return</span> t<span class="token operator">=</span><span class="token function">_e</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">,</span>$e<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token operator">?</span><span class="token function">k</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">position</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token operator">+</span><span class="token string">"px"</span><span class="token operator">:</span>t<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>Height<span class="token operator">:</span><span class="token string">"height"</span><span class="token punctuation">,</span>Width<span class="token operator">:</span><span class="token string">"width"</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span>s</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>k<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>padding<span class="token operator">:</span><span class="token string">"inner"</span><span class="token operator">+</span>a<span class="token punctuation">,</span>content<span class="token operator">:</span>s<span class="token punctuation">,</span><span class="token string">""</span><span class="token operator">:</span><span class="token string">"outer"</span><span class="token operator">+</span>a<span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">r<span class="token punctuation">,</span>o</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>k<span class="token punctuation">.</span>fn<span class="token punctuation">[</span>o<span class="token punctuation">]</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> n<span class="token operator">=</span>arguments<span class="token punctuation">.</span>length<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>r<span class="token operator">||</span><span class="token string">"boolean"</span><span class="token operator">!=</span><span class="token keyword">typeof</span> e<span class="token punctuation">)</span><span class="token punctuation">,</span>i<span class="token operator">=</span>r<span class="token operator">||</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token number">0</span><span class="token operator">===</span>e<span class="token operator">||</span><span class="token operator">!</span><span class="token number">0</span><span class="token operator">===</span>t<span class="token operator">?</span><span class="token string">"margin"</span><span class="token operator">:</span><span class="token string">"border"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token function">_</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> r<span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token function">x</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token operator">?</span><span class="token number">0</span><span class="token operator">===</span>o<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">"outer"</span><span class="token punctuation">)</span><span class="token operator">?</span>e<span class="token punctuation">[</span><span class="token string">"inner"</span><span class="token operator">+</span>a<span class="token punctuation">]</span><span class="token operator">:</span>e<span class="token punctuation">.</span>document<span class="token punctuation">.</span>documentElement<span class="token punctuation">[</span><span class="token string">"client"</span><span class="token operator">+</span>a<span class="token punctuation">]</span><span class="token operator">:</span><span class="token number">9</span><span class="token operator">===</span>e<span class="token punctuation">.</span>nodeType<span class="token operator">?</span><span class="token punctuation">(</span>r<span class="token operator">=</span>e<span class="token punctuation">.</span>documentElement<span class="token punctuation">,</span>Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>body<span class="token punctuation">[</span><span class="token string">"scroll"</span><span class="token operator">+</span>a<span class="token punctuation">]</span><span class="token punctuation">,</span>r<span class="token punctuation">[</span><span class="token string">"scroll"</span><span class="token operator">+</span>a<span class="token punctuation">]</span><span class="token punctuation">,</span>e<span class="token punctuation">.</span>body<span class="token punctuation">[</span><span class="token string">"offset"</span><span class="token operator">+</span>a<span class="token punctuation">]</span><span class="token punctuation">,</span>r<span class="token punctuation">[</span><span class="token string">"offset"</span><span class="token operator">+</span>a<span class="token punctuation">]</span><span class="token punctuation">,</span>r<span class="token punctuation">[</span><span class="token string">"client"</span><span class="token operator">+</span>a<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">void</span> <span class="token number">0</span><span class="token operator">===</span>n<span class="token operator">?</span>k<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>i<span class="token punctuation">)</span><span class="token operator">:</span>k<span class="token punctuation">.</span><span class="token function">style</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n<span class="token punctuation">,</span>i<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>s<span class="token punctuation">,</span>n<span class="token operator">?</span>e<span class="token operator">:</span><span class="token keyword">void</span> <span class="token number">0</span><span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token string">"blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu"</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>n</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>k<span class="token punctuation">.</span>fn<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token operator">&lt;</span>arguments<span class="token punctuation">.</span>length<span class="token operator">?</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">,</span>e<span class="token punctuation">,</span>t<span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span>fn<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token function-variable function">hover</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">mouseenter</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">mouseleave</span><span class="token punctuation">(</span>t<span class="token operator">||</span>e<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span>fn<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token function-variable function">bind</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">,</span>t<span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">unbind</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">,</span>t<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">delegate</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n<span class="token punctuation">,</span>r</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span>e<span class="token punctuation">,</span>n<span class="token punctuation">,</span>r<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">undelegate</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>n</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token number">1</span><span class="token operator">===</span>arguments<span class="token punctuation">.</span>length<span class="token operator">?</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token string">"**"</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span>e<span class="token operator">||</span><span class="token string">"**"</span><span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span><span class="token function-variable function">proxy</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> n<span class="token punctuation">,</span>r<span class="token punctuation">,</span>i<span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"string"</span><span class="token operator">==</span><span class="token keyword">typeof</span> t<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>n<span class="token operator">=</span>e<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">,</span>t<span class="token operator">=</span>e<span class="token punctuation">,</span>e<span class="token operator">=</span>n<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">m</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">return</span> r<span class="token operator">=</span><span class="token function">s</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arguments<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token function-variable function">i</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token function">e</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>t<span class="token operator">||</span><span class="token keyword">this</span><span class="token punctuation">,</span>r<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token function">s</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>guid<span class="token operator">=</span>e<span class="token punctuation">.</span>guid<span class="token operator">=</span>e<span class="token punctuation">.</span>guid<span class="token operator">||</span>k<span class="token punctuation">.</span>guid<span class="token operator">++</span><span class="token punctuation">,</span>i<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span><span class="token function-variable function">holdReady</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>e<span class="token operator">?</span>k<span class="token punctuation">.</span>readyWait<span class="token operator">++</span><span class="token operator">:</span>k<span class="token punctuation">.</span><span class="token function">ready</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span>isArray<span class="token operator">=</span>Array<span class="token punctuation">.</span>isArray<span class="token punctuation">,</span>k<span class="token punctuation">.</span>parseJSON<span class="token operator">=</span><span class="token constant">JSON</span><span class="token punctuation">.</span>parse<span class="token punctuation">,</span>k<span class="token punctuation">.</span>nodeName<span class="token operator">=</span><span class="token constant">A</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span>isFunction<span class="token operator">=</span>m<span class="token punctuation">,</span>k<span class="token punctuation">.</span>isWindow<span class="token operator">=</span>x<span class="token punctuation">,</span>k<span class="token punctuation">.</span>camelCase<span class="token operator">=</span><span class="token constant">V</span><span class="token punctuation">,</span>k<span class="token punctuation">.</span>type<span class="token operator">=</span>w<span class="token punctuation">,</span>k<span class="token punctuation">.</span>now<span class="token operator">=</span>Date<span class="token punctuation">.</span>now<span class="token punctuation">,</span>k<span class="token punctuation">.</span><span class="token function-variable function">isNumeric</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> t<span class="token operator">=</span>k<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span><span class="token punctuation">(</span><span class="token string">"number"</span><span class="token operator">===</span>t<span class="token operator">||</span><span class="token string">"string"</span><span class="token operator">===</span>t<span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token operator">!</span><span class="token function">isNaN</span><span class="token punctuation">(</span>e<span class="token operator">-</span><span class="token function">parseFloat</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token string">"function"</span><span class="token operator">==</span><span class="token keyword">typeof</span> define<span class="token operator">&amp;&amp;</span>define<span class="token punctuation">.</span>amd<span class="token operator">&amp;&amp;</span><span class="token function">define</span><span class="token punctuation">(</span><span class="token string">"jquery"</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> k<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">var</span> Qt<span class="token operator">=</span><span class="token constant">C</span><span class="token punctuation">.</span>jQuery<span class="token punctuation">,</span>Jt<span class="token operator">=</span><span class="token constant">C</span><span class="token punctuation">.</span>$<span class="token punctuation">;</span><span class="token keyword">return</span> k<span class="token punctuation">.</span><span class="token function-variable function">noConflict</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token constant">C</span><span class="token punctuation">.</span>$<span class="token operator">===</span>k<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span><span class="token constant">C</span><span class="token punctuation">.</span>$<span class="token operator">=</span>Jt<span class="token punctuation">)</span><span class="token punctuation">,</span>e<span class="token operator">&amp;&amp;</span><span class="token constant">C</span><span class="token punctuation">.</span>jQuery<span class="token operator">===</span>k<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span><span class="token constant">C</span><span class="token punctuation">.</span>jQuery<span class="token operator">=</span>Qt<span class="token punctuation">)</span><span class="token punctuation">,</span>k<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>e<span class="token operator">||</span><span class="token punctuation">(</span><span class="token constant">C</span><span class="token punctuation">.</span>jQuery<span class="token operator">=</span><span class="token constant">C</span><span class="token punctuation">.</span>$<span class="token operator">=</span>k<span class="token punctuation">)</span><span class="token punctuation">,</span>k<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">// Uses AMD or browser globals to create a jQuery plugin.</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">factory</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> define <span class="token operator">===</span> <span class="token string">'function'</span> <span class="token operator">&amp;&amp;</span> define<span class="token punctuation">.</span>amd<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>      <span class="token comment">// AMD. Register as an anonymous module.</span></pre></td></tr><tr><td data-num="7"></td><td><pre>      <span class="token function">define</span><span class="token punctuation">(</span><span class="token string">'lib/dropzone'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token string">'jquery'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> factory<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>      <span class="token comment">// Browser globals</span></pre></td></tr><tr><td data-num="10"></td><td><pre>      <span class="token function">factory</span><span class="token punctuation">(</span>jQuery<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token punctuation">&#125;</span> <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">jQuery</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token keyword">var</span> module <span class="token operator">=</span> <span class="token punctuation">&#123;</span> exports<span class="token operator">:</span> <span class="token punctuation">&#123;</span> <span class="token punctuation">&#125;</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span> <span class="token comment">// Fake component</span></pre></td></tr><tr><td data-num="14"></td><td><pre></pre></td></tr><tr><td data-num="15"></td><td><pre></pre></td></tr><tr><td data-num="16"></td><td><pre></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token keyword">var</span> <span class="token function-variable function">_createClass</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token keyword">function</span> <span class="token function">defineProperties</span><span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> props</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> props<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token keyword">var</span> descriptor <span class="token operator">=</span> props<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span> descriptor<span class="token punctuation">.</span>enumerable <span class="token operator">=</span> descriptor<span class="token punctuation">.</span>enumerable <span class="token operator">||</span> <span class="token boolean">false</span><span class="token punctuation">;</span> descriptor<span class="token punctuation">.</span>configurable <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">"value"</span> <span class="token keyword">in</span> descriptor<span class="token punctuation">)</span> descriptor<span class="token punctuation">.</span>writable <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span> Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> descriptor<span class="token punctuation">.</span>key<span class="token punctuation">,</span> descriptor<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span> <span class="token punctuation">&#125;</span> <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">Constructor<span class="token punctuation">,</span> protoProps<span class="token punctuation">,</span> staticProps</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>protoProps<span class="token punctuation">)</span> <span class="token function">defineProperties</span><span class="token punctuation">(</span><span class="token class-name">Constructor</span><span class="token punctuation">.</span>prototype<span class="token punctuation">,</span> protoProps<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>staticProps<span class="token punctuation">)</span> <span class="token function">defineProperties</span><span class="token punctuation">(</span>Constructor<span class="token punctuation">,</span> staticProps<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">return</span> Constructor<span class="token punctuation">;</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token keyword">function</span> <span class="token function">_possibleConstructorReturn</span><span class="token punctuation">(</span><span class="token parameter">self<span class="token punctuation">,</span> call</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>self<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">ReferenceError</span><span class="token punctuation">(</span><span class="token string">"this hasn't been initialised - super() hasn't been called"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span> <span class="token keyword">return</span> call <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> call <span class="token operator">===</span> <span class="token string">"object"</span> <span class="token operator">||</span> <span class="token keyword">typeof</span> call <span class="token operator">===</span> <span class="token string">"function"</span><span class="token punctuation">)</span> <span class="token operator">?</span> call <span class="token operator">:</span> self<span class="token punctuation">;</span> <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="20"></td><td><pre></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token keyword">function</span> <span class="token function">_inherits</span><span class="token punctuation">(</span><span class="token parameter">subClass<span class="token punctuation">,</span> superClass</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> superClass <span class="token operator">!==</span> <span class="token string">"function"</span> <span class="token operator">&amp;&amp;</span> superClass <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">TypeError</span><span class="token punctuation">(</span><span class="token string">"Super expression must either be null or a function, not "</span> <span class="token operator">+</span> <span class="token keyword">typeof</span> superClass<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span> subClass<span class="token punctuation">.</span>prototype <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>superClass <span class="token operator">&amp;&amp;</span> superClass<span class="token punctuation">.</span>prototype<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span> constructor<span class="token operator">:</span> <span class="token punctuation">&#123;</span> value<span class="token operator">:</span> subClass<span class="token punctuation">,</span> enumerable<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> writable<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> configurable<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">&#125;</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>superClass<span class="token punctuation">)</span> Object<span class="token punctuation">.</span>setPrototypeOf <span class="token operator">?</span> Object<span class="token punctuation">.</span><span class="token function">setPrototypeOf</span><span class="token punctuation">(</span>subClass<span class="token punctuation">,</span> superClass<span class="token punctuation">)</span> <span class="token operator">:</span> subClass<span class="token punctuation">.</span>__proto__ <span class="token operator">=</span> superClass<span class="token punctuation">;</span> <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="22"></td><td><pre></pre></td></tr><tr><td data-num="23"></td><td><pre><span class="token keyword">function</span> <span class="token function">_classCallCheck</span><span class="token punctuation">(</span><span class="token parameter">instance<span class="token punctuation">,</span> Constructor</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>instance <span class="token keyword">instanceof</span> <span class="token class-name">Constructor</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">TypeError</span><span class="token punctuation">(</span><span class="token string">"Cannot call a class as a function"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span> <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="24"></td><td><pre></pre></td></tr><tr><td data-num="25"></td><td><pre><span class="token comment">/*</span></pre></td></tr><tr><td data-num="26"></td><td><pre> *</pre></td></tr><tr><td data-num="27"></td><td><pre> * More info at [www.dropzonejs.com](http://www.dropzonejs.com)</pre></td></tr><tr><td data-num="28"></td><td><pre> *</pre></td></tr><tr><td data-num="29"></td><td><pre> * Copyright (c) 2012, Matias Meno</pre></td></tr><tr><td data-num="30"></td><td><pre> *</pre></td></tr><tr><td data-num="31"></td><td><pre> * Permission is hereby granted, free of charge, to any person obtaining a copy</pre></td></tr><tr><td data-num="32"></td><td><pre> * of this software and associated documentation files (the "Software"), to deal</pre></td></tr><tr><td data-num="33"></td><td><pre> * in the Software without restriction, including without limitation the rights</pre></td></tr><tr><td data-num="34"></td><td><pre> * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell</pre></td></tr><tr><td data-num="35"></td><td><pre> * copies of the Software, and to permit persons to whom the Software is</pre></td></tr><tr><td data-num="36"></td><td><pre> * furnished to do so, subject to the following conditions:</pre></td></tr><tr><td data-num="37"></td><td><pre> *</pre></td></tr><tr><td data-num="38"></td><td><pre> * The above copyright notice and this permission notice shall be included in</pre></td></tr><tr><td data-num="39"></td><td><pre> * all copies or substantial portions of the Software.</pre></td></tr><tr><td data-num="40"></td><td><pre> *</pre></td></tr><tr><td data-num="41"></td><td><pre> * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR</pre></td></tr><tr><td data-num="42"></td><td><pre> * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</pre></td></tr><tr><td data-num="43"></td><td><pre> * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE</pre></td></tr><tr><td data-num="44"></td><td><pre> * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</pre></td></tr><tr><td data-num="45"></td><td><pre> * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,</pre></td></tr><tr><td data-num="46"></td><td><pre> * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN</pre></td></tr><tr><td data-num="47"></td><td><pre> * THE SOFTWARE.</pre></td></tr><tr><td data-num="48"></td><td><pre> *</pre></td></tr><tr><td data-num="49"></td><td><pre> */</pre></td></tr><tr><td data-num="50"></td><td><pre></pre></td></tr><tr><td data-num="51"></td><td><pre><span class="token comment">// The Emitter class provides the ability to call `.on()` on Dropzone to listen</span></pre></td></tr><tr><td data-num="52"></td><td><pre><span class="token comment">// to events.</span></pre></td></tr><tr><td data-num="53"></td><td><pre><span class="token comment">// It is strongly based on component's emitter class, and I removed the</span></pre></td></tr><tr><td data-num="54"></td><td><pre><span class="token comment">// functionality because of the dependency hell with different frameworks.</span></pre></td></tr><tr><td data-num="55"></td><td><pre><span class="token keyword">var</span> <span class="token function-variable function">Emitter</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="56"></td><td><pre>  <span class="token keyword">function</span> <span class="token function">Emitter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="57"></td><td><pre>    <span class="token function">_classCallCheck</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> Emitter<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="58"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="59"></td><td><pre></pre></td></tr><tr><td data-num="60"></td><td><pre>  <span class="token function">_createClass</span><span class="token punctuation">(</span>Emitter<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="61"></td><td><pre>    key<span class="token operator">:</span> <span class="token string">"on"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="62"></td><td><pre></pre></td></tr><tr><td data-num="63"></td><td><pre>    <span class="token comment">// Add an event listener for given event</span></pre></td></tr><tr><td data-num="64"></td><td><pre>    <span class="token function-variable function">value</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">on</span><span class="token punctuation">(</span><span class="token parameter">event<span class="token punctuation">,</span> fn</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="65"></td><td><pre>      <span class="token keyword">this</span><span class="token punctuation">.</span>_callbacks <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_callbacks <span class="token operator">||</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="66"></td><td><pre>      <span class="token comment">// Create namespace for this event</span></pre></td></tr><tr><td data-num="67"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>_callbacks<span class="token punctuation">[</span>event<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="68"></td><td><pre>        <span class="token keyword">this</span><span class="token punctuation">.</span>_callbacks<span class="token punctuation">[</span>event<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="69"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="70"></td><td><pre>      <span class="token keyword">this</span><span class="token punctuation">.</span>_callbacks<span class="token punctuation">[</span>event<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="71"></td><td><pre>      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="72"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="73"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="74"></td><td><pre>    key<span class="token operator">:</span> <span class="token string">"emit"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="75"></td><td><pre>    <span class="token function-variable function">value</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">emit</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="76"></td><td><pre>      <span class="token keyword">this</span><span class="token punctuation">.</span>_callbacks <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_callbacks <span class="token operator">||</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="77"></td><td><pre>      <span class="token keyword">var</span> callbacks <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_callbacks<span class="token punctuation">[</span>event<span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="78"></td><td><pre></pre></td></tr><tr><td data-num="79"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span>callbacks<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="80"></td><td><pre>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> _len <span class="token operator">=</span> arguments<span class="token punctuation">.</span>length<span class="token punctuation">,</span> args <span class="token operator">=</span> <span class="token function">Array</span><span class="token punctuation">(</span>_len <span class="token operator">></span> <span class="token number">1</span> <span class="token operator">?</span> _len <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> _key <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> _key <span class="token operator">&lt;</span> _len<span class="token punctuation">;</span> _key<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="81"></td><td><pre>          args<span class="token punctuation">[</span>_key <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> arguments<span class="token punctuation">[</span>_key<span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="82"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="83"></td><td><pre></pre></td></tr><tr><td data-num="84"></td><td><pre>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> _iterator <span class="token operator">=</span> callbacks<span class="token punctuation">,</span> _isArray <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>_iterator<span class="token punctuation">)</span><span class="token punctuation">,</span> _i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> _iterator <span class="token operator">=</span> _isArray <span class="token operator">?</span> _iterator <span class="token operator">:</span> _iterator<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="85"></td><td><pre>          <span class="token keyword">var</span> _ref<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="86"></td><td><pre></pre></td></tr><tr><td data-num="87"></td><td><pre>          <span class="token keyword">if</span> <span class="token punctuation">(</span>_isArray<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="88"></td><td><pre>            <span class="token keyword">if</span> <span class="token punctuation">(</span>_i <span class="token operator">>=</span> _iterator<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="89"></td><td><pre>            _ref <span class="token operator">=</span> _iterator<span class="token punctuation">[</span>_i<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="90"></td><td><pre>          <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="91"></td><td><pre>            _i <span class="token operator">=</span> _iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="92"></td><td><pre>            <span class="token keyword">if</span> <span class="token punctuation">(</span>_i<span class="token punctuation">.</span>done<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="93"></td><td><pre>            _ref <span class="token operator">=</span> _i<span class="token punctuation">.</span>value<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="94"></td><td><pre>          <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="95"></td><td><pre></pre></td></tr><tr><td data-num="96"></td><td><pre>          <span class="token keyword">var</span> callback <span class="token operator">=</span> _ref<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="97"></td><td><pre></pre></td></tr><tr><td data-num="98"></td><td><pre>          <span class="token function">callback</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="99"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="100"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="101"></td><td><pre></pre></td></tr><tr><td data-num="102"></td><td><pre>      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="103"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="104"></td><td><pre></pre></td></tr><tr><td data-num="105"></td><td><pre>    <span class="token comment">// Remove event listener for given event. If fn is not provided, all event</span></pre></td></tr><tr><td data-num="106"></td><td><pre>    <span class="token comment">// listeners for that event will be removed. If neither is provided, all</span></pre></td></tr><tr><td data-num="107"></td><td><pre>    <span class="token comment">// event listeners will be removed.</span></pre></td></tr><tr><td data-num="108"></td><td><pre></pre></td></tr><tr><td data-num="109"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="110"></td><td><pre>    key<span class="token operator">:</span> <span class="token string">"off"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="111"></td><td><pre>    <span class="token function-variable function">value</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">off</span><span class="token punctuation">(</span><span class="token parameter">event<span class="token punctuation">,</span> fn</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="112"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>_callbacks <span class="token operator">||</span> arguments<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="113"></td><td><pre>        <span class="token keyword">this</span><span class="token punctuation">.</span>_callbacks <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="114"></td><td><pre>        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="115"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="116"></td><td><pre></pre></td></tr><tr><td data-num="117"></td><td><pre>      <span class="token comment">// specific event</span></pre></td></tr><tr><td data-num="118"></td><td><pre>      <span class="token keyword">var</span> callbacks <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_callbacks<span class="token punctuation">[</span>event<span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="119"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>callbacks<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="120"></td><td><pre>        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="121"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="122"></td><td><pre></pre></td></tr><tr><td data-num="123"></td><td><pre>      <span class="token comment">// remove all handlers</span></pre></td></tr><tr><td data-num="124"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span>arguments<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="125"></td><td><pre>        <span class="token keyword">delete</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_callbacks<span class="token punctuation">[</span>event<span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="126"></td><td><pre>        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="127"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="128"></td><td><pre></pre></td></tr><tr><td data-num="129"></td><td><pre>      <span class="token comment">// remove specific handler</span></pre></td></tr><tr><td data-num="130"></td><td><pre>      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> callbacks<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="131"></td><td><pre>        <span class="token keyword">var</span> callback <span class="token operator">=</span> callbacks<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="132"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span>callback <span class="token operator">===</span> fn<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="133"></td><td><pre>          callbacks<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="134"></td><td><pre>          <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="135"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="136"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="137"></td><td><pre></pre></td></tr><tr><td data-num="138"></td><td><pre>      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="139"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="140"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="141"></td><td><pre></pre></td></tr><tr><td data-num="142"></td><td><pre>  <span class="token keyword">return</span> Emitter<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="143"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="144"></td><td><pre></pre></td></tr><tr><td data-num="145"></td><td><pre><span class="token keyword">var</span> <span class="token function-variable function">Dropzone</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">_Emitter</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="146"></td><td><pre>  <span class="token function">_inherits</span><span class="token punctuation">(</span>Dropzone<span class="token punctuation">,</span> _Emitter<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="147"></td><td><pre></pre></td></tr><tr><td data-num="148"></td><td><pre>  <span class="token function">_createClass</span><span class="token punctuation">(</span>Dropzone<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="149"></td><td><pre>    key<span class="token operator">:</span> <span class="token string">"initClass"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="150"></td><td><pre>    <span class="token function-variable function">value</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">initClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="151"></td><td><pre></pre></td></tr><tr><td data-num="152"></td><td><pre>      <span class="token comment">// Exposing the emitter class, mainly for tests</span></pre></td></tr><tr><td data-num="153"></td><td><pre>      <span class="token keyword">this</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>Emitter <span class="token operator">=</span> Emitter<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="154"></td><td><pre></pre></td></tr><tr><td data-num="155"></td><td><pre>      <span class="token comment">/*</span></pre></td></tr><tr><td data-num="156"></td><td><pre>       This is a list of all available events you can register on a dropzone object.</pre></td></tr><tr><td data-num="157"></td><td><pre>        You can register an event handler like this:</pre></td></tr><tr><td data-num="158"></td><td><pre>        dropzone.on("dragEnter", function() &#123; &#125;);</pre></td></tr><tr><td data-num="159"></td><td><pre>        */</pre></td></tr><tr><td data-num="160"></td><td><pre>      <span class="token keyword">this</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>events <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"drop"</span><span class="token punctuation">,</span> <span class="token string">"dragstart"</span><span class="token punctuation">,</span> <span class="token string">"dragend"</span><span class="token punctuation">,</span> <span class="token string">"dragenter"</span><span class="token punctuation">,</span> <span class="token string">"dragover"</span><span class="token punctuation">,</span> <span class="token string">"dragleave"</span><span class="token punctuation">,</span> <span class="token string">"addedfile"</span><span class="token punctuation">,</span> <span class="token string">"addedfiles"</span><span class="token punctuation">,</span> <span class="token string">"removedfile"</span><span class="token punctuation">,</span> <span class="token string">"thumbnail"</span><span class="token punctuation">,</span> <span class="token string">"error"</span><span class="token punctuation">,</span> <span class="token string">"errormultiple"</span><span class="token punctuation">,</span> <span class="token string">"processing"</span><span class="token punctuation">,</span> <span class="token string">"processingmultiple"</span><span class="token punctuation">,</span> <span class="token string">"uploadprogress"</span><span class="token punctuation">,</span> <span class="token string">"totaluploadprogress"</span><span class="token punctuation">,</span> <span class="token string">"sending"</span><span class="token punctuation">,</span> <span class="token string">"sendingmultiple"</span><span class="token punctuation">,</span> <span class="token string">"success"</span><span class="token punctuation">,</span> <span class="token string">"successmultiple"</span><span class="token punctuation">,</span> <span class="token string">"canceled"</span><span class="token punctuation">,</span> <span class="token string">"canceledmultiple"</span><span class="token punctuation">,</span> <span class="token string">"complete"</span><span class="token punctuation">,</span> <span class="token string">"completemultiple"</span><span class="token punctuation">,</span> <span class="token string">"reset"</span><span class="token punctuation">,</span> <span class="token string">"maxfilesexceeded"</span><span class="token punctuation">,</span> <span class="token string">"maxfilesreached"</span><span class="token punctuation">,</span> <span class="token string">"queuecomplete"</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="161"></td><td><pre></pre></td></tr><tr><td data-num="162"></td><td><pre>      <span class="token keyword">this</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>defaultOptions <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="163"></td><td><pre>        <span class="token comment">/**</span></pre></td></tr><tr><td data-num="164"></td><td><pre>         * Has to be specified on elements other than form (or when the form</pre></td></tr><tr><td data-num="165"></td><td><pre>         * doesn't have an `action` attribute). You can also</pre></td></tr><tr><td data-num="166"></td><td><pre>         * provide a function that will be called with `files` and</pre></td></tr><tr><td data-num="167"></td><td><pre>         * must return the url (since `v3.12.0`)</pre></td></tr><tr><td data-num="168"></td><td><pre>         */</pre></td></tr><tr><td data-num="169"></td><td><pre>        url<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="170"></td><td><pre></pre></td></tr><tr><td data-num="171"></td><td><pre>        <span class="token comment">/**</span></pre></td></tr><tr><td data-num="172"></td><td><pre>         * Can be changed to `"put"` if necessary. You can also provide a function</pre></td></tr><tr><td data-num="173"></td><td><pre>         * that will be called with `files` and must return the method (since `v3.12.0`).</pre></td></tr><tr><td data-num="174"></td><td><pre>         */</pre></td></tr><tr><td data-num="175"></td><td><pre>        method<span class="token operator">:</span> <span class="token string">"post"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="176"></td><td><pre></pre></td></tr><tr><td data-num="177"></td><td><pre>        <span class="token comment">/**</span></pre></td></tr><tr><td data-num="178"></td><td><pre>         * Will be set on the XHRequest.</pre></td></tr><tr><td data-num="179"></td><td><pre>         */</pre></td></tr><tr><td data-num="180"></td><td><pre>        withCredentials<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="181"></td><td><pre></pre></td></tr><tr><td data-num="182"></td><td><pre>        <span class="token comment">/**</span></pre></td></tr><tr><td data-num="183"></td><td><pre>         * The timeout for the XHR requests in milliseconds (since `v4.4.0`).</pre></td></tr><tr><td data-num="184"></td><td><pre>         */</pre></td></tr><tr><td data-num="185"></td><td><pre>        timeout<span class="token operator">:</span> <span class="token number">30000</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="186"></td><td><pre></pre></td></tr><tr><td data-num="187"></td><td><pre>        <span class="token comment">/**</span></pre></td></tr><tr><td data-num="188"></td><td><pre>         * How many file uploads to process in parallel (See the</pre></td></tr><tr><td data-num="189"></td><td><pre>         * Enqueuing file uploads* documentation section for more info)</pre></td></tr><tr><td data-num="190"></td><td><pre>         */</pre></td></tr><tr><td data-num="191"></td><td><pre>        parallelUploads<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="192"></td><td><pre></pre></td></tr><tr><td data-num="193"></td><td><pre>        <span class="token comment">/**</span></pre></td></tr><tr><td data-num="194"></td><td><pre>         * Whether to send multiple files in one request. If</pre></td></tr><tr><td data-num="195"></td><td><pre>         * this it set to true, then the fallback file input element will</pre></td></tr><tr><td data-num="196"></td><td><pre>         * have the `multiple` attribute as well. This option will</pre></td></tr><tr><td data-num="197"></td><td><pre>         * also trigger additional events (like `processingmultiple`). See the events</pre></td></tr><tr><td data-num="198"></td><td><pre>         * documentation section for more information.</pre></td></tr><tr><td data-num="199"></td><td><pre>         */</pre></td></tr><tr><td data-num="200"></td><td><pre>        uploadMultiple<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="201"></td><td><pre></pre></td></tr><tr><td data-num="202"></td><td><pre>        <span class="token comment">/**</span></pre></td></tr><tr><td data-num="203"></td><td><pre>         * Whether you want files to be uploaded in chunks to your server. This can't be</pre></td></tr><tr><td data-num="204"></td><td><pre>         * used in combination with `uploadMultiple`.</pre></td></tr><tr><td data-num="205"></td><td><pre>         *</pre></td></tr><tr><td data-num="206"></td><td><pre>         * See [chunksUploaded](#config-chunksUploaded) for the callback to finalise an upload.</pre></td></tr><tr><td data-num="207"></td><td><pre>         */</pre></td></tr><tr><td data-num="208"></td><td><pre>        chunking<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="209"></td><td><pre></pre></td></tr><tr><td data-num="210"></td><td><pre>        <span class="token comment">/**</span></pre></td></tr><tr><td data-num="211"></td><td><pre>         * If `chunking` is enabled, this defines whether **every** file should be chunked,</pre></td></tr><tr><td data-num="212"></td><td><pre>         * even if the file size is below chunkSize. This means, that the additional chunk</pre></td></tr><tr><td data-num="213"></td><td><pre>         * form data will be submitted and the `chunksUploaded` callback will be invoked.</pre></td></tr><tr><td data-num="214"></td><td><pre>         */</pre></td></tr><tr><td data-num="215"></td><td><pre>        forceChunking<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="216"></td><td><pre></pre></td></tr><tr><td data-num="217"></td><td><pre>        <span class="token comment">/**</span></pre></td></tr><tr><td data-num="218"></td><td><pre>         * If `chunking` is `true`, then this defines the chunk size in bytes.</pre></td></tr><tr><td data-num="219"></td><td><pre>         */</pre></td></tr><tr><td data-num="220"></td><td><pre>        chunkSize<span class="token operator">:</span> <span class="token number">2000000</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="221"></td><td><pre></pre></td></tr><tr><td data-num="222"></td><td><pre>        <span class="token comment">/**</span></pre></td></tr><tr><td data-num="223"></td><td><pre>         * If `true`, the individual chunks of a file are being uploaded simultaneously.</pre></td></tr><tr><td data-num="224"></td><td><pre>         */</pre></td></tr><tr><td data-num="225"></td><td><pre>        parallelChunkUploads<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="226"></td><td><pre></pre></td></tr><tr><td data-num="227"></td><td><pre>        <span class="token comment">/**</span></pre></td></tr><tr><td data-num="228"></td><td><pre>         * Whether a chunk should be retried if it fails.</pre></td></tr><tr><td data-num="229"></td><td><pre>         */</pre></td></tr><tr><td data-num="230"></td><td><pre>        retryChunks<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="231"></td><td><pre></pre></td></tr><tr><td data-num="232"></td><td><pre>        <span class="token comment">/**</span></pre></td></tr><tr><td data-num="233"></td><td><pre>         * If `retryChunks` is true, how many times should it be retried.</pre></td></tr><tr><td data-num="234"></td><td><pre>         */</pre></td></tr><tr><td data-num="235"></td><td><pre>        retryChunksLimit<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="236"></td><td><pre></pre></td></tr><tr><td data-num="237"></td><td><pre>        <span class="token comment">/**</span></pre></td></tr><tr><td data-num="238"></td><td><pre>         * If not `null` defines how many files this Dropzone handles. If it exceeds,</pre></td></tr><tr><td data-num="239"></td><td><pre>         * the event `maxfilesexceeded` will be called. The dropzone element gets the</pre></td></tr><tr><td data-num="240"></td><td><pre>         * class `dz-max-files-reached` accordingly so you can provide visual feedback.</pre></td></tr><tr><td data-num="241"></td><td><pre>         */</pre></td></tr><tr><td data-num="242"></td><td><pre>        maxFilesize<span class="token operator">:</span> <span class="token number">256</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="243"></td><td><pre></pre></td></tr><tr><td data-num="244"></td><td><pre>        <span class="token comment">/**</span></pre></td></tr><tr><td data-num="245"></td><td><pre>         * The name of the file param that gets transferred.</pre></td></tr><tr><td data-num="246"></td><td><pre>         * **NOTE**: If you have the option  `uploadMultiple` set to `true`, then</pre></td></tr><tr><td data-num="247"></td><td><pre>         * Dropzone will append `[]` to the name.</pre></td></tr><tr><td data-num="248"></td><td><pre>         */</pre></td></tr><tr><td data-num="249"></td><td><pre>        paramName<span class="token operator">:</span> <span class="token string">"file"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="250"></td><td><pre></pre></td></tr><tr><td data-num="251"></td><td><pre>        <span class="token comment">/**</span></pre></td></tr><tr><td data-num="252"></td><td><pre>         * Whether thumbnails for images should be generated</pre></td></tr><tr><td data-num="253"></td><td><pre>         */</pre></td></tr><tr><td data-num="254"></td><td><pre>        createImageThumbnails<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="255"></td><td><pre></pre></td></tr><tr><td data-num="256"></td><td><pre>        <span class="token comment">/**</span></pre></td></tr><tr><td data-num="257"></td><td><pre>         * In MB. When the filename exceeds this limit, the thumbnail will not be generated.</pre></td></tr><tr><td data-num="258"></td><td><pre>         */</pre></td></tr><tr><td data-num="259"></td><td><pre>        maxThumbnailFilesize<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="260"></td><td><pre></pre></td></tr><tr><td data-num="261"></td><td><pre>        <span class="token comment">/**</span></pre></td></tr><tr><td data-num="262"></td><td><pre>         * If `null`, the ratio of the image will be used to calculate it.</pre></td></tr><tr><td data-num="263"></td><td><pre>         */</pre></td></tr><tr><td data-num="264"></td><td><pre>        thumbnailWidth<span class="token operator">:</span> <span class="token number">120</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="265"></td><td><pre></pre></td></tr><tr><td data-num="266"></td><td><pre>        <span class="token comment">/**</span></pre></td></tr><tr><td data-num="267"></td><td><pre>         * The same as `thumbnailWidth`. If both are null, images will not be resized.</pre></td></tr><tr><td data-num="268"></td><td><pre>         */</pre></td></tr><tr><td data-num="269"></td><td><pre>        thumbnailHeight<span class="token operator">:</span> <span class="token number">120</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="270"></td><td><pre></pre></td></tr><tr><td data-num="271"></td><td><pre>        <span class="token comment">/**</span></pre></td></tr><tr><td data-num="272"></td><td><pre>         * How the images should be scaled down in case both, `thumbnailWidth` and `thumbnailHeight` are provided.</pre></td></tr><tr><td data-num="273"></td><td><pre>         * Can be either `contain` or `crop`.</pre></td></tr><tr><td data-num="274"></td><td><pre>         */</pre></td></tr><tr><td data-num="275"></td><td><pre>        thumbnailMethod<span class="token operator">:</span> <span class="token string">'crop'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="276"></td><td><pre></pre></td></tr><tr><td data-num="277"></td><td><pre>        <span class="token comment">/**</span></pre></td></tr><tr><td data-num="278"></td><td><pre>         * If set, images will be resized to these dimensions before being **uploaded**.</pre></td></tr><tr><td data-num="279"></td><td><pre>         * If only one, `resizeWidth` **or** `resizeHeight` is provided, the original aspect</pre></td></tr><tr><td data-num="280"></td><td><pre>         * ratio of the file will be preserved.</pre></td></tr><tr><td data-num="281"></td><td><pre>         *</pre></td></tr><tr><td data-num="282"></td><td><pre>         * The `options.transformFile` function uses these options, so if the `transformFile` function</pre></td></tr><tr><td data-num="283"></td><td><pre>         * is overridden, these options don't do anything.</pre></td></tr><tr><td data-num="284"></td><td><pre>         */</pre></td></tr><tr><td data-num="285"></td><td><pre>        resizeWidth<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="286"></td><td><pre></pre></td></tr><tr><td data-num="287"></td><td><pre>        <span class="token comment">/**</span></pre></td></tr><tr><td data-num="288"></td><td><pre>         * See `resizeWidth`.</pre></td></tr><tr><td data-num="289"></td><td><pre>         */</pre></td></tr><tr><td data-num="290"></td><td><pre>        resizeHeight<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="291"></td><td><pre></pre></td></tr><tr><td data-num="292"></td><td><pre>        <span class="token comment">/**</span></pre></td></tr><tr><td data-num="293"></td><td><pre>         * The mime type of the resized image (before it gets uploaded to the server).</pre></td></tr><tr><td data-num="294"></td><td><pre>         * If `null` the original mime type will be used. To force jpeg, for example, use `image/jpeg`.</pre></td></tr><tr><td data-num="295"></td><td><pre>         * See `resizeWidth` for more information.</pre></td></tr><tr><td data-num="296"></td><td><pre>         */</pre></td></tr><tr><td data-num="297"></td><td><pre>        resizeMimeType<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="298"></td><td><pre></pre></td></tr><tr><td data-num="299"></td><td><pre>        <span class="token comment">/**</span></pre></td></tr><tr><td data-num="300"></td><td><pre>         * The quality of the resized images. See `resizeWidth`.</pre></td></tr><tr><td data-num="301"></td><td><pre>         */</pre></td></tr><tr><td data-num="302"></td><td><pre>        resizeQuality<span class="token operator">:</span> <span class="token number">0.8</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="303"></td><td><pre></pre></td></tr><tr><td data-num="304"></td><td><pre>        <span class="token comment">/**</span></pre></td></tr><tr><td data-num="305"></td><td><pre>         * How the images should be scaled down in case both, `resizeWidth` and `resizeHeight` are provided.</pre></td></tr><tr><td data-num="306"></td><td><pre>         * Can be either `contain` or `crop`.</pre></td></tr><tr><td data-num="307"></td><td><pre>         */</pre></td></tr><tr><td data-num="308"></td><td><pre>        resizeMethod<span class="token operator">:</span> <span class="token string">'contain'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="309"></td><td><pre></pre></td></tr><tr><td data-num="310"></td><td><pre>        <span class="token comment">/**</span></pre></td></tr><tr><td data-num="311"></td><td><pre>         * The base that is used to calculate the filesize. You can change this to</pre></td></tr><tr><td data-num="312"></td><td><pre>         * 1024 if you would rather display kibibytes, mebibytes, etc...</pre></td></tr><tr><td data-num="313"></td><td><pre>         * 1024 is technically incorrect, because `1024 bytes` are `1 kibibyte` not `1 kilobyte`.</pre></td></tr><tr><td data-num="314"></td><td><pre>         * You can change this to `1024` if you don't care about validity.</pre></td></tr><tr><td data-num="315"></td><td><pre>         */</pre></td></tr><tr><td data-num="316"></td><td><pre>        filesizeBase<span class="token operator">:</span> <span class="token number">1000</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="317"></td><td><pre></pre></td></tr><tr><td data-num="318"></td><td><pre>        <span class="token comment">/**</span></pre></td></tr><tr><td data-num="319"></td><td><pre>         * Can be used to limit the maximum number of files that will be handled by this Dropzone</pre></td></tr><tr><td data-num="320"></td><td><pre>         */</pre></td></tr><tr><td data-num="321"></td><td><pre>        maxFiles<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="322"></td><td><pre></pre></td></tr><tr><td data-num="323"></td><td><pre>        <span class="token comment">/**</span></pre></td></tr><tr><td data-num="324"></td><td><pre>         * An optional object to send additional headers to the server. Eg:</pre></td></tr><tr><td data-num="325"></td><td><pre>         * `&#123; "My-Awesome-Header": "header value" &#125;`</pre></td></tr><tr><td data-num="326"></td><td><pre>         */</pre></td></tr><tr><td data-num="327"></td><td><pre>        headers<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="328"></td><td><pre></pre></td></tr><tr><td data-num="329"></td><td><pre>        <span class="token comment">/**</span></pre></td></tr><tr><td data-num="330"></td><td><pre>         * If `true`, the dropzone element itself will be clickable, if `false`</pre></td></tr><tr><td data-num="331"></td><td><pre>         * nothing will be clickable.</pre></td></tr><tr><td data-num="332"></td><td><pre>         *</pre></td></tr><tr><td data-num="333"></td><td><pre>         * You can also pass an HTML element, a CSS selector (for multiple elements)</pre></td></tr><tr><td data-num="334"></td><td><pre>         * or an array of those. In that case, all of those elements will trigger an</pre></td></tr><tr><td data-num="335"></td><td><pre>         * upload when clicked.</pre></td></tr><tr><td data-num="336"></td><td><pre>         */</pre></td></tr><tr><td data-num="337"></td><td><pre>        clickable<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="338"></td><td><pre></pre></td></tr><tr><td data-num="339"></td><td><pre>        <span class="token comment">/**</span></pre></td></tr><tr><td data-num="340"></td><td><pre>         * Whether hidden files in directories should be ignored.</pre></td></tr><tr><td data-num="341"></td><td><pre>         */</pre></td></tr><tr><td data-num="342"></td><td><pre>        ignoreHiddenFiles<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="343"></td><td><pre></pre></td></tr><tr><td data-num="344"></td><td><pre>        <span class="token comment">/**</span></pre></td></tr><tr><td data-num="345"></td><td><pre>         * The default implementation of `accept` checks the file's mime type or</pre></td></tr><tr><td data-num="346"></td><td><pre>         * extension against this list. This is a comma separated list of mime</pre></td></tr><tr><td data-num="347"></td><td><pre>         * types or file extensions.</pre></td></tr><tr><td data-num="348"></td><td><pre>         *</pre></td></tr><tr><td data-num="349"></td><td><pre>         * Eg.: `image/*,application/pdf,.psd`</pre></td></tr><tr><td data-num="350"></td><td><pre>         *</pre></td></tr><tr><td data-num="351"></td><td><pre>         * If the Dropzone is `clickable` this option will also be used as</pre></td></tr><tr><td data-num="352"></td><td><pre>         * [`accept`](https://developer.mozilla.org/en-US/docs/HTML/Element/input#attr-accept)</pre></td></tr><tr><td data-num="353"></td><td><pre>         * parameter on the hidden file input as well.</pre></td></tr><tr><td data-num="354"></td><td><pre>         */</pre></td></tr><tr><td data-num="355"></td><td><pre>        acceptedFiles<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="356"></td><td><pre></pre></td></tr><tr><td data-num="357"></td><td><pre>        <span class="token comment">/**</span></pre></td></tr><tr><td data-num="358"></td><td><pre>         * **Deprecated!**</pre></td></tr><tr><td data-num="359"></td><td><pre>         * Use acceptedFiles instead.</pre></td></tr><tr><td data-num="360"></td><td><pre>         */</pre></td></tr><tr><td data-num="361"></td><td><pre>        acceptedMimeTypes<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="362"></td><td><pre></pre></td></tr><tr><td data-num="363"></td><td><pre>        <span class="token comment">/**</span></pre></td></tr><tr><td data-num="364"></td><td><pre>         * If false, files will be added to the queue but the queue will not be</pre></td></tr><tr><td data-num="365"></td><td><pre>         * processed automatically.</pre></td></tr><tr><td data-num="366"></td><td><pre>         * This can be useful if you need some additional user input before sending</pre></td></tr><tr><td data-num="367"></td><td><pre>         * files (or if you want want all files sent at once).</pre></td></tr><tr><td data-num="368"></td><td><pre>         * If you're ready to send the file simply call `myDropzone.processQueue()`.</pre></td></tr><tr><td data-num="369"></td><td><pre>         *</pre></td></tr><tr><td data-num="370"></td><td><pre>         * See the [enqueuing file uploads](#enqueuing-file-uploads) documentation</pre></td></tr><tr><td data-num="371"></td><td><pre>         * section for more information.</pre></td></tr><tr><td data-num="372"></td><td><pre>         */</pre></td></tr><tr><td data-num="373"></td><td><pre>        autoProcessQueue<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="374"></td><td><pre></pre></td></tr><tr><td data-num="375"></td><td><pre>        <span class="token comment">/**</span></pre></td></tr><tr><td data-num="376"></td><td><pre>         * If false, files added to the dropzone will not be queued by default.</pre></td></tr><tr><td data-num="377"></td><td><pre>         * You'll have to call `enqueueFile(file)` manually.</pre></td></tr><tr><td data-num="378"></td><td><pre>         */</pre></td></tr><tr><td data-num="379"></td><td><pre>        autoQueue<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="380"></td><td><pre></pre></td></tr><tr><td data-num="381"></td><td><pre>        <span class="token comment">/**</span></pre></td></tr><tr><td data-num="382"></td><td><pre>         * If `true`, this will add a link to every file preview to remove or cancel (if</pre></td></tr><tr><td data-num="383"></td><td><pre>         * already uploading) the file. The `dictCancelUpload`, `dictCancelUploadConfirmation`</pre></td></tr><tr><td data-num="384"></td><td><pre>         * and `dictRemoveFile` options are used for the wording.</pre></td></tr><tr><td data-num="385"></td><td><pre>         */</pre></td></tr><tr><td data-num="386"></td><td><pre>        addRemoveLinks<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="387"></td><td><pre></pre></td></tr><tr><td data-num="388"></td><td><pre>        <span class="token comment">/**</span></pre></td></tr><tr><td data-num="389"></td><td><pre>         * Defines where to display the file previews – if `null` the</pre></td></tr><tr><td data-num="390"></td><td><pre>         * Dropzone element itself is used. Can be a plain `HTMLElement` or a CSS</pre></td></tr><tr><td data-num="391"></td><td><pre>         * selector. The element should have the `dropzone-previews` class so</pre></td></tr><tr><td data-num="392"></td><td><pre>         * the previews are displayed properly.</pre></td></tr><tr><td data-num="393"></td><td><pre>         */</pre></td></tr><tr><td data-num="394"></td><td><pre>        previewsContainer<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="395"></td><td><pre></pre></td></tr><tr><td data-num="396"></td><td><pre>        <span class="token comment">/**</span></pre></td></tr><tr><td data-num="397"></td><td><pre>         * This is the element the hidden input field (which is used when clicking on the</pre></td></tr><tr><td data-num="398"></td><td><pre>         * dropzone to trigger file selection) will be appended to. This might</pre></td></tr><tr><td data-num="399"></td><td><pre>         * be important in case you use frameworks to switch the content of your page.</pre></td></tr><tr><td data-num="400"></td><td><pre>         *</pre></td></tr><tr><td data-num="401"></td><td><pre>         * Can be a selector string, or an element directly.</pre></td></tr><tr><td data-num="402"></td><td><pre>         */</pre></td></tr><tr><td data-num="403"></td><td><pre>        hiddenInputContainer<span class="token operator">:</span> <span class="token string">"body"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="404"></td><td><pre></pre></td></tr><tr><td data-num="405"></td><td><pre>        <span class="token comment">/**</span></pre></td></tr><tr><td data-num="406"></td><td><pre>         * If null, no capture type will be specified</pre></td></tr><tr><td data-num="407"></td><td><pre>         * If camera, mobile devices will skip the file selection and choose camera</pre></td></tr><tr><td data-num="408"></td><td><pre>         * If microphone, mobile devices will skip the file selection and choose the microphone</pre></td></tr><tr><td data-num="409"></td><td><pre>         * If camcorder, mobile devices will skip the file selection and choose the camera in video mode</pre></td></tr><tr><td data-num="410"></td><td><pre>         * On apple devices multiple must be set to false.  AcceptedFiles may need to</pre></td></tr><tr><td data-num="411"></td><td><pre>         * be set to an appropriate mime type (e.g. "image/*", "audio/*", or "video/*").</pre></td></tr><tr><td data-num="412"></td><td><pre>         */</pre></td></tr><tr><td data-num="413"></td><td><pre>        capture<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="414"></td><td><pre></pre></td></tr><tr><td data-num="415"></td><td><pre>        <span class="token comment">/**</span></pre></td></tr><tr><td data-num="416"></td><td><pre>         * **Deprecated**. Use `renameFile` instead.</pre></td></tr><tr><td data-num="417"></td><td><pre>         */</pre></td></tr><tr><td data-num="418"></td><td><pre>        renameFilename<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="419"></td><td><pre></pre></td></tr><tr><td data-num="420"></td><td><pre>        <span class="token comment">/**</span></pre></td></tr><tr><td data-num="421"></td><td><pre>         * A function that is invoked before the file is uploaded to the server and renames the file.</pre></td></tr><tr><td data-num="422"></td><td><pre>         * This function gets the `File` as argument and can use the `file.name`. The actual name of the</pre></td></tr><tr><td data-num="423"></td><td><pre>         * file that gets used during the upload can be accessed through `file.upload.filename`.</pre></td></tr><tr><td data-num="424"></td><td><pre>         */</pre></td></tr><tr><td data-num="425"></td><td><pre>        renameFile<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="426"></td><td><pre></pre></td></tr><tr><td data-num="427"></td><td><pre>        <span class="token comment">/**</span></pre></td></tr><tr><td data-num="428"></td><td><pre>         * If `true` the fallback will be forced. This is very useful to test your server</pre></td></tr><tr><td data-num="429"></td><td><pre>         * implementations first and make sure that everything works as</pre></td></tr><tr><td data-num="430"></td><td><pre>         * expected without dropzone if you experience problems, and to test</pre></td></tr><tr><td data-num="431"></td><td><pre>         * how your fallbacks will look.</pre></td></tr><tr><td data-num="432"></td><td><pre>         */</pre></td></tr><tr><td data-num="433"></td><td><pre>        forceFallback<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="434"></td><td><pre></pre></td></tr><tr><td data-num="435"></td><td><pre>        <span class="token comment">/**</span></pre></td></tr><tr><td data-num="436"></td><td><pre>         * The text used before any files are dropped.</pre></td></tr><tr><td data-num="437"></td><td><pre>         */</pre></td></tr><tr><td data-num="438"></td><td><pre>        dictDefaultMessage<span class="token operator">:</span> <span class="token string">"Drop files here to upload"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="439"></td><td><pre></pre></td></tr><tr><td data-num="440"></td><td><pre>        <span class="token comment">/**</span></pre></td></tr><tr><td data-num="441"></td><td><pre>         * The text that replaces the default message text it the browser is not supported.</pre></td></tr><tr><td data-num="442"></td><td><pre>         */</pre></td></tr><tr><td data-num="443"></td><td><pre>        dictFallbackMessage<span class="token operator">:</span> <span class="token string">"Your browser does not support drag'n'drop file uploads."</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="444"></td><td><pre></pre></td></tr><tr><td data-num="445"></td><td><pre>        <span class="token comment">/**</span></pre></td></tr><tr><td data-num="446"></td><td><pre>         * The text that will be added before the fallback form.</pre></td></tr><tr><td data-num="447"></td><td><pre>         * If you provide a  fallback element yourself, or if this option is `null` this will</pre></td></tr><tr><td data-num="448"></td><td><pre>         * be ignored.</pre></td></tr><tr><td data-num="449"></td><td><pre>         */</pre></td></tr><tr><td data-num="450"></td><td><pre>        dictFallbackText<span class="token operator">:</span> <span class="token string">"Please use the fallback form below to upload your files like in the olden days."</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="451"></td><td><pre></pre></td></tr><tr><td data-num="452"></td><td><pre>        <span class="token comment">/**</span></pre></td></tr><tr><td data-num="453"></td><td><pre>         * If the filesize is too big.</pre></td></tr><tr><td data-num="454"></td><td><pre>         * `` and `` will be replaced with the respective configuration values.</pre></td></tr><tr><td data-num="455"></td><td><pre>         */</pre></td></tr><tr><td data-num="456"></td><td><pre>        dictFileTooBig<span class="token operator">:</span> <span class="token string">"File is too big (MiB). Max filesize: MiB."</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="457"></td><td><pre></pre></td></tr><tr><td data-num="458"></td><td><pre>        <span class="token comment">/**</span></pre></td></tr><tr><td data-num="459"></td><td><pre>         * If the file doesn't match the file type.</pre></td></tr><tr><td data-num="460"></td><td><pre>         */</pre></td></tr><tr><td data-num="461"></td><td><pre>        dictInvalidFileType<span class="token operator">:</span> <span class="token string">"You can't upload files of this type."</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="462"></td><td><pre></pre></td></tr><tr><td data-num="463"></td><td><pre>        <span class="token comment">/**</span></pre></td></tr><tr><td data-num="464"></td><td><pre>         * If the server response was invalid.</pre></td></tr><tr><td data-num="465"></td><td><pre>         * `` will be replaced with the servers status code.</pre></td></tr><tr><td data-num="466"></td><td><pre>         */</pre></td></tr><tr><td data-num="467"></td><td><pre>        dictResponseError<span class="token operator">:</span> <span class="token string">"Server responded with  code."</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="468"></td><td><pre></pre></td></tr><tr><td data-num="469"></td><td><pre>        <span class="token comment">/**</span></pre></td></tr><tr><td data-num="470"></td><td><pre>         * If `addRemoveLinks` is true, the text to be used for the cancel upload link.</pre></td></tr><tr><td data-num="471"></td><td><pre>         */</pre></td></tr><tr><td data-num="472"></td><td><pre>        dictCancelUpload<span class="token operator">:</span> <span class="token string">"Cancel upload"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="473"></td><td><pre></pre></td></tr><tr><td data-num="474"></td><td><pre>        <span class="token comment">/**</span></pre></td></tr><tr><td data-num="475"></td><td><pre>         * The text that is displayed if an upload was manually canceled</pre></td></tr><tr><td data-num="476"></td><td><pre>         */</pre></td></tr><tr><td data-num="477"></td><td><pre>        dictUploadCanceled<span class="token operator">:</span> <span class="token string">"Upload canceled."</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="478"></td><td><pre></pre></td></tr><tr><td data-num="479"></td><td><pre>        <span class="token comment">/**</span></pre></td></tr><tr><td data-num="480"></td><td><pre>         * If `addRemoveLinks` is true, the text to be used for confirmation when cancelling upload.</pre></td></tr><tr><td data-num="481"></td><td><pre>         */</pre></td></tr><tr><td data-num="482"></td><td><pre>        dictCancelUploadConfirmation<span class="token operator">:</span> <span class="token string">"Are you sure you want to cancel this upload?"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="483"></td><td><pre></pre></td></tr><tr><td data-num="484"></td><td><pre>        <span class="token comment">/**</span></pre></td></tr><tr><td data-num="485"></td><td><pre>         * If `addRemoveLinks` is true, the text to be used to remove a file.</pre></td></tr><tr><td data-num="486"></td><td><pre>         */</pre></td></tr><tr><td data-num="487"></td><td><pre>        dictRemoveFile<span class="token operator">:</span> <span class="token string">"Remove file"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="488"></td><td><pre></pre></td></tr><tr><td data-num="489"></td><td><pre>        <span class="token comment">/**</span></pre></td></tr><tr><td data-num="490"></td><td><pre>         * If this is not null, then the user will be prompted before removing a file.</pre></td></tr><tr><td data-num="491"></td><td><pre>         */</pre></td></tr><tr><td data-num="492"></td><td><pre>        dictRemoveFileConfirmation<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="493"></td><td><pre></pre></td></tr><tr><td data-num="494"></td><td><pre>        <span class="token comment">/**</span></pre></td></tr><tr><td data-num="495"></td><td><pre>         * Displayed if `maxFiles` is st and exceeded.</pre></td></tr><tr><td data-num="496"></td><td><pre>         * The string `` will be replaced by the configuration value.</pre></td></tr><tr><td data-num="497"></td><td><pre>         */</pre></td></tr><tr><td data-num="498"></td><td><pre>        dictMaxFilesExceeded<span class="token operator">:</span> <span class="token string">"You can not upload any more files."</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="499"></td><td><pre></pre></td></tr><tr><td data-num="500"></td><td><pre>        <span class="token comment">/**</span></pre></td></tr><tr><td data-num="501"></td><td><pre>         * Allows you to translate the different units. Starting with `tb` for terabytes and going down to</pre></td></tr><tr><td data-num="502"></td><td><pre>         * `b` for bytes.</pre></td></tr><tr><td data-num="503"></td><td><pre>         */</pre></td></tr><tr><td data-num="504"></td><td><pre>        dictFileSizeUnits<span class="token operator">:</span> <span class="token punctuation">&#123;</span> tb<span class="token operator">:</span> <span class="token string">"TB"</span><span class="token punctuation">,</span> gb<span class="token operator">:</span> <span class="token string">"GB"</span><span class="token punctuation">,</span> mb<span class="token operator">:</span> <span class="token string">"MB"</span><span class="token punctuation">,</span> kb<span class="token operator">:</span> <span class="token string">"KB"</span><span class="token punctuation">,</span> b<span class="token operator">:</span> <span class="token string">"b"</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="505"></td><td><pre>        <span class="token comment">/**</span></pre></td></tr><tr><td data-num="506"></td><td><pre>         * Called when dropzone initialized</pre></td></tr><tr><td data-num="507"></td><td><pre>         * You can add event listeners here</pre></td></tr><tr><td data-num="508"></td><td><pre>         */</pre></td></tr><tr><td data-num="509"></td><td><pre>        <span class="token function-variable function">init</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="510"></td><td><pre></pre></td></tr><tr><td data-num="511"></td><td><pre></pre></td></tr><tr><td data-num="512"></td><td><pre>        <span class="token comment">/**</span></pre></td></tr><tr><td data-num="513"></td><td><pre>         * Can be an **object** of additional parameters to transfer to the server, **or** a `Function`</pre></td></tr><tr><td data-num="514"></td><td><pre>         * that gets invoked with the `files`, `xhr` and, if it's a chunked upload, `chunk` arguments. In case</pre></td></tr><tr><td data-num="515"></td><td><pre>         * of a function, this needs to return a map.</pre></td></tr><tr><td data-num="516"></td><td><pre>         *</pre></td></tr><tr><td data-num="517"></td><td><pre>         * The default implementation does nothing for normal uploads, but adds relevant information for</pre></td></tr><tr><td data-num="518"></td><td><pre>         * chunked uploads.</pre></td></tr><tr><td data-num="519"></td><td><pre>         *</pre></td></tr><tr><td data-num="520"></td><td><pre>         * This is the same as adding hidden input fields in the form element.</pre></td></tr><tr><td data-num="521"></td><td><pre>         */</pre></td></tr><tr><td data-num="522"></td><td><pre>        <span class="token function-variable function">params</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">params</span><span class="token punctuation">(</span><span class="token parameter">files<span class="token punctuation">,</span> xhr<span class="token punctuation">,</span> chunk</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="523"></td><td><pre>          <span class="token keyword">if</span> <span class="token punctuation">(</span>chunk<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="524"></td><td><pre>            <span class="token keyword">return</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="525"></td><td><pre>              dzuuid<span class="token operator">:</span> chunk<span class="token punctuation">.</span>file<span class="token punctuation">.</span>upload<span class="token punctuation">.</span>uuid<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="526"></td><td><pre>              dzchunkindex<span class="token operator">:</span> chunk<span class="token punctuation">.</span>index<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="527"></td><td><pre>              dztotalfilesize<span class="token operator">:</span> chunk<span class="token punctuation">.</span>file<span class="token punctuation">.</span>size<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="528"></td><td><pre>              dzchunksize<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>chunkSize<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="529"></td><td><pre>              dztotalchunkcount<span class="token operator">:</span> chunk<span class="token punctuation">.</span>file<span class="token punctuation">.</span>upload<span class="token punctuation">.</span>totalChunkCount<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="530"></td><td><pre>              dzchunkbyteoffset<span class="token operator">:</span> chunk<span class="token punctuation">.</span>index <span class="token operator">*</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>chunkSize</pre></td></tr><tr><td data-num="531"></td><td><pre>            <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="532"></td><td><pre>          <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="533"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="534"></td><td><pre></pre></td></tr><tr><td data-num="535"></td><td><pre></pre></td></tr><tr><td data-num="536"></td><td><pre>        <span class="token comment">/**</span></pre></td></tr><tr><td data-num="537"></td><td><pre>         * A function that gets a [file](https://developer.mozilla.org/en-US/docs/DOM/File)</pre></td></tr><tr><td data-num="538"></td><td><pre>         * and a `done` function as parameters.</pre></td></tr><tr><td data-num="539"></td><td><pre>         *</pre></td></tr><tr><td data-num="540"></td><td><pre>         * If the done function is invoked without arguments, the file is "accepted" and will</pre></td></tr><tr><td data-num="541"></td><td><pre>         * be processed. If you pass an error message, the file is rejected, and the error</pre></td></tr><tr><td data-num="542"></td><td><pre>         * message will be displayed.</pre></td></tr><tr><td data-num="543"></td><td><pre>         * This function will not be called if the file is too big or doesn't match the mime types.</pre></td></tr><tr><td data-num="544"></td><td><pre>         */</pre></td></tr><tr><td data-num="545"></td><td><pre>        <span class="token function-variable function">accept</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">accept</span><span class="token punctuation">(</span><span class="token parameter">file<span class="token punctuation">,</span> done</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="546"></td><td><pre>          <span class="token keyword">return</span> <span class="token function">done</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="547"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="548"></td><td><pre></pre></td></tr><tr><td data-num="549"></td><td><pre></pre></td></tr><tr><td data-num="550"></td><td><pre>        <span class="token comment">/**</span></pre></td></tr><tr><td data-num="551"></td><td><pre>         * The callback that will be invoked when all chunks have been uploaded for a file.</pre></td></tr><tr><td data-num="552"></td><td><pre>         * It gets the file for which the chunks have been uploaded as the first parameter,</pre></td></tr><tr><td data-num="553"></td><td><pre>         * and the `done` function as second. `done()` needs to be invoked when everything</pre></td></tr><tr><td data-num="554"></td><td><pre>         * needed to finish the upload process is done.</pre></td></tr><tr><td data-num="555"></td><td><pre>         */</pre></td></tr><tr><td data-num="556"></td><td><pre>        <span class="token function-variable function">chunksUploaded</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">chunksUploaded</span><span class="token punctuation">(</span><span class="token parameter">file<span class="token punctuation">,</span> done</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="557"></td><td><pre>          <span class="token function">done</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="558"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="559"></td><td><pre></pre></td></tr><tr><td data-num="560"></td><td><pre>        <span class="token comment">/**</span></pre></td></tr><tr><td data-num="561"></td><td><pre>         * Gets called when the browser is not supported.</pre></td></tr><tr><td data-num="562"></td><td><pre>         * The default implementation shows the fallback input field and adds</pre></td></tr><tr><td data-num="563"></td><td><pre>         * a text.</pre></td></tr><tr><td data-num="564"></td><td><pre>         */</pre></td></tr><tr><td data-num="565"></td><td><pre>        <span class="token function-variable function">fallback</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">fallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="566"></td><td><pre>          <span class="token comment">// This code should pass in IE7... :(</span></pre></td></tr><tr><td data-num="567"></td><td><pre>          <span class="token keyword">var</span> messageElement <span class="token operator">=</span> <span class="token keyword">void</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="568"></td><td><pre>          <span class="token keyword">this</span><span class="token punctuation">.</span>element<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>element<span class="token punctuation">.</span>className <span class="token operator">+</span> <span class="token string">" dz-browser-not-supported"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="569"></td><td><pre></pre></td></tr><tr><td data-num="570"></td><td><pre>          <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> _iterator2 <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>element<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">"div"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> _isArray2 <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>_iterator2<span class="token punctuation">)</span><span class="token punctuation">,</span> _i2 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> _iterator2 <span class="token operator">=</span> _isArray2 <span class="token operator">?</span> _iterator2 <span class="token operator">:</span> _iterator2<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="571"></td><td><pre>            <span class="token keyword">var</span> _ref2<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="572"></td><td><pre></pre></td></tr><tr><td data-num="573"></td><td><pre>            <span class="token keyword">if</span> <span class="token punctuation">(</span>_isArray2<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="574"></td><td><pre>              <span class="token keyword">if</span> <span class="token punctuation">(</span>_i2 <span class="token operator">>=</span> _iterator2<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="575"></td><td><pre>              _ref2 <span class="token operator">=</span> _iterator2<span class="token punctuation">[</span>_i2<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="576"></td><td><pre>            <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="577"></td><td><pre>              _i2 <span class="token operator">=</span> _iterator2<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="578"></td><td><pre>              <span class="token keyword">if</span> <span class="token punctuation">(</span>_i2<span class="token punctuation">.</span>done<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="579"></td><td><pre>              _ref2 <span class="token operator">=</span> _i2<span class="token punctuation">.</span>value<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="580"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="581"></td><td><pre></pre></td></tr><tr><td data-num="582"></td><td><pre>            <span class="token keyword">var</span> child <span class="token operator">=</span> _ref2<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="583"></td><td><pre></pre></td></tr><tr><td data-num="584"></td><td><pre>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(^| )dz-message($| )</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>child<span class="token punctuation">.</span>className<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="585"></td><td><pre>              messageElement <span class="token operator">=</span> child<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="586"></td><td><pre>              child<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">"dz-message"</span><span class="token punctuation">;</span> <span class="token comment">// Removes the 'dz-default' class</span></pre></td></tr><tr><td data-num="587"></td><td><pre>              <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="588"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="589"></td><td><pre>          <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="590"></td><td><pre>          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>messageElement<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="591"></td><td><pre>            messageElement <span class="token operator">=</span> Dropzone<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"&lt;div class=\"dz-message\">&lt;span>&lt;/span>&lt;/div>"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="592"></td><td><pre>            <span class="token keyword">this</span><span class="token punctuation">.</span>element<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>messageElement<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="593"></td><td><pre>          <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="594"></td><td><pre></pre></td></tr><tr><td data-num="595"></td><td><pre>          <span class="token keyword">var</span> span <span class="token operator">=</span> messageElement<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">"span"</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="596"></td><td><pre>          <span class="token keyword">if</span> <span class="token punctuation">(</span>span<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="597"></td><td><pre>            <span class="token keyword">if</span> <span class="token punctuation">(</span>span<span class="token punctuation">.</span>textContent <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="598"></td><td><pre>              span<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>dictFallbackMessage<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="599"></td><td><pre>            <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>span<span class="token punctuation">.</span>innerText <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="600"></td><td><pre>              span<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>dictFallbackMessage<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="601"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="602"></td><td><pre>          <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="603"></td><td><pre></pre></td></tr><tr><td data-num="604"></td><td><pre>          <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>element<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getFallbackForm</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="605"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="606"></td><td><pre></pre></td></tr><tr><td data-num="607"></td><td><pre></pre></td></tr><tr><td data-num="608"></td><td><pre>        <span class="token comment">/**</span></pre></td></tr><tr><td data-num="609"></td><td><pre>         * Gets called to calculate the thumbnail dimensions.</pre></td></tr><tr><td data-num="610"></td><td><pre>         *</pre></td></tr><tr><td data-num="611"></td><td><pre>         * It gets `file`, `width` and `height` (both may be `null`) as parameters and must return an object containing:</pre></td></tr><tr><td data-num="612"></td><td><pre>         *</pre></td></tr><tr><td data-num="613"></td><td><pre>         *  - `srcWidth` &amp; `srcHeight` (required)</pre></td></tr><tr><td data-num="614"></td><td><pre>         *  - `trgWidth` &amp; `trgHeight` (required)</pre></td></tr><tr><td data-num="615"></td><td><pre>         *  - `srcX` &amp; `srcY` (optional, default `0`)</pre></td></tr><tr><td data-num="616"></td><td><pre>         *  - `trgX` &amp; `trgY` (optional, default `0`)</pre></td></tr><tr><td data-num="617"></td><td><pre>         *</pre></td></tr><tr><td data-num="618"></td><td><pre>         * Those values are going to be used by `ctx.drawImage()`.</pre></td></tr><tr><td data-num="619"></td><td><pre>         */</pre></td></tr><tr><td data-num="620"></td><td><pre>        <span class="token function-variable function">resize</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">resize</span><span class="token punctuation">(</span><span class="token parameter">file<span class="token punctuation">,</span> width<span class="token punctuation">,</span> height<span class="token punctuation">,</span> resizeMethod</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="621"></td><td><pre>          <span class="token keyword">var</span> info <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="622"></td><td><pre>            srcX<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="623"></td><td><pre>            srcY<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="624"></td><td><pre>            srcWidth<span class="token operator">:</span> file<span class="token punctuation">.</span>width<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="625"></td><td><pre>            srcHeight<span class="token operator">:</span> file<span class="token punctuation">.</span>height</pre></td></tr><tr><td data-num="626"></td><td><pre>          <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="627"></td><td><pre></pre></td></tr><tr><td data-num="628"></td><td><pre>          <span class="token keyword">var</span> srcRatio <span class="token operator">=</span> file<span class="token punctuation">.</span>width <span class="token operator">/</span> file<span class="token punctuation">.</span>height<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="629"></td><td><pre></pre></td></tr><tr><td data-num="630"></td><td><pre>          <span class="token comment">// Automatically calculate dimensions if not specified</span></pre></td></tr><tr><td data-num="631"></td><td><pre>          <span class="token keyword">if</span> <span class="token punctuation">(</span>width <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> height <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="632"></td><td><pre>            width <span class="token operator">=</span> info<span class="token punctuation">.</span>srcWidth<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="633"></td><td><pre>            height <span class="token operator">=</span> info<span class="token punctuation">.</span>srcHeight<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="634"></td><td><pre>          <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>width <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="635"></td><td><pre>            width <span class="token operator">=</span> height <span class="token operator">*</span> srcRatio<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="636"></td><td><pre>          <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>height <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="637"></td><td><pre>            height <span class="token operator">=</span> width <span class="token operator">/</span> srcRatio<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="638"></td><td><pre>          <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="639"></td><td><pre></pre></td></tr><tr><td data-num="640"></td><td><pre>          <span class="token comment">// Make sure images aren't upscaled</span></pre></td></tr><tr><td data-num="641"></td><td><pre>          width <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>width<span class="token punctuation">,</span> info<span class="token punctuation">.</span>srcWidth<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="642"></td><td><pre>          height <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>height<span class="token punctuation">,</span> info<span class="token punctuation">.</span>srcHeight<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="643"></td><td><pre></pre></td></tr><tr><td data-num="644"></td><td><pre>          <span class="token keyword">var</span> trgRatio <span class="token operator">=</span> width <span class="token operator">/</span> height<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="645"></td><td><pre></pre></td></tr><tr><td data-num="646"></td><td><pre>          <span class="token keyword">if</span> <span class="token punctuation">(</span>info<span class="token punctuation">.</span>srcWidth <span class="token operator">></span> width <span class="token operator">||</span> info<span class="token punctuation">.</span>srcHeight <span class="token operator">></span> height<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="647"></td><td><pre>            <span class="token comment">// Image is bigger and needs rescaling</span></pre></td></tr><tr><td data-num="648"></td><td><pre>            <span class="token keyword">if</span> <span class="token punctuation">(</span>resizeMethod <span class="token operator">===</span> <span class="token string">'crop'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="649"></td><td><pre>              <span class="token keyword">if</span> <span class="token punctuation">(</span>srcRatio <span class="token operator">></span> trgRatio<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="650"></td><td><pre>                info<span class="token punctuation">.</span>srcHeight <span class="token operator">=</span> file<span class="token punctuation">.</span>height<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="651"></td><td><pre>                info<span class="token punctuation">.</span>srcWidth <span class="token operator">=</span> info<span class="token punctuation">.</span>srcHeight <span class="token operator">*</span> trgRatio<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="652"></td><td><pre>              <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="653"></td><td><pre>                info<span class="token punctuation">.</span>srcWidth <span class="token operator">=</span> file<span class="token punctuation">.</span>width<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="654"></td><td><pre>                info<span class="token punctuation">.</span>srcHeight <span class="token operator">=</span> info<span class="token punctuation">.</span>srcWidth <span class="token operator">/</span> trgRatio<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="655"></td><td><pre>              <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="656"></td><td><pre>            <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>resizeMethod <span class="token operator">===</span> <span class="token string">'contain'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="657"></td><td><pre>              <span class="token comment">// Method 'contain'</span></pre></td></tr><tr><td data-num="658"></td><td><pre>              <span class="token keyword">if</span> <span class="token punctuation">(</span>srcRatio <span class="token operator">></span> trgRatio<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="659"></td><td><pre>                height <span class="token operator">=</span> width <span class="token operator">/</span> srcRatio<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="660"></td><td><pre>              <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="661"></td><td><pre>                width <span class="token operator">=</span> height <span class="token operator">*</span> srcRatio<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="662"></td><td><pre>              <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="663"></td><td><pre>            <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="664"></td><td><pre>              <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">"Unknown resizeMethod '"</span> <span class="token operator">+</span> resizeMethod <span class="token operator">+</span> <span class="token string">"'"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="665"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="666"></td><td><pre>          <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="667"></td><td><pre></pre></td></tr><tr><td data-num="668"></td><td><pre>          info<span class="token punctuation">.</span>srcX <span class="token operator">=</span> <span class="token punctuation">(</span>file<span class="token punctuation">.</span>width <span class="token operator">-</span> info<span class="token punctuation">.</span>srcWidth<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="669"></td><td><pre>          info<span class="token punctuation">.</span>srcY <span class="token operator">=</span> <span class="token punctuation">(</span>file<span class="token punctuation">.</span>height <span class="token operator">-</span> info<span class="token punctuation">.</span>srcHeight<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="670"></td><td><pre></pre></td></tr><tr><td data-num="671"></td><td><pre>          info<span class="token punctuation">.</span>trgWidth <span class="token operator">=</span> width<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="672"></td><td><pre>          info<span class="token punctuation">.</span>trgHeight <span class="token operator">=</span> height<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="673"></td><td><pre></pre></td></tr><tr><td data-num="674"></td><td><pre>          <span class="token keyword">return</span> info<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="675"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="676"></td><td><pre></pre></td></tr><tr><td data-num="677"></td><td><pre></pre></td></tr><tr><td data-num="678"></td><td><pre>        <span class="token comment">/**</span></pre></td></tr><tr><td data-num="679"></td><td><pre>         * Can be used to transform the file (for example, resize an image if necessary).</pre></td></tr><tr><td data-num="680"></td><td><pre>         *</pre></td></tr><tr><td data-num="681"></td><td><pre>         * The default implementation uses `resizeWidth` and `resizeHeight` (if provided) and resizes</pre></td></tr><tr><td data-num="682"></td><td><pre>         * images according to those dimensions.</pre></td></tr><tr><td data-num="683"></td><td><pre>         *</pre></td></tr><tr><td data-num="684"></td><td><pre>         * Gets the `file` as the first parameter, and a `done()` function as the second, that needs</pre></td></tr><tr><td data-num="685"></td><td><pre>         * to be invoked with the file when the transformation is done.</pre></td></tr><tr><td data-num="686"></td><td><pre>         */</pre></td></tr><tr><td data-num="687"></td><td><pre>        <span class="token function-variable function">transformFile</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">transformFile</span><span class="token punctuation">(</span><span class="token parameter">file<span class="token punctuation">,</span> done</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="688"></td><td><pre>          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>resizeWidth <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>resizeHeight<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> file<span class="token punctuation">.</span>type<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">image.*</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="689"></td><td><pre>            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">resizeImage</span><span class="token punctuation">(</span>file<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>resizeWidth<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>resizeHeight<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>resizeMethod<span class="token punctuation">,</span> done<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="690"></td><td><pre>          <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="691"></td><td><pre>            <span class="token keyword">return</span> <span class="token function">done</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="692"></td><td><pre>          <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="693"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="694"></td><td><pre></pre></td></tr><tr><td data-num="695"></td><td><pre></pre></td></tr><tr><td data-num="696"></td><td><pre>        <span class="token comment">/**</span></pre></td></tr><tr><td data-num="697"></td><td><pre>         * A string that contains the template used for each dropped</pre></td></tr><tr><td data-num="698"></td><td><pre>         * file. Change it to fulfill your needs but make sure to properly</pre></td></tr><tr><td data-num="699"></td><td><pre>         * provide all elements.</pre></td></tr><tr><td data-num="700"></td><td><pre>         *</pre></td></tr><tr><td data-num="701"></td><td><pre>         * If you want to use an actual HTML element instead of providing a String</pre></td></tr><tr><td data-num="702"></td><td><pre>         * as a config option, you could create a div with the id `tpl`,</pre></td></tr><tr><td data-num="703"></td><td><pre>         * put the template inside it and provide the element like this:</pre></td></tr><tr><td data-num="704"></td><td><pre>         *</pre></td></tr><tr><td data-num="705"></td><td><pre>         *     document</pre></td></tr><tr><td data-num="706"></td><td><pre>         *       .querySelector('#tpl')</pre></td></tr><tr><td data-num="707"></td><td><pre>         *       .innerHTML</pre></td></tr><tr><td data-num="708"></td><td><pre>         *</pre></td></tr><tr><td data-num="709"></td><td><pre>         */</pre></td></tr><tr><td data-num="710"></td><td><pre>        previewTemplate<span class="token operator">:</span> <span class="token string">"&lt;div class=\"dz-preview dz-file-preview\">\n  &lt;div class=\"dz-image\">&lt;img data-dz-thumbnail />&lt;/div>\n  &lt;div class=\"dz-details\">\n    &lt;div class=\"dz-size\">&lt;span data-dz-size>&lt;/span>&lt;/div>\n    &lt;div class=\"dz-filename\">&lt;span data-dz-name>&lt;/span>&lt;/div>\n  &lt;/div>\n  &lt;div class=\"dz-progress\">&lt;span class=\"dz-upload\" data-dz-uploadprogress>&lt;/span>&lt;/div>\n  &lt;div class=\"dz-error-message\">&lt;span data-dz-errormessage>&lt;/span>&lt;/div>\n  &lt;div class=\"dz-success-mark\">\n    &lt;svg width=\"54px\" height=\"54px\" viewBox=\"0 0 54 54\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xmlns:sketch=\"http://www.bohemiancoding.com/sketch/ns\">\n      &lt;title>Check&lt;/title>\n      &lt;defs>&lt;/defs>\n      &lt;g id=\"Page-1\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\" sketch:type=\"MSPage\">\n        &lt;path d=\"M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z\" id=\"Oval-2\" stroke-opacity=\"0.198794158\" stroke=\"#747474\" fill-opacity=\"0.816519475\" fill=\"#FFFFFF\" sketch:type=\"MSShapeGroup\">&lt;/path>\n      &lt;/g>\n    &lt;/svg>\n  &lt;/div>\n  &lt;div class=\"dz-error-mark\">\n    &lt;svg width=\"54px\" height=\"54px\" viewBox=\"0 0 54 54\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xmlns:sketch=\"http://www.bohemiancoding.com/sketch/ns\">\n      &lt;title>Error&lt;/title>\n      &lt;defs>&lt;/defs>\n      &lt;g id=\"Page-1\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\" sketch:type=\"MSPage\">\n        &lt;g id=\"Check-+-Oval-2\" sketch:type=\"MSLayerGroup\" stroke=\"#747474\" stroke-opacity=\"0.198794158\" fill=\"#FFFFFF\" fill-opacity=\"0.816519475\">\n          &lt;path d=\"M32.6568542,29 L38.3106978,23.3461564 C39.8771021,21.7797521 39.8758057,19.2483887 38.3137085,17.6862915 C36.7547899,16.1273729 34.2176035,16.1255422 32.6538436,17.6893022 L27,23.3431458 L21.3461564,17.6893022 C19.7823965,16.1255422 17.2452101,16.1273729 15.6862915,17.6862915 C14.1241943,19.2483887 14.1228979,21.7797521 15.6893022,23.3461564 L21.3431458,29 L15.6893022,34.6538436 C14.1228979,36.2202479 14.1241943,38.7516113 15.6862915,40.3137085 C17.2452101,41.8726271 19.7823965,41.8744578 21.3461564,40.3106978 L27,34.6568542 L32.6538436,40.3106978 C34.2176035,41.8744578 36.7547899,41.8726271 38.3137085,40.3137085 C39.8758057,38.7516113 39.8771021,36.2202479 38.3106978,34.6538436 L32.6568542,29 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z\" id=\"Oval-2\" sketch:type=\"MSShapeGroup\">&lt;/path>\n        &lt;/g>\n      &lt;/g>\n    &lt;/svg>\n  &lt;/div>\n&lt;/div>"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="711"></td><td><pre></pre></td></tr><tr><td data-num="712"></td><td><pre>        <span class="token comment">// END OPTIONS</span></pre></td></tr><tr><td data-num="713"></td><td><pre>        <span class="token comment">// (Required by the dropzone documentation parser)</span></pre></td></tr><tr><td data-num="714"></td><td><pre></pre></td></tr><tr><td data-num="715"></td><td><pre></pre></td></tr><tr><td data-num="716"></td><td><pre>        <span class="token comment">/*</span></pre></td></tr><tr><td data-num="717"></td><td><pre>         Those functions register themselves to the events on init and handle all</pre></td></tr><tr><td data-num="718"></td><td><pre>         the user interface specific stuff. Overwriting them won't break the upload</pre></td></tr><tr><td data-num="719"></td><td><pre>         but can break the way it's displayed.</pre></td></tr><tr><td data-num="720"></td><td><pre>         You can overwrite them if you don't like the default behavior. If you just</pre></td></tr><tr><td data-num="721"></td><td><pre>         want to add an additional event handler, register it on the dropzone object</pre></td></tr><tr><td data-num="722"></td><td><pre>         and don't overwrite those options.</pre></td></tr><tr><td data-num="723"></td><td><pre>         */</pre></td></tr><tr><td data-num="724"></td><td><pre></pre></td></tr><tr><td data-num="725"></td><td><pre>        <span class="token comment">// Those are self explanatory and simply concern the DragnDrop.</span></pre></td></tr><tr><td data-num="726"></td><td><pre>        <span class="token function-variable function">drop</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">drop</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="727"></td><td><pre>          <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>element<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">"dz-drag-hover"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="728"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="729"></td><td><pre>        <span class="token function-variable function">dragstart</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">dragstart</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="730"></td><td><pre>        <span class="token function-variable function">dragend</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">dragend</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="731"></td><td><pre>          <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>element<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">"dz-drag-hover"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="732"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="733"></td><td><pre>        <span class="token function-variable function">dragenter</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">dragenter</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="734"></td><td><pre>          <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>element<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"dz-drag-hover"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="735"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="736"></td><td><pre>        <span class="token function-variable function">dragover</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">dragover</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="737"></td><td><pre>          <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>element<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"dz-drag-hover"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="738"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="739"></td><td><pre>        <span class="token function-variable function">dragleave</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">dragleave</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="740"></td><td><pre>          <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>element<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">"dz-drag-hover"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="741"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="742"></td><td><pre>        <span class="token function-variable function">paste</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">paste</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="743"></td><td><pre></pre></td></tr><tr><td data-num="744"></td><td><pre></pre></td></tr><tr><td data-num="745"></td><td><pre>        <span class="token comment">// Called whenever there are no files left in the dropzone anymore, and the</span></pre></td></tr><tr><td data-num="746"></td><td><pre>        <span class="token comment">// dropzone should be displayed as if in the initial state.</span></pre></td></tr><tr><td data-num="747"></td><td><pre>        <span class="token function-variable function">reset</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="748"></td><td><pre>          <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>element<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">"dz-started"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="749"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="750"></td><td><pre></pre></td></tr><tr><td data-num="751"></td><td><pre></pre></td></tr><tr><td data-num="752"></td><td><pre>        <span class="token comment">// Called when a file is added to the queue</span></pre></td></tr><tr><td data-num="753"></td><td><pre>        <span class="token comment">// Receives `file`</span></pre></td></tr><tr><td data-num="754"></td><td><pre>        <span class="token function-variable function">addedfile</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">addedfile</span><span class="token punctuation">(</span><span class="token parameter">file</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="755"></td><td><pre>          <span class="token keyword">var</span> _this2 <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="756"></td><td><pre></pre></td></tr><tr><td data-num="757"></td><td><pre>          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>element <span class="token operator">===</span> <span class="token keyword">this</span><span class="token punctuation">.</span>previewsContainer<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="758"></td><td><pre>            <span class="token keyword">this</span><span class="token punctuation">.</span>element<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"dz-started"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="759"></td><td><pre>          <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="760"></td><td><pre></pre></td></tr><tr><td data-num="761"></td><td><pre>          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>previewsContainer<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="762"></td><td><pre>            file<span class="token punctuation">.</span>previewElement <span class="token operator">=</span> Dropzone<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>previewTemplate<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="763"></td><td><pre>            file<span class="token punctuation">.</span>previewTemplate <span class="token operator">=</span> file<span class="token punctuation">.</span>previewElement<span class="token punctuation">;</span> <span class="token comment">// Backwards compatibility</span></pre></td></tr><tr><td data-num="764"></td><td><pre></pre></td></tr><tr><td data-num="765"></td><td><pre>            <span class="token keyword">this</span><span class="token punctuation">.</span>previewsContainer<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span>previewElement<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="766"></td><td><pre>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> _iterator3 <span class="token operator">=</span> file<span class="token punctuation">.</span>previewElement<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">"[data-dz-name]"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> _isArray3 <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>_iterator3<span class="token punctuation">)</span><span class="token punctuation">,</span> _i3 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> _iterator3 <span class="token operator">=</span> _isArray3 <span class="token operator">?</span> _iterator3 <span class="token operator">:</span> _iterator3<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="767"></td><td><pre>              <span class="token keyword">var</span> _ref3<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="768"></td><td><pre></pre></td></tr><tr><td data-num="769"></td><td><pre>              <span class="token keyword">if</span> <span class="token punctuation">(</span>_isArray3<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="770"></td><td><pre>                <span class="token keyword">if</span> <span class="token punctuation">(</span>_i3 <span class="token operator">>=</span> _iterator3<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="771"></td><td><pre>                _ref3 <span class="token operator">=</span> _iterator3<span class="token punctuation">[</span>_i3<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="772"></td><td><pre>              <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="773"></td><td><pre>                _i3 <span class="token operator">=</span> _iterator3<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="774"></td><td><pre>                <span class="token keyword">if</span> <span class="token punctuation">(</span>_i3<span class="token punctuation">.</span>done<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="775"></td><td><pre>                _ref3 <span class="token operator">=</span> _i3<span class="token punctuation">.</span>value<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="776"></td><td><pre>              <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="777"></td><td><pre></pre></td></tr><tr><td data-num="778"></td><td><pre>              <span class="token keyword">var</span> node <span class="token operator">=</span> _ref3<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="779"></td><td><pre></pre></td></tr><tr><td data-num="780"></td><td><pre>              node<span class="token punctuation">.</span>textContent <span class="token operator">=</span> file<span class="token punctuation">.</span>name<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="781"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="782"></td><td><pre>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> _iterator4 <span class="token operator">=</span> file<span class="token punctuation">.</span>previewElement<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">"[data-dz-size]"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> _isArray4 <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>_iterator4<span class="token punctuation">)</span><span class="token punctuation">,</span> _i4 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> _iterator4 <span class="token operator">=</span> _isArray4 <span class="token operator">?</span> _iterator4 <span class="token operator">:</span> _iterator4<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="783"></td><td><pre>              <span class="token keyword">if</span> <span class="token punctuation">(</span>_isArray4<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="784"></td><td><pre>                <span class="token keyword">if</span> <span class="token punctuation">(</span>_i4 <span class="token operator">>=</span> _iterator4<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="785"></td><td><pre>                node <span class="token operator">=</span> _iterator4<span class="token punctuation">[</span>_i4<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="786"></td><td><pre>              <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="787"></td><td><pre>                _i4 <span class="token operator">=</span> _iterator4<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="788"></td><td><pre>                <span class="token keyword">if</span> <span class="token punctuation">(</span>_i4<span class="token punctuation">.</span>done<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="789"></td><td><pre>                node <span class="token operator">=</span> _i4<span class="token punctuation">.</span>value<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="790"></td><td><pre>              <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="791"></td><td><pre></pre></td></tr><tr><td data-num="792"></td><td><pre>              node<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">filesize</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span>size<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="793"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="794"></td><td><pre></pre></td></tr><tr><td data-num="795"></td><td><pre>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>addRemoveLinks<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="796"></td><td><pre>              file<span class="token punctuation">.</span>_removeLink <span class="token operator">=</span> Dropzone<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"&lt;a class=\"dz-remove\" href=\"javascript:undefined;\" data-dz-remove>"</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>dictRemoveFile <span class="token operator">+</span> <span class="token string">"&lt;/a>"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="797"></td><td><pre>              file<span class="token punctuation">.</span>previewElement<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span>_removeLink<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="798"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="799"></td><td><pre></pre></td></tr><tr><td data-num="800"></td><td><pre>            <span class="token keyword">var</span> <span class="token function-variable function">removeFileEvent</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">removeFileEvent</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="801"></td><td><pre>              e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="802"></td><td><pre>              e<span class="token punctuation">.</span><span class="token function">stopPropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="803"></td><td><pre>              <span class="token keyword">if</span> <span class="token punctuation">(</span>file<span class="token punctuation">.</span>status <span class="token operator">===</span> Dropzone<span class="token punctuation">.</span><span class="token constant">UPLOADING</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="804"></td><td><pre>                <span class="token keyword">return</span> Dropzone<span class="token punctuation">.</span><span class="token function">confirm</span><span class="token punctuation">(</span>_this2<span class="token punctuation">.</span>options<span class="token punctuation">.</span>dictCancelUploadConfirmation<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="805"></td><td><pre>                  <span class="token keyword">return</span> _this2<span class="token punctuation">.</span><span class="token function">removeFile</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="806"></td><td><pre>                <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="807"></td><td><pre>              <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="808"></td><td><pre>                <span class="token keyword">if</span> <span class="token punctuation">(</span>_this2<span class="token punctuation">.</span>options<span class="token punctuation">.</span>dictRemoveFileConfirmation<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="809"></td><td><pre>                  <span class="token keyword">return</span> Dropzone<span class="token punctuation">.</span><span class="token function">confirm</span><span class="token punctuation">(</span>_this2<span class="token punctuation">.</span>options<span class="token punctuation">.</span>dictRemoveFileConfirmation<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="810"></td><td><pre>                    <span class="token keyword">return</span> _this2<span class="token punctuation">.</span><span class="token function">removeFile</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="811"></td><td><pre>                  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="812"></td><td><pre>                <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="813"></td><td><pre>                  <span class="token keyword">return</span> _this2<span class="token punctuation">.</span><span class="token function">removeFile</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="814"></td><td><pre>                <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="815"></td><td><pre>              <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="816"></td><td><pre>            <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="817"></td><td><pre></pre></td></tr><tr><td data-num="818"></td><td><pre>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> _iterator5 <span class="token operator">=</span> file<span class="token punctuation">.</span>previewElement<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">"[data-dz-remove]"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> _isArray5 <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>_iterator5<span class="token punctuation">)</span><span class="token punctuation">,</span> _i5 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> _iterator5 <span class="token operator">=</span> _isArray5 <span class="token operator">?</span> _iterator5 <span class="token operator">:</span> _iterator5<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="819"></td><td><pre>              <span class="token keyword">var</span> _ref4<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="820"></td><td><pre></pre></td></tr><tr><td data-num="821"></td><td><pre>              <span class="token keyword">if</span> <span class="token punctuation">(</span>_isArray5<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="822"></td><td><pre>                <span class="token keyword">if</span> <span class="token punctuation">(</span>_i5 <span class="token operator">>=</span> _iterator5<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="823"></td><td><pre>                _ref4 <span class="token operator">=</span> _iterator5<span class="token punctuation">[</span>_i5<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="824"></td><td><pre>              <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="825"></td><td><pre>                _i5 <span class="token operator">=</span> _iterator5<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="826"></td><td><pre>                <span class="token keyword">if</span> <span class="token punctuation">(</span>_i5<span class="token punctuation">.</span>done<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="827"></td><td><pre>                _ref4 <span class="token operator">=</span> _i5<span class="token punctuation">.</span>value<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="828"></td><td><pre>              <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="829"></td><td><pre></pre></td></tr><tr><td data-num="830"></td><td><pre>              <span class="token keyword">var</span> removeLink <span class="token operator">=</span> _ref4<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="831"></td><td><pre></pre></td></tr><tr><td data-num="832"></td><td><pre>              removeLink<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">,</span> removeFileEvent<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="833"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="834"></td><td><pre>          <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="835"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="836"></td><td><pre></pre></td></tr><tr><td data-num="837"></td><td><pre></pre></td></tr><tr><td data-num="838"></td><td><pre>        <span class="token comment">// Called whenever a file is removed.</span></pre></td></tr><tr><td data-num="839"></td><td><pre>        <span class="token function-variable function">removedfile</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">removedfile</span><span class="token punctuation">(</span><span class="token parameter">file</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="840"></td><td><pre>          <span class="token keyword">if</span> <span class="token punctuation">(</span>file<span class="token punctuation">.</span>previewElement <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> file<span class="token punctuation">.</span>previewElement<span class="token punctuation">.</span>parentNode <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="841"></td><td><pre>            file<span class="token punctuation">.</span>previewElement<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span>previewElement<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="842"></td><td><pre>          <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="843"></td><td><pre>          <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_updateMaxFilesReachedClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="844"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="845"></td><td><pre></pre></td></tr><tr><td data-num="846"></td><td><pre></pre></td></tr><tr><td data-num="847"></td><td><pre>        <span class="token comment">// Called when a thumbnail has been generated</span></pre></td></tr><tr><td data-num="848"></td><td><pre>        <span class="token comment">// Receives `file` and `dataUrl`</span></pre></td></tr><tr><td data-num="849"></td><td><pre>        <span class="token function-variable function">thumbnail</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">thumbnail</span><span class="token punctuation">(</span><span class="token parameter">file<span class="token punctuation">,</span> dataUrl</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="850"></td><td><pre>          <span class="token keyword">if</span> <span class="token punctuation">(</span>file<span class="token punctuation">.</span>previewElement<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="851"></td><td><pre>            file<span class="token punctuation">.</span>previewElement<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">"dz-file-preview"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="852"></td><td><pre>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> _iterator6 <span class="token operator">=</span> file<span class="token punctuation">.</span>previewElement<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">"[data-dz-thumbnail]"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> _isArray6 <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>_iterator6<span class="token punctuation">)</span><span class="token punctuation">,</span> _i6 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> _iterator6 <span class="token operator">=</span> _isArray6 <span class="token operator">?</span> _iterator6 <span class="token operator">:</span> _iterator6<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="853"></td><td><pre>              <span class="token keyword">var</span> _ref5<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="854"></td><td><pre></pre></td></tr><tr><td data-num="855"></td><td><pre>              <span class="token keyword">if</span> <span class="token punctuation">(</span>_isArray6<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="856"></td><td><pre>                <span class="token keyword">if</span> <span class="token punctuation">(</span>_i6 <span class="token operator">>=</span> _iterator6<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="857"></td><td><pre>                _ref5 <span class="token operator">=</span> _iterator6<span class="token punctuation">[</span>_i6<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="858"></td><td><pre>              <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="859"></td><td><pre>                _i6 <span class="token operator">=</span> _iterator6<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="860"></td><td><pre>                <span class="token keyword">if</span> <span class="token punctuation">(</span>_i6<span class="token punctuation">.</span>done<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="861"></td><td><pre>                _ref5 <span class="token operator">=</span> _i6<span class="token punctuation">.</span>value<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="862"></td><td><pre>              <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="863"></td><td><pre></pre></td></tr><tr><td data-num="864"></td><td><pre>              <span class="token keyword">var</span> thumbnailElement <span class="token operator">=</span> _ref5<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="865"></td><td><pre></pre></td></tr><tr><td data-num="866"></td><td><pre>              thumbnailElement<span class="token punctuation">.</span>alt <span class="token operator">=</span> file<span class="token punctuation">.</span>name<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="867"></td><td><pre>              thumbnailElement<span class="token punctuation">.</span>src <span class="token operator">=</span> dataUrl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="868"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="869"></td><td><pre></pre></td></tr><tr><td data-num="870"></td><td><pre>            <span class="token keyword">return</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="871"></td><td><pre>              <span class="token keyword">return</span> file<span class="token punctuation">.</span>previewElement<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"dz-image-preview"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="872"></td><td><pre>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="873"></td><td><pre>          <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="874"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="875"></td><td><pre></pre></td></tr><tr><td data-num="876"></td><td><pre></pre></td></tr><tr><td data-num="877"></td><td><pre>        <span class="token comment">// Called whenever an error occurs</span></pre></td></tr><tr><td data-num="878"></td><td><pre>        <span class="token comment">// Receives `file` and `message`</span></pre></td></tr><tr><td data-num="879"></td><td><pre>        <span class="token function-variable function">error</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">error</span><span class="token punctuation">(</span><span class="token parameter">file<span class="token punctuation">,</span> message</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="880"></td><td><pre>          <span class="token keyword">if</span> <span class="token punctuation">(</span>file<span class="token punctuation">.</span>previewElement<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="881"></td><td><pre>            file<span class="token punctuation">.</span>previewElement<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"dz-error"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="882"></td><td><pre>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> message <span class="token operator">!==</span> <span class="token string">"String"</span> <span class="token operator">&amp;&amp;</span> message<span class="token punctuation">.</span>error<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="883"></td><td><pre>              message <span class="token operator">=</span> message<span class="token punctuation">.</span>error<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="884"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="885"></td><td><pre>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> _iterator7 <span class="token operator">=</span> file<span class="token punctuation">.</span>previewElement<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">"[data-dz-errormessage]"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> _isArray7 <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>_iterator7<span class="token punctuation">)</span><span class="token punctuation">,</span> _i7 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> _iterator7 <span class="token operator">=</span> _isArray7 <span class="token operator">?</span> _iterator7 <span class="token operator">:</span> _iterator7<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="886"></td><td><pre>              <span class="token keyword">var</span> _ref6<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="887"></td><td><pre></pre></td></tr><tr><td data-num="888"></td><td><pre>              <span class="token keyword">if</span> <span class="token punctuation">(</span>_isArray7<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="889"></td><td><pre>                <span class="token keyword">if</span> <span class="token punctuation">(</span>_i7 <span class="token operator">>=</span> _iterator7<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="890"></td><td><pre>                _ref6 <span class="token operator">=</span> _iterator7<span class="token punctuation">[</span>_i7<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="891"></td><td><pre>              <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="892"></td><td><pre>                _i7 <span class="token operator">=</span> _iterator7<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="893"></td><td><pre>                <span class="token keyword">if</span> <span class="token punctuation">(</span>_i7<span class="token punctuation">.</span>done<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="894"></td><td><pre>                _ref6 <span class="token operator">=</span> _i7<span class="token punctuation">.</span>value<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="895"></td><td><pre>              <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="896"></td><td><pre></pre></td></tr><tr><td data-num="897"></td><td><pre>              <span class="token keyword">var</span> node <span class="token operator">=</span> _ref6<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="898"></td><td><pre></pre></td></tr><tr><td data-num="899"></td><td><pre>              node<span class="token punctuation">.</span>textContent <span class="token operator">=</span> message<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="900"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="901"></td><td><pre>          <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="902"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="903"></td><td><pre>        <span class="token function-variable function">errormultiple</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">errormultiple</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="904"></td><td><pre></pre></td></tr><tr><td data-num="905"></td><td><pre></pre></td></tr><tr><td data-num="906"></td><td><pre>        <span class="token comment">// Called when a file gets processed. Since there is a cue, not all added</span></pre></td></tr><tr><td data-num="907"></td><td><pre>        <span class="token comment">// files are processed immediately.</span></pre></td></tr><tr><td data-num="908"></td><td><pre>        <span class="token comment">// Receives `file`</span></pre></td></tr><tr><td data-num="909"></td><td><pre>        <span class="token function-variable function">processing</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">processing</span><span class="token punctuation">(</span><span class="token parameter">file</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="910"></td><td><pre>          <span class="token keyword">if</span> <span class="token punctuation">(</span>file<span class="token punctuation">.</span>previewElement<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="911"></td><td><pre>            file<span class="token punctuation">.</span>previewElement<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"dz-processing"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="912"></td><td><pre>            <span class="token keyword">if</span> <span class="token punctuation">(</span>file<span class="token punctuation">.</span>_removeLink<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="913"></td><td><pre>              <span class="token keyword">return</span> file<span class="token punctuation">.</span>_removeLink<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>dictCancelUpload<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="914"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="915"></td><td><pre>          <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="916"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="917"></td><td><pre>        <span class="token function-variable function">processingmultiple</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">processingmultiple</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="918"></td><td><pre></pre></td></tr><tr><td data-num="919"></td><td><pre></pre></td></tr><tr><td data-num="920"></td><td><pre>        <span class="token comment">// Called whenever the upload progress gets updated.</span></pre></td></tr><tr><td data-num="921"></td><td><pre>        <span class="token comment">// Receives `file`, `progress` (percentage 0-100) and `bytesSent`.</span></pre></td></tr><tr><td data-num="922"></td><td><pre>        <span class="token comment">// To get the total number of bytes of the file, use `file.size`</span></pre></td></tr><tr><td data-num="923"></td><td><pre>        <span class="token function-variable function">uploadprogress</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">uploadprogress</span><span class="token punctuation">(</span><span class="token parameter">file<span class="token punctuation">,</span> progress<span class="token punctuation">,</span> bytesSent</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="924"></td><td><pre>          <span class="token keyword">if</span> <span class="token punctuation">(</span>file<span class="token punctuation">.</span>previewElement<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="925"></td><td><pre>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> _iterator8 <span class="token operator">=</span> file<span class="token punctuation">.</span>previewElement<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">"[data-dz-uploadprogress]"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> _isArray8 <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>_iterator8<span class="token punctuation">)</span><span class="token punctuation">,</span> _i8 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> _iterator8 <span class="token operator">=</span> _isArray8 <span class="token operator">?</span> _iterator8 <span class="token operator">:</span> _iterator8<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="926"></td><td><pre>              <span class="token keyword">var</span> _ref7<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="927"></td><td><pre></pre></td></tr><tr><td data-num="928"></td><td><pre>              <span class="token keyword">if</span> <span class="token punctuation">(</span>_isArray8<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="929"></td><td><pre>                <span class="token keyword">if</span> <span class="token punctuation">(</span>_i8 <span class="token operator">>=</span> _iterator8<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="930"></td><td><pre>                _ref7 <span class="token operator">=</span> _iterator8<span class="token punctuation">[</span>_i8<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="931"></td><td><pre>              <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="932"></td><td><pre>                _i8 <span class="token operator">=</span> _iterator8<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="933"></td><td><pre>                <span class="token keyword">if</span> <span class="token punctuation">(</span>_i8<span class="token punctuation">.</span>done<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="934"></td><td><pre>                _ref7 <span class="token operator">=</span> _i8<span class="token punctuation">.</span>value<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="935"></td><td><pre>              <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="936"></td><td><pre></pre></td></tr><tr><td data-num="937"></td><td><pre>              <span class="token keyword">var</span> node <span class="token operator">=</span> _ref7<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="938"></td><td><pre></pre></td></tr><tr><td data-num="939"></td><td><pre>              node<span class="token punctuation">.</span>nodeName <span class="token operator">===</span> <span class="token string">'PROGRESS'</span> <span class="token operator">?</span> node<span class="token punctuation">.</span>value <span class="token operator">=</span> progress <span class="token operator">:</span> node<span class="token punctuation">.</span>style<span class="token punctuation">.</span>width <span class="token operator">=</span> progress <span class="token operator">+</span> <span class="token string">"%"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="940"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="941"></td><td><pre>          <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="942"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="943"></td><td><pre></pre></td></tr><tr><td data-num="944"></td><td><pre></pre></td></tr><tr><td data-num="945"></td><td><pre>        <span class="token comment">// Called whenever the total upload progress gets updated.</span></pre></td></tr><tr><td data-num="946"></td><td><pre>        <span class="token comment">// Called with totalUploadProgress (0-100), totalBytes and totalBytesSent</span></pre></td></tr><tr><td data-num="947"></td><td><pre>        <span class="token function-variable function">totaluploadprogress</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">totaluploadprogress</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="948"></td><td><pre></pre></td></tr><tr><td data-num="949"></td><td><pre></pre></td></tr><tr><td data-num="950"></td><td><pre>        <span class="token comment">// Called just before the file is sent. Gets the `xhr` object as second</span></pre></td></tr><tr><td data-num="951"></td><td><pre>        <span class="token comment">// parameter, so you can modify it (for example to add a CSRF token) and a</span></pre></td></tr><tr><td data-num="952"></td><td><pre>        <span class="token comment">// `formData` object to add additional information.</span></pre></td></tr><tr><td data-num="953"></td><td><pre>        <span class="token function-variable function">sending</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">sending</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="954"></td><td><pre>        <span class="token function-variable function">sendingmultiple</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">sendingmultiple</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="955"></td><td><pre></pre></td></tr><tr><td data-num="956"></td><td><pre></pre></td></tr><tr><td data-num="957"></td><td><pre>        <span class="token comment">// When the complete upload is finished and successful</span></pre></td></tr><tr><td data-num="958"></td><td><pre>        <span class="token comment">// Receives `file`</span></pre></td></tr><tr><td data-num="959"></td><td><pre>        <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">success</span><span class="token punctuation">(</span><span class="token parameter">file</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="960"></td><td><pre>          <span class="token keyword">if</span> <span class="token punctuation">(</span>file<span class="token punctuation">.</span>previewElement<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="961"></td><td><pre>            <span class="token keyword">return</span> file<span class="token punctuation">.</span>previewElement<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"dz-success"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="962"></td><td><pre>          <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="963"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="964"></td><td><pre>        <span class="token function-variable function">successmultiple</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">successmultiple</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="965"></td><td><pre></pre></td></tr><tr><td data-num="966"></td><td><pre></pre></td></tr><tr><td data-num="967"></td><td><pre>        <span class="token comment">// When the upload is canceled.</span></pre></td></tr><tr><td data-num="968"></td><td><pre>        <span class="token function-variable function">canceled</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">canceled</span><span class="token punctuation">(</span><span class="token parameter">file</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="969"></td><td><pre>          <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">"error"</span><span class="token punctuation">,</span> file<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>dictUploadCanceled<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="970"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="971"></td><td><pre>        <span class="token function-variable function">canceledmultiple</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">canceledmultiple</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="972"></td><td><pre></pre></td></tr><tr><td data-num="973"></td><td><pre></pre></td></tr><tr><td data-num="974"></td><td><pre>        <span class="token comment">// When the upload is finished, either with success or an error.</span></pre></td></tr><tr><td data-num="975"></td><td><pre>        <span class="token comment">// Receives `file`</span></pre></td></tr><tr><td data-num="976"></td><td><pre>        <span class="token function-variable function">complete</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">complete</span><span class="token punctuation">(</span><span class="token parameter">file</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="977"></td><td><pre>          <span class="token keyword">if</span> <span class="token punctuation">(</span>file<span class="token punctuation">.</span>_removeLink<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="978"></td><td><pre>            file<span class="token punctuation">.</span>_removeLink<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>dictRemoveFile<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="979"></td><td><pre>          <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="980"></td><td><pre>          <span class="token keyword">if</span> <span class="token punctuation">(</span>file<span class="token punctuation">.</span>previewElement<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="981"></td><td><pre>            <span class="token keyword">return</span> file<span class="token punctuation">.</span>previewElement<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"dz-complete"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="982"></td><td><pre>          <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="983"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="984"></td><td><pre>        <span class="token function-variable function">completemultiple</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">completemultiple</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="985"></td><td><pre>        <span class="token function-variable function">maxfilesexceeded</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">maxfilesexceeded</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="986"></td><td><pre>        <span class="token function-variable function">maxfilesreached</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">maxfilesreached</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="987"></td><td><pre>        <span class="token function-variable function">queuecomplete</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">queuecomplete</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="988"></td><td><pre>        <span class="token function-variable function">addedfiles</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">addedfiles</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="989"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="990"></td><td><pre></pre></td></tr><tr><td data-num="991"></td><td><pre>      <span class="token keyword">this</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>_thumbnailQueue <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="992"></td><td><pre>      <span class="token keyword">this</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>_processingThumbnail <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="993"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="994"></td><td><pre></pre></td></tr><tr><td data-num="995"></td><td><pre>    <span class="token comment">// global utility</span></pre></td></tr><tr><td data-num="996"></td><td><pre></pre></td></tr><tr><td data-num="997"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="998"></td><td><pre>    key<span class="token operator">:</span> <span class="token string">"extend"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="999"></td><td><pre>    <span class="token function-variable function">value</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">extend</span><span class="token punctuation">(</span><span class="token parameter">target</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1000"></td><td><pre>      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> _len2 <span class="token operator">=</span> arguments<span class="token punctuation">.</span>length<span class="token punctuation">,</span> objects <span class="token operator">=</span> <span class="token function">Array</span><span class="token punctuation">(</span>_len2 <span class="token operator">></span> <span class="token number">1</span> <span class="token operator">?</span> _len2 <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> _key2 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> _key2 <span class="token operator">&lt;</span> _len2<span class="token punctuation">;</span> _key2<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1001"></td><td><pre>        objects<span class="token punctuation">[</span>_key2 <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> arguments<span class="token punctuation">[</span>_key2<span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1002"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1003"></td><td><pre></pre></td></tr><tr><td data-num="1004"></td><td><pre>      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> _iterator9 <span class="token operator">=</span> objects<span class="token punctuation">,</span> _isArray9 <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>_iterator9<span class="token punctuation">)</span><span class="token punctuation">,</span> _i9 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> _iterator9 <span class="token operator">=</span> _isArray9 <span class="token operator">?</span> _iterator9 <span class="token operator">:</span> _iterator9<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1005"></td><td><pre>        <span class="token keyword">var</span> _ref8<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1006"></td><td><pre></pre></td></tr><tr><td data-num="1007"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span>_isArray9<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1008"></td><td><pre>          <span class="token keyword">if</span> <span class="token punctuation">(</span>_i9 <span class="token operator">>=</span> _iterator9<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1009"></td><td><pre>          _ref8 <span class="token operator">=</span> _iterator9<span class="token punctuation">[</span>_i9<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1010"></td><td><pre>        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1011"></td><td><pre>          _i9 <span class="token operator">=</span> _iterator9<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1012"></td><td><pre>          <span class="token keyword">if</span> <span class="token punctuation">(</span>_i9<span class="token punctuation">.</span>done<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1013"></td><td><pre>          _ref8 <span class="token operator">=</span> _i9<span class="token punctuation">.</span>value<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1014"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1015"></td><td><pre></pre></td></tr><tr><td data-num="1016"></td><td><pre>        <span class="token keyword">var</span> object <span class="token operator">=</span> _ref8<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1017"></td><td><pre></pre></td></tr><tr><td data-num="1018"></td><td><pre>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> key <span class="token keyword">in</span> object<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1019"></td><td><pre>          <span class="token keyword">var</span> val <span class="token operator">=</span> object<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1020"></td><td><pre>          target<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> val<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1021"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1022"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1023"></td><td><pre>      <span class="token keyword">return</span> target<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1024"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1025"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1026"></td><td><pre></pre></td></tr><tr><td data-num="1027"></td><td><pre>  <span class="token keyword">function</span> <span class="token function">Dropzone</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> options</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1028"></td><td><pre>    <span class="token function">_classCallCheck</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> Dropzone<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1029"></td><td><pre></pre></td></tr><tr><td data-num="1030"></td><td><pre>    <span class="token keyword">var</span> _this <span class="token operator">=</span> <span class="token function">_possibleConstructorReturn</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>Dropzone<span class="token punctuation">.</span>__proto__ <span class="token operator">||</span> Object<span class="token punctuation">.</span><span class="token function">getPrototypeOf</span><span class="token punctuation">(</span>Dropzone<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1031"></td><td><pre></pre></td></tr><tr><td data-num="1032"></td><td><pre>    <span class="token keyword">var</span> fallback <span class="token operator">=</span> <span class="token keyword">void</span> <span class="token number">0</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="1033"></td><td><pre>        left <span class="token operator">=</span> <span class="token keyword">void</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1034"></td><td><pre>    _this<span class="token punctuation">.</span>element <span class="token operator">=</span> el<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1035"></td><td><pre>    <span class="token comment">// For backwards compatibility since the version was in the prototype previously</span></pre></td></tr><tr><td data-num="1036"></td><td><pre>    _this<span class="token punctuation">.</span>version <span class="token operator">=</span> Dropzone<span class="token punctuation">.</span>version<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1037"></td><td><pre></pre></td></tr><tr><td data-num="1038"></td><td><pre>    _this<span class="token punctuation">.</span>defaultOptions<span class="token punctuation">.</span>previewTemplate <span class="token operator">=</span> _this<span class="token punctuation">.</span>defaultOptions<span class="token punctuation">.</span>previewTemplate<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\n*</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1039"></td><td><pre></pre></td></tr><tr><td data-num="1040"></td><td><pre>    _this<span class="token punctuation">.</span>clickableElements <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1041"></td><td><pre>    _this<span class="token punctuation">.</span>listeners <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1042"></td><td><pre>    _this<span class="token punctuation">.</span>files <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// All files</span></pre></td></tr><tr><td data-num="1043"></td><td><pre></pre></td></tr><tr><td data-num="1044"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> _this<span class="token punctuation">.</span>element <span class="token operator">===</span> <span class="token string">"string"</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1045"></td><td><pre>      _this<span class="token punctuation">.</span>element <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span>_this<span class="token punctuation">.</span>element<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1046"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1047"></td><td><pre></pre></td></tr><tr><td data-num="1048"></td><td><pre>    <span class="token comment">// Not checking if instance of HTMLElement or Element since IE9 is extremely weird.</span></pre></td></tr><tr><td data-num="1049"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>_this<span class="token punctuation">.</span>element <span class="token operator">||</span> _this<span class="token punctuation">.</span>element<span class="token punctuation">.</span>nodeType <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1050"></td><td><pre>      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">"Invalid dropzone element."</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1051"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1052"></td><td><pre></pre></td></tr><tr><td data-num="1053"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span>_this<span class="token punctuation">.</span>element<span class="token punctuation">.</span>dropzone<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1054"></td><td><pre>      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">"Dropzone already attached."</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1055"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1056"></td><td><pre></pre></td></tr><tr><td data-num="1057"></td><td><pre>    <span class="token comment">// Now add this dropzone to the instances.</span></pre></td></tr><tr><td data-num="1058"></td><td><pre>    Dropzone<span class="token punctuation">.</span>instances<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>_this<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1059"></td><td><pre></pre></td></tr><tr><td data-num="1060"></td><td><pre>    <span class="token comment">// Put the dropzone inside the element itself.</span></pre></td></tr><tr><td data-num="1061"></td><td><pre>    _this<span class="token punctuation">.</span>element<span class="token punctuation">.</span>dropzone <span class="token operator">=</span> _this<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1062"></td><td><pre></pre></td></tr><tr><td data-num="1063"></td><td><pre>    <span class="token keyword">var</span> elementOptions <span class="token operator">=</span> <span class="token punctuation">(</span>left <span class="token operator">=</span> Dropzone<span class="token punctuation">.</span><span class="token function">optionsForElement</span><span class="token punctuation">(</span>_this<span class="token punctuation">.</span>element<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">?</span> left <span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1064"></td><td><pre></pre></td></tr><tr><td data-num="1065"></td><td><pre>    _this<span class="token punctuation">.</span>options <span class="token operator">=</span> Dropzone<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> _this<span class="token punctuation">.</span>defaultOptions<span class="token punctuation">,</span> elementOptions<span class="token punctuation">,</span> options <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">?</span> options <span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1066"></td><td><pre></pre></td></tr><tr><td data-num="1067"></td><td><pre>    <span class="token comment">// If the browser failed, just call the fallback and leave</span></pre></td></tr><tr><td data-num="1068"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span>_this<span class="token punctuation">.</span>options<span class="token punctuation">.</span>forceFallback <span class="token operator">||</span> <span class="token operator">!</span>Dropzone<span class="token punctuation">.</span><span class="token function">isBrowserSupported</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1069"></td><td><pre>      <span class="token keyword">var</span> _ret<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1070"></td><td><pre></pre></td></tr><tr><td data-num="1071"></td><td><pre>      <span class="token keyword">return</span> _ret <span class="token operator">=</span> _this<span class="token punctuation">.</span>options<span class="token punctuation">.</span><span class="token function">fallback</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>_this<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">_possibleConstructorReturn</span><span class="token punctuation">(</span>_this<span class="token punctuation">,</span> _ret<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1072"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1073"></td><td><pre></pre></td></tr><tr><td data-num="1074"></td><td><pre>    <span class="token comment">// @options.url = @element.getAttribute "action" unless @options.url?</span></pre></td></tr><tr><td data-num="1075"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span>_this<span class="token punctuation">.</span>options<span class="token punctuation">.</span>url <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1076"></td><td><pre>      _this<span class="token punctuation">.</span>options<span class="token punctuation">.</span>url <span class="token operator">=</span> _this<span class="token punctuation">.</span>element<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"action"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1077"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1078"></td><td><pre></pre></td></tr><tr><td data-num="1079"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>_this<span class="token punctuation">.</span>options<span class="token punctuation">.</span>url<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1080"></td><td><pre>      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">"No URL provided."</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1081"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1082"></td><td><pre></pre></td></tr><tr><td data-num="1083"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span>_this<span class="token punctuation">.</span>options<span class="token punctuation">.</span>acceptedFiles <span class="token operator">&amp;&amp;</span> _this<span class="token punctuation">.</span>options<span class="token punctuation">.</span>acceptedMimeTypes<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1084"></td><td><pre>      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">"You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated."</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1085"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1086"></td><td><pre></pre></td></tr><tr><td data-num="1087"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span>_this<span class="token punctuation">.</span>options<span class="token punctuation">.</span>uploadMultiple <span class="token operator">&amp;&amp;</span> _this<span class="token punctuation">.</span>options<span class="token punctuation">.</span>chunking<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1088"></td><td><pre>      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'You cannot set both: uploadMultiple and chunking.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1089"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1090"></td><td><pre></pre></td></tr><tr><td data-num="1091"></td><td><pre>    <span class="token comment">// Backwards compatibility</span></pre></td></tr><tr><td data-num="1092"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span>_this<span class="token punctuation">.</span>options<span class="token punctuation">.</span>acceptedMimeTypes<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1093"></td><td><pre>      _this<span class="token punctuation">.</span>options<span class="token punctuation">.</span>acceptedFiles <span class="token operator">=</span> _this<span class="token punctuation">.</span>options<span class="token punctuation">.</span>acceptedMimeTypes<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1094"></td><td><pre>      <span class="token keyword">delete</span> _this<span class="token punctuation">.</span>options<span class="token punctuation">.</span>acceptedMimeTypes<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1095"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1096"></td><td><pre></pre></td></tr><tr><td data-num="1097"></td><td><pre>    <span class="token comment">// Backwards compatibility</span></pre></td></tr><tr><td data-num="1098"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span>_this<span class="token punctuation">.</span>options<span class="token punctuation">.</span>renameFilename <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1099"></td><td><pre>      _this<span class="token punctuation">.</span>options<span class="token punctuation">.</span><span class="token function-variable function">renameFile</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">file</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1100"></td><td><pre>        <span class="token keyword">return</span> _this<span class="token punctuation">.</span>options<span class="token punctuation">.</span><span class="token function">renameFilename</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>_this<span class="token punctuation">,</span> file<span class="token punctuation">.</span>name<span class="token punctuation">,</span> file<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1101"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1102"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1103"></td><td><pre></pre></td></tr><tr><td data-num="1104"></td><td><pre>    _this<span class="token punctuation">.</span>options<span class="token punctuation">.</span>method <span class="token operator">=</span> _this<span class="token punctuation">.</span>options<span class="token punctuation">.</span>method<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1105"></td><td><pre></pre></td></tr><tr><td data-num="1106"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>fallback <span class="token operator">=</span> _this<span class="token punctuation">.</span><span class="token function">getExistingFallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> fallback<span class="token punctuation">.</span>parentNode<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1107"></td><td><pre>      <span class="token comment">// Remove the fallback</span></pre></td></tr><tr><td data-num="1108"></td><td><pre>      fallback<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>fallback<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1109"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1110"></td><td><pre></pre></td></tr><tr><td data-num="1111"></td><td><pre>    <span class="token comment">// Display previews in the previewsContainer element or the Dropzone element unless explicitly set to false</span></pre></td></tr><tr><td data-num="1112"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span>_this<span class="token punctuation">.</span>options<span class="token punctuation">.</span>previewsContainer <span class="token operator">!==</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1113"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span>_this<span class="token punctuation">.</span>options<span class="token punctuation">.</span>previewsContainer<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1114"></td><td><pre>        _this<span class="token punctuation">.</span>previewsContainer <span class="token operator">=</span> Dropzone<span class="token punctuation">.</span><span class="token function">getElement</span><span class="token punctuation">(</span>_this<span class="token punctuation">.</span>options<span class="token punctuation">.</span>previewsContainer<span class="token punctuation">,</span> <span class="token string">"previewsContainer"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1115"></td><td><pre>      <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1116"></td><td><pre>        _this<span class="token punctuation">.</span>previewsContainer <span class="token operator">=</span> _this<span class="token punctuation">.</span>element<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1117"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1118"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1119"></td><td><pre></pre></td></tr><tr><td data-num="1120"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span>_this<span class="token punctuation">.</span>options<span class="token punctuation">.</span>clickable<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1121"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span>_this<span class="token punctuation">.</span>options<span class="token punctuation">.</span>clickable <span class="token operator">===</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1122"></td><td><pre>        _this<span class="token punctuation">.</span>clickableElements <span class="token operator">=</span> <span class="token punctuation">[</span>_this<span class="token punctuation">.</span>element<span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1123"></td><td><pre>      <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1124"></td><td><pre>        _this<span class="token punctuation">.</span>clickableElements <span class="token operator">=</span> Dropzone<span class="token punctuation">.</span><span class="token function">getElements</span><span class="token punctuation">(</span>_this<span class="token punctuation">.</span>options<span class="token punctuation">.</span>clickable<span class="token punctuation">,</span> <span class="token string">"clickable"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1125"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1126"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1127"></td><td><pre></pre></td></tr><tr><td data-num="1128"></td><td><pre>    _this<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1129"></td><td><pre>    <span class="token keyword">return</span> _this<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1130"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1131"></td><td><pre></pre></td></tr><tr><td data-num="1132"></td><td><pre>  <span class="token comment">// Returns all files that have been accepted</span></pre></td></tr><tr><td data-num="1133"></td><td><pre></pre></td></tr><tr><td data-num="1134"></td><td><pre></pre></td></tr><tr><td data-num="1135"></td><td><pre>  <span class="token function">_createClass</span><span class="token punctuation">(</span>Dropzone<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1136"></td><td><pre>    key<span class="token operator">:</span> <span class="token string">"getAcceptedFiles"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="1137"></td><td><pre>    <span class="token function-variable function">value</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">getAcceptedFiles</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1138"></td><td><pre>      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>files<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">file</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1139"></td><td><pre>        <span class="token keyword">return</span> file<span class="token punctuation">.</span>accepted<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1140"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">file</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1141"></td><td><pre>        <span class="token keyword">return</span> file<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1142"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1143"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1144"></td><td><pre></pre></td></tr><tr><td data-num="1145"></td><td><pre>    <span class="token comment">// Returns all files that have been rejected</span></pre></td></tr><tr><td data-num="1146"></td><td><pre>    <span class="token comment">// Not sure when that's going to be useful, but added for completeness.</span></pre></td></tr><tr><td data-num="1147"></td><td><pre></pre></td></tr><tr><td data-num="1148"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1149"></td><td><pre>    key<span class="token operator">:</span> <span class="token string">"getRejectedFiles"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="1150"></td><td><pre>    <span class="token function-variable function">value</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">getRejectedFiles</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1151"></td><td><pre>      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>files<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">file</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1152"></td><td><pre>        <span class="token keyword">return</span> <span class="token operator">!</span>file<span class="token punctuation">.</span>accepted<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1153"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">file</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1154"></td><td><pre>        <span class="token keyword">return</span> file<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1155"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1156"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1157"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1158"></td><td><pre>    key<span class="token operator">:</span> <span class="token string">"getFilesWithStatus"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="1159"></td><td><pre>    <span class="token function-variable function">value</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">getFilesWithStatus</span><span class="token punctuation">(</span><span class="token parameter">status</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1160"></td><td><pre>      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>files<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">file</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1161"></td><td><pre>        <span class="token keyword">return</span> file<span class="token punctuation">.</span>status <span class="token operator">===</span> status<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1162"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">file</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1163"></td><td><pre>        <span class="token keyword">return</span> file<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1164"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1165"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1166"></td><td><pre></pre></td></tr><tr><td data-num="1167"></td><td><pre>    <span class="token comment">// Returns all files that are in the queue</span></pre></td></tr><tr><td data-num="1168"></td><td><pre></pre></td></tr><tr><td data-num="1169"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1170"></td><td><pre>    key<span class="token operator">:</span> <span class="token string">"getQueuedFiles"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="1171"></td><td><pre>    <span class="token function-variable function">value</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">getQueuedFiles</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1172"></td><td><pre>      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getFilesWithStatus</span><span class="token punctuation">(</span>Dropzone<span class="token punctuation">.</span><span class="token constant">QUEUED</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1173"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1174"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1175"></td><td><pre>    key<span class="token operator">:</span> <span class="token string">"getUploadingFiles"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="1176"></td><td><pre>    <span class="token function-variable function">value</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">getUploadingFiles</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1177"></td><td><pre>      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getFilesWithStatus</span><span class="token punctuation">(</span>Dropzone<span class="token punctuation">.</span><span class="token constant">UPLOADING</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1178"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1179"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1180"></td><td><pre>    key<span class="token operator">:</span> <span class="token string">"getAddedFiles"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="1181"></td><td><pre>    <span class="token function-variable function">value</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">getAddedFiles</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1182"></td><td><pre>      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getFilesWithStatus</span><span class="token punctuation">(</span>Dropzone<span class="token punctuation">.</span><span class="token constant">ADDED</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1183"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1184"></td><td><pre></pre></td></tr><tr><td data-num="1185"></td><td><pre>    <span class="token comment">// Files that are either queued or uploading</span></pre></td></tr><tr><td data-num="1186"></td><td><pre></pre></td></tr><tr><td data-num="1187"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1188"></td><td><pre>    key<span class="token operator">:</span> <span class="token string">"getActiveFiles"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="1189"></td><td><pre>    <span class="token function-variable function">value</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">getActiveFiles</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1190"></td><td><pre>      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>files<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">file</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1191"></td><td><pre>        <span class="token keyword">return</span> file<span class="token punctuation">.</span>status <span class="token operator">===</span> Dropzone<span class="token punctuation">.</span><span class="token constant">UPLOADING</span> <span class="token operator">||</span> file<span class="token punctuation">.</span>status <span class="token operator">===</span> Dropzone<span class="token punctuation">.</span><span class="token constant">QUEUED</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1192"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">file</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1193"></td><td><pre>        <span class="token keyword">return</span> file<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1194"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1195"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1196"></td><td><pre></pre></td></tr><tr><td data-num="1197"></td><td><pre>    <span class="token comment">// The function that gets called when Dropzone is initialized. You</span></pre></td></tr><tr><td data-num="1198"></td><td><pre>    <span class="token comment">// can (and should) setup event listeners inside this function.</span></pre></td></tr><tr><td data-num="1199"></td><td><pre></pre></td></tr><tr><td data-num="1200"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1201"></td><td><pre>    key<span class="token operator">:</span> <span class="token string">"init"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="1202"></td><td><pre>    <span class="token function-variable function">value</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1203"></td><td><pre>      <span class="token keyword">var</span> _this3 <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1204"></td><td><pre></pre></td></tr><tr><td data-num="1205"></td><td><pre>      <span class="token comment">// In case it isn't set already</span></pre></td></tr><tr><td data-num="1206"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>element<span class="token punctuation">.</span>tagName <span class="token operator">===</span> <span class="token string">"form"</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1207"></td><td><pre>        <span class="token keyword">this</span><span class="token punctuation">.</span>element<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"enctype"</span><span class="token punctuation">,</span> <span class="token string">"multipart/form-data"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1208"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1209"></td><td><pre></pre></td></tr><tr><td data-num="1210"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>element<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">"dropzone"</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>element<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">".dz-message"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1211"></td><td><pre>        <span class="token keyword">this</span><span class="token punctuation">.</span>element<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>Dropzone<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"&lt;div class=\"dz-default dz-message\">&lt;span>"</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>dictDefaultMessage <span class="token operator">+</span> <span class="token string">"&lt;/span>&lt;/div>"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1212"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1213"></td><td><pre></pre></td></tr><tr><td data-num="1214"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>clickableElements<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1215"></td><td><pre>        <span class="token keyword">var</span> <span class="token function-variable function">setupHiddenFileInput</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">setupHiddenFileInput</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1216"></td><td><pre>          <span class="token keyword">if</span> <span class="token punctuation">(</span>_this3<span class="token punctuation">.</span>hiddenFileInput<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1217"></td><td><pre>            _this3<span class="token punctuation">.</span>hiddenFileInput<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>_this3<span class="token punctuation">.</span>hiddenFileInput<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1218"></td><td><pre>          <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1219"></td><td><pre>          _this3<span class="token punctuation">.</span>hiddenFileInput <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"input"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1220"></td><td><pre>          _this3<span class="token punctuation">.</span>hiddenFileInput<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"type"</span><span class="token punctuation">,</span> <span class="token string">"file"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1221"></td><td><pre>          <span class="token keyword">if</span> <span class="token punctuation">(</span>_this3<span class="token punctuation">.</span>options<span class="token punctuation">.</span>maxFiles <span class="token operator">===</span> <span class="token keyword">null</span> <span class="token operator">||</span> _this3<span class="token punctuation">.</span>options<span class="token punctuation">.</span>maxFiles <span class="token operator">></span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1222"></td><td><pre>            _this3<span class="token punctuation">.</span>hiddenFileInput<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"multiple"</span><span class="token punctuation">,</span> <span class="token string">"multiple"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1223"></td><td><pre>          <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1224"></td><td><pre>          _this3<span class="token punctuation">.</span>hiddenFileInput<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">"dz-hidden-input"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1225"></td><td><pre></pre></td></tr><tr><td data-num="1226"></td><td><pre>          <span class="token keyword">if</span> <span class="token punctuation">(</span>_this3<span class="token punctuation">.</span>options<span class="token punctuation">.</span>acceptedFiles <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1227"></td><td><pre>            _this3<span class="token punctuation">.</span>hiddenFileInput<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"accept"</span><span class="token punctuation">,</span> _this3<span class="token punctuation">.</span>options<span class="token punctuation">.</span>acceptedFiles<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1228"></td><td><pre>          <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1229"></td><td><pre>          <span class="token keyword">if</span> <span class="token punctuation">(</span>_this3<span class="token punctuation">.</span>options<span class="token punctuation">.</span>capture <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1230"></td><td><pre>            _this3<span class="token punctuation">.</span>hiddenFileInput<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"capture"</span><span class="token punctuation">,</span> _this3<span class="token punctuation">.</span>options<span class="token punctuation">.</span>capture<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1231"></td><td><pre>          <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1232"></td><td><pre></pre></td></tr><tr><td data-num="1233"></td><td><pre>          <span class="token comment">// Not setting `display="none"` because some browsers don't accept clicks</span></pre></td></tr><tr><td data-num="1234"></td><td><pre>          <span class="token comment">// on elements that aren't displayed.</span></pre></td></tr><tr><td data-num="1235"></td><td><pre>          _this3<span class="token punctuation">.</span>hiddenFileInput<span class="token punctuation">.</span>style<span class="token punctuation">.</span>visibility <span class="token operator">=</span> <span class="token string">"hidden"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1236"></td><td><pre>          _this3<span class="token punctuation">.</span>hiddenFileInput<span class="token punctuation">.</span>style<span class="token punctuation">.</span>position <span class="token operator">=</span> <span class="token string">"absolute"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1237"></td><td><pre>          _this3<span class="token punctuation">.</span>hiddenFileInput<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> <span class="token string">"0"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1238"></td><td><pre>          _this3<span class="token punctuation">.</span>hiddenFileInput<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> <span class="token string">"0"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1239"></td><td><pre>          _this3<span class="token punctuation">.</span>hiddenFileInput<span class="token punctuation">.</span>style<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token string">"0"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1240"></td><td><pre>          _this3<span class="token punctuation">.</span>hiddenFileInput<span class="token punctuation">.</span>style<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token string">"0"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1241"></td><td><pre>          Dropzone<span class="token punctuation">.</span><span class="token function">getElement</span><span class="token punctuation">(</span>_this3<span class="token punctuation">.</span>options<span class="token punctuation">.</span>hiddenInputContainer<span class="token punctuation">,</span> <span class="token string">'hiddenInputContainer'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>_this3<span class="token punctuation">.</span>hiddenFileInput<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1242"></td><td><pre>          <span class="token keyword">return</span> _this3<span class="token punctuation">.</span>hiddenFileInput<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"change"</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1243"></td><td><pre>            <span class="token keyword">var</span> files <span class="token operator">=</span> _this3<span class="token punctuation">.</span>hiddenFileInput<span class="token punctuation">.</span>files<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1244"></td><td><pre></pre></td></tr><tr><td data-num="1245"></td><td><pre>            <span class="token keyword">if</span> <span class="token punctuation">(</span>files<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1246"></td><td><pre>              <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> _iterator10 <span class="token operator">=</span> files<span class="token punctuation">,</span> _isArray10 <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>_iterator10<span class="token punctuation">)</span><span class="token punctuation">,</span> _i10 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> _iterator10 <span class="token operator">=</span> _isArray10 <span class="token operator">?</span> _iterator10 <span class="token operator">:</span> _iterator10<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1247"></td><td><pre>                <span class="token keyword">var</span> _ref9<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1248"></td><td><pre></pre></td></tr><tr><td data-num="1249"></td><td><pre>                <span class="token keyword">if</span> <span class="token punctuation">(</span>_isArray10<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1250"></td><td><pre>                  <span class="token keyword">if</span> <span class="token punctuation">(</span>_i10 <span class="token operator">>=</span> _iterator10<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1251"></td><td><pre>                  _ref9 <span class="token operator">=</span> _iterator10<span class="token punctuation">[</span>_i10<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1252"></td><td><pre>                <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1253"></td><td><pre>                  _i10 <span class="token operator">=</span> _iterator10<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1254"></td><td><pre>                  <span class="token keyword">if</span> <span class="token punctuation">(</span>_i10<span class="token punctuation">.</span>done<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1255"></td><td><pre>                  _ref9 <span class="token operator">=</span> _i10<span class="token punctuation">.</span>value<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1256"></td><td><pre>                <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1257"></td><td><pre></pre></td></tr><tr><td data-num="1258"></td><td><pre>                <span class="token keyword">var</span> file <span class="token operator">=</span> _ref9<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1259"></td><td><pre></pre></td></tr><tr><td data-num="1260"></td><td><pre>                _this3<span class="token punctuation">.</span><span class="token function">addFile</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1261"></td><td><pre>              <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1262"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1263"></td><td><pre>            _this3<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">"addedfiles"</span><span class="token punctuation">,</span> files<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1264"></td><td><pre>            <span class="token keyword">return</span> <span class="token function">setupHiddenFileInput</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1265"></td><td><pre>          <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1266"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1267"></td><td><pre>        <span class="token function">setupHiddenFileInput</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1268"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1269"></td><td><pre></pre></td></tr><tr><td data-num="1270"></td><td><pre>      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token constant">URL</span> <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token constant">URL</span> <span class="token operator">!==</span> <span class="token keyword">null</span> <span class="token operator">?</span> window<span class="token punctuation">.</span><span class="token constant">URL</span> <span class="token operator">:</span> window<span class="token punctuation">.</span>webkitURL<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1271"></td><td><pre></pre></td></tr><tr><td data-num="1272"></td><td><pre>      <span class="token comment">// Setup all event listeners on the Dropzone object itself.</span></pre></td></tr><tr><td data-num="1273"></td><td><pre>      <span class="token comment">// They're not in @setupEventListeners() because they shouldn't be removed</span></pre></td></tr><tr><td data-num="1274"></td><td><pre>      <span class="token comment">// again when the dropzone gets disabled.</span></pre></td></tr><tr><td data-num="1275"></td><td><pre>      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> _iterator11 <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>events<span class="token punctuation">,</span> _isArray11 <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>_iterator11<span class="token punctuation">)</span><span class="token punctuation">,</span> _i11 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> _iterator11 <span class="token operator">=</span> _isArray11 <span class="token operator">?</span> _iterator11 <span class="token operator">:</span> _iterator11<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1276"></td><td><pre>        <span class="token keyword">var</span> _ref10<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1277"></td><td><pre></pre></td></tr><tr><td data-num="1278"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span>_isArray11<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1279"></td><td><pre>          <span class="token keyword">if</span> <span class="token punctuation">(</span>_i11 <span class="token operator">>=</span> _iterator11<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1280"></td><td><pre>          _ref10 <span class="token operator">=</span> _iterator11<span class="token punctuation">[</span>_i11<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1281"></td><td><pre>        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1282"></td><td><pre>          _i11 <span class="token operator">=</span> _iterator11<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1283"></td><td><pre>          <span class="token keyword">if</span> <span class="token punctuation">(</span>_i11<span class="token punctuation">.</span>done<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1284"></td><td><pre>          _ref10 <span class="token operator">=</span> _i11<span class="token punctuation">.</span>value<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1285"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1286"></td><td><pre></pre></td></tr><tr><td data-num="1287"></td><td><pre>        <span class="token keyword">var</span> eventName <span class="token operator">=</span> _ref10<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1288"></td><td><pre></pre></td></tr><tr><td data-num="1289"></td><td><pre>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>eventName<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">[</span>eventName<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1290"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1291"></td><td><pre></pre></td></tr><tr><td data-num="1292"></td><td><pre>      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">"uploadprogress"</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1293"></td><td><pre>        <span class="token keyword">return</span> _this3<span class="token punctuation">.</span><span class="token function">updateTotalUploadProgress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1294"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1295"></td><td><pre></pre></td></tr><tr><td data-num="1296"></td><td><pre>      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">"removedfile"</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1297"></td><td><pre>        <span class="token keyword">return</span> _this3<span class="token punctuation">.</span><span class="token function">updateTotalUploadProgress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1298"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1299"></td><td><pre></pre></td></tr><tr><td data-num="1300"></td><td><pre>      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">"canceled"</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">file</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1301"></td><td><pre>        <span class="token keyword">return</span> _this3<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">"complete"</span><span class="token punctuation">,</span> file<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1302"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1303"></td><td><pre></pre></td></tr><tr><td data-num="1304"></td><td><pre>      <span class="token comment">// Emit a `queuecomplete` event if all files finished uploading.</span></pre></td></tr><tr><td data-num="1305"></td><td><pre>      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">"complete"</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">file</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1306"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span>_this3<span class="token punctuation">.</span><span class="token function">getAddedFiles</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> _this3<span class="token punctuation">.</span><span class="token function">getUploadingFiles</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> _this3<span class="token punctuation">.</span><span class="token function">getQueuedFiles</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1307"></td><td><pre>          <span class="token comment">// This needs to be deferred so that `queuecomplete` really triggers after `complete`</span></pre></td></tr><tr><td data-num="1308"></td><td><pre>          <span class="token keyword">return</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1309"></td><td><pre>            <span class="token keyword">return</span> _this3<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">"queuecomplete"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1310"></td><td><pre>          <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1311"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1312"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1313"></td><td><pre></pre></td></tr><tr><td data-num="1314"></td><td><pre>      <span class="token keyword">var</span> <span class="token function-variable function">noPropagation</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">noPropagation</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1315"></td><td><pre>        e<span class="token punctuation">.</span><span class="token function">stopPropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1316"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>preventDefault<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1317"></td><td><pre>          <span class="token keyword">return</span> e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1318"></td><td><pre>        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1319"></td><td><pre>          <span class="token keyword">return</span> e<span class="token punctuation">.</span>returnValue <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1320"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1321"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1322"></td><td><pre></pre></td></tr><tr><td data-num="1323"></td><td><pre>      <span class="token comment">// Create the listeners</span></pre></td></tr><tr><td data-num="1324"></td><td><pre>      <span class="token keyword">this</span><span class="token punctuation">.</span>listeners <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1325"></td><td><pre>        element<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>element<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="1326"></td><td><pre>        events<span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1327"></td><td><pre>          <span class="token string">"dragstart"</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">dragstart</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1328"></td><td><pre>            <span class="token keyword">return</span> _this3<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">"dragstart"</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1329"></td><td><pre>          <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="1330"></td><td><pre>          <span class="token string">"dragenter"</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">dragenter</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1331"></td><td><pre>            <span class="token function">noPropagation</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1332"></td><td><pre>            <span class="token keyword">return</span> _this3<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">"dragenter"</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1333"></td><td><pre>          <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="1334"></td><td><pre>          <span class="token string">"dragover"</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">dragover</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1335"></td><td><pre>            <span class="token comment">// Makes it possible to drag files from chrome's download bar</span></pre></td></tr><tr><td data-num="1336"></td><td><pre>            <span class="token comment">// http://stackoverflow.com/questions/19526430/drag-and-drop-file-uploads-from-chrome-downloads-bar</span></pre></td></tr><tr><td data-num="1337"></td><td><pre>            <span class="token comment">// Try is required to prevent bug in Internet Explorer 11 (SCRIPT65535 exception)</span></pre></td></tr><tr><td data-num="1338"></td><td><pre>            <span class="token keyword">var</span> efct <span class="token operator">=</span> <span class="token keyword">void</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1339"></td><td><pre>            <span class="token keyword">try</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1340"></td><td><pre>              efct <span class="token operator">=</span> e<span class="token punctuation">.</span>dataTransfer<span class="token punctuation">.</span>effectAllowed<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1341"></td><td><pre>            <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1342"></td><td><pre>            e<span class="token punctuation">.</span>dataTransfer<span class="token punctuation">.</span>dropEffect <span class="token operator">=</span> <span class="token string">'move'</span> <span class="token operator">===</span> efct <span class="token operator">||</span> <span class="token string">'linkMove'</span> <span class="token operator">===</span> efct <span class="token operator">?</span> <span class="token string">'move'</span> <span class="token operator">:</span> <span class="token string">'copy'</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1343"></td><td><pre></pre></td></tr><tr><td data-num="1344"></td><td><pre>            <span class="token function">noPropagation</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1345"></td><td><pre>            <span class="token keyword">return</span> _this3<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">"dragover"</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1346"></td><td><pre>          <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="1347"></td><td><pre>          <span class="token string">"dragleave"</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">dragleave</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1348"></td><td><pre>            <span class="token keyword">return</span> _this3<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">"dragleave"</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1349"></td><td><pre>          <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="1350"></td><td><pre>          <span class="token string">"drop"</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">drop</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1351"></td><td><pre>            <span class="token function">noPropagation</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1352"></td><td><pre>            <span class="token keyword">return</span> _this3<span class="token punctuation">.</span><span class="token function">drop</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1353"></td><td><pre>          <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="1354"></td><td><pre>          <span class="token string">"dragend"</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">dragend</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1355"></td><td><pre>            <span class="token keyword">return</span> _this3<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">"dragend"</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1356"></td><td><pre>          <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1357"></td><td><pre></pre></td></tr><tr><td data-num="1358"></td><td><pre>          <span class="token comment">// This is disabled right now, because the browsers don't implement it properly.</span></pre></td></tr><tr><td data-num="1359"></td><td><pre>          <span class="token comment">// "paste": (e) =></span></pre></td></tr><tr><td data-num="1360"></td><td><pre>          <span class="token comment">//   noPropagation e</span></pre></td></tr><tr><td data-num="1361"></td><td><pre>          <span class="token comment">//   @paste e</span></pre></td></tr><tr><td data-num="1362"></td><td><pre>        <span class="token punctuation">&#125;</span> <span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1363"></td><td><pre></pre></td></tr><tr><td data-num="1364"></td><td><pre>      <span class="token keyword">this</span><span class="token punctuation">.</span>clickableElements<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">clickableElement</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1365"></td><td><pre>        <span class="token keyword">return</span> _this3<span class="token punctuation">.</span>listeners<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1366"></td><td><pre>          element<span class="token operator">:</span> clickableElement<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="1367"></td><td><pre>          events<span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1368"></td><td><pre>            <span class="token string">"click"</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">click</span><span class="token punctuation">(</span><span class="token parameter">evt</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1369"></td><td><pre>              <span class="token comment">// Only the actual dropzone or the message element should trigger file selection</span></pre></td></tr><tr><td data-num="1370"></td><td><pre>              <span class="token keyword">if</span> <span class="token punctuation">(</span>clickableElement <span class="token operator">!==</span> _this3<span class="token punctuation">.</span>element <span class="token operator">||</span> evt<span class="token punctuation">.</span>target <span class="token operator">===</span> _this3<span class="token punctuation">.</span>element <span class="token operator">||</span> Dropzone<span class="token punctuation">.</span><span class="token function">elementInside</span><span class="token punctuation">(</span>evt<span class="token punctuation">.</span>target<span class="token punctuation">,</span> _this3<span class="token punctuation">.</span>element<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">".dz-message"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1371"></td><td><pre>                _this3<span class="token punctuation">.</span>hiddenFileInput<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Forward the click</span></pre></td></tr><tr><td data-num="1372"></td><td><pre>              <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1373"></td><td><pre>              <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1374"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1375"></td><td><pre>          <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1376"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1377"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1378"></td><td><pre></pre></td></tr><tr><td data-num="1379"></td><td><pre>      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">enable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1380"></td><td><pre></pre></td></tr><tr><td data-num="1381"></td><td><pre>      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1382"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1383"></td><td><pre></pre></td></tr><tr><td data-num="1384"></td><td><pre>    <span class="token comment">// Not fully tested yet</span></pre></td></tr><tr><td data-num="1385"></td><td><pre></pre></td></tr><tr><td data-num="1386"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1387"></td><td><pre>    key<span class="token operator">:</span> <span class="token string">"destroy"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="1388"></td><td><pre>    <span class="token function-variable function">value</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1389"></td><td><pre>      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">disable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1390"></td><td><pre>      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">removeAllFiles</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1391"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>hiddenFileInput <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">?</span> <span class="token keyword">this</span><span class="token punctuation">.</span>hiddenFileInput<span class="token punctuation">.</span>parentNode <span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1392"></td><td><pre>        <span class="token keyword">this</span><span class="token punctuation">.</span>hiddenFileInput<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>hiddenFileInput<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1393"></td><td><pre>        <span class="token keyword">this</span><span class="token punctuation">.</span>hiddenFileInput <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1394"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1395"></td><td><pre>      <span class="token keyword">delete</span> <span class="token keyword">this</span><span class="token punctuation">.</span>element<span class="token punctuation">.</span>dropzone<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1396"></td><td><pre>      <span class="token keyword">return</span> Dropzone<span class="token punctuation">.</span>instances<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>Dropzone<span class="token punctuation">.</span>instances<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1397"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1398"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1399"></td><td><pre>    key<span class="token operator">:</span> <span class="token string">"updateTotalUploadProgress"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="1400"></td><td><pre>    <span class="token function-variable function">value</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">updateTotalUploadProgress</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1401"></td><td><pre>      <span class="token keyword">var</span> totalUploadProgress <span class="token operator">=</span> <span class="token keyword">void</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1402"></td><td><pre>      <span class="token keyword">var</span> totalBytesSent <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1403"></td><td><pre>      <span class="token keyword">var</span> totalBytes <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1404"></td><td><pre></pre></td></tr><tr><td data-num="1405"></td><td><pre>      <span class="token keyword">var</span> activeFiles <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getActiveFiles</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1406"></td><td><pre></pre></td></tr><tr><td data-num="1407"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span>activeFiles<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1408"></td><td><pre>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> _iterator12 <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getActiveFiles</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> _isArray12 <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>_iterator12<span class="token punctuation">)</span><span class="token punctuation">,</span> _i12 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> _iterator12 <span class="token operator">=</span> _isArray12 <span class="token operator">?</span> _iterator12 <span class="token operator">:</span> _iterator12<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1409"></td><td><pre>          <span class="token keyword">var</span> _ref11<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1410"></td><td><pre></pre></td></tr><tr><td data-num="1411"></td><td><pre>          <span class="token keyword">if</span> <span class="token punctuation">(</span>_isArray12<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1412"></td><td><pre>            <span class="token keyword">if</span> <span class="token punctuation">(</span>_i12 <span class="token operator">>=</span> _iterator12<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1413"></td><td><pre>            _ref11 <span class="token operator">=</span> _iterator12<span class="token punctuation">[</span>_i12<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1414"></td><td><pre>          <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1415"></td><td><pre>            _i12 <span class="token operator">=</span> _iterator12<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1416"></td><td><pre>            <span class="token keyword">if</span> <span class="token punctuation">(</span>_i12<span class="token punctuation">.</span>done<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1417"></td><td><pre>            _ref11 <span class="token operator">=</span> _i12<span class="token punctuation">.</span>value<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1418"></td><td><pre>          <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1419"></td><td><pre></pre></td></tr><tr><td data-num="1420"></td><td><pre>          <span class="token keyword">var</span> file <span class="token operator">=</span> _ref11<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1421"></td><td><pre></pre></td></tr><tr><td data-num="1422"></td><td><pre>          totalBytesSent <span class="token operator">+=</span> file<span class="token punctuation">.</span>upload<span class="token punctuation">.</span>bytesSent<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1423"></td><td><pre>          totalBytes <span class="token operator">+=</span> file<span class="token punctuation">.</span>upload<span class="token punctuation">.</span>total<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1424"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1425"></td><td><pre>        totalUploadProgress <span class="token operator">=</span> <span class="token number">100</span> <span class="token operator">*</span> totalBytesSent <span class="token operator">/</span> totalBytes<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1426"></td><td><pre>      <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1427"></td><td><pre>        totalUploadProgress <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1428"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1429"></td><td><pre></pre></td></tr><tr><td data-num="1430"></td><td><pre>      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">"totaluploadprogress"</span><span class="token punctuation">,</span> totalUploadProgress<span class="token punctuation">,</span> totalBytes<span class="token punctuation">,</span> totalBytesSent<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1431"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1432"></td><td><pre></pre></td></tr><tr><td data-num="1433"></td><td><pre>    <span class="token comment">// @options.paramName can be a function taking one parameter rather than a string.</span></pre></td></tr><tr><td data-num="1434"></td><td><pre>    <span class="token comment">// A parameter name for a file is obtained simply by calling this with an index number.</span></pre></td></tr><tr><td data-num="1435"></td><td><pre></pre></td></tr><tr><td data-num="1436"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1437"></td><td><pre>    key<span class="token operator">:</span> <span class="token string">"_getParamName"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="1438"></td><td><pre>    <span class="token function-variable function">value</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">_getParamName</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1439"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>paramName <span class="token operator">===</span> <span class="token string">"function"</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1440"></td><td><pre>        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span><span class="token function">paramName</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1441"></td><td><pre>      <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1442"></td><td><pre>        <span class="token keyword">return</span> <span class="token string">""</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>paramName <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>uploadMultiple <span class="token operator">?</span> <span class="token string">"["</span> <span class="token operator">+</span> n <span class="token operator">+</span> <span class="token string">"]"</span> <span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1443"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1444"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1445"></td><td><pre></pre></td></tr><tr><td data-num="1446"></td><td><pre>    <span class="token comment">// If @options.renameFile is a function,</span></pre></td></tr><tr><td data-num="1447"></td><td><pre>    <span class="token comment">// the function will be used to rename the file.name before appending it to the formData</span></pre></td></tr><tr><td data-num="1448"></td><td><pre></pre></td></tr><tr><td data-num="1449"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1450"></td><td><pre>    key<span class="token operator">:</span> <span class="token string">"_renameFile"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="1451"></td><td><pre>    <span class="token function-variable function">value</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">_renameFile</span><span class="token punctuation">(</span><span class="token parameter">file</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1452"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>renameFile <span class="token operator">!==</span> <span class="token string">"function"</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1453"></td><td><pre>        <span class="token keyword">return</span> file<span class="token punctuation">.</span>name<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1454"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1455"></td><td><pre>      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span><span class="token function">renameFile</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1456"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1457"></td><td><pre></pre></td></tr><tr><td data-num="1458"></td><td><pre>    <span class="token comment">// Returns a form that can be used as fallback if the browser does not support DragnDrop</span></pre></td></tr><tr><td data-num="1459"></td><td><pre>    <span class="token comment">//</span></pre></td></tr><tr><td data-num="1460"></td><td><pre>    <span class="token comment">// If the dropzone is already a form, only the input field and button are returned. Otherwise a complete form element is provided.</span></pre></td></tr><tr><td data-num="1461"></td><td><pre>    <span class="token comment">// This code has to pass in IE7 :(</span></pre></td></tr><tr><td data-num="1462"></td><td><pre></pre></td></tr><tr><td data-num="1463"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1464"></td><td><pre>    key<span class="token operator">:</span> <span class="token string">"getFallbackForm"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="1465"></td><td><pre>    <span class="token function-variable function">value</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">getFallbackForm</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1466"></td><td><pre>      <span class="token keyword">var</span> existingFallback <span class="token operator">=</span> <span class="token keyword">void</span> <span class="token number">0</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="1467"></td><td><pre>          form <span class="token operator">=</span> <span class="token keyword">void</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1468"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span>existingFallback <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getExistingFallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1469"></td><td><pre>        <span class="token keyword">return</span> existingFallback<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1470"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1471"></td><td><pre></pre></td></tr><tr><td data-num="1472"></td><td><pre>      <span class="token keyword">var</span> fieldsString <span class="token operator">=</span> <span class="token string">"&lt;div class=\"dz-fallback\">"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1473"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>dictFallbackText<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1474"></td><td><pre>        fieldsString <span class="token operator">+=</span> <span class="token string">"&lt;p>"</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>dictFallbackText <span class="token operator">+</span> <span class="token string">"&lt;/p>"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1475"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1476"></td><td><pre>      fieldsString <span class="token operator">+=</span> <span class="token string">"&lt;input type=\"file\" name=\""</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_getParamName</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\" "</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>uploadMultiple <span class="token operator">?</span> <span class="token string">'multiple="multiple"'</span> <span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" />&lt;input type=\"submit\" value=\"Upload!\">&lt;/div>"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1477"></td><td><pre></pre></td></tr><tr><td data-num="1478"></td><td><pre>      <span class="token keyword">var</span> fields <span class="token operator">=</span> Dropzone<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span>fieldsString<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1479"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>element<span class="token punctuation">.</span>tagName <span class="token operator">!==</span> <span class="token string">"FORM"</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1480"></td><td><pre>        form <span class="token operator">=</span> Dropzone<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"&lt;form action=\""</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>url <span class="token operator">+</span> <span class="token string">"\" enctype=\"multipart/form-data\" method=\""</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>method <span class="token operator">+</span> <span class="token string">"\">&lt;/form>"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1481"></td><td><pre>        form<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>fields<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1482"></td><td><pre>      <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1483"></td><td><pre>        <span class="token comment">// Make sure that the enctype and method attributes are set properly</span></pre></td></tr><tr><td data-num="1484"></td><td><pre>        <span class="token keyword">this</span><span class="token punctuation">.</span>element<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"enctype"</span><span class="token punctuation">,</span> <span class="token string">"multipart/form-data"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1485"></td><td><pre>        <span class="token keyword">this</span><span class="token punctuation">.</span>element<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"method"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>method<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1486"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1487"></td><td><pre>      <span class="token keyword">return</span> form <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">?</span> form <span class="token operator">:</span> fields<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1488"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1489"></td><td><pre></pre></td></tr><tr><td data-num="1490"></td><td><pre>    <span class="token comment">// Returns the fallback elements if they exist already</span></pre></td></tr><tr><td data-num="1491"></td><td><pre>    <span class="token comment">//</span></pre></td></tr><tr><td data-num="1492"></td><td><pre>    <span class="token comment">// This code has to pass in IE7 :(</span></pre></td></tr><tr><td data-num="1493"></td><td><pre></pre></td></tr><tr><td data-num="1494"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1495"></td><td><pre>    key<span class="token operator">:</span> <span class="token string">"getExistingFallback"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="1496"></td><td><pre>    <span class="token function-variable function">value</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">getExistingFallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1497"></td><td><pre>      <span class="token keyword">var</span> <span class="token function-variable function">getFallback</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">getFallback</span><span class="token punctuation">(</span><span class="token parameter">elements</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1498"></td><td><pre>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> _iterator13 <span class="token operator">=</span> elements<span class="token punctuation">,</span> _isArray13 <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>_iterator13<span class="token punctuation">)</span><span class="token punctuation">,</span> _i13 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> _iterator13 <span class="token operator">=</span> _isArray13 <span class="token operator">?</span> _iterator13 <span class="token operator">:</span> _iterator13<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1499"></td><td><pre>          <span class="token keyword">var</span> _ref12<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1500"></td><td><pre></pre></td></tr><tr><td data-num="1501"></td><td><pre>          <span class="token keyword">if</span> <span class="token punctuation">(</span>_isArray13<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1502"></td><td><pre>            <span class="token keyword">if</span> <span class="token punctuation">(</span>_i13 <span class="token operator">>=</span> _iterator13<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1503"></td><td><pre>            _ref12 <span class="token operator">=</span> _iterator13<span class="token punctuation">[</span>_i13<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1504"></td><td><pre>          <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1505"></td><td><pre>            _i13 <span class="token operator">=</span> _iterator13<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1506"></td><td><pre>            <span class="token keyword">if</span> <span class="token punctuation">(</span>_i13<span class="token punctuation">.</span>done<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1507"></td><td><pre>            _ref12 <span class="token operator">=</span> _i13<span class="token punctuation">.</span>value<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1508"></td><td><pre>          <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1509"></td><td><pre></pre></td></tr><tr><td data-num="1510"></td><td><pre>          <span class="token keyword">var</span> el <span class="token operator">=</span> _ref12<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1511"></td><td><pre></pre></td></tr><tr><td data-num="1512"></td><td><pre>          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(^| )fallback($| )</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>el<span class="token punctuation">.</span>className<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1513"></td><td><pre>            <span class="token keyword">return</span> el<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1514"></td><td><pre>          <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1515"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1516"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1517"></td><td><pre></pre></td></tr><tr><td data-num="1518"></td><td><pre>      <span class="token keyword">var</span> _arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"div"</span><span class="token punctuation">,</span> <span class="token string">"form"</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1519"></td><td><pre>      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> _i14 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> _i14 <span class="token operator">&lt;</span> _arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> _i14<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1520"></td><td><pre>        <span class="token keyword">var</span> tagName <span class="token operator">=</span> _arr<span class="token punctuation">[</span>_i14<span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1521"></td><td><pre>        <span class="token keyword">var</span> fallback<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1522"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span>fallback <span class="token operator">=</span> <span class="token function">getFallback</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>element<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span>tagName<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1523"></td><td><pre>          <span class="token keyword">return</span> fallback<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1524"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1525"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1526"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1527"></td><td><pre></pre></td></tr><tr><td data-num="1528"></td><td><pre>    <span class="token comment">// Activates all listeners stored in @listeners</span></pre></td></tr><tr><td data-num="1529"></td><td><pre></pre></td></tr><tr><td data-num="1530"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1531"></td><td><pre>    key<span class="token operator">:</span> <span class="token string">"setupEventListeners"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="1532"></td><td><pre>    <span class="token function-variable function">value</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">setupEventListeners</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1533"></td><td><pre>      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>listeners<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elementListeners</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1534"></td><td><pre>        <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1535"></td><td><pre>          <span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1536"></td><td><pre>          <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> event <span class="token keyword">in</span> elementListeners<span class="token punctuation">.</span>events<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1537"></td><td><pre>            <span class="token keyword">var</span> listener <span class="token operator">=</span> elementListeners<span class="token punctuation">.</span>events<span class="token punctuation">[</span>event<span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1538"></td><td><pre>            result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>elementListeners<span class="token punctuation">.</span>element<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>event<span class="token punctuation">,</span> listener<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1539"></td><td><pre>          <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1540"></td><td><pre>          <span class="token keyword">return</span> result<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1541"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1542"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1543"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1544"></td><td><pre></pre></td></tr><tr><td data-num="1545"></td><td><pre>    <span class="token comment">// Deactivates all listeners stored in @listeners</span></pre></td></tr><tr><td data-num="1546"></td><td><pre></pre></td></tr><tr><td data-num="1547"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1548"></td><td><pre>    key<span class="token operator">:</span> <span class="token string">"removeEventListeners"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="1549"></td><td><pre>    <span class="token function-variable function">value</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">removeEventListeners</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1550"></td><td><pre>      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>listeners<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elementListeners</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1551"></td><td><pre>        <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1552"></td><td><pre>          <span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1553"></td><td><pre>          <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> event <span class="token keyword">in</span> elementListeners<span class="token punctuation">.</span>events<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1554"></td><td><pre>            <span class="token keyword">var</span> listener <span class="token operator">=</span> elementListeners<span class="token punctuation">.</span>events<span class="token punctuation">[</span>event<span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1555"></td><td><pre>            result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>elementListeners<span class="token punctuation">.</span>element<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span>event<span class="token punctuation">,</span> listener<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1556"></td><td><pre>          <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1557"></td><td><pre>          <span class="token keyword">return</span> result<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1558"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1559"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1560"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1561"></td><td><pre></pre></td></tr><tr><td data-num="1562"></td><td><pre>    <span class="token comment">// Removes all event listeners and cancels all files in the queue or being processed.</span></pre></td></tr><tr><td data-num="1563"></td><td><pre></pre></td></tr><tr><td data-num="1564"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1565"></td><td><pre>    key<span class="token operator">:</span> <span class="token string">"disable"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="1566"></td><td><pre>    <span class="token function-variable function">value</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">disable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1567"></td><td><pre>      <span class="token keyword">var</span> _this4 <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1568"></td><td><pre></pre></td></tr><tr><td data-num="1569"></td><td><pre>      <span class="token keyword">this</span><span class="token punctuation">.</span>clickableElements<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">element</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1570"></td><td><pre>        <span class="token keyword">return</span> element<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">"dz-clickable"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1571"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1572"></td><td><pre>      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">removeEventListeners</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1573"></td><td><pre>      <span class="token keyword">this</span><span class="token punctuation">.</span>disabled <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1574"></td><td><pre></pre></td></tr><tr><td data-num="1575"></td><td><pre>      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>files<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">file</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1576"></td><td><pre>        <span class="token keyword">return</span> _this4<span class="token punctuation">.</span><span class="token function">cancelUpload</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1577"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1578"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1579"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1580"></td><td><pre>    key<span class="token operator">:</span> <span class="token string">"enable"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="1581"></td><td><pre>    <span class="token function-variable function">value</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">enable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1582"></td><td><pre>      <span class="token keyword">delete</span> <span class="token keyword">this</span><span class="token punctuation">.</span>disabled<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1583"></td><td><pre>      <span class="token keyword">this</span><span class="token punctuation">.</span>clickableElements<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">element</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1584"></td><td><pre>        <span class="token keyword">return</span> element<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"dz-clickable"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1585"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1586"></td><td><pre>      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setupEventListeners</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1587"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1588"></td><td><pre></pre></td></tr><tr><td data-num="1589"></td><td><pre>    <span class="token comment">// Returns a nicely formatted filesize</span></pre></td></tr><tr><td data-num="1590"></td><td><pre></pre></td></tr><tr><td data-num="1591"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1592"></td><td><pre>    key<span class="token operator">:</span> <span class="token string">"filesize"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="1593"></td><td><pre>    <span class="token function-variable function">value</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">filesize</span><span class="token punctuation">(</span><span class="token parameter">size</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1594"></td><td><pre>      <span class="token keyword">var</span> selectedSize <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1595"></td><td><pre>      <span class="token keyword">var</span> selectedUnit <span class="token operator">=</span> <span class="token string">"b"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1596"></td><td><pre></pre></td></tr><tr><td data-num="1597"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span>size <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1598"></td><td><pre>        <span class="token keyword">var</span> units <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'tb'</span><span class="token punctuation">,</span> <span class="token string">'gb'</span><span class="token punctuation">,</span> <span class="token string">'mb'</span><span class="token punctuation">,</span> <span class="token string">'kb'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1599"></td><td><pre></pre></td></tr><tr><td data-num="1600"></td><td><pre>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> units<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1601"></td><td><pre>          <span class="token keyword">var</span> unit <span class="token operator">=</span> units<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1602"></td><td><pre>          <span class="token keyword">var</span> cutoff <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>filesizeBase<span class="token punctuation">,</span> <span class="token number">4</span> <span class="token operator">-</span> i<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">10</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1603"></td><td><pre></pre></td></tr><tr><td data-num="1604"></td><td><pre>          <span class="token keyword">if</span> <span class="token punctuation">(</span>size <span class="token operator">>=</span> cutoff<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1605"></td><td><pre>            selectedSize <span class="token operator">=</span> size <span class="token operator">/</span> Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>filesizeBase<span class="token punctuation">,</span> <span class="token number">4</span> <span class="token operator">-</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1606"></td><td><pre>            selectedUnit <span class="token operator">=</span> unit<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1607"></td><td><pre>            <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1608"></td><td><pre>          <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1609"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1610"></td><td><pre></pre></td></tr><tr><td data-num="1611"></td><td><pre>        selectedSize <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span><span class="token number">10</span> <span class="token operator">*</span> selectedSize<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">10</span><span class="token punctuation">;</span> <span class="token comment">// Cutting of digits</span></pre></td></tr><tr><td data-num="1612"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1613"></td><td><pre></pre></td></tr><tr><td data-num="1614"></td><td><pre>      <span class="token keyword">return</span> <span class="token string">"&lt;strong>"</span> <span class="token operator">+</span> selectedSize <span class="token operator">+</span> <span class="token string">"&lt;/strong> "</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>dictFileSizeUnits<span class="token punctuation">[</span>selectedUnit<span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1615"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1616"></td><td><pre></pre></td></tr><tr><td data-num="1617"></td><td><pre>    <span class="token comment">// Adds or removes the `dz-max-files-reached` class from the form.</span></pre></td></tr><tr><td data-num="1618"></td><td><pre></pre></td></tr><tr><td data-num="1619"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1620"></td><td><pre>    key<span class="token operator">:</span> <span class="token string">"_updateMaxFilesReachedClass"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="1621"></td><td><pre>    <span class="token function-variable function">value</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">_updateMaxFilesReachedClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1622"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>maxFiles <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getAcceptedFiles</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token operator">>=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>maxFiles<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1623"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getAcceptedFiles</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>maxFiles<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1624"></td><td><pre>          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'maxfilesreached'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>files<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1625"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1626"></td><td><pre>        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>element<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"dz-max-files-reached"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1627"></td><td><pre>      <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1628"></td><td><pre>        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>element<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">"dz-max-files-reached"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1629"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1630"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1631"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1632"></td><td><pre>    key<span class="token operator">:</span> <span class="token string">"drop"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="1633"></td><td><pre>    <span class="token function-variable function">value</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">drop</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1634"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>e<span class="token punctuation">.</span>dataTransfer<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1635"></td><td><pre>        <span class="token keyword">return</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1636"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1637"></td><td><pre>      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">"drop"</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1638"></td><td><pre></pre></td></tr><tr><td data-num="1639"></td><td><pre>      <span class="token comment">// Convert the FileList to an Array</span></pre></td></tr><tr><td data-num="1640"></td><td><pre>      <span class="token comment">// This is necessary for IE11</span></pre></td></tr><tr><td data-num="1641"></td><td><pre>      <span class="token keyword">var</span> files <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1642"></td><td><pre>      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> e<span class="token punctuation">.</span>dataTransfer<span class="token punctuation">.</span>files<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1643"></td><td><pre>        files<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> e<span class="token punctuation">.</span>dataTransfer<span class="token punctuation">.</span>files<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1644"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1645"></td><td><pre></pre></td></tr><tr><td data-num="1646"></td><td><pre>      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">"addedfiles"</span><span class="token punctuation">,</span> files<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1647"></td><td><pre></pre></td></tr><tr><td data-num="1648"></td><td><pre>      <span class="token comment">// Even if it's a folder, files.length will contain the folders.</span></pre></td></tr><tr><td data-num="1649"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span>files<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1650"></td><td><pre>        <span class="token keyword">var</span> items <span class="token operator">=</span> e<span class="token punctuation">.</span>dataTransfer<span class="token punctuation">.</span>items<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1651"></td><td><pre></pre></td></tr><tr><td data-num="1652"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span>items <span class="token operator">&amp;&amp;</span> items<span class="token punctuation">.</span>length <span class="token operator">&amp;&amp;</span> items<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>webkitGetAsEntry <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1653"></td><td><pre>          <span class="token comment">// The browser supports dropping of folders, so handle items instead of files</span></pre></td></tr><tr><td data-num="1654"></td><td><pre>          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_addFilesFromItems</span><span class="token punctuation">(</span>items<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1655"></td><td><pre>        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1656"></td><td><pre>          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleFiles</span><span class="token punctuation">(</span>files<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1657"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1658"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1659"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1660"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1661"></td><td><pre>    key<span class="token operator">:</span> <span class="token string">"paste"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="1662"></td><td><pre>    <span class="token function-variable function">value</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">paste</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1663"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">__guard__</span><span class="token punctuation">(</span>e <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">?</span> e<span class="token punctuation">.</span>clipboardData <span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1664"></td><td><pre>        <span class="token keyword">return</span> x<span class="token punctuation">.</span>items<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1665"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1666"></td><td><pre>        <span class="token keyword">return</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1667"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1668"></td><td><pre></pre></td></tr><tr><td data-num="1669"></td><td><pre>      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">"paste"</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1670"></td><td><pre>      <span class="token keyword">var</span> items <span class="token operator">=</span> e<span class="token punctuation">.</span>clipboardData<span class="token punctuation">.</span>items<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1671"></td><td><pre></pre></td></tr><tr><td data-num="1672"></td><td><pre></pre></td></tr><tr><td data-num="1673"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span>items<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1674"></td><td><pre>        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_addFilesFromItems</span><span class="token punctuation">(</span>items<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1675"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1676"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1677"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1678"></td><td><pre>    key<span class="token operator">:</span> <span class="token string">"handleFiles"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="1679"></td><td><pre>    <span class="token function-variable function">value</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">handleFiles</span><span class="token punctuation">(</span><span class="token parameter">files</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1680"></td><td><pre>      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> _iterator14 <span class="token operator">=</span> files<span class="token punctuation">,</span> _isArray14 <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>_iterator14<span class="token punctuation">)</span><span class="token punctuation">,</span> _i15 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> _iterator14 <span class="token operator">=</span> _isArray14 <span class="token operator">?</span> _iterator14 <span class="token operator">:</span> _iterator14<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1681"></td><td><pre>        <span class="token keyword">var</span> _ref13<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1682"></td><td><pre></pre></td></tr><tr><td data-num="1683"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span>_isArray14<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1684"></td><td><pre>          <span class="token keyword">if</span> <span class="token punctuation">(</span>_i15 <span class="token operator">>=</span> _iterator14<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1685"></td><td><pre>          _ref13 <span class="token operator">=</span> _iterator14<span class="token punctuation">[</span>_i15<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1686"></td><td><pre>        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1687"></td><td><pre>          _i15 <span class="token operator">=</span> _iterator14<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1688"></td><td><pre>          <span class="token keyword">if</span> <span class="token punctuation">(</span>_i15<span class="token punctuation">.</span>done<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1689"></td><td><pre>          _ref13 <span class="token operator">=</span> _i15<span class="token punctuation">.</span>value<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1690"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1691"></td><td><pre></pre></td></tr><tr><td data-num="1692"></td><td><pre>        <span class="token keyword">var</span> file <span class="token operator">=</span> _ref13<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1693"></td><td><pre></pre></td></tr><tr><td data-num="1694"></td><td><pre>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">addFile</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1695"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1696"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1697"></td><td><pre></pre></td></tr><tr><td data-num="1698"></td><td><pre>    <span class="token comment">// When a folder is dropped (or files are pasted), items must be handled</span></pre></td></tr><tr><td data-num="1699"></td><td><pre>    <span class="token comment">// instead of files.</span></pre></td></tr><tr><td data-num="1700"></td><td><pre></pre></td></tr><tr><td data-num="1701"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1702"></td><td><pre>    key<span class="token operator">:</span> <span class="token string">"_addFilesFromItems"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="1703"></td><td><pre>    <span class="token function-variable function">value</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">_addFilesFromItems</span><span class="token punctuation">(</span><span class="token parameter">items</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1704"></td><td><pre>      <span class="token keyword">var</span> _this5 <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1705"></td><td><pre></pre></td></tr><tr><td data-num="1706"></td><td><pre>      <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1707"></td><td><pre>        <span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1708"></td><td><pre>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> _iterator15 <span class="token operator">=</span> items<span class="token punctuation">,</span> _isArray15 <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>_iterator15<span class="token punctuation">)</span><span class="token punctuation">,</span> _i16 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> _iterator15 <span class="token operator">=</span> _isArray15 <span class="token operator">?</span> _iterator15 <span class="token operator">:</span> _iterator15<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1709"></td><td><pre>          <span class="token keyword">var</span> _ref14<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1710"></td><td><pre></pre></td></tr><tr><td data-num="1711"></td><td><pre>          <span class="token keyword">if</span> <span class="token punctuation">(</span>_isArray15<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1712"></td><td><pre>            <span class="token keyword">if</span> <span class="token punctuation">(</span>_i16 <span class="token operator">>=</span> _iterator15<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1713"></td><td><pre>            _ref14 <span class="token operator">=</span> _iterator15<span class="token punctuation">[</span>_i16<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1714"></td><td><pre>          <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1715"></td><td><pre>            _i16 <span class="token operator">=</span> _iterator15<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1716"></td><td><pre>            <span class="token keyword">if</span> <span class="token punctuation">(</span>_i16<span class="token punctuation">.</span>done<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1717"></td><td><pre>            _ref14 <span class="token operator">=</span> _i16<span class="token punctuation">.</span>value<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1718"></td><td><pre>          <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1719"></td><td><pre></pre></td></tr><tr><td data-num="1720"></td><td><pre>          <span class="token keyword">var</span> item <span class="token operator">=</span> _ref14<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1721"></td><td><pre></pre></td></tr><tr><td data-num="1722"></td><td><pre>          <span class="token keyword">var</span> entry<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1723"></td><td><pre>          <span class="token keyword">if</span> <span class="token punctuation">(</span>item<span class="token punctuation">.</span>webkitGetAsEntry <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>entry <span class="token operator">=</span> item<span class="token punctuation">.</span><span class="token function">webkitGetAsEntry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1724"></td><td><pre>            <span class="token keyword">if</span> <span class="token punctuation">(</span>entry<span class="token punctuation">.</span>isFile<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1725"></td><td><pre>              result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>_this5<span class="token punctuation">.</span><span class="token function">addFile</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span><span class="token function">getAsFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1726"></td><td><pre>            <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>entry<span class="token punctuation">.</span>isDirectory<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1727"></td><td><pre>              <span class="token comment">// Append all files from that directory to files</span></pre></td></tr><tr><td data-num="1728"></td><td><pre>              result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>_this5<span class="token punctuation">.</span><span class="token function">_addFilesFromDirectory</span><span class="token punctuation">(</span>entry<span class="token punctuation">,</span> entry<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1729"></td><td><pre>            <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1730"></td><td><pre>              result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1731"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1732"></td><td><pre>          <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>item<span class="token punctuation">.</span>getAsFile <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1733"></td><td><pre>            <span class="token keyword">if</span> <span class="token punctuation">(</span>item<span class="token punctuation">.</span>kind <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> item<span class="token punctuation">.</span>kind <span class="token operator">===</span> <span class="token string">"file"</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1734"></td><td><pre>              result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>_this5<span class="token punctuation">.</span><span class="token function">addFile</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span><span class="token function">getAsFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1735"></td><td><pre>            <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1736"></td><td><pre>              result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1737"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1738"></td><td><pre>          <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1739"></td><td><pre>            result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1740"></td><td><pre>          <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1741"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1742"></td><td><pre>        <span class="token keyword">return</span> result<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1743"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1744"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1745"></td><td><pre></pre></td></tr><tr><td data-num="1746"></td><td><pre>    <span class="token comment">// Goes through the directory, and adds each file it finds recursively</span></pre></td></tr><tr><td data-num="1747"></td><td><pre></pre></td></tr><tr><td data-num="1748"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1749"></td><td><pre>    key<span class="token operator">:</span> <span class="token string">"_addFilesFromDirectory"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="1750"></td><td><pre>    <span class="token function-variable function">value</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">_addFilesFromDirectory</span><span class="token punctuation">(</span><span class="token parameter">directory<span class="token punctuation">,</span> path</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1751"></td><td><pre>      <span class="token keyword">var</span> _this6 <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1752"></td><td><pre></pre></td></tr><tr><td data-num="1753"></td><td><pre>      <span class="token keyword">var</span> dirReader <span class="token operator">=</span> directory<span class="token punctuation">.</span><span class="token function">createReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1754"></td><td><pre></pre></td></tr><tr><td data-num="1755"></td><td><pre>      <span class="token keyword">var</span> <span class="token function-variable function">errorHandler</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">errorHandler</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1756"></td><td><pre>        <span class="token keyword">return</span> <span class="token function">__guardMethod__</span><span class="token punctuation">(</span>console<span class="token punctuation">,</span> <span class="token string">'log'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">o</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1757"></td><td><pre>          <span class="token keyword">return</span> o<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1758"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1759"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1760"></td><td><pre></pre></td></tr><tr><td data-num="1761"></td><td><pre>      <span class="token keyword">var</span> <span class="token function-variable function">readEntries</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">readEntries</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1762"></td><td><pre>        <span class="token keyword">return</span> dirReader<span class="token punctuation">.</span><span class="token function">readEntries</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">entries</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1763"></td><td><pre>          <span class="token keyword">if</span> <span class="token punctuation">(</span>entries<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1764"></td><td><pre>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> _iterator16 <span class="token operator">=</span> entries<span class="token punctuation">,</span> _isArray16 <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>_iterator16<span class="token punctuation">)</span><span class="token punctuation">,</span> _i17 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> _iterator16 <span class="token operator">=</span> _isArray16 <span class="token operator">?</span> _iterator16 <span class="token operator">:</span> _iterator16<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1765"></td><td><pre>              <span class="token keyword">var</span> _ref15<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1766"></td><td><pre></pre></td></tr><tr><td data-num="1767"></td><td><pre>              <span class="token keyword">if</span> <span class="token punctuation">(</span>_isArray16<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1768"></td><td><pre>                <span class="token keyword">if</span> <span class="token punctuation">(</span>_i17 <span class="token operator">>=</span> _iterator16<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1769"></td><td><pre>                _ref15 <span class="token operator">=</span> _iterator16<span class="token punctuation">[</span>_i17<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1770"></td><td><pre>              <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1771"></td><td><pre>                _i17 <span class="token operator">=</span> _iterator16<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1772"></td><td><pre>                <span class="token keyword">if</span> <span class="token punctuation">(</span>_i17<span class="token punctuation">.</span>done<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1773"></td><td><pre>                _ref15 <span class="token operator">=</span> _i17<span class="token punctuation">.</span>value<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1774"></td><td><pre>              <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1775"></td><td><pre></pre></td></tr><tr><td data-num="1776"></td><td><pre>              <span class="token keyword">var</span> entry <span class="token operator">=</span> _ref15<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1777"></td><td><pre></pre></td></tr><tr><td data-num="1778"></td><td><pre>              <span class="token keyword">if</span> <span class="token punctuation">(</span>entry<span class="token punctuation">.</span>isFile<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1779"></td><td><pre>                entry<span class="token punctuation">.</span><span class="token function">file</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">file</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1780"></td><td><pre>                  <span class="token keyword">if</span> <span class="token punctuation">(</span>_this6<span class="token punctuation">.</span>options<span class="token punctuation">.</span>ignoreHiddenFiles <span class="token operator">&amp;&amp;</span> file<span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'.'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1781"></td><td><pre>                    <span class="token keyword">return</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1782"></td><td><pre>                  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1783"></td><td><pre>                  file<span class="token punctuation">.</span>fullPath <span class="token operator">=</span> path <span class="token operator">+</span> <span class="token string">"/"</span> <span class="token operator">+</span> file<span class="token punctuation">.</span>name<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1784"></td><td><pre>                  <span class="token keyword">return</span> _this6<span class="token punctuation">.</span><span class="token function">addFile</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1785"></td><td><pre>                <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1786"></td><td><pre>              <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>entry<span class="token punctuation">.</span>isDirectory<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1787"></td><td><pre>                _this6<span class="token punctuation">.</span><span class="token function">_addFilesFromDirectory</span><span class="token punctuation">(</span>entry<span class="token punctuation">,</span> path <span class="token operator">+</span> <span class="token string">"/"</span> <span class="token operator">+</span> entry<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1788"></td><td><pre>              <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1789"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1790"></td><td><pre></pre></td></tr><tr><td data-num="1791"></td><td><pre>            <span class="token comment">// Recursively call readEntries() again, since browser only handle</span></pre></td></tr><tr><td data-num="1792"></td><td><pre>            <span class="token comment">// the first 100 entries.</span></pre></td></tr><tr><td data-num="1793"></td><td><pre>            <span class="token comment">// See: https://developer.mozilla.org/en-US/docs/Web/API/DirectoryReader#readEntries</span></pre></td></tr><tr><td data-num="1794"></td><td><pre>            <span class="token function">readEntries</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1795"></td><td><pre>          <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1796"></td><td><pre>          <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1797"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> errorHandler<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1798"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1799"></td><td><pre></pre></td></tr><tr><td data-num="1800"></td><td><pre>      <span class="token keyword">return</span> <span class="token function">readEntries</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1801"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1802"></td><td><pre></pre></td></tr><tr><td data-num="1803"></td><td><pre>    <span class="token comment">// If `done()` is called without argument the file is accepted</span></pre></td></tr><tr><td data-num="1804"></td><td><pre>    <span class="token comment">// If you call it with an error message, the file is rejected</span></pre></td></tr><tr><td data-num="1805"></td><td><pre>    <span class="token comment">// (This allows for asynchronous validation)</span></pre></td></tr><tr><td data-num="1806"></td><td><pre>    <span class="token comment">//</span></pre></td></tr><tr><td data-num="1807"></td><td><pre>    <span class="token comment">// This function checks the filesize, and if the file.type passes the</span></pre></td></tr><tr><td data-num="1808"></td><td><pre>    <span class="token comment">// `acceptedFiles` check.</span></pre></td></tr><tr><td data-num="1809"></td><td><pre></pre></td></tr><tr><td data-num="1810"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1811"></td><td><pre>    key<span class="token operator">:</span> <span class="token string">"accept"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="1812"></td><td><pre>    <span class="token function-variable function">value</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">accept</span><span class="token punctuation">(</span><span class="token parameter">file<span class="token punctuation">,</span> done</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1813"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>maxFilesize <span class="token operator">&amp;&amp;</span> file<span class="token punctuation">.</span>size <span class="token operator">></span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>maxFilesize <span class="token operator">*</span> <span class="token number">1024</span> <span class="token operator">*</span> <span class="token number">1024</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1814"></td><td><pre>        <span class="token keyword">return</span> <span class="token function">done</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>dictFileTooBig<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">,</span> Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span>size <span class="token operator">/</span> <span class="token number">1024</span> <span class="token operator">/</span> <span class="token number">10.24</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>maxFilesize<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1815"></td><td><pre>      <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>Dropzone<span class="token punctuation">.</span><span class="token function">isValidFile</span><span class="token punctuation">(</span>file<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>acceptedFiles<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1816"></td><td><pre>        <span class="token keyword">return</span> <span class="token function">done</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>dictInvalidFileType<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1817"></td><td><pre>      <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>maxFiles <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getAcceptedFiles</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token operator">>=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>maxFiles<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1818"></td><td><pre>        <span class="token function">done</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>dictMaxFilesExceeded<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>maxFiles<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1819"></td><td><pre>        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">"maxfilesexceeded"</span><span class="token punctuation">,</span> file<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1820"></td><td><pre>      <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1821"></td><td><pre>        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> file<span class="token punctuation">,</span> done<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1822"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1823"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1824"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1825"></td><td><pre>    key<span class="token operator">:</span> <span class="token string">"addFile"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="1826"></td><td><pre>    <span class="token function-variable function">value</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">addFile</span><span class="token punctuation">(</span><span class="token parameter">file</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1827"></td><td><pre>      <span class="token keyword">var</span> _this7 <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1828"></td><td><pre></pre></td></tr><tr><td data-num="1829"></td><td><pre>      file<span class="token punctuation">.</span>upload <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1830"></td><td><pre>        uuid<span class="token operator">:</span> Dropzone<span class="token punctuation">.</span><span class="token function">uuidv4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="1831"></td><td><pre>        progress<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="1832"></td><td><pre>        <span class="token comment">// Setting the total upload size to file.size for the beginning</span></pre></td></tr><tr><td data-num="1833"></td><td><pre>        <span class="token comment">// It's actual different than the size to be transmitted.</span></pre></td></tr><tr><td data-num="1834"></td><td><pre>        total<span class="token operator">:</span> file<span class="token punctuation">.</span>size<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="1835"></td><td><pre>        bytesSent<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="1836"></td><td><pre>        filename<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_renameFile</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="1837"></td><td><pre>        chunked<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>chunking <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>forceChunking <span class="token operator">||</span> file<span class="token punctuation">.</span>size <span class="token operator">></span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>chunkSize<span class="token punctuation">)</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="1838"></td><td><pre>        totalChunkCount<span class="token operator">:</span> Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span>size <span class="token operator">/</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>chunkSize<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="1839"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1840"></td><td><pre>      <span class="token keyword">this</span><span class="token punctuation">.</span>files<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1841"></td><td><pre></pre></td></tr><tr><td data-num="1842"></td><td><pre>      file<span class="token punctuation">.</span>status <span class="token operator">=</span> Dropzone<span class="token punctuation">.</span><span class="token constant">ADDED</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1843"></td><td><pre></pre></td></tr><tr><td data-num="1844"></td><td><pre>      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">"addedfile"</span><span class="token punctuation">,</span> file<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1845"></td><td><pre></pre></td></tr><tr><td data-num="1846"></td><td><pre>      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_enqueueThumbnail</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1847"></td><td><pre></pre></td></tr><tr><td data-num="1848"></td><td><pre>      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span>file<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1849"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1850"></td><td><pre>          file<span class="token punctuation">.</span>accepted <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1851"></td><td><pre>          _this7<span class="token punctuation">.</span><span class="token function">_errorProcessing</span><span class="token punctuation">(</span><span class="token punctuation">[</span>file<span class="token punctuation">]</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Will set the file.status</span></pre></td></tr><tr><td data-num="1852"></td><td><pre>        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1853"></td><td><pre>          file<span class="token punctuation">.</span>accepted <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1854"></td><td><pre>          <span class="token keyword">if</span> <span class="token punctuation">(</span>_this7<span class="token punctuation">.</span>options<span class="token punctuation">.</span>autoQueue<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1855"></td><td><pre>            _this7<span class="token punctuation">.</span><span class="token function">enqueueFile</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1856"></td><td><pre>          <span class="token punctuation">&#125;</span> <span class="token comment">// Will set .accepted = true</span></pre></td></tr><tr><td data-num="1857"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1858"></td><td><pre>        <span class="token keyword">return</span> _this7<span class="token punctuation">.</span><span class="token function">_updateMaxFilesReachedClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1859"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1860"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1861"></td><td><pre></pre></td></tr><tr><td data-num="1862"></td><td><pre>    <span class="token comment">// Wrapper for enqueueFile</span></pre></td></tr><tr><td data-num="1863"></td><td><pre></pre></td></tr><tr><td data-num="1864"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1865"></td><td><pre>    key<span class="token operator">:</span> <span class="token string">"enqueueFiles"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="1866"></td><td><pre>    <span class="token function-variable function">value</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">enqueueFiles</span><span class="token punctuation">(</span><span class="token parameter">files</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1867"></td><td><pre>      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> _iterator17 <span class="token operator">=</span> files<span class="token punctuation">,</span> _isArray17 <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>_iterator17<span class="token punctuation">)</span><span class="token punctuation">,</span> _i18 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> _iterator17 <span class="token operator">=</span> _isArray17 <span class="token operator">?</span> _iterator17 <span class="token operator">:</span> _iterator17<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1868"></td><td><pre>        <span class="token keyword">var</span> _ref16<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1869"></td><td><pre></pre></td></tr><tr><td data-num="1870"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span>_isArray17<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1871"></td><td><pre>          <span class="token keyword">if</span> <span class="token punctuation">(</span>_i18 <span class="token operator">>=</span> _iterator17<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1872"></td><td><pre>          _ref16 <span class="token operator">=</span> _iterator17<span class="token punctuation">[</span>_i18<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1873"></td><td><pre>        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1874"></td><td><pre>          _i18 <span class="token operator">=</span> _iterator17<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1875"></td><td><pre>          <span class="token keyword">if</span> <span class="token punctuation">(</span>_i18<span class="token punctuation">.</span>done<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1876"></td><td><pre>          _ref16 <span class="token operator">=</span> _i18<span class="token punctuation">.</span>value<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1877"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1878"></td><td><pre></pre></td></tr><tr><td data-num="1879"></td><td><pre>        <span class="token keyword">var</span> file <span class="token operator">=</span> _ref16<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1880"></td><td><pre></pre></td></tr><tr><td data-num="1881"></td><td><pre>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">enqueueFile</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1882"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1883"></td><td><pre>      <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1884"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1885"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1886"></td><td><pre>    key<span class="token operator">:</span> <span class="token string">"enqueueFile"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="1887"></td><td><pre>    <span class="token function-variable function">value</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">enqueueFile</span><span class="token punctuation">(</span><span class="token parameter">file</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1888"></td><td><pre>      <span class="token keyword">var</span> _this8 <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1889"></td><td><pre></pre></td></tr><tr><td data-num="1890"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span>file<span class="token punctuation">.</span>status <span class="token operator">===</span> Dropzone<span class="token punctuation">.</span><span class="token constant">ADDED</span> <span class="token operator">&amp;&amp;</span> file<span class="token punctuation">.</span>accepted <span class="token operator">===</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1891"></td><td><pre>        file<span class="token punctuation">.</span>status <span class="token operator">=</span> Dropzone<span class="token punctuation">.</span><span class="token constant">QUEUED</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1892"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>autoProcessQueue<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1893"></td><td><pre>          <span class="token keyword">return</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1894"></td><td><pre>            <span class="token keyword">return</span> _this8<span class="token punctuation">.</span><span class="token function">processQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1895"></td><td><pre>          <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Deferring the call</span></pre></td></tr><tr><td data-num="1896"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1897"></td><td><pre>      <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1898"></td><td><pre>        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">"This file can't be queued because it has already been processed or was rejected."</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1899"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1900"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1901"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1902"></td><td><pre>    key<span class="token operator">:</span> <span class="token string">"_enqueueThumbnail"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="1903"></td><td><pre>    <span class="token function-variable function">value</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">_enqueueThumbnail</span><span class="token punctuation">(</span><span class="token parameter">file</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1904"></td><td><pre>      <span class="token keyword">var</span> _this9 <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1905"></td><td><pre></pre></td></tr><tr><td data-num="1906"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>createImageThumbnails <span class="token operator">&amp;&amp;</span> file<span class="token punctuation">.</span>type<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">image.*</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> file<span class="token punctuation">.</span>size <span class="token operator">&lt;=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>maxThumbnailFilesize <span class="token operator">*</span> <span class="token number">1024</span> <span class="token operator">*</span> <span class="token number">1024</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1907"></td><td><pre>        <span class="token keyword">this</span><span class="token punctuation">.</span>_thumbnailQueue<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1908"></td><td><pre>        <span class="token keyword">return</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1909"></td><td><pre>          <span class="token keyword">return</span> _this9<span class="token punctuation">.</span><span class="token function">_processThumbnailQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1910"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Deferring the call</span></pre></td></tr><tr><td data-num="1911"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1912"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1913"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1914"></td><td><pre>    key<span class="token operator">:</span> <span class="token string">"_processThumbnailQueue"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="1915"></td><td><pre>    <span class="token function-variable function">value</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">_processThumbnailQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1916"></td><td><pre>      <span class="token keyword">var</span> _this10 <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1917"></td><td><pre></pre></td></tr><tr><td data-num="1918"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>_processingThumbnail <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_thumbnailQueue<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1919"></td><td><pre>        <span class="token keyword">return</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1920"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1921"></td><td><pre></pre></td></tr><tr><td data-num="1922"></td><td><pre>      <span class="token keyword">this</span><span class="token punctuation">.</span>_processingThumbnail <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1923"></td><td><pre>      <span class="token keyword">var</span> file <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_thumbnailQueue<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1924"></td><td><pre>      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">createThumbnail</span><span class="token punctuation">(</span>file<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>thumbnailWidth<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>thumbnailHeight<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>thumbnailMethod<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">dataUrl</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1925"></td><td><pre>        _this10<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">"thumbnail"</span><span class="token punctuation">,</span> file<span class="token punctuation">,</span> dataUrl<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1926"></td><td><pre>        _this10<span class="token punctuation">.</span>_processingThumbnail <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1927"></td><td><pre>        <span class="token keyword">return</span> _this10<span class="token punctuation">.</span><span class="token function">_processThumbnailQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1928"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1929"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1930"></td><td><pre></pre></td></tr><tr><td data-num="1931"></td><td><pre>    <span class="token comment">// Can be called by the user to remove a file</span></pre></td></tr><tr><td data-num="1932"></td><td><pre></pre></td></tr><tr><td data-num="1933"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1934"></td><td><pre>    key<span class="token operator">:</span> <span class="token string">"removeFile"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="1935"></td><td><pre>    <span class="token function-variable function">value</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">removeFile</span><span class="token punctuation">(</span><span class="token parameter">file</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1936"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span>file<span class="token punctuation">.</span>status <span class="token operator">===</span> Dropzone<span class="token punctuation">.</span><span class="token constant">UPLOADING</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1937"></td><td><pre>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">cancelUpload</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1938"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1939"></td><td><pre>      <span class="token keyword">this</span><span class="token punctuation">.</span>files <span class="token operator">=</span> <span class="token function">without</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>files<span class="token punctuation">,</span> file<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1940"></td><td><pre></pre></td></tr><tr><td data-num="1941"></td><td><pre>      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">"removedfile"</span><span class="token punctuation">,</span> file<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1942"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>files<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1943"></td><td><pre>        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">"reset"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1944"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1945"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1946"></td><td><pre></pre></td></tr><tr><td data-num="1947"></td><td><pre>    <span class="token comment">// Removes all files that aren't currently processed from the list</span></pre></td></tr><tr><td data-num="1948"></td><td><pre></pre></td></tr><tr><td data-num="1949"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1950"></td><td><pre>    key<span class="token operator">:</span> <span class="token string">"removeAllFiles"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="1951"></td><td><pre>    <span class="token function-variable function">value</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">removeAllFiles</span><span class="token punctuation">(</span><span class="token parameter">cancelIfNecessary</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1952"></td><td><pre>      <span class="token comment">// Create a copy of files since removeFile() changes the @files array.</span></pre></td></tr><tr><td data-num="1953"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span>cancelIfNecessary <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1954"></td><td><pre>        cancelIfNecessary <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1955"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1956"></td><td><pre>      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> _iterator18 <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>files<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> _isArray18 <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>_iterator18<span class="token punctuation">)</span><span class="token punctuation">,</span> _i19 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> _iterator18 <span class="token operator">=</span> _isArray18 <span class="token operator">?</span> _iterator18 <span class="token operator">:</span> _iterator18<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1957"></td><td><pre>        <span class="token keyword">var</span> _ref17<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1958"></td><td><pre></pre></td></tr><tr><td data-num="1959"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span>_isArray18<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1960"></td><td><pre>          <span class="token keyword">if</span> <span class="token punctuation">(</span>_i19 <span class="token operator">>=</span> _iterator18<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1961"></td><td><pre>          _ref17 <span class="token operator">=</span> _iterator18<span class="token punctuation">[</span>_i19<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1962"></td><td><pre>        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1963"></td><td><pre>          _i19 <span class="token operator">=</span> _iterator18<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1964"></td><td><pre>          <span class="token keyword">if</span> <span class="token punctuation">(</span>_i19<span class="token punctuation">.</span>done<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1965"></td><td><pre>          _ref17 <span class="token operator">=</span> _i19<span class="token punctuation">.</span>value<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1966"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1967"></td><td><pre></pre></td></tr><tr><td data-num="1968"></td><td><pre>        <span class="token keyword">var</span> file <span class="token operator">=</span> _ref17<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1969"></td><td><pre></pre></td></tr><tr><td data-num="1970"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span>file<span class="token punctuation">.</span>status <span class="token operator">!==</span> Dropzone<span class="token punctuation">.</span><span class="token constant">UPLOADING</span> <span class="token operator">||</span> cancelIfNecessary<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1971"></td><td><pre>          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">removeFile</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1972"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1973"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1974"></td><td><pre>      <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1975"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1976"></td><td><pre></pre></td></tr><tr><td data-num="1977"></td><td><pre>    <span class="token comment">// Resizes an image before it gets sent to the server. This function is the default behavior of</span></pre></td></tr><tr><td data-num="1978"></td><td><pre>    <span class="token comment">// `options.transformFile` if `resizeWidth` or `resizeHeight` are set. The callback is invoked with</span></pre></td></tr><tr><td data-num="1979"></td><td><pre>    <span class="token comment">// the resized blob.</span></pre></td></tr><tr><td data-num="1980"></td><td><pre></pre></td></tr><tr><td data-num="1981"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1982"></td><td><pre>    key<span class="token operator">:</span> <span class="token string">"resizeImage"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="1983"></td><td><pre>    <span class="token function-variable function">value</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">resizeImage</span><span class="token punctuation">(</span><span class="token parameter">file<span class="token punctuation">,</span> width<span class="token punctuation">,</span> height<span class="token punctuation">,</span> resizeMethod<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1984"></td><td><pre>      <span class="token keyword">var</span> _this11 <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1985"></td><td><pre></pre></td></tr><tr><td data-num="1986"></td><td><pre>      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">createThumbnail</span><span class="token punctuation">(</span>file<span class="token punctuation">,</span> width<span class="token punctuation">,</span> height<span class="token punctuation">,</span> resizeMethod<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">dataUrl<span class="token punctuation">,</span> canvas</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1987"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span>canvas <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1988"></td><td><pre>          <span class="token comment">// The image has not been resized</span></pre></td></tr><tr><td data-num="1989"></td><td><pre>          <span class="token keyword">return</span> <span class="token function">callback</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1990"></td><td><pre>        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1991"></td><td><pre>          <span class="token keyword">var</span> resizeMimeType <span class="token operator">=</span> _this11<span class="token punctuation">.</span>options<span class="token punctuation">.</span>resizeMimeType<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1992"></td><td><pre></pre></td></tr><tr><td data-num="1993"></td><td><pre>          <span class="token keyword">if</span> <span class="token punctuation">(</span>resizeMimeType <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1994"></td><td><pre>            resizeMimeType <span class="token operator">=</span> file<span class="token punctuation">.</span>type<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1995"></td><td><pre>          <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="1996"></td><td><pre>          <span class="token keyword">var</span> resizedDataURL <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">toDataURL</span><span class="token punctuation">(</span>resizeMimeType<span class="token punctuation">,</span> _this11<span class="token punctuation">.</span>options<span class="token punctuation">.</span>resizeQuality<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="1997"></td><td><pre>          <span class="token keyword">if</span> <span class="token punctuation">(</span>resizeMimeType <span class="token operator">===</span> <span class="token string">'image/jpeg'</span> <span class="token operator">||</span> resizeMimeType <span class="token operator">===</span> <span class="token string">'image/jpg'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="1998"></td><td><pre>            <span class="token comment">// Now add the original EXIF information</span></pre></td></tr><tr><td data-num="1999"></td><td><pre>            resizedDataURL <span class="token operator">=</span> ExifRestore<span class="token punctuation">.</span><span class="token function">restore</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span>dataURL<span class="token punctuation">,</span> resizedDataURL<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2000"></td><td><pre>          <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2001"></td><td><pre>          <span class="token keyword">return</span> <span class="token function">callback</span><span class="token punctuation">(</span>Dropzone<span class="token punctuation">.</span><span class="token function">dataURItoBlob</span><span class="token punctuation">(</span>resizedDataURL<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2002"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2003"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2004"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2005"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2006"></td><td><pre>    key<span class="token operator">:</span> <span class="token string">"createThumbnail"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="2007"></td><td><pre>    <span class="token function-variable function">value</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">createThumbnail</span><span class="token punctuation">(</span><span class="token parameter">file<span class="token punctuation">,</span> width<span class="token punctuation">,</span> height<span class="token punctuation">,</span> resizeMethod<span class="token punctuation">,</span> fixOrientation<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2008"></td><td><pre>      <span class="token keyword">var</span> _this12 <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2009"></td><td><pre></pre></td></tr><tr><td data-num="2010"></td><td><pre>      <span class="token keyword">var</span> fileReader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2011"></td><td><pre></pre></td></tr><tr><td data-num="2012"></td><td><pre>      fileReader<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2013"></td><td><pre></pre></td></tr><tr><td data-num="2014"></td><td><pre>        file<span class="token punctuation">.</span>dataURL <span class="token operator">=</span> fileReader<span class="token punctuation">.</span>result<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2015"></td><td><pre></pre></td></tr><tr><td data-num="2016"></td><td><pre>        <span class="token comment">// Don't bother creating a thumbnail for SVG images since they're vector</span></pre></td></tr><tr><td data-num="2017"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span>file<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">"image/svg+xml"</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2018"></td><td><pre>          <span class="token keyword">if</span> <span class="token punctuation">(</span>callback <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2019"></td><td><pre>            <span class="token function">callback</span><span class="token punctuation">(</span>fileReader<span class="token punctuation">.</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2020"></td><td><pre>          <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2021"></td><td><pre>          <span class="token keyword">return</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2022"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2023"></td><td><pre></pre></td></tr><tr><td data-num="2024"></td><td><pre>        <span class="token keyword">return</span> _this12<span class="token punctuation">.</span><span class="token function">createThumbnailFromUrl</span><span class="token punctuation">(</span>file<span class="token punctuation">,</span> width<span class="token punctuation">,</span> height<span class="token punctuation">,</span> resizeMethod<span class="token punctuation">,</span> fixOrientation<span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2025"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2026"></td><td><pre></pre></td></tr><tr><td data-num="2027"></td><td><pre>      <span class="token keyword">return</span> fileReader<span class="token punctuation">.</span><span class="token function">readAsDataURL</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2028"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2029"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2030"></td><td><pre>    key<span class="token operator">:</span> <span class="token string">"createThumbnailFromUrl"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="2031"></td><td><pre>    <span class="token function-variable function">value</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">createThumbnailFromUrl</span><span class="token punctuation">(</span><span class="token parameter">file<span class="token punctuation">,</span> width<span class="token punctuation">,</span> height<span class="token punctuation">,</span> resizeMethod<span class="token punctuation">,</span> fixOrientation<span class="token punctuation">,</span> callback<span class="token punctuation">,</span> crossOrigin</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2032"></td><td><pre>      <span class="token keyword">var</span> _this13 <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2033"></td><td><pre></pre></td></tr><tr><td data-num="2034"></td><td><pre>      <span class="token comment">// Not using `new Image` here because of a bug in latest Chrome versions.</span></pre></td></tr><tr><td data-num="2035"></td><td><pre>      <span class="token comment">// See https://github.com/enyo/dropzone/pull/226</span></pre></td></tr><tr><td data-num="2036"></td><td><pre>      <span class="token keyword">var</span> img <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"img"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2037"></td><td><pre></pre></td></tr><tr><td data-num="2038"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span>crossOrigin<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2039"></td><td><pre>        img<span class="token punctuation">.</span>crossOrigin <span class="token operator">=</span> crossOrigin<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2040"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2041"></td><td><pre></pre></td></tr><tr><td data-num="2042"></td><td><pre>      img<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2043"></td><td><pre>        <span class="token keyword">var</span> <span class="token function-variable function">loadExif</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">loadExif</span><span class="token punctuation">(</span><span class="token parameter">callback</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2044"></td><td><pre>          <span class="token keyword">return</span> <span class="token function">callback</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2045"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2046"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token constant">EXIF</span> <span class="token operator">!==</span> <span class="token string">'undefined'</span> <span class="token operator">&amp;&amp;</span> <span class="token constant">EXIF</span> <span class="token operator">!==</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> fixOrientation<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2047"></td><td><pre>          <span class="token function-variable function">loadExif</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">loadExif</span><span class="token punctuation">(</span><span class="token parameter">callback</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2048"></td><td><pre>            <span class="token keyword">return</span> <span class="token constant">EXIF</span><span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2049"></td><td><pre>              <span class="token keyword">return</span> <span class="token function">callback</span><span class="token punctuation">(</span><span class="token constant">EXIF</span><span class="token punctuation">.</span><span class="token function">getTag</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">'Orientation'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2050"></td><td><pre>            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2051"></td><td><pre>          <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2052"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2053"></td><td><pre></pre></td></tr><tr><td data-num="2054"></td><td><pre>        <span class="token keyword">return</span> <span class="token function">loadExif</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">orientation</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2055"></td><td><pre>          file<span class="token punctuation">.</span>width <span class="token operator">=</span> img<span class="token punctuation">.</span>width<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2056"></td><td><pre>          file<span class="token punctuation">.</span>height <span class="token operator">=</span> img<span class="token punctuation">.</span>height<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2057"></td><td><pre></pre></td></tr><tr><td data-num="2058"></td><td><pre>          <span class="token keyword">var</span> resizeInfo <span class="token operator">=</span> _this13<span class="token punctuation">.</span>options<span class="token punctuation">.</span><span class="token function">resize</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>_this13<span class="token punctuation">,</span> file<span class="token punctuation">,</span> width<span class="token punctuation">,</span> height<span class="token punctuation">,</span> resizeMethod<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2059"></td><td><pre></pre></td></tr><tr><td data-num="2060"></td><td><pre>          <span class="token keyword">var</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"canvas"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2061"></td><td><pre>          <span class="token keyword">var</span> ctx <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">"2d"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2062"></td><td><pre></pre></td></tr><tr><td data-num="2063"></td><td><pre>          canvas<span class="token punctuation">.</span>width <span class="token operator">=</span> resizeInfo<span class="token punctuation">.</span>trgWidth<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2064"></td><td><pre>          canvas<span class="token punctuation">.</span>height <span class="token operator">=</span> resizeInfo<span class="token punctuation">.</span>trgHeight<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2065"></td><td><pre></pre></td></tr><tr><td data-num="2066"></td><td><pre>          <span class="token keyword">if</span> <span class="token punctuation">(</span>orientation <span class="token operator">></span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2067"></td><td><pre>            canvas<span class="token punctuation">.</span>width <span class="token operator">=</span> resizeInfo<span class="token punctuation">.</span>trgHeight<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2068"></td><td><pre>            canvas<span class="token punctuation">.</span>height <span class="token operator">=</span> resizeInfo<span class="token punctuation">.</span>trgWidth<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2069"></td><td><pre>          <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2070"></td><td><pre></pre></td></tr><tr><td data-num="2071"></td><td><pre>          <span class="token keyword">switch</span> <span class="token punctuation">(</span>orientation<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2072"></td><td><pre>            <span class="token keyword">case</span> <span class="token number">2</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="2073"></td><td><pre>              <span class="token comment">// horizontal flip</span></pre></td></tr><tr><td data-num="2074"></td><td><pre>              ctx<span class="token punctuation">.</span><span class="token function">translate</span><span class="token punctuation">(</span>canvas<span class="token punctuation">.</span>width<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2075"></td><td><pre>              ctx<span class="token punctuation">.</span><span class="token function">scale</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2076"></td><td><pre>              <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2077"></td><td><pre>            <span class="token keyword">case</span> <span class="token number">3</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="2078"></td><td><pre>              <span class="token comment">// 180° rotate left</span></pre></td></tr><tr><td data-num="2079"></td><td><pre>              ctx<span class="token punctuation">.</span><span class="token function">translate</span><span class="token punctuation">(</span>canvas<span class="token punctuation">.</span>width<span class="token punctuation">,</span> canvas<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2080"></td><td><pre>              ctx<span class="token punctuation">.</span><span class="token function">rotate</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2081"></td><td><pre>              <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2082"></td><td><pre>            <span class="token keyword">case</span> <span class="token number">4</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="2083"></td><td><pre>              <span class="token comment">// vertical flip</span></pre></td></tr><tr><td data-num="2084"></td><td><pre>              ctx<span class="token punctuation">.</span><span class="token function">translate</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> canvas<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2085"></td><td><pre>              ctx<span class="token punctuation">.</span><span class="token function">scale</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2086"></td><td><pre>              <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2087"></td><td><pre>            <span class="token keyword">case</span> <span class="token number">5</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="2088"></td><td><pre>              <span class="token comment">// vertical flip + 90 rotate right</span></pre></td></tr><tr><td data-num="2089"></td><td><pre>              ctx<span class="token punctuation">.</span><span class="token function">rotate</span><span class="token punctuation">(</span><span class="token number">0.5</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2090"></td><td><pre>              ctx<span class="token punctuation">.</span><span class="token function">scale</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2091"></td><td><pre>              <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2092"></td><td><pre>            <span class="token keyword">case</span> <span class="token number">6</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="2093"></td><td><pre>              <span class="token comment">// 90° rotate right</span></pre></td></tr><tr><td data-num="2094"></td><td><pre>              ctx<span class="token punctuation">.</span><span class="token function">rotate</span><span class="token punctuation">(</span><span class="token number">0.5</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2095"></td><td><pre>              ctx<span class="token punctuation">.</span><span class="token function">translate</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span>canvas<span class="token punctuation">.</span>width<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2096"></td><td><pre>              <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2097"></td><td><pre>            <span class="token keyword">case</span> <span class="token number">7</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="2098"></td><td><pre>              <span class="token comment">// horizontal flip + 90 rotate right</span></pre></td></tr><tr><td data-num="2099"></td><td><pre>              ctx<span class="token punctuation">.</span><span class="token function">rotate</span><span class="token punctuation">(</span><span class="token number">0.5</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2100"></td><td><pre>              ctx<span class="token punctuation">.</span><span class="token function">translate</span><span class="token punctuation">(</span>canvas<span class="token punctuation">.</span>height<span class="token punctuation">,</span> <span class="token operator">-</span>canvas<span class="token punctuation">.</span>width<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2101"></td><td><pre>              ctx<span class="token punctuation">.</span><span class="token function">scale</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2102"></td><td><pre>              <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2103"></td><td><pre>            <span class="token keyword">case</span> <span class="token number">8</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="2104"></td><td><pre>              <span class="token comment">// 90° rotate left</span></pre></td></tr><tr><td data-num="2105"></td><td><pre>              ctx<span class="token punctuation">.</span><span class="token function">rotate</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">0.5</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2106"></td><td><pre>              ctx<span class="token punctuation">.</span><span class="token function">translate</span><span class="token punctuation">(</span><span class="token operator">-</span>canvas<span class="token punctuation">.</span>height<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2107"></td><td><pre>              <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2108"></td><td><pre>          <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2109"></td><td><pre></pre></td></tr><tr><td data-num="2110"></td><td><pre>          <span class="token comment">// This is a bugfix for iOS' scaling bug.</span></pre></td></tr><tr><td data-num="2111"></td><td><pre>          <span class="token function">drawImageIOSFix</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> img<span class="token punctuation">,</span> resizeInfo<span class="token punctuation">.</span>srcX <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">?</span> resizeInfo<span class="token punctuation">.</span>srcX <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> resizeInfo<span class="token punctuation">.</span>srcY <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">?</span> resizeInfo<span class="token punctuation">.</span>srcY <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> resizeInfo<span class="token punctuation">.</span>srcWidth<span class="token punctuation">,</span> resizeInfo<span class="token punctuation">.</span>srcHeight<span class="token punctuation">,</span> resizeInfo<span class="token punctuation">.</span>trgX <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">?</span> resizeInfo<span class="token punctuation">.</span>trgX <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> resizeInfo<span class="token punctuation">.</span>trgY <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">?</span> resizeInfo<span class="token punctuation">.</span>trgY <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> resizeInfo<span class="token punctuation">.</span>trgWidth<span class="token punctuation">,</span> resizeInfo<span class="token punctuation">.</span>trgHeight<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2112"></td><td><pre></pre></td></tr><tr><td data-num="2113"></td><td><pre>          <span class="token keyword">var</span> thumbnail <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">toDataURL</span><span class="token punctuation">(</span><span class="token string">"image/png"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2114"></td><td><pre></pre></td></tr><tr><td data-num="2115"></td><td><pre>          <span class="token keyword">if</span> <span class="token punctuation">(</span>callback <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2116"></td><td><pre>            <span class="token keyword">return</span> <span class="token function">callback</span><span class="token punctuation">(</span>thumbnail<span class="token punctuation">,</span> canvas<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2117"></td><td><pre>          <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2118"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2119"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2120"></td><td><pre></pre></td></tr><tr><td data-num="2121"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span>callback <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2122"></td><td><pre>        img<span class="token punctuation">.</span>onerror <span class="token operator">=</span> callback<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2123"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2124"></td><td><pre></pre></td></tr><tr><td data-num="2125"></td><td><pre>      <span class="token keyword">return</span> img<span class="token punctuation">.</span>src <span class="token operator">=</span> file<span class="token punctuation">.</span>dataURL<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2126"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2127"></td><td><pre></pre></td></tr><tr><td data-num="2128"></td><td><pre>    <span class="token comment">// Goes through the queue and processes files if there aren't too many already.</span></pre></td></tr><tr><td data-num="2129"></td><td><pre></pre></td></tr><tr><td data-num="2130"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2131"></td><td><pre>    key<span class="token operator">:</span> <span class="token string">"processQueue"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="2132"></td><td><pre>    <span class="token function-variable function">value</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">processQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2133"></td><td><pre>      <span class="token keyword">var</span> parallelUploads <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>parallelUploads<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2134"></td><td><pre></pre></td></tr><tr><td data-num="2135"></td><td><pre>      <span class="token keyword">var</span> processingLength <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getUploadingFiles</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2136"></td><td><pre>      <span class="token keyword">var</span> i <span class="token operator">=</span> processingLength<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2137"></td><td><pre></pre></td></tr><tr><td data-num="2138"></td><td><pre>      <span class="token comment">// There are already at least as many files uploading than should be</span></pre></td></tr><tr><td data-num="2139"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span>processingLength <span class="token operator">>=</span> parallelUploads<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2140"></td><td><pre>        <span class="token keyword">return</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2141"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2142"></td><td><pre></pre></td></tr><tr><td data-num="2143"></td><td><pre>      <span class="token keyword">var</span> queuedFiles <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getQueuedFiles</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2144"></td><td><pre></pre></td></tr><tr><td data-num="2145"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>queuedFiles<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2146"></td><td><pre>        <span class="token keyword">return</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2147"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2148"></td><td><pre></pre></td></tr><tr><td data-num="2149"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>uploadMultiple<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2150"></td><td><pre>        <span class="token comment">// The files should be uploaded in one request</span></pre></td></tr><tr><td data-num="2151"></td><td><pre>        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">processFiles</span><span class="token punctuation">(</span>queuedFiles<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> parallelUploads <span class="token operator">-</span> processingLength<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2152"></td><td><pre>      <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2153"></td><td><pre>        <span class="token keyword">while</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;</span> parallelUploads<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2154"></td><td><pre>          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>queuedFiles<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2155"></td><td><pre>            <span class="token keyword">return</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2156"></td><td><pre>          <span class="token punctuation">&#125;</span> <span class="token comment">// Nothing left to process</span></pre></td></tr><tr><td data-num="2157"></td><td><pre>          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">processFile</span><span class="token punctuation">(</span>queuedFiles<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2158"></td><td><pre>          i<span class="token operator">++</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2159"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2160"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2161"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2162"></td><td><pre></pre></td></tr><tr><td data-num="2163"></td><td><pre>    <span class="token comment">// Wrapper for `processFiles`</span></pre></td></tr><tr><td data-num="2164"></td><td><pre></pre></td></tr><tr><td data-num="2165"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2166"></td><td><pre>    key<span class="token operator">:</span> <span class="token string">"processFile"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="2167"></td><td><pre>    <span class="token function-variable function">value</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">processFile</span><span class="token punctuation">(</span><span class="token parameter">file</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2168"></td><td><pre>      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">processFiles</span><span class="token punctuation">(</span><span class="token punctuation">[</span>file<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2169"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2170"></td><td><pre></pre></td></tr><tr><td data-num="2171"></td><td><pre>    <span class="token comment">// Loads the file, then calls finishedLoading()</span></pre></td></tr><tr><td data-num="2172"></td><td><pre></pre></td></tr><tr><td data-num="2173"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2174"></td><td><pre>    key<span class="token operator">:</span> <span class="token string">"processFiles"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="2175"></td><td><pre>    <span class="token function-variable function">value</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">processFiles</span><span class="token punctuation">(</span><span class="token parameter">files</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2176"></td><td><pre>      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> _iterator19 <span class="token operator">=</span> files<span class="token punctuation">,</span> _isArray19 <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>_iterator19<span class="token punctuation">)</span><span class="token punctuation">,</span> _i20 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> _iterator19 <span class="token operator">=</span> _isArray19 <span class="token operator">?</span> _iterator19 <span class="token operator">:</span> _iterator19<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2177"></td><td><pre>        <span class="token keyword">var</span> _ref18<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2178"></td><td><pre></pre></td></tr><tr><td data-num="2179"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span>_isArray19<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2180"></td><td><pre>          <span class="token keyword">if</span> <span class="token punctuation">(</span>_i20 <span class="token operator">>=</span> _iterator19<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2181"></td><td><pre>          _ref18 <span class="token operator">=</span> _iterator19<span class="token punctuation">[</span>_i20<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2182"></td><td><pre>        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2183"></td><td><pre>          _i20 <span class="token operator">=</span> _iterator19<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2184"></td><td><pre>          <span class="token keyword">if</span> <span class="token punctuation">(</span>_i20<span class="token punctuation">.</span>done<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2185"></td><td><pre>          _ref18 <span class="token operator">=</span> _i20<span class="token punctuation">.</span>value<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2186"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2187"></td><td><pre></pre></td></tr><tr><td data-num="2188"></td><td><pre>        <span class="token keyword">var</span> file <span class="token operator">=</span> _ref18<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2189"></td><td><pre></pre></td></tr><tr><td data-num="2190"></td><td><pre>        file<span class="token punctuation">.</span>processing <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token comment">// Backwards compatibility</span></pre></td></tr><tr><td data-num="2191"></td><td><pre>        file<span class="token punctuation">.</span>status <span class="token operator">=</span> Dropzone<span class="token punctuation">.</span><span class="token constant">UPLOADING</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2192"></td><td><pre></pre></td></tr><tr><td data-num="2193"></td><td><pre>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">"processing"</span><span class="token punctuation">,</span> file<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2194"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2195"></td><td><pre></pre></td></tr><tr><td data-num="2196"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>uploadMultiple<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2197"></td><td><pre>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">"processingmultiple"</span><span class="token punctuation">,</span> files<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2198"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2199"></td><td><pre></pre></td></tr><tr><td data-num="2200"></td><td><pre>      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">uploadFiles</span><span class="token punctuation">(</span>files<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2201"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2202"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2203"></td><td><pre>    key<span class="token operator">:</span> <span class="token string">"_getFilesWithXhr"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="2204"></td><td><pre>    <span class="token function-variable function">value</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">_getFilesWithXhr</span><span class="token punctuation">(</span><span class="token parameter">xhr</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2205"></td><td><pre>      <span class="token keyword">var</span> files <span class="token operator">=</span> <span class="token keyword">void</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2206"></td><td><pre>      <span class="token keyword">return</span> files <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>files<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">file</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2207"></td><td><pre>        <span class="token keyword">return</span> file<span class="token punctuation">.</span>xhr <span class="token operator">===</span> xhr<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2208"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">file</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2209"></td><td><pre>        <span class="token keyword">return</span> file<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2210"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2211"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2212"></td><td><pre></pre></td></tr><tr><td data-num="2213"></td><td><pre>    <span class="token comment">// Cancels the file upload and sets the status to CANCELED</span></pre></td></tr><tr><td data-num="2214"></td><td><pre>    <span class="token comment">// **if** the file is actually being uploaded.</span></pre></td></tr><tr><td data-num="2215"></td><td><pre>    <span class="token comment">// If it's still in the queue, the file is being removed from it and the status</span></pre></td></tr><tr><td data-num="2216"></td><td><pre>    <span class="token comment">// set to CANCELED.</span></pre></td></tr><tr><td data-num="2217"></td><td><pre></pre></td></tr><tr><td data-num="2218"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2219"></td><td><pre>    key<span class="token operator">:</span> <span class="token string">"cancelUpload"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="2220"></td><td><pre>    <span class="token function-variable function">value</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">cancelUpload</span><span class="token punctuation">(</span><span class="token parameter">file</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2221"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span>file<span class="token punctuation">.</span>status <span class="token operator">===</span> Dropzone<span class="token punctuation">.</span><span class="token constant">UPLOADING</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2222"></td><td><pre>        <span class="token keyword">var</span> groupedFiles <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_getFilesWithXhr</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span>xhr<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2223"></td><td><pre>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> _iterator20 <span class="token operator">=</span> groupedFiles<span class="token punctuation">,</span> _isArray20 <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>_iterator20<span class="token punctuation">)</span><span class="token punctuation">,</span> _i21 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> _iterator20 <span class="token operator">=</span> _isArray20 <span class="token operator">?</span> _iterator20 <span class="token operator">:</span> _iterator20<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2224"></td><td><pre>          <span class="token keyword">var</span> _ref19<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2225"></td><td><pre></pre></td></tr><tr><td data-num="2226"></td><td><pre>          <span class="token keyword">if</span> <span class="token punctuation">(</span>_isArray20<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2227"></td><td><pre>            <span class="token keyword">if</span> <span class="token punctuation">(</span>_i21 <span class="token operator">>=</span> _iterator20<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2228"></td><td><pre>            _ref19 <span class="token operator">=</span> _iterator20<span class="token punctuation">[</span>_i21<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2229"></td><td><pre>          <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2230"></td><td><pre>            _i21 <span class="token operator">=</span> _iterator20<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2231"></td><td><pre>            <span class="token keyword">if</span> <span class="token punctuation">(</span>_i21<span class="token punctuation">.</span>done<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2232"></td><td><pre>            _ref19 <span class="token operator">=</span> _i21<span class="token punctuation">.</span>value<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2233"></td><td><pre>          <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2234"></td><td><pre></pre></td></tr><tr><td data-num="2235"></td><td><pre>          <span class="token keyword">var</span> groupedFile <span class="token operator">=</span> _ref19<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2236"></td><td><pre></pre></td></tr><tr><td data-num="2237"></td><td><pre>          groupedFile<span class="token punctuation">.</span>status <span class="token operator">=</span> Dropzone<span class="token punctuation">.</span><span class="token constant">CANCELED</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2238"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2239"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> file<span class="token punctuation">.</span>xhr <span class="token operator">!==</span> <span class="token string">'undefined'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2240"></td><td><pre>          file<span class="token punctuation">.</span>xhr<span class="token punctuation">.</span><span class="token function">abort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2241"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2242"></td><td><pre>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> _iterator21 <span class="token operator">=</span> groupedFiles<span class="token punctuation">,</span> _isArray21 <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>_iterator21<span class="token punctuation">)</span><span class="token punctuation">,</span> _i22 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> _iterator21 <span class="token operator">=</span> _isArray21 <span class="token operator">?</span> _iterator21 <span class="token operator">:</span> _iterator21<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2243"></td><td><pre>          <span class="token keyword">var</span> _ref20<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2244"></td><td><pre></pre></td></tr><tr><td data-num="2245"></td><td><pre>          <span class="token keyword">if</span> <span class="token punctuation">(</span>_isArray21<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2246"></td><td><pre>            <span class="token keyword">if</span> <span class="token punctuation">(</span>_i22 <span class="token operator">>=</span> _iterator21<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2247"></td><td><pre>            _ref20 <span class="token operator">=</span> _iterator21<span class="token punctuation">[</span>_i22<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2248"></td><td><pre>          <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2249"></td><td><pre>            _i22 <span class="token operator">=</span> _iterator21<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2250"></td><td><pre>            <span class="token keyword">if</span> <span class="token punctuation">(</span>_i22<span class="token punctuation">.</span>done<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2251"></td><td><pre>            _ref20 <span class="token operator">=</span> _i22<span class="token punctuation">.</span>value<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2252"></td><td><pre>          <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2253"></td><td><pre></pre></td></tr><tr><td data-num="2254"></td><td><pre>          <span class="token keyword">var</span> _groupedFile <span class="token operator">=</span> _ref20<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2255"></td><td><pre></pre></td></tr><tr><td data-num="2256"></td><td><pre>          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">"canceled"</span><span class="token punctuation">,</span> _groupedFile<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2257"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2258"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>uploadMultiple<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2259"></td><td><pre>          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">"canceledmultiple"</span><span class="token punctuation">,</span> groupedFiles<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2260"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2261"></td><td><pre>      <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>file<span class="token punctuation">.</span>status <span class="token operator">===</span> Dropzone<span class="token punctuation">.</span><span class="token constant">ADDED</span> <span class="token operator">||</span> file<span class="token punctuation">.</span>status <span class="token operator">===</span> Dropzone<span class="token punctuation">.</span><span class="token constant">QUEUED</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2262"></td><td><pre>        file<span class="token punctuation">.</span>status <span class="token operator">=</span> Dropzone<span class="token punctuation">.</span><span class="token constant">CANCELED</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2263"></td><td><pre>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">"canceled"</span><span class="token punctuation">,</span> file<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2264"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>uploadMultiple<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2265"></td><td><pre>          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">"canceledmultiple"</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>file<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2266"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2267"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2268"></td><td><pre></pre></td></tr><tr><td data-num="2269"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>autoProcessQueue<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2270"></td><td><pre>        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">processQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2271"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2272"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2273"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2274"></td><td><pre>    key<span class="token operator">:</span> <span class="token string">"resolveOption"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="2275"></td><td><pre>    <span class="token function-variable function">value</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">resolveOption</span><span class="token punctuation">(</span><span class="token parameter">option</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2276"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> option <span class="token operator">===</span> <span class="token string">'function'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2277"></td><td><pre>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> _len3 <span class="token operator">=</span> arguments<span class="token punctuation">.</span>length<span class="token punctuation">,</span> args <span class="token operator">=</span> <span class="token function">Array</span><span class="token punctuation">(</span>_len3 <span class="token operator">></span> <span class="token number">1</span> <span class="token operator">?</span> _len3 <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> _key3 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> _key3 <span class="token operator">&lt;</span> _len3<span class="token punctuation">;</span> _key3<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2278"></td><td><pre>          args<span class="token punctuation">[</span>_key3 <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> arguments<span class="token punctuation">[</span>_key3<span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2279"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2280"></td><td><pre></pre></td></tr><tr><td data-num="2281"></td><td><pre>        <span class="token keyword">return</span> <span class="token function">option</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2282"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2283"></td><td><pre>      <span class="token keyword">return</span> option<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2284"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2285"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2286"></td><td><pre>    key<span class="token operator">:</span> <span class="token string">"uploadFile"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="2287"></td><td><pre>    <span class="token function-variable function">value</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">uploadFile</span><span class="token punctuation">(</span><span class="token parameter">file</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2288"></td><td><pre>      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">uploadFiles</span><span class="token punctuation">(</span><span class="token punctuation">[</span>file<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2289"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2290"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2291"></td><td><pre>    key<span class="token operator">:</span> <span class="token string">"uploadFiles"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="2292"></td><td><pre>    <span class="token function-variable function">value</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">uploadFiles</span><span class="token punctuation">(</span><span class="token parameter">files</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2293"></td><td><pre>      <span class="token keyword">var</span> _this14 <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2294"></td><td><pre></pre></td></tr><tr><td data-num="2295"></td><td><pre>      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_transformFiles</span><span class="token punctuation">(</span>files<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">transformedFiles</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2296"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span>files<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>upload<span class="token punctuation">.</span>chunked<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2297"></td><td><pre>          <span class="token comment">// This file should be sent in chunks!</span></pre></td></tr><tr><td data-num="2298"></td><td><pre></pre></td></tr><tr><td data-num="2299"></td><td><pre>          <span class="token comment">// If the chunking option is set, we **know** that there can only be **one** file, since</span></pre></td></tr><tr><td data-num="2300"></td><td><pre>          <span class="token comment">// uploadMultiple is not allowed with this option.</span></pre></td></tr><tr><td data-num="2301"></td><td><pre>          <span class="token keyword">var</span> file <span class="token operator">=</span> files<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2302"></td><td><pre>          <span class="token keyword">var</span> transformedFile <span class="token operator">=</span> transformedFiles<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2303"></td><td><pre>          <span class="token keyword">var</span> startedChunkCount <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2304"></td><td><pre></pre></td></tr><tr><td data-num="2305"></td><td><pre>          file<span class="token punctuation">.</span>upload<span class="token punctuation">.</span>chunks <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2306"></td><td><pre></pre></td></tr><tr><td data-num="2307"></td><td><pre>          <span class="token keyword">var</span> <span class="token function-variable function">handleNextChunk</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">handleNextChunk</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2308"></td><td><pre>            <span class="token keyword">var</span> chunkIndex <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2309"></td><td><pre></pre></td></tr><tr><td data-num="2310"></td><td><pre>            <span class="token comment">// Find the next item in file.upload.chunks that is not defined yet.</span></pre></td></tr><tr><td data-num="2311"></td><td><pre>            <span class="token keyword">while</span> <span class="token punctuation">(</span>file<span class="token punctuation">.</span>upload<span class="token punctuation">.</span>chunks<span class="token punctuation">[</span>chunkIndex<span class="token punctuation">]</span> <span class="token operator">!==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2312"></td><td><pre>              chunkIndex<span class="token operator">++</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2313"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2314"></td><td><pre></pre></td></tr><tr><td data-num="2315"></td><td><pre>            <span class="token comment">// This means, that all chunks have already been started.</span></pre></td></tr><tr><td data-num="2316"></td><td><pre>            <span class="token keyword">if</span> <span class="token punctuation">(</span>chunkIndex <span class="token operator">>=</span> file<span class="token punctuation">.</span>upload<span class="token punctuation">.</span>totalChunkCount<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2317"></td><td><pre></pre></td></tr><tr><td data-num="2318"></td><td><pre>            startedChunkCount<span class="token operator">++</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2319"></td><td><pre></pre></td></tr><tr><td data-num="2320"></td><td><pre>            <span class="token keyword">var</span> start <span class="token operator">=</span> chunkIndex <span class="token operator">*</span> _this14<span class="token punctuation">.</span>options<span class="token punctuation">.</span>chunkSize<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2321"></td><td><pre>            <span class="token keyword">var</span> end <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>start <span class="token operator">+</span> _this14<span class="token punctuation">.</span>options<span class="token punctuation">.</span>chunkSize<span class="token punctuation">,</span> file<span class="token punctuation">.</span>size<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2322"></td><td><pre></pre></td></tr><tr><td data-num="2323"></td><td><pre>            <span class="token keyword">var</span> dataBlock <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2324"></td><td><pre>              name<span class="token operator">:</span> _this14<span class="token punctuation">.</span><span class="token function">_getParamName</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="2325"></td><td><pre>              data<span class="token operator">:</span> transformedFile<span class="token punctuation">.</span>webkitSlice <span class="token operator">?</span> transformedFile<span class="token punctuation">.</span><span class="token function">webkitSlice</span><span class="token punctuation">(</span>start<span class="token punctuation">,</span> end<span class="token punctuation">)</span> <span class="token operator">:</span> transformedFile<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>start<span class="token punctuation">,</span> end<span class="token punctuation">)</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="2326"></td><td><pre>              filename<span class="token operator">:</span> file<span class="token punctuation">.</span>upload<span class="token punctuation">.</span>filename<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="2327"></td><td><pre>              chunkIndex<span class="token operator">:</span> chunkIndex</pre></td></tr><tr><td data-num="2328"></td><td><pre>            <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2329"></td><td><pre></pre></td></tr><tr><td data-num="2330"></td><td><pre>            file<span class="token punctuation">.</span>upload<span class="token punctuation">.</span>chunks<span class="token punctuation">[</span>chunkIndex<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2331"></td><td><pre>              file<span class="token operator">:</span> file<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="2332"></td><td><pre>              index<span class="token operator">:</span> chunkIndex<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="2333"></td><td><pre>              dataBlock<span class="token operator">:</span> dataBlock<span class="token punctuation">,</span> <span class="token comment">// In case we want to retry.</span></pre></td></tr><tr><td data-num="2334"></td><td><pre>              status<span class="token operator">:</span> Dropzone<span class="token punctuation">.</span><span class="token constant">UPLOADING</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="2335"></td><td><pre>              progress<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="2336"></td><td><pre>              retries<span class="token operator">:</span> <span class="token number">0</span> <span class="token comment">// The number of times this block has been retried.</span></pre></td></tr><tr><td data-num="2337"></td><td><pre>            <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2338"></td><td><pre></pre></td></tr><tr><td data-num="2339"></td><td><pre>            _this14<span class="token punctuation">.</span><span class="token function">_uploadData</span><span class="token punctuation">(</span>files<span class="token punctuation">,</span> <span class="token punctuation">[</span>dataBlock<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2340"></td><td><pre>          <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2341"></td><td><pre></pre></td></tr><tr><td data-num="2342"></td><td><pre>          file<span class="token punctuation">.</span>upload<span class="token punctuation">.</span><span class="token function-variable function">finishedChunkUpload</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">chunk</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2343"></td><td><pre>            <span class="token keyword">var</span> allFinished <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2344"></td><td><pre>            chunk<span class="token punctuation">.</span>status <span class="token operator">=</span> Dropzone<span class="token punctuation">.</span><span class="token constant">SUCCESS</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2345"></td><td><pre></pre></td></tr><tr><td data-num="2346"></td><td><pre>            <span class="token comment">// Clear the data from the chunk</span></pre></td></tr><tr><td data-num="2347"></td><td><pre>            chunk<span class="token punctuation">.</span>dataBlock <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2348"></td><td><pre>            <span class="token comment">// Leaving this reference to xhr intact here will cause memory leaks in some browsers</span></pre></td></tr><tr><td data-num="2349"></td><td><pre>            chunk<span class="token punctuation">.</span>xhr <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2350"></td><td><pre></pre></td></tr><tr><td data-num="2351"></td><td><pre>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> file<span class="token punctuation">.</span>upload<span class="token punctuation">.</span>totalChunkCount<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2352"></td><td><pre>              <span class="token keyword">if</span> <span class="token punctuation">(</span>file<span class="token punctuation">.</span>upload<span class="token punctuation">.</span>chunks<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2353"></td><td><pre>                <span class="token keyword">return</span> <span class="token function">handleNextChunk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2354"></td><td><pre>              <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2355"></td><td><pre>              <span class="token keyword">if</span> <span class="token punctuation">(</span>file<span class="token punctuation">.</span>upload<span class="token punctuation">.</span>chunks<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>status <span class="token operator">!==</span> Dropzone<span class="token punctuation">.</span><span class="token constant">SUCCESS</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2356"></td><td><pre>                allFinished <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2357"></td><td><pre>              <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2358"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2359"></td><td><pre></pre></td></tr><tr><td data-num="2360"></td><td><pre>            <span class="token keyword">if</span> <span class="token punctuation">(</span>allFinished<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2361"></td><td><pre>              _this14<span class="token punctuation">.</span>options<span class="token punctuation">.</span><span class="token function">chunksUploaded</span><span class="token punctuation">(</span>file<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2362"></td><td><pre>                _this14<span class="token punctuation">.</span><span class="token function">_finished</span><span class="token punctuation">(</span>files<span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2363"></td><td><pre>              <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2364"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2365"></td><td><pre>          <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2366"></td><td><pre></pre></td></tr><tr><td data-num="2367"></td><td><pre>          <span class="token keyword">if</span> <span class="token punctuation">(</span>_this14<span class="token punctuation">.</span>options<span class="token punctuation">.</span>parallelChunkUploads<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2368"></td><td><pre>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> file<span class="token punctuation">.</span>upload<span class="token punctuation">.</span>totalChunkCount<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2369"></td><td><pre>              <span class="token function">handleNextChunk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2370"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2371"></td><td><pre>          <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2372"></td><td><pre>            <span class="token function">handleNextChunk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2373"></td><td><pre>          <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2374"></td><td><pre>        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2375"></td><td><pre>          <span class="token keyword">var</span> dataBlocks <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2376"></td><td><pre>          <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> _i23 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> _i23 <span class="token operator">&lt;</span> files<span class="token punctuation">.</span>length<span class="token punctuation">;</span> _i23<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2377"></td><td><pre>            dataBlocks<span class="token punctuation">[</span>_i23<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2378"></td><td><pre>              name<span class="token operator">:</span> _this14<span class="token punctuation">.</span><span class="token function">_getParamName</span><span class="token punctuation">(</span>_i23<span class="token punctuation">)</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="2379"></td><td><pre>              data<span class="token operator">:</span> transformedFiles<span class="token punctuation">[</span>_i23<span class="token punctuation">]</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="2380"></td><td><pre>              filename<span class="token operator">:</span> files<span class="token punctuation">[</span>_i23<span class="token punctuation">]</span><span class="token punctuation">.</span>upload<span class="token punctuation">.</span>filename</pre></td></tr><tr><td data-num="2381"></td><td><pre>            <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2382"></td><td><pre>          <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2383"></td><td><pre>          _this14<span class="token punctuation">.</span><span class="token function">_uploadData</span><span class="token punctuation">(</span>files<span class="token punctuation">,</span> dataBlocks<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2384"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2385"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2386"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2387"></td><td><pre></pre></td></tr><tr><td data-num="2388"></td><td><pre>    <span class="token comment">/// Returns the right chunk for given file and xhr</span></pre></td></tr><tr><td data-num="2389"></td><td><pre></pre></td></tr><tr><td data-num="2390"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2391"></td><td><pre>    key<span class="token operator">:</span> <span class="token string">"_getChunk"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="2392"></td><td><pre>    <span class="token function-variable function">value</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">_getChunk</span><span class="token punctuation">(</span><span class="token parameter">file<span class="token punctuation">,</span> xhr</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2393"></td><td><pre>      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> file<span class="token punctuation">.</span>upload<span class="token punctuation">.</span>totalChunkCount<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2394"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span>file<span class="token punctuation">.</span>upload<span class="token punctuation">.</span>chunks<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">!==</span> <span class="token keyword">undefined</span> <span class="token operator">&amp;&amp;</span> file<span class="token punctuation">.</span>upload<span class="token punctuation">.</span>chunks<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>xhr <span class="token operator">===</span> xhr<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2395"></td><td><pre>          <span class="token keyword">return</span> file<span class="token punctuation">.</span>upload<span class="token punctuation">.</span>chunks<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2396"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2397"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2398"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2399"></td><td><pre></pre></td></tr><tr><td data-num="2400"></td><td><pre>    <span class="token comment">// This function actually uploads the file(s) to the server.</span></pre></td></tr><tr><td data-num="2401"></td><td><pre>    <span class="token comment">// If dataBlocks contains the actual data to upload (meaning, that this could either be transformed</span></pre></td></tr><tr><td data-num="2402"></td><td><pre>    <span class="token comment">// files, or individual chunks for chunked upload).</span></pre></td></tr><tr><td data-num="2403"></td><td><pre></pre></td></tr><tr><td data-num="2404"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2405"></td><td><pre>    key<span class="token operator">:</span> <span class="token string">"_uploadData"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="2406"></td><td><pre>    <span class="token function-variable function">value</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">_uploadData</span><span class="token punctuation">(</span><span class="token parameter">files<span class="token punctuation">,</span> dataBlocks</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2407"></td><td><pre>      <span class="token keyword">var</span> _this15 <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2408"></td><td><pre></pre></td></tr><tr><td data-num="2409"></td><td><pre>      <span class="token keyword">var</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2410"></td><td><pre></pre></td></tr><tr><td data-num="2411"></td><td><pre>      <span class="token comment">// Put the xhr object in the file objects to be able to reference it later.</span></pre></td></tr><tr><td data-num="2412"></td><td><pre>      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> _iterator22 <span class="token operator">=</span> files<span class="token punctuation">,</span> _isArray22 <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>_iterator22<span class="token punctuation">)</span><span class="token punctuation">,</span> _i24 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> _iterator22 <span class="token operator">=</span> _isArray22 <span class="token operator">?</span> _iterator22 <span class="token operator">:</span> _iterator22<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2413"></td><td><pre>        <span class="token keyword">var</span> _ref21<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2414"></td><td><pre></pre></td></tr><tr><td data-num="2415"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span>_isArray22<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2416"></td><td><pre>          <span class="token keyword">if</span> <span class="token punctuation">(</span>_i24 <span class="token operator">>=</span> _iterator22<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2417"></td><td><pre>          _ref21 <span class="token operator">=</span> _iterator22<span class="token punctuation">[</span>_i24<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2418"></td><td><pre>        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2419"></td><td><pre>          _i24 <span class="token operator">=</span> _iterator22<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2420"></td><td><pre>          <span class="token keyword">if</span> <span class="token punctuation">(</span>_i24<span class="token punctuation">.</span>done<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2421"></td><td><pre>          _ref21 <span class="token operator">=</span> _i24<span class="token punctuation">.</span>value<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2422"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2423"></td><td><pre></pre></td></tr><tr><td data-num="2424"></td><td><pre>        <span class="token keyword">var</span> file <span class="token operator">=</span> _ref21<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2425"></td><td><pre></pre></td></tr><tr><td data-num="2426"></td><td><pre>        file<span class="token punctuation">.</span>xhr <span class="token operator">=</span> xhr<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2427"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2428"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span>files<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>upload<span class="token punctuation">.</span>chunked<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2429"></td><td><pre>        <span class="token comment">// Put the xhr object in the right chunk object, so it can be associated later, and found with _getChunk</span></pre></td></tr><tr><td data-num="2430"></td><td><pre>        files<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>upload<span class="token punctuation">.</span>chunks<span class="token punctuation">[</span>dataBlocks<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>chunkIndex<span class="token punctuation">]</span><span class="token punctuation">.</span>xhr <span class="token operator">=</span> xhr<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2431"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2432"></td><td><pre></pre></td></tr><tr><td data-num="2433"></td><td><pre>      <span class="token keyword">var</span> method <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">resolveOption</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>method<span class="token punctuation">,</span> files<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2434"></td><td><pre>      <span class="token keyword">var</span> url <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">resolveOption</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>url<span class="token punctuation">,</span> files<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2435"></td><td><pre>      xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>method<span class="token punctuation">,</span> url<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2436"></td><td><pre></pre></td></tr><tr><td data-num="2437"></td><td><pre>      <span class="token comment">// Setting the timeout after open because of IE11 issue: https://gitlab.com/meno/dropzone/issues/8</span></pre></td></tr><tr><td data-num="2438"></td><td><pre>      xhr<span class="token punctuation">.</span>timeout <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">resolveOption</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>timeout<span class="token punctuation">,</span> files<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2439"></td><td><pre></pre></td></tr><tr><td data-num="2440"></td><td><pre>      <span class="token comment">// Has to be after `.open()`. See https://github.com/enyo/dropzone/issues/179</span></pre></td></tr><tr><td data-num="2441"></td><td><pre>      xhr<span class="token punctuation">.</span>withCredentials <span class="token operator">=</span> <span class="token operator">!</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>withCredentials<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2442"></td><td><pre></pre></td></tr><tr><td data-num="2443"></td><td><pre>      xhr<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2444"></td><td><pre>        _this15<span class="token punctuation">.</span><span class="token function">_finishedUploading</span><span class="token punctuation">(</span>files<span class="token punctuation">,</span> xhr<span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2445"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2446"></td><td><pre></pre></td></tr><tr><td data-num="2447"></td><td><pre>      xhr<span class="token punctuation">.</span><span class="token function-variable function">onerror</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2448"></td><td><pre>        _this15<span class="token punctuation">.</span><span class="token function">_handleUploadError</span><span class="token punctuation">(</span>files<span class="token punctuation">,</span> xhr<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2449"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2450"></td><td><pre></pre></td></tr><tr><td data-num="2451"></td><td><pre>      <span class="token comment">// Some browsers do not have the .upload property</span></pre></td></tr><tr><td data-num="2452"></td><td><pre>      <span class="token keyword">var</span> progressObj <span class="token operator">=</span> xhr<span class="token punctuation">.</span>upload <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">?</span> xhr<span class="token punctuation">.</span>upload <span class="token operator">:</span> xhr<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2453"></td><td><pre>      progressObj<span class="token punctuation">.</span><span class="token function-variable function">onprogress</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2454"></td><td><pre>        <span class="token keyword">return</span> _this15<span class="token punctuation">.</span><span class="token function">_updateFilesUploadProgress</span><span class="token punctuation">(</span>files<span class="token punctuation">,</span> xhr<span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2455"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2456"></td><td><pre></pre></td></tr><tr><td data-num="2457"></td><td><pre>      <span class="token keyword">var</span> headers <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2458"></td><td><pre>        <span class="token string">"Accept"</span><span class="token operator">:</span> <span class="token string">"application/json"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="2459"></td><td><pre>        <span class="token string">"Cache-Control"</span><span class="token operator">:</span> <span class="token string">"no-cache"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="2460"></td><td><pre>        <span class="token string">"X-Requested-With"</span><span class="token operator">:</span> <span class="token string">"XMLHttpRequest"</span></pre></td></tr><tr><td data-num="2461"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2462"></td><td><pre></pre></td></tr><tr><td data-num="2463"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>headers<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2464"></td><td><pre>        Dropzone<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span>headers<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>headers<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2465"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2466"></td><td><pre></pre></td></tr><tr><td data-num="2467"></td><td><pre>      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> headerName <span class="token keyword">in</span> headers<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2468"></td><td><pre>        <span class="token keyword">var</span> headerValue <span class="token operator">=</span> headers<span class="token punctuation">[</span>headerName<span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2469"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span>headerValue<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2470"></td><td><pre>          xhr<span class="token punctuation">.</span><span class="token function">setRequestHeader</span><span class="token punctuation">(</span>headerName<span class="token punctuation">,</span> headerValue<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2471"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2472"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2473"></td><td><pre></pre></td></tr><tr><td data-num="2474"></td><td><pre>      <span class="token keyword">var</span> formData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2475"></td><td><pre></pre></td></tr><tr><td data-num="2476"></td><td><pre>      <span class="token comment">// Adding all @options parameters</span></pre></td></tr><tr><td data-num="2477"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>params<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2478"></td><td><pre>        <span class="token keyword">var</span> additionalParams <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>params<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2479"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> additionalParams <span class="token operator">===</span> <span class="token string">'function'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2480"></td><td><pre>          additionalParams <span class="token operator">=</span> <span class="token function">additionalParams</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> files<span class="token punctuation">,</span> xhr<span class="token punctuation">,</span> files<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>upload<span class="token punctuation">.</span>chunked <span class="token operator">?</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_getChunk</span><span class="token punctuation">(</span>files<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> xhr<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2481"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2482"></td><td><pre></pre></td></tr><tr><td data-num="2483"></td><td><pre>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> key <span class="token keyword">in</span> additionalParams<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2484"></td><td><pre>          <span class="token keyword">var</span> value <span class="token operator">=</span> additionalParams<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2485"></td><td><pre>          formData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2486"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2487"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2488"></td><td><pre></pre></td></tr><tr><td data-num="2489"></td><td><pre>      <span class="token comment">// Let the user add additional data if necessary</span></pre></td></tr><tr><td data-num="2490"></td><td><pre>      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> _iterator23 <span class="token operator">=</span> files<span class="token punctuation">,</span> _isArray23 <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>_iterator23<span class="token punctuation">)</span><span class="token punctuation">,</span> _i25 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> _iterator23 <span class="token operator">=</span> _isArray23 <span class="token operator">?</span> _iterator23 <span class="token operator">:</span> _iterator23<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2491"></td><td><pre>        <span class="token keyword">var</span> _ref22<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2492"></td><td><pre></pre></td></tr><tr><td data-num="2493"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span>_isArray23<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2494"></td><td><pre>          <span class="token keyword">if</span> <span class="token punctuation">(</span>_i25 <span class="token operator">>=</span> _iterator23<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2495"></td><td><pre>          _ref22 <span class="token operator">=</span> _iterator23<span class="token punctuation">[</span>_i25<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2496"></td><td><pre>        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2497"></td><td><pre>          _i25 <span class="token operator">=</span> _iterator23<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2498"></td><td><pre>          <span class="token keyword">if</span> <span class="token punctuation">(</span>_i25<span class="token punctuation">.</span>done<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2499"></td><td><pre>          _ref22 <span class="token operator">=</span> _i25<span class="token punctuation">.</span>value<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2500"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2501"></td><td><pre></pre></td></tr><tr><td data-num="2502"></td><td><pre>        <span class="token keyword">var</span> _file <span class="token operator">=</span> _ref22<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2503"></td><td><pre></pre></td></tr><tr><td data-num="2504"></td><td><pre>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">"sending"</span><span class="token punctuation">,</span> _file<span class="token punctuation">,</span> xhr<span class="token punctuation">,</span> formData<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2505"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2506"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>uploadMultiple<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2507"></td><td><pre>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">"sendingmultiple"</span><span class="token punctuation">,</span> files<span class="token punctuation">,</span> xhr<span class="token punctuation">,</span> formData<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2508"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2509"></td><td><pre></pre></td></tr><tr><td data-num="2510"></td><td><pre>      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_addFormElementData</span><span class="token punctuation">(</span>formData<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2511"></td><td><pre></pre></td></tr><tr><td data-num="2512"></td><td><pre>      <span class="token comment">// Finally add the files</span></pre></td></tr><tr><td data-num="2513"></td><td><pre>      <span class="token comment">// Has to be last because some servers (eg: S3) expect the file to be the last parameter</span></pre></td></tr><tr><td data-num="2514"></td><td><pre>      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> dataBlocks<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2515"></td><td><pre>        <span class="token keyword">var</span> dataBlock <span class="token operator">=</span> dataBlocks<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2516"></td><td><pre>        formData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>dataBlock<span class="token punctuation">.</span>name<span class="token punctuation">,</span> dataBlock<span class="token punctuation">.</span>data<span class="token punctuation">,</span> dataBlock<span class="token punctuation">.</span>filename<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2517"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2518"></td><td><pre></pre></td></tr><tr><td data-num="2519"></td><td><pre>      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">submitRequest</span><span class="token punctuation">(</span>xhr<span class="token punctuation">,</span> formData<span class="token punctuation">,</span> files<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2520"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2521"></td><td><pre></pre></td></tr><tr><td data-num="2522"></td><td><pre>    <span class="token comment">// Transforms all files with this.options.transformFile and invokes done with the transformed files when done.</span></pre></td></tr><tr><td data-num="2523"></td><td><pre></pre></td></tr><tr><td data-num="2524"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2525"></td><td><pre>    key<span class="token operator">:</span> <span class="token string">"_transformFiles"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="2526"></td><td><pre>    <span class="token function-variable function">value</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">_transformFiles</span><span class="token punctuation">(</span><span class="token parameter">files<span class="token punctuation">,</span> done</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2527"></td><td><pre>      <span class="token keyword">var</span> _this16 <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2528"></td><td><pre></pre></td></tr><tr><td data-num="2529"></td><td><pre>      <span class="token keyword">var</span> transformedFiles <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2530"></td><td><pre>      <span class="token comment">// Clumsy way of handling asynchronous calls, until I get to add a proper Future library.</span></pre></td></tr><tr><td data-num="2531"></td><td><pre>      <span class="token keyword">var</span> doneCounter <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2532"></td><td><pre></pre></td></tr><tr><td data-num="2533"></td><td><pre>      <span class="token keyword">var</span> <span class="token function-variable function">_loop</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">_loop</span><span class="token punctuation">(</span><span class="token parameter">i</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2534"></td><td><pre>        _this16<span class="token punctuation">.</span>options<span class="token punctuation">.</span><span class="token function">transformFile</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>_this16<span class="token punctuation">,</span> files<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">transformedFile</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2535"></td><td><pre>          transformedFiles<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> transformedFile<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2536"></td><td><pre>          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">++</span>doneCounter <span class="token operator">===</span> files<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2537"></td><td><pre>            <span class="token function">done</span><span class="token punctuation">(</span>transformedFiles<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2538"></td><td><pre>          <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2539"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2540"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2541"></td><td><pre></pre></td></tr><tr><td data-num="2542"></td><td><pre>      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> files<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2543"></td><td><pre>        <span class="token function">_loop</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2544"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2545"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2546"></td><td><pre></pre></td></tr><tr><td data-num="2547"></td><td><pre>    <span class="token comment">// Takes care of adding other input elements of the form to the AJAX request</span></pre></td></tr><tr><td data-num="2548"></td><td><pre></pre></td></tr><tr><td data-num="2549"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2550"></td><td><pre>    key<span class="token operator">:</span> <span class="token string">"_addFormElementData"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="2551"></td><td><pre>    <span class="token function-variable function">value</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">_addFormElementData</span><span class="token punctuation">(</span><span class="token parameter">formData</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2552"></td><td><pre>      <span class="token comment">// Take care of other input elements</span></pre></td></tr><tr><td data-num="2553"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>element<span class="token punctuation">.</span>tagName <span class="token operator">===</span> <span class="token string">"FORM"</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2554"></td><td><pre>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> _iterator24 <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>element<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">"input, textarea, select, button"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> _isArray24 <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>_iterator24<span class="token punctuation">)</span><span class="token punctuation">,</span> _i26 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> _iterator24 <span class="token operator">=</span> _isArray24 <span class="token operator">?</span> _iterator24 <span class="token operator">:</span> _iterator24<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2555"></td><td><pre>          <span class="token keyword">var</span> _ref23<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2556"></td><td><pre></pre></td></tr><tr><td data-num="2557"></td><td><pre>          <span class="token keyword">if</span> <span class="token punctuation">(</span>_isArray24<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2558"></td><td><pre>            <span class="token keyword">if</span> <span class="token punctuation">(</span>_i26 <span class="token operator">>=</span> _iterator24<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2559"></td><td><pre>            _ref23 <span class="token operator">=</span> _iterator24<span class="token punctuation">[</span>_i26<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2560"></td><td><pre>          <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2561"></td><td><pre>            _i26 <span class="token operator">=</span> _iterator24<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2562"></td><td><pre>            <span class="token keyword">if</span> <span class="token punctuation">(</span>_i26<span class="token punctuation">.</span>done<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2563"></td><td><pre>            _ref23 <span class="token operator">=</span> _i26<span class="token punctuation">.</span>value<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2564"></td><td><pre>          <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2565"></td><td><pre></pre></td></tr><tr><td data-num="2566"></td><td><pre>          <span class="token keyword">var</span> input <span class="token operator">=</span> _ref23<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2567"></td><td><pre></pre></td></tr><tr><td data-num="2568"></td><td><pre>          <span class="token keyword">var</span> inputName <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2569"></td><td><pre>          <span class="token keyword">var</span> inputType <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"type"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2570"></td><td><pre>          <span class="token keyword">if</span> <span class="token punctuation">(</span>inputType<span class="token punctuation">)</span> inputType <span class="token operator">=</span> inputType<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2571"></td><td><pre></pre></td></tr><tr><td data-num="2572"></td><td><pre>          <span class="token comment">// If the input doesn't have a name, we can't use it.</span></pre></td></tr><tr><td data-num="2573"></td><td><pre>          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> inputName <span class="token operator">===</span> <span class="token string">'undefined'</span> <span class="token operator">||</span> inputName <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">continue</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2574"></td><td><pre></pre></td></tr><tr><td data-num="2575"></td><td><pre>          <span class="token keyword">if</span> <span class="token punctuation">(</span>input<span class="token punctuation">.</span>tagName <span class="token operator">===</span> <span class="token string">"SELECT"</span> <span class="token operator">&amp;&amp;</span> input<span class="token punctuation">.</span><span class="token function">hasAttribute</span><span class="token punctuation">(</span><span class="token string">"multiple"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2576"></td><td><pre>            <span class="token comment">// Possibly multiple values</span></pre></td></tr><tr><td data-num="2577"></td><td><pre>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> _iterator25 <span class="token operator">=</span> input<span class="token punctuation">.</span>options<span class="token punctuation">,</span> _isArray25 <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>_iterator25<span class="token punctuation">)</span><span class="token punctuation">,</span> _i27 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> _iterator25 <span class="token operator">=</span> _isArray25 <span class="token operator">?</span> _iterator25 <span class="token operator">:</span> _iterator25<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2578"></td><td><pre>              <span class="token keyword">var</span> _ref24<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2579"></td><td><pre></pre></td></tr><tr><td data-num="2580"></td><td><pre>              <span class="token keyword">if</span> <span class="token punctuation">(</span>_isArray25<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2581"></td><td><pre>                <span class="token keyword">if</span> <span class="token punctuation">(</span>_i27 <span class="token operator">>=</span> _iterator25<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2582"></td><td><pre>                _ref24 <span class="token operator">=</span> _iterator25<span class="token punctuation">[</span>_i27<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2583"></td><td><pre>              <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2584"></td><td><pre>                _i27 <span class="token operator">=</span> _iterator25<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2585"></td><td><pre>                <span class="token keyword">if</span> <span class="token punctuation">(</span>_i27<span class="token punctuation">.</span>done<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2586"></td><td><pre>                _ref24 <span class="token operator">=</span> _i27<span class="token punctuation">.</span>value<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2587"></td><td><pre>              <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2588"></td><td><pre></pre></td></tr><tr><td data-num="2589"></td><td><pre>              <span class="token keyword">var</span> option <span class="token operator">=</span> _ref24<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2590"></td><td><pre></pre></td></tr><tr><td data-num="2591"></td><td><pre>              <span class="token keyword">if</span> <span class="token punctuation">(</span>option<span class="token punctuation">.</span>selected<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2592"></td><td><pre>                formData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>inputName<span class="token punctuation">,</span> option<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2593"></td><td><pre>              <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2594"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2595"></td><td><pre>          <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>inputType <span class="token operator">||</span> inputType <span class="token operator">!==</span> <span class="token string">"checkbox"</span> <span class="token operator">&amp;&amp;</span> inputType <span class="token operator">!==</span> <span class="token string">"radio"</span> <span class="token operator">||</span> input<span class="token punctuation">.</span>checked<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2596"></td><td><pre>            formData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>inputName<span class="token punctuation">,</span> input<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2597"></td><td><pre>          <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2598"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2599"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2600"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2601"></td><td><pre></pre></td></tr><tr><td data-num="2602"></td><td><pre>    <span class="token comment">// Invoked when there is new progress information about given files.</span></pre></td></tr><tr><td data-num="2603"></td><td><pre>    <span class="token comment">// If e is not provided, it is assumed that the upload is finished.</span></pre></td></tr><tr><td data-num="2604"></td><td><pre></pre></td></tr><tr><td data-num="2605"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2606"></td><td><pre>    key<span class="token operator">:</span> <span class="token string">"_updateFilesUploadProgress"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="2607"></td><td><pre>    <span class="token function-variable function">value</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">_updateFilesUploadProgress</span><span class="token punctuation">(</span><span class="token parameter">files<span class="token punctuation">,</span> xhr<span class="token punctuation">,</span> e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2608"></td><td><pre>      <span class="token keyword">var</span> progress <span class="token operator">=</span> <span class="token keyword">void</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2609"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> e <span class="token operator">!==</span> <span class="token string">'undefined'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2610"></td><td><pre>        progress <span class="token operator">=</span> <span class="token number">100</span> <span class="token operator">*</span> e<span class="token punctuation">.</span>loaded <span class="token operator">/</span> e<span class="token punctuation">.</span>total<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2611"></td><td><pre></pre></td></tr><tr><td data-num="2612"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span>files<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>upload<span class="token punctuation">.</span>chunked<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2613"></td><td><pre>          <span class="token keyword">var</span> file <span class="token operator">=</span> files<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2614"></td><td><pre>          <span class="token comment">// Since this is a chunked upload, we need to update the appropriate chunk progress.</span></pre></td></tr><tr><td data-num="2615"></td><td><pre>          <span class="token keyword">var</span> chunk <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_getChunk</span><span class="token punctuation">(</span>file<span class="token punctuation">,</span> xhr<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2616"></td><td><pre>          chunk<span class="token punctuation">.</span>progress <span class="token operator">=</span> progress<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2617"></td><td><pre>          chunk<span class="token punctuation">.</span>total <span class="token operator">=</span> e<span class="token punctuation">.</span>total<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2618"></td><td><pre>          chunk<span class="token punctuation">.</span>bytesSent <span class="token operator">=</span> e<span class="token punctuation">.</span>loaded<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2619"></td><td><pre>          <span class="token keyword">var</span> fileProgress <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="2620"></td><td><pre>              fileTotal <span class="token operator">=</span> <span class="token keyword">void</span> <span class="token number">0</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="2621"></td><td><pre>              fileBytesSent <span class="token operator">=</span> <span class="token keyword">void</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2622"></td><td><pre>          file<span class="token punctuation">.</span>upload<span class="token punctuation">.</span>progress <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2623"></td><td><pre>          file<span class="token punctuation">.</span>upload<span class="token punctuation">.</span>total <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2624"></td><td><pre>          file<span class="token punctuation">.</span>upload<span class="token punctuation">.</span>bytesSent <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2625"></td><td><pre>          <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> file<span class="token punctuation">.</span>upload<span class="token punctuation">.</span>totalChunkCount<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2626"></td><td><pre>            <span class="token keyword">if</span> <span class="token punctuation">(</span>file<span class="token punctuation">.</span>upload<span class="token punctuation">.</span>chunks<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">!==</span> <span class="token keyword">undefined</span> <span class="token operator">&amp;&amp;</span> file<span class="token punctuation">.</span>upload<span class="token punctuation">.</span>chunks<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>progress <span class="token operator">!==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2627"></td><td><pre>              file<span class="token punctuation">.</span>upload<span class="token punctuation">.</span>progress <span class="token operator">+=</span> file<span class="token punctuation">.</span>upload<span class="token punctuation">.</span>chunks<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>progress<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2628"></td><td><pre>              file<span class="token punctuation">.</span>upload<span class="token punctuation">.</span>total <span class="token operator">+=</span> file<span class="token punctuation">.</span>upload<span class="token punctuation">.</span>chunks<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>total<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2629"></td><td><pre>              file<span class="token punctuation">.</span>upload<span class="token punctuation">.</span>bytesSent <span class="token operator">+=</span> file<span class="token punctuation">.</span>upload<span class="token punctuation">.</span>chunks<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>bytesSent<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2630"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2631"></td><td><pre>          <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2632"></td><td><pre>          file<span class="token punctuation">.</span>upload<span class="token punctuation">.</span>progress <span class="token operator">=</span> file<span class="token punctuation">.</span>upload<span class="token punctuation">.</span>progress <span class="token operator">/</span> file<span class="token punctuation">.</span>upload<span class="token punctuation">.</span>totalChunkCount<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2633"></td><td><pre>        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2634"></td><td><pre>          <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> _iterator26 <span class="token operator">=</span> files<span class="token punctuation">,</span> _isArray26 <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>_iterator26<span class="token punctuation">)</span><span class="token punctuation">,</span> _i28 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> _iterator26 <span class="token operator">=</span> _isArray26 <span class="token operator">?</span> _iterator26 <span class="token operator">:</span> _iterator26<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2635"></td><td><pre>            <span class="token keyword">var</span> _ref25<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2636"></td><td><pre></pre></td></tr><tr><td data-num="2637"></td><td><pre>            <span class="token keyword">if</span> <span class="token punctuation">(</span>_isArray26<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2638"></td><td><pre>              <span class="token keyword">if</span> <span class="token punctuation">(</span>_i28 <span class="token operator">>=</span> _iterator26<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2639"></td><td><pre>              _ref25 <span class="token operator">=</span> _iterator26<span class="token punctuation">[</span>_i28<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2640"></td><td><pre>            <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2641"></td><td><pre>              _i28 <span class="token operator">=</span> _iterator26<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2642"></td><td><pre>              <span class="token keyword">if</span> <span class="token punctuation">(</span>_i28<span class="token punctuation">.</span>done<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2643"></td><td><pre>              _ref25 <span class="token operator">=</span> _i28<span class="token punctuation">.</span>value<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2644"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2645"></td><td><pre></pre></td></tr><tr><td data-num="2646"></td><td><pre>            <span class="token keyword">var</span> _file2 <span class="token operator">=</span> _ref25<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2647"></td><td><pre></pre></td></tr><tr><td data-num="2648"></td><td><pre>            _file2<span class="token punctuation">.</span>upload<span class="token punctuation">.</span>progress <span class="token operator">=</span> progress<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2649"></td><td><pre>            _file2<span class="token punctuation">.</span>upload<span class="token punctuation">.</span>total <span class="token operator">=</span> e<span class="token punctuation">.</span>total<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2650"></td><td><pre>            _file2<span class="token punctuation">.</span>upload<span class="token punctuation">.</span>bytesSent <span class="token operator">=</span> e<span class="token punctuation">.</span>loaded<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2651"></td><td><pre>          <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2652"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2653"></td><td><pre>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> _iterator27 <span class="token operator">=</span> files<span class="token punctuation">,</span> _isArray27 <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>_iterator27<span class="token punctuation">)</span><span class="token punctuation">,</span> _i29 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> _iterator27 <span class="token operator">=</span> _isArray27 <span class="token operator">?</span> _iterator27 <span class="token operator">:</span> _iterator27<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2654"></td><td><pre>          <span class="token keyword">var</span> _ref26<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2655"></td><td><pre></pre></td></tr><tr><td data-num="2656"></td><td><pre>          <span class="token keyword">if</span> <span class="token punctuation">(</span>_isArray27<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2657"></td><td><pre>            <span class="token keyword">if</span> <span class="token punctuation">(</span>_i29 <span class="token operator">>=</span> _iterator27<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2658"></td><td><pre>            _ref26 <span class="token operator">=</span> _iterator27<span class="token punctuation">[</span>_i29<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2659"></td><td><pre>          <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2660"></td><td><pre>            _i29 <span class="token operator">=</span> _iterator27<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2661"></td><td><pre>            <span class="token keyword">if</span> <span class="token punctuation">(</span>_i29<span class="token punctuation">.</span>done<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2662"></td><td><pre>            _ref26 <span class="token operator">=</span> _i29<span class="token punctuation">.</span>value<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2663"></td><td><pre>          <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2664"></td><td><pre></pre></td></tr><tr><td data-num="2665"></td><td><pre>          <span class="token keyword">var</span> _file3 <span class="token operator">=</span> _ref26<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2666"></td><td><pre></pre></td></tr><tr><td data-num="2667"></td><td><pre>          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">"uploadprogress"</span><span class="token punctuation">,</span> _file3<span class="token punctuation">,</span> _file3<span class="token punctuation">.</span>upload<span class="token punctuation">.</span>progress<span class="token punctuation">,</span> _file3<span class="token punctuation">.</span>upload<span class="token punctuation">.</span>bytesSent<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2668"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2669"></td><td><pre>      <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2670"></td><td><pre>        <span class="token comment">// Called when the file finished uploading</span></pre></td></tr><tr><td data-num="2671"></td><td><pre></pre></td></tr><tr><td data-num="2672"></td><td><pre>        <span class="token keyword">var</span> allFilesFinished <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2673"></td><td><pre></pre></td></tr><tr><td data-num="2674"></td><td><pre>        progress <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2675"></td><td><pre></pre></td></tr><tr><td data-num="2676"></td><td><pre>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> _iterator28 <span class="token operator">=</span> files<span class="token punctuation">,</span> _isArray28 <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>_iterator28<span class="token punctuation">)</span><span class="token punctuation">,</span> _i30 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> _iterator28 <span class="token operator">=</span> _isArray28 <span class="token operator">?</span> _iterator28 <span class="token operator">:</span> _iterator28<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2677"></td><td><pre>          <span class="token keyword">var</span> _ref27<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2678"></td><td><pre></pre></td></tr><tr><td data-num="2679"></td><td><pre>          <span class="token keyword">if</span> <span class="token punctuation">(</span>_isArray28<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2680"></td><td><pre>            <span class="token keyword">if</span> <span class="token punctuation">(</span>_i30 <span class="token operator">>=</span> _iterator28<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2681"></td><td><pre>            _ref27 <span class="token operator">=</span> _iterator28<span class="token punctuation">[</span>_i30<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2682"></td><td><pre>          <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2683"></td><td><pre>            _i30 <span class="token operator">=</span> _iterator28<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2684"></td><td><pre>            <span class="token keyword">if</span> <span class="token punctuation">(</span>_i30<span class="token punctuation">.</span>done<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2685"></td><td><pre>            _ref27 <span class="token operator">=</span> _i30<span class="token punctuation">.</span>value<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2686"></td><td><pre>          <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2687"></td><td><pre></pre></td></tr><tr><td data-num="2688"></td><td><pre>          <span class="token keyword">var</span> _file4 <span class="token operator">=</span> _ref27<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2689"></td><td><pre></pre></td></tr><tr><td data-num="2690"></td><td><pre>          <span class="token keyword">if</span> <span class="token punctuation">(</span>_file4<span class="token punctuation">.</span>upload<span class="token punctuation">.</span>progress <span class="token operator">!==</span> <span class="token number">100</span> <span class="token operator">||</span> _file4<span class="token punctuation">.</span>upload<span class="token punctuation">.</span>bytesSent <span class="token operator">!==</span> _file4<span class="token punctuation">.</span>upload<span class="token punctuation">.</span>total<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2691"></td><td><pre>            allFilesFinished <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2692"></td><td><pre>          <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2693"></td><td><pre>          _file4<span class="token punctuation">.</span>upload<span class="token punctuation">.</span>progress <span class="token operator">=</span> progress<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2694"></td><td><pre>          _file4<span class="token punctuation">.</span>upload<span class="token punctuation">.</span>bytesSent <span class="token operator">=</span> _file4<span class="token punctuation">.</span>upload<span class="token punctuation">.</span>total<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2695"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2696"></td><td><pre></pre></td></tr><tr><td data-num="2697"></td><td><pre>        <span class="token comment">// Nothing to do, all files already at 100%</span></pre></td></tr><tr><td data-num="2698"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span>allFilesFinished<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2699"></td><td><pre>          <span class="token keyword">return</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2700"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2701"></td><td><pre></pre></td></tr><tr><td data-num="2702"></td><td><pre>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> _iterator29 <span class="token operator">=</span> files<span class="token punctuation">,</span> _isArray29 <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>_iterator29<span class="token punctuation">)</span><span class="token punctuation">,</span> _i31 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> _iterator29 <span class="token operator">=</span> _isArray29 <span class="token operator">?</span> _iterator29 <span class="token operator">:</span> _iterator29<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2703"></td><td><pre>          <span class="token keyword">var</span> _ref28<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2704"></td><td><pre></pre></td></tr><tr><td data-num="2705"></td><td><pre>          <span class="token keyword">if</span> <span class="token punctuation">(</span>_isArray29<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2706"></td><td><pre>            <span class="token keyword">if</span> <span class="token punctuation">(</span>_i31 <span class="token operator">>=</span> _iterator29<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2707"></td><td><pre>            _ref28 <span class="token operator">=</span> _iterator29<span class="token punctuation">[</span>_i31<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2708"></td><td><pre>          <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2709"></td><td><pre>            _i31 <span class="token operator">=</span> _iterator29<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2710"></td><td><pre>            <span class="token keyword">if</span> <span class="token punctuation">(</span>_i31<span class="token punctuation">.</span>done<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2711"></td><td><pre>            _ref28 <span class="token operator">=</span> _i31<span class="token punctuation">.</span>value<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2712"></td><td><pre>          <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2713"></td><td><pre></pre></td></tr><tr><td data-num="2714"></td><td><pre>          <span class="token keyword">var</span> _file5 <span class="token operator">=</span> _ref28<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2715"></td><td><pre></pre></td></tr><tr><td data-num="2716"></td><td><pre>          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">"uploadprogress"</span><span class="token punctuation">,</span> _file5<span class="token punctuation">,</span> progress<span class="token punctuation">,</span> _file5<span class="token punctuation">.</span>upload<span class="token punctuation">.</span>bytesSent<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2717"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2718"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2719"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2720"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2721"></td><td><pre>    key<span class="token operator">:</span> <span class="token string">"_finishedUploading"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="2722"></td><td><pre>    <span class="token function-variable function">value</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">_finishedUploading</span><span class="token punctuation">(</span><span class="token parameter">files<span class="token punctuation">,</span> xhr<span class="token punctuation">,</span> e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2723"></td><td><pre>      <span class="token keyword">var</span> response <span class="token operator">=</span> <span class="token keyword">void</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2724"></td><td><pre></pre></td></tr><tr><td data-num="2725"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span>files<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>status <span class="token operator">===</span> Dropzone<span class="token punctuation">.</span><span class="token constant">CANCELED</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2726"></td><td><pre>        <span class="token keyword">return</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2727"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2728"></td><td><pre></pre></td></tr><tr><td data-num="2729"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>readyState <span class="token operator">!==</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2730"></td><td><pre>        <span class="token keyword">return</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2731"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2732"></td><td><pre></pre></td></tr><tr><td data-num="2733"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>responseType <span class="token operator">!==</span> <span class="token string">'arraybuffer'</span> <span class="token operator">&amp;&amp;</span> xhr<span class="token punctuation">.</span>responseType <span class="token operator">!==</span> <span class="token string">'blob'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2734"></td><td><pre>        response <span class="token operator">=</span> xhr<span class="token punctuation">.</span>responseText<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2735"></td><td><pre></pre></td></tr><tr><td data-num="2736"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span>xhr<span class="token punctuation">.</span><span class="token function">getResponseHeader</span><span class="token punctuation">(</span><span class="token string">"content-type"</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">~</span>xhr<span class="token punctuation">.</span><span class="token function">getResponseHeader</span><span class="token punctuation">(</span><span class="token string">"content-type"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">"application/json"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2737"></td><td><pre>          <span class="token keyword">try</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2738"></td><td><pre>            response <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2739"></td><td><pre>          <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2740"></td><td><pre>            e <span class="token operator">=</span> error<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2741"></td><td><pre>            response <span class="token operator">=</span> <span class="token string">"Invalid JSON response from server."</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2742"></td><td><pre>          <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2743"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2744"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2745"></td><td><pre></pre></td></tr><tr><td data-num="2746"></td><td><pre>      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_updateFilesUploadProgress</span><span class="token punctuation">(</span>files<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2747"></td><td><pre></pre></td></tr><tr><td data-num="2748"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span><span class="token number">200</span> <span class="token operator">&lt;=</span> xhr<span class="token punctuation">.</span>status <span class="token operator">&amp;&amp;</span> xhr<span class="token punctuation">.</span>status <span class="token operator">&lt;</span> <span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2749"></td><td><pre>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_handleUploadError</span><span class="token punctuation">(</span>files<span class="token punctuation">,</span> xhr<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2750"></td><td><pre>      <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2751"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span>files<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>upload<span class="token punctuation">.</span>chunked<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2752"></td><td><pre>          files<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>upload<span class="token punctuation">.</span><span class="token function">finishedChunkUpload</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_getChunk</span><span class="token punctuation">(</span>files<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> xhr<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2753"></td><td><pre>        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2754"></td><td><pre>          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_finished</span><span class="token punctuation">(</span>files<span class="token punctuation">,</span> response<span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2755"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2756"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2757"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2758"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2759"></td><td><pre>    key<span class="token operator">:</span> <span class="token string">"_handleUploadError"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="2760"></td><td><pre>    <span class="token function-variable function">value</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">_handleUploadError</span><span class="token punctuation">(</span><span class="token parameter">files<span class="token punctuation">,</span> xhr<span class="token punctuation">,</span> response</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2761"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span>files<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>status <span class="token operator">===</span> Dropzone<span class="token punctuation">.</span><span class="token constant">CANCELED</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2762"></td><td><pre>        <span class="token keyword">return</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2763"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2764"></td><td><pre></pre></td></tr><tr><td data-num="2765"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span>files<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>upload<span class="token punctuation">.</span>chunked <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>retryChunks<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2766"></td><td><pre>        <span class="token keyword">var</span> chunk <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_getChunk</span><span class="token punctuation">(</span>files<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> xhr<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2767"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span>chunk<span class="token punctuation">.</span>retries<span class="token operator">++</span> <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>retryChunksLimit<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2768"></td><td><pre>          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_uploadData</span><span class="token punctuation">(</span>files<span class="token punctuation">,</span> <span class="token punctuation">[</span>chunk<span class="token punctuation">.</span>dataBlock<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2769"></td><td><pre>          <span class="token keyword">return</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2770"></td><td><pre>        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2771"></td><td><pre>          console<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span><span class="token string">'Retried this chunk too often. Giving up.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2772"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2773"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2774"></td><td><pre></pre></td></tr><tr><td data-num="2775"></td><td><pre>      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> _iterator30 <span class="token operator">=</span> files<span class="token punctuation">,</span> _isArray30 <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>_iterator30<span class="token punctuation">)</span><span class="token punctuation">,</span> _i32 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> _iterator30 <span class="token operator">=</span> _isArray30 <span class="token operator">?</span> _iterator30 <span class="token operator">:</span> _iterator30<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2776"></td><td><pre>        <span class="token keyword">var</span> _ref29<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2777"></td><td><pre></pre></td></tr><tr><td data-num="2778"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span>_isArray30<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2779"></td><td><pre>          <span class="token keyword">if</span> <span class="token punctuation">(</span>_i32 <span class="token operator">>=</span> _iterator30<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2780"></td><td><pre>          _ref29 <span class="token operator">=</span> _iterator30<span class="token punctuation">[</span>_i32<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2781"></td><td><pre>        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2782"></td><td><pre>          _i32 <span class="token operator">=</span> _iterator30<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2783"></td><td><pre>          <span class="token keyword">if</span> <span class="token punctuation">(</span>_i32<span class="token punctuation">.</span>done<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2784"></td><td><pre>          _ref29 <span class="token operator">=</span> _i32<span class="token punctuation">.</span>value<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2785"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2786"></td><td><pre></pre></td></tr><tr><td data-num="2787"></td><td><pre>        <span class="token keyword">var</span> file <span class="token operator">=</span> _ref29<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2788"></td><td><pre></pre></td></tr><tr><td data-num="2789"></td><td><pre>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_errorProcessing</span><span class="token punctuation">(</span>files<span class="token punctuation">,</span> response <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>dictResponseError<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">,</span> xhr<span class="token punctuation">.</span>status<span class="token punctuation">)</span><span class="token punctuation">,</span> xhr<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2790"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2791"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2792"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2793"></td><td><pre>    key<span class="token operator">:</span> <span class="token string">"submitRequest"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="2794"></td><td><pre>    <span class="token function-variable function">value</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">submitRequest</span><span class="token punctuation">(</span><span class="token parameter">xhr<span class="token punctuation">,</span> formData<span class="token punctuation">,</span> files</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2795"></td><td><pre>      xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>formData<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2796"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2797"></td><td><pre></pre></td></tr><tr><td data-num="2798"></td><td><pre>    <span class="token comment">// Called internally when processing is finished.</span></pre></td></tr><tr><td data-num="2799"></td><td><pre>    <span class="token comment">// Individual callbacks have to be called in the appropriate sections.</span></pre></td></tr><tr><td data-num="2800"></td><td><pre></pre></td></tr><tr><td data-num="2801"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2802"></td><td><pre>    key<span class="token operator">:</span> <span class="token string">"_finished"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="2803"></td><td><pre>    <span class="token function-variable function">value</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">_finished</span><span class="token punctuation">(</span><span class="token parameter">files<span class="token punctuation">,</span> responseText<span class="token punctuation">,</span> e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2804"></td><td><pre>      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> _iterator31 <span class="token operator">=</span> files<span class="token punctuation">,</span> _isArray31 <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>_iterator31<span class="token punctuation">)</span><span class="token punctuation">,</span> _i33 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> _iterator31 <span class="token operator">=</span> _isArray31 <span class="token operator">?</span> _iterator31 <span class="token operator">:</span> _iterator31<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2805"></td><td><pre>        <span class="token keyword">var</span> _ref30<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2806"></td><td><pre></pre></td></tr><tr><td data-num="2807"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span>_isArray31<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2808"></td><td><pre>          <span class="token keyword">if</span> <span class="token punctuation">(</span>_i33 <span class="token operator">>=</span> _iterator31<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2809"></td><td><pre>          _ref30 <span class="token operator">=</span> _iterator31<span class="token punctuation">[</span>_i33<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2810"></td><td><pre>        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2811"></td><td><pre>          _i33 <span class="token operator">=</span> _iterator31<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2812"></td><td><pre>          <span class="token keyword">if</span> <span class="token punctuation">(</span>_i33<span class="token punctuation">.</span>done<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2813"></td><td><pre>          _ref30 <span class="token operator">=</span> _i33<span class="token punctuation">.</span>value<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2814"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2815"></td><td><pre></pre></td></tr><tr><td data-num="2816"></td><td><pre>        <span class="token keyword">var</span> file <span class="token operator">=</span> _ref30<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2817"></td><td><pre></pre></td></tr><tr><td data-num="2818"></td><td><pre>        file<span class="token punctuation">.</span>status <span class="token operator">=</span> Dropzone<span class="token punctuation">.</span><span class="token constant">SUCCESS</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2819"></td><td><pre>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">"success"</span><span class="token punctuation">,</span> file<span class="token punctuation">,</span> responseText<span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2820"></td><td><pre>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">"complete"</span><span class="token punctuation">,</span> file<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2821"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2822"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>uploadMultiple<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2823"></td><td><pre>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">"successmultiple"</span><span class="token punctuation">,</span> files<span class="token punctuation">,</span> responseText<span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2824"></td><td><pre>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">"completemultiple"</span><span class="token punctuation">,</span> files<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2825"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2826"></td><td><pre></pre></td></tr><tr><td data-num="2827"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>autoProcessQueue<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2828"></td><td><pre>        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">processQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2829"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2830"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2831"></td><td><pre></pre></td></tr><tr><td data-num="2832"></td><td><pre>    <span class="token comment">// Called internally when processing is finished.</span></pre></td></tr><tr><td data-num="2833"></td><td><pre>    <span class="token comment">// Individual callbacks have to be called in the appropriate sections.</span></pre></td></tr><tr><td data-num="2834"></td><td><pre></pre></td></tr><tr><td data-num="2835"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2836"></td><td><pre>    key<span class="token operator">:</span> <span class="token string">"_errorProcessing"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="2837"></td><td><pre>    <span class="token function-variable function">value</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">_errorProcessing</span><span class="token punctuation">(</span><span class="token parameter">files<span class="token punctuation">,</span> message<span class="token punctuation">,</span> xhr</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2838"></td><td><pre>      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> _iterator32 <span class="token operator">=</span> files<span class="token punctuation">,</span> _isArray32 <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>_iterator32<span class="token punctuation">)</span><span class="token punctuation">,</span> _i34 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> _iterator32 <span class="token operator">=</span> _isArray32 <span class="token operator">?</span> _iterator32 <span class="token operator">:</span> _iterator32<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2839"></td><td><pre>        <span class="token keyword">var</span> _ref31<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2840"></td><td><pre></pre></td></tr><tr><td data-num="2841"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span>_isArray32<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2842"></td><td><pre>          <span class="token keyword">if</span> <span class="token punctuation">(</span>_i34 <span class="token operator">>=</span> _iterator32<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2843"></td><td><pre>          _ref31 <span class="token operator">=</span> _iterator32<span class="token punctuation">[</span>_i34<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2844"></td><td><pre>        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2845"></td><td><pre>          _i34 <span class="token operator">=</span> _iterator32<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2846"></td><td><pre>          <span class="token keyword">if</span> <span class="token punctuation">(</span>_i34<span class="token punctuation">.</span>done<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2847"></td><td><pre>          _ref31 <span class="token operator">=</span> _i34<span class="token punctuation">.</span>value<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2848"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2849"></td><td><pre></pre></td></tr><tr><td data-num="2850"></td><td><pre>        <span class="token keyword">var</span> file <span class="token operator">=</span> _ref31<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2851"></td><td><pre></pre></td></tr><tr><td data-num="2852"></td><td><pre>        file<span class="token punctuation">.</span>status <span class="token operator">=</span> Dropzone<span class="token punctuation">.</span><span class="token constant">ERROR</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2853"></td><td><pre>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">"error"</span><span class="token punctuation">,</span> file<span class="token punctuation">,</span> message<span class="token punctuation">,</span> xhr<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2854"></td><td><pre>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">"complete"</span><span class="token punctuation">,</span> file<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2855"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2856"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>uploadMultiple<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2857"></td><td><pre>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">"errormultiple"</span><span class="token punctuation">,</span> files<span class="token punctuation">,</span> message<span class="token punctuation">,</span> xhr<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2858"></td><td><pre>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">"completemultiple"</span><span class="token punctuation">,</span> files<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2859"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2860"></td><td><pre></pre></td></tr><tr><td data-num="2861"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>autoProcessQueue<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2862"></td><td><pre>        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">processQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2863"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2864"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2865"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2866"></td><td><pre>    key<span class="token operator">:</span> <span class="token string">"uuidv4"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="2867"></td><td><pre>    <span class="token function-variable function">value</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">uuidv4</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2868"></td><td><pre>      <span class="token keyword">return</span> <span class="token string">'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[xy]</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">c</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2869"></td><td><pre>        <span class="token keyword">var</span> r <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">16</span> <span class="token operator">|</span> <span class="token number">0</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="2870"></td><td><pre>            v <span class="token operator">=</span> c <span class="token operator">===</span> <span class="token string">'x'</span> <span class="token operator">?</span> r <span class="token operator">:</span> r <span class="token operator">&amp;</span> <span class="token number">0x3</span> <span class="token operator">|</span> <span class="token number">0x8</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2871"></td><td><pre>        <span class="token keyword">return</span> v<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2872"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2873"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2874"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2875"></td><td><pre></pre></td></tr><tr><td data-num="2876"></td><td><pre>  <span class="token keyword">return</span> Dropzone<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2877"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">(</span>Emitter<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2878"></td><td><pre></pre></td></tr><tr><td data-num="2879"></td><td><pre>Dropzone<span class="token punctuation">.</span><span class="token function">initClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2880"></td><td><pre></pre></td></tr><tr><td data-num="2881"></td><td><pre>Dropzone<span class="token punctuation">.</span>version <span class="token operator">=</span> <span class="token string">"5.5.0"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2882"></td><td><pre></pre></td></tr><tr><td data-num="2883"></td><td><pre><span class="token comment">// This is a map of options for your different dropzones. Add configurations</span></pre></td></tr><tr><td data-num="2884"></td><td><pre><span class="token comment">// to this object for your different dropzone elemens.</span></pre></td></tr><tr><td data-num="2885"></td><td><pre><span class="token comment">//</span></pre></td></tr><tr><td data-num="2886"></td><td><pre><span class="token comment">// Example:</span></pre></td></tr><tr><td data-num="2887"></td><td><pre><span class="token comment">//</span></pre></td></tr><tr><td data-num="2888"></td><td><pre><span class="token comment">//     Dropzone.options.myDropzoneElementId = &#123; maxFilesize: 1 &#125;;</span></pre></td></tr><tr><td data-num="2889"></td><td><pre><span class="token comment">//</span></pre></td></tr><tr><td data-num="2890"></td><td><pre><span class="token comment">// To disable autoDiscover for a specific element, you can set `false` as an option:</span></pre></td></tr><tr><td data-num="2891"></td><td><pre><span class="token comment">//</span></pre></td></tr><tr><td data-num="2892"></td><td><pre><span class="token comment">//     Dropzone.options.myDisabledElementId = false;</span></pre></td></tr><tr><td data-num="2893"></td><td><pre><span class="token comment">//</span></pre></td></tr><tr><td data-num="2894"></td><td><pre><span class="token comment">// And in html:</span></pre></td></tr><tr><td data-num="2895"></td><td><pre><span class="token comment">//</span></pre></td></tr><tr><td data-num="2896"></td><td><pre><span class="token comment">//     &lt;form action="/upload" id="my-dropzone-element-id" class="dropzone">&lt;/form></span></pre></td></tr><tr><td data-num="2897"></td><td><pre>Dropzone<span class="token punctuation">.</span>options <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2898"></td><td><pre></pre></td></tr><tr><td data-num="2899"></td><td><pre><span class="token comment">// Returns the options for an element or undefined if none available.</span></pre></td></tr><tr><td data-num="2900"></td><td><pre>Dropzone<span class="token punctuation">.</span><span class="token function-variable function">optionsForElement</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">element</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2901"></td><td><pre>  <span class="token comment">// Get the `Dropzone.options.elementId` for this element if it exists</span></pre></td></tr><tr><td data-num="2902"></td><td><pre>  <span class="token keyword">if</span> <span class="token punctuation">(</span>element<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2903"></td><td><pre>    <span class="token keyword">return</span> Dropzone<span class="token punctuation">.</span>options<span class="token punctuation">[</span><span class="token function">camelize</span><span class="token punctuation">(</span>element<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2904"></td><td><pre>  <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2905"></td><td><pre>    <span class="token keyword">return</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2906"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2907"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2908"></td><td><pre></pre></td></tr><tr><td data-num="2909"></td><td><pre><span class="token comment">// Holds a list of all dropzone instances</span></pre></td></tr><tr><td data-num="2910"></td><td><pre>Dropzone<span class="token punctuation">.</span>instances <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2911"></td><td><pre></pre></td></tr><tr><td data-num="2912"></td><td><pre><span class="token comment">// Returns the dropzone for given element if any</span></pre></td></tr><tr><td data-num="2913"></td><td><pre>Dropzone<span class="token punctuation">.</span><span class="token function-variable function">forElement</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">element</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2914"></td><td><pre>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> element <span class="token operator">===</span> <span class="token string">"string"</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2915"></td><td><pre>    element <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2916"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2917"></td><td><pre>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>element <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">?</span> element<span class="token punctuation">.</span>dropzone <span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2918"></td><td><pre>    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">"No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone."</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2919"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2920"></td><td><pre>  <span class="token keyword">return</span> element<span class="token punctuation">.</span>dropzone<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2921"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2922"></td><td><pre></pre></td></tr><tr><td data-num="2923"></td><td><pre><span class="token comment">// Set to false if you don't want Dropzone to automatically find and attach to .dropzone elements.</span></pre></td></tr><tr><td data-num="2924"></td><td><pre>Dropzone<span class="token punctuation">.</span>autoDiscover <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2925"></td><td><pre></pre></td></tr><tr><td data-num="2926"></td><td><pre><span class="token comment">// Looks for all .dropzone elements and creates a dropzone for them</span></pre></td></tr><tr><td data-num="2927"></td><td><pre>Dropzone<span class="token punctuation">.</span><span class="token function-variable function">discover</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2928"></td><td><pre>  <span class="token keyword">var</span> dropzones <span class="token operator">=</span> <span class="token keyword">void</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2929"></td><td><pre>  <span class="token keyword">if</span> <span class="token punctuation">(</span>document<span class="token punctuation">.</span>querySelectorAll<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2930"></td><td><pre>    dropzones <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">".dropzone"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2931"></td><td><pre>  <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2932"></td><td><pre>    dropzones <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2933"></td><td><pre>    <span class="token comment">// IE :(</span></pre></td></tr><tr><td data-num="2934"></td><td><pre>    <span class="token keyword">var</span> <span class="token function-variable function">checkElements</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">checkElements</span><span class="token punctuation">(</span><span class="token parameter">elements</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2935"></td><td><pre>      <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2936"></td><td><pre>        <span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2937"></td><td><pre>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> _iterator33 <span class="token operator">=</span> elements<span class="token punctuation">,</span> _isArray33 <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>_iterator33<span class="token punctuation">)</span><span class="token punctuation">,</span> _i35 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> _iterator33 <span class="token operator">=</span> _isArray33 <span class="token operator">?</span> _iterator33 <span class="token operator">:</span> _iterator33<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2938"></td><td><pre>          <span class="token keyword">var</span> _ref32<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2939"></td><td><pre></pre></td></tr><tr><td data-num="2940"></td><td><pre>          <span class="token keyword">if</span> <span class="token punctuation">(</span>_isArray33<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2941"></td><td><pre>            <span class="token keyword">if</span> <span class="token punctuation">(</span>_i35 <span class="token operator">>=</span> _iterator33<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2942"></td><td><pre>            _ref32 <span class="token operator">=</span> _iterator33<span class="token punctuation">[</span>_i35<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2943"></td><td><pre>          <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2944"></td><td><pre>            _i35 <span class="token operator">=</span> _iterator33<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2945"></td><td><pre>            <span class="token keyword">if</span> <span class="token punctuation">(</span>_i35<span class="token punctuation">.</span>done<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2946"></td><td><pre>            _ref32 <span class="token operator">=</span> _i35<span class="token punctuation">.</span>value<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2947"></td><td><pre>          <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2948"></td><td><pre></pre></td></tr><tr><td data-num="2949"></td><td><pre>          <span class="token keyword">var</span> el <span class="token operator">=</span> _ref32<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2950"></td><td><pre></pre></td></tr><tr><td data-num="2951"></td><td><pre>          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(^| )dropzone($| )</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>el<span class="token punctuation">.</span>className<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2952"></td><td><pre>            result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>dropzones<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2953"></td><td><pre>          <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2954"></td><td><pre>            result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2955"></td><td><pre>          <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2956"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2957"></td><td><pre>        <span class="token keyword">return</span> result<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2958"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2959"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2960"></td><td><pre>    <span class="token function">checkElements</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">"div"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2961"></td><td><pre>    <span class="token function">checkElements</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">"form"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2962"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2963"></td><td><pre></pre></td></tr><tr><td data-num="2964"></td><td><pre>  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2965"></td><td><pre>    <span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2966"></td><td><pre>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> _iterator34 <span class="token operator">=</span> dropzones<span class="token punctuation">,</span> _isArray34 <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>_iterator34<span class="token punctuation">)</span><span class="token punctuation">,</span> _i36 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> _iterator34 <span class="token operator">=</span> _isArray34 <span class="token operator">?</span> _iterator34 <span class="token operator">:</span> _iterator34<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2967"></td><td><pre>      <span class="token keyword">var</span> _ref33<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2968"></td><td><pre></pre></td></tr><tr><td data-num="2969"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span>_isArray34<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2970"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span>_i36 <span class="token operator">>=</span> _iterator34<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2971"></td><td><pre>        _ref33 <span class="token operator">=</span> _iterator34<span class="token punctuation">[</span>_i36<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2972"></td><td><pre>      <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2973"></td><td><pre>        _i36 <span class="token operator">=</span> _iterator34<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2974"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span>_i36<span class="token punctuation">.</span>done<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2975"></td><td><pre>        _ref33 <span class="token operator">=</span> _i36<span class="token punctuation">.</span>value<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2976"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2977"></td><td><pre></pre></td></tr><tr><td data-num="2978"></td><td><pre>      <span class="token keyword">var</span> dropzone <span class="token operator">=</span> _ref33<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2979"></td><td><pre></pre></td></tr><tr><td data-num="2980"></td><td><pre>      <span class="token comment">// Create a dropzone unless auto discover has been disabled for specific element</span></pre></td></tr><tr><td data-num="2981"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span>Dropzone<span class="token punctuation">.</span><span class="token function">optionsForElement</span><span class="token punctuation">(</span>dropzone<span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2982"></td><td><pre>        result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Dropzone</span><span class="token punctuation">(</span>dropzone<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2983"></td><td><pre>      <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2984"></td><td><pre>        result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2985"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2986"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2987"></td><td><pre>    <span class="token keyword">return</span> result<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2988"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2989"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2990"></td><td><pre></pre></td></tr><tr><td data-num="2991"></td><td><pre><span class="token comment">// Since the whole Drag'n'Drop API is pretty new, some browsers implement it,</span></pre></td></tr><tr><td data-num="2992"></td><td><pre><span class="token comment">// but not correctly.</span></pre></td></tr><tr><td data-num="2993"></td><td><pre><span class="token comment">// So I created a blacklist of userAgents. Yes, yes. Browser sniffing, I know.</span></pre></td></tr><tr><td data-num="2994"></td><td><pre><span class="token comment">// But what to do when browsers *theoretically* support an API, but crash</span></pre></td></tr><tr><td data-num="2995"></td><td><pre><span class="token comment">// when using it.</span></pre></td></tr><tr><td data-num="2996"></td><td><pre><span class="token comment">//</span></pre></td></tr><tr><td data-num="2997"></td><td><pre><span class="token comment">// This is a list of regular expressions tested against navigator.userAgent</span></pre></td></tr><tr><td data-num="2998"></td><td><pre><span class="token comment">//</span></pre></td></tr><tr><td data-num="2999"></td><td><pre><span class="token comment">// ** It should only be used on browser that *do* support the API, but</span></pre></td></tr><tr><td data-num="3000"></td><td><pre><span class="token comment">// incorrectly **</span></pre></td></tr><tr><td data-num="3001"></td><td><pre><span class="token comment">//</span></pre></td></tr><tr><td data-num="3002"></td><td><pre>Dropzone<span class="token punctuation">.</span>blacklistedBrowsers <span class="token operator">=</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="3003"></td><td><pre><span class="token comment">// The mac os and windows phone version of opera 12 seems to have a problem with the File drag'n'drop API.</span></pre></td></tr><tr><td data-num="3004"></td><td><pre><span class="token operator">/</span>opera<span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">(</span>Macintosh<span class="token operator">|</span>Windows Phone<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token operator">*</span>version\<span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">12</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3005"></td><td><pre></pre></td></tr><tr><td data-num="3006"></td><td><pre><span class="token comment">// Checks if the browser is supported</span></pre></td></tr><tr><td data-num="3007"></td><td><pre>Dropzone<span class="token punctuation">.</span><span class="token function-variable function">isBrowserSupported</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3008"></td><td><pre>  <span class="token keyword">var</span> capableBrowser <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3009"></td><td><pre></pre></td></tr><tr><td data-num="3010"></td><td><pre>  <span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>File <span class="token operator">&amp;&amp;</span> window<span class="token punctuation">.</span>FileReader <span class="token operator">&amp;&amp;</span> window<span class="token punctuation">.</span>FileList <span class="token operator">&amp;&amp;</span> window<span class="token punctuation">.</span>Blob <span class="token operator">&amp;&amp;</span> window<span class="token punctuation">.</span>FormData <span class="token operator">&amp;&amp;</span> document<span class="token punctuation">.</span>querySelector<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3011"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span><span class="token string">"classList"</span> <span class="token keyword">in</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3012"></td><td><pre>      capableBrowser <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3013"></td><td><pre>    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3014"></td><td><pre>      <span class="token comment">// The browser supports the API, but may be blacklisted.</span></pre></td></tr><tr><td data-num="3015"></td><td><pre>      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> _iterator35 <span class="token operator">=</span> Dropzone<span class="token punctuation">.</span>blacklistedBrowsers<span class="token punctuation">,</span> _isArray35 <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>_iterator35<span class="token punctuation">)</span><span class="token punctuation">,</span> _i37 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> _iterator35 <span class="token operator">=</span> _isArray35 <span class="token operator">?</span> _iterator35 <span class="token operator">:</span> _iterator35<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3016"></td><td><pre>        <span class="token keyword">var</span> _ref34<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3017"></td><td><pre></pre></td></tr><tr><td data-num="3018"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span>_isArray35<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3019"></td><td><pre>          <span class="token keyword">if</span> <span class="token punctuation">(</span>_i37 <span class="token operator">>=</span> _iterator35<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3020"></td><td><pre>          _ref34 <span class="token operator">=</span> _iterator35<span class="token punctuation">[</span>_i37<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3021"></td><td><pre>        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3022"></td><td><pre>          _i37 <span class="token operator">=</span> _iterator35<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3023"></td><td><pre>          <span class="token keyword">if</span> <span class="token punctuation">(</span>_i37<span class="token punctuation">.</span>done<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3024"></td><td><pre>          _ref34 <span class="token operator">=</span> _i37<span class="token punctuation">.</span>value<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3025"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3026"></td><td><pre></pre></td></tr><tr><td data-num="3027"></td><td><pre>        <span class="token keyword">var</span> regex <span class="token operator">=</span> _ref34<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3028"></td><td><pre></pre></td></tr><tr><td data-num="3029"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span>regex<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>navigator<span class="token punctuation">.</span>userAgent<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3030"></td><td><pre>          capableBrowser <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3031"></td><td><pre>          <span class="token keyword">continue</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3032"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3033"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3034"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3035"></td><td><pre>  <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3036"></td><td><pre>    capableBrowser <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3037"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3038"></td><td><pre></pre></td></tr><tr><td data-num="3039"></td><td><pre>  <span class="token keyword">return</span> capableBrowser<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3040"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3041"></td><td><pre></pre></td></tr><tr><td data-num="3042"></td><td><pre>Dropzone<span class="token punctuation">.</span><span class="token function-variable function">dataURItoBlob</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">dataURI</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3043"></td><td><pre>  <span class="token comment">// convert base64 to raw binary data held in a string</span></pre></td></tr><tr><td data-num="3044"></td><td><pre>  <span class="token comment">// doesn't handle URLEncoded DataURIs - see SO answer #6850276 for code that does this</span></pre></td></tr><tr><td data-num="3045"></td><td><pre>  <span class="token keyword">var</span> byteString <span class="token operator">=</span> <span class="token function">atob</span><span class="token punctuation">(</span>dataURI<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3046"></td><td><pre></pre></td></tr><tr><td data-num="3047"></td><td><pre>  <span class="token comment">// separate out the mime component</span></pre></td></tr><tr><td data-num="3048"></td><td><pre>  <span class="token keyword">var</span> mimeString <span class="token operator">=</span> dataURI<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">':'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">';'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3049"></td><td><pre></pre></td></tr><tr><td data-num="3050"></td><td><pre>  <span class="token comment">// write the bytes of the string to an ArrayBuffer</span></pre></td></tr><tr><td data-num="3051"></td><td><pre>  <span class="token keyword">var</span> ab <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayBuffer</span><span class="token punctuation">(</span>byteString<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3052"></td><td><pre>  <span class="token keyword">var</span> ia <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Uint8Array</span><span class="token punctuation">(</span>ab<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3053"></td><td><pre>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> end <span class="token operator">=</span> byteString<span class="token punctuation">.</span>length<span class="token punctuation">,</span> asc <span class="token operator">=</span> <span class="token number">0</span> <span class="token operator">&lt;=</span> end<span class="token punctuation">;</span> asc <span class="token operator">?</span> i <span class="token operator">&lt;=</span> end <span class="token operator">:</span> i <span class="token operator">>=</span> end<span class="token punctuation">;</span> asc <span class="token operator">?</span> i<span class="token operator">++</span> <span class="token operator">:</span> i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3054"></td><td><pre>    ia<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> byteString<span class="token punctuation">.</span><span class="token function">charCodeAt</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3055"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3056"></td><td><pre></pre></td></tr><tr><td data-num="3057"></td><td><pre>  <span class="token comment">// write the ArrayBuffer to a blob</span></pre></td></tr><tr><td data-num="3058"></td><td><pre>  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Blob</span><span class="token punctuation">(</span><span class="token punctuation">[</span>ab<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span> type<span class="token operator">:</span> mimeString <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3059"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3060"></td><td><pre></pre></td></tr><tr><td data-num="3061"></td><td><pre><span class="token comment">// Returns an array without the rejected item</span></pre></td></tr><tr><td data-num="3062"></td><td><pre><span class="token keyword">var</span> <span class="token function-variable function">without</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">without</span><span class="token punctuation">(</span><span class="token parameter">list<span class="token punctuation">,</span> rejectedItem</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3063"></td><td><pre>  <span class="token keyword">return</span> list<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3064"></td><td><pre>    <span class="token keyword">return</span> item <span class="token operator">!==</span> rejectedItem<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3065"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3066"></td><td><pre>    <span class="token keyword">return</span> item<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3067"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3068"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3069"></td><td><pre></pre></td></tr><tr><td data-num="3070"></td><td><pre><span class="token comment">// abc-def_ghi -> abcDefGhi</span></pre></td></tr><tr><td data-num="3071"></td><td><pre><span class="token keyword">var</span> <span class="token function-variable function">camelize</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">camelize</span><span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3072"></td><td><pre>  <span class="token keyword">return</span> str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[\-_](\w)</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">match</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3073"></td><td><pre>    <span class="token keyword">return</span> match<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3074"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3075"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3076"></td><td><pre></pre></td></tr><tr><td data-num="3077"></td><td><pre><span class="token comment">// Creates an element from string</span></pre></td></tr><tr><td data-num="3078"></td><td><pre>Dropzone<span class="token punctuation">.</span><span class="token function-variable function">createElement</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">string</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3079"></td><td><pre>  <span class="token keyword">var</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"div"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3080"></td><td><pre>  div<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> string<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3081"></td><td><pre>  <span class="token keyword">return</span> div<span class="token punctuation">.</span>childNodes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3082"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3083"></td><td><pre></pre></td></tr><tr><td data-num="3084"></td><td><pre><span class="token comment">// Tests if given element is inside (or simply is) the container</span></pre></td></tr><tr><td data-num="3085"></td><td><pre>Dropzone<span class="token punctuation">.</span><span class="token function-variable function">elementInside</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">element<span class="token punctuation">,</span> container</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3086"></td><td><pre>  <span class="token keyword">if</span> <span class="token punctuation">(</span>element <span class="token operator">===</span> container<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3087"></td><td><pre>    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3088"></td><td><pre>  <span class="token punctuation">&#125;</span> <span class="token comment">// Coffeescript doesn't support do/while loops</span></pre></td></tr><tr><td data-num="3089"></td><td><pre>  <span class="token keyword">while</span> <span class="token punctuation">(</span>element <span class="token operator">=</span> element<span class="token punctuation">.</span>parentNode<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3090"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span>element <span class="token operator">===</span> container<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3091"></td><td><pre>      <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3092"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3093"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3094"></td><td><pre>  <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3095"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3096"></td><td><pre></pre></td></tr><tr><td data-num="3097"></td><td><pre>Dropzone<span class="token punctuation">.</span><span class="token function-variable function">getElement</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> name</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3098"></td><td><pre>  <span class="token keyword">var</span> element <span class="token operator">=</span> <span class="token keyword">void</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3099"></td><td><pre>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> el <span class="token operator">===</span> <span class="token string">"string"</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3100"></td><td><pre>    element <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3101"></td><td><pre>  <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>el<span class="token punctuation">.</span>nodeType <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3102"></td><td><pre>    element <span class="token operator">=</span> el<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3103"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3104"></td><td><pre>  <span class="token keyword">if</span> <span class="token punctuation">(</span>element <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3105"></td><td><pre>    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">"Invalid `"</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">"` option provided. Please provide a CSS selector or a plain HTML element."</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3106"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3107"></td><td><pre>  <span class="token keyword">return</span> element<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3108"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3109"></td><td><pre></pre></td></tr><tr><td data-num="3110"></td><td><pre>Dropzone<span class="token punctuation">.</span><span class="token function-variable function">getElements</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">els<span class="token punctuation">,</span> name</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3111"></td><td><pre>  <span class="token keyword">var</span> el <span class="token operator">=</span> <span class="token keyword">void</span> <span class="token number">0</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3112"></td><td><pre>      elements <span class="token operator">=</span> <span class="token keyword">void</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3113"></td><td><pre>  <span class="token keyword">if</span> <span class="token punctuation">(</span>els <span class="token keyword">instanceof</span> <span class="token class-name">Array</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3114"></td><td><pre>    elements <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3115"></td><td><pre>    <span class="token keyword">try</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3116"></td><td><pre>      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> _iterator36 <span class="token operator">=</span> els<span class="token punctuation">,</span> _isArray36 <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>_iterator36<span class="token punctuation">)</span><span class="token punctuation">,</span> _i38 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> _iterator36 <span class="token operator">=</span> _isArray36 <span class="token operator">?</span> _iterator36 <span class="token operator">:</span> _iterator36<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3117"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span>_isArray36<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3118"></td><td><pre>          <span class="token keyword">if</span> <span class="token punctuation">(</span>_i38 <span class="token operator">>=</span> _iterator36<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3119"></td><td><pre>          el <span class="token operator">=</span> _iterator36<span class="token punctuation">[</span>_i38<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3120"></td><td><pre>        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3121"></td><td><pre>          _i38 <span class="token operator">=</span> _iterator36<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3122"></td><td><pre>          <span class="token keyword">if</span> <span class="token punctuation">(</span>_i38<span class="token punctuation">.</span>done<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3123"></td><td><pre>          el <span class="token operator">=</span> _i38<span class="token punctuation">.</span>value<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3124"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3125"></td><td><pre></pre></td></tr><tr><td data-num="3126"></td><td><pre>        elements<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getElement</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3127"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3128"></td><td><pre>    <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3129"></td><td><pre>      elements <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3130"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3131"></td><td><pre>  <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> els <span class="token operator">===</span> <span class="token string">"string"</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3132"></td><td><pre>    elements <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3133"></td><td><pre>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> _iterator37 <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span>els<span class="token punctuation">)</span><span class="token punctuation">,</span> _isArray37 <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>_iterator37<span class="token punctuation">)</span><span class="token punctuation">,</span> _i39 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> _iterator37 <span class="token operator">=</span> _isArray37 <span class="token operator">?</span> _iterator37 <span class="token operator">:</span> _iterator37<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3134"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span>_isArray37<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3135"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span>_i39 <span class="token operator">>=</span> _iterator37<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3136"></td><td><pre>        el <span class="token operator">=</span> _iterator37<span class="token punctuation">[</span>_i39<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3137"></td><td><pre>      <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3138"></td><td><pre>        _i39 <span class="token operator">=</span> _iterator37<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3139"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span>_i39<span class="token punctuation">.</span>done<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3140"></td><td><pre>        el <span class="token operator">=</span> _i39<span class="token punctuation">.</span>value<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3141"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3142"></td><td><pre></pre></td></tr><tr><td data-num="3143"></td><td><pre>      elements<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3144"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3145"></td><td><pre>  <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>els<span class="token punctuation">.</span>nodeType <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3146"></td><td><pre>    elements <span class="token operator">=</span> <span class="token punctuation">[</span>els<span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3147"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3148"></td><td><pre></pre></td></tr><tr><td data-num="3149"></td><td><pre>  <span class="token keyword">if</span> <span class="token punctuation">(</span>elements <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> <span class="token operator">!</span>elements<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3150"></td><td><pre>    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">"Invalid `"</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">"` option provided. Please provide a CSS selector, a plain HTML element or a list of those."</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3151"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3152"></td><td><pre></pre></td></tr><tr><td data-num="3153"></td><td><pre>  <span class="token keyword">return</span> elements<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3154"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3155"></td><td><pre></pre></td></tr><tr><td data-num="3156"></td><td><pre><span class="token comment">// Asks the user the question and calls accepted or rejected accordingly</span></pre></td></tr><tr><td data-num="3157"></td><td><pre><span class="token comment">//</span></pre></td></tr><tr><td data-num="3158"></td><td><pre><span class="token comment">// The default implementation just uses `window.confirm` and then calls the</span></pre></td></tr><tr><td data-num="3159"></td><td><pre><span class="token comment">// appropriate callback.</span></pre></td></tr><tr><td data-num="3160"></td><td><pre>Dropzone<span class="token punctuation">.</span><span class="token function-variable function">confirm</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">question<span class="token punctuation">,</span> accepted<span class="token punctuation">,</span> rejected</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3161"></td><td><pre>  <span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span><span class="token function">confirm</span><span class="token punctuation">(</span>question<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3162"></td><td><pre>    <span class="token keyword">return</span> <span class="token function">accepted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3163"></td><td><pre>  <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>rejected <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3164"></td><td><pre>    <span class="token keyword">return</span> <span class="token function">rejected</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3165"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3166"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3167"></td><td><pre></pre></td></tr><tr><td data-num="3168"></td><td><pre><span class="token comment">// Validates the mime type like this:</span></pre></td></tr><tr><td data-num="3169"></td><td><pre><span class="token comment">//</span></pre></td></tr><tr><td data-num="3170"></td><td><pre><span class="token comment">// https://developer.mozilla.org/en-US/docs/HTML/Element/input#attr-accept</span></pre></td></tr><tr><td data-num="3171"></td><td><pre>Dropzone<span class="token punctuation">.</span><span class="token function-variable function">isValidFile</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">file<span class="token punctuation">,</span> acceptedFiles</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3172"></td><td><pre>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>acceptedFiles<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3173"></td><td><pre>    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3174"></td><td><pre>  <span class="token punctuation">&#125;</span> <span class="token comment">// If there are no accepted mime types, it's OK</span></pre></td></tr><tr><td data-num="3175"></td><td><pre>  acceptedFiles <span class="token operator">=</span> acceptedFiles<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">","</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3176"></td><td><pre></pre></td></tr><tr><td data-num="3177"></td><td><pre>  <span class="token keyword">var</span> mimeType <span class="token operator">=</span> file<span class="token punctuation">.</span>type<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3178"></td><td><pre>  <span class="token keyword">var</span> baseMimeType <span class="token operator">=</span> mimeType<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\/.*$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3179"></td><td><pre></pre></td></tr><tr><td data-num="3180"></td><td><pre>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> _iterator38 <span class="token operator">=</span> acceptedFiles<span class="token punctuation">,</span> _isArray38 <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>_iterator38<span class="token punctuation">)</span><span class="token punctuation">,</span> _i40 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> _iterator38 <span class="token operator">=</span> _isArray38 <span class="token operator">?</span> _iterator38 <span class="token operator">:</span> _iterator38<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3181"></td><td><pre>    <span class="token keyword">var</span> _ref35<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3182"></td><td><pre></pre></td></tr><tr><td data-num="3183"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span>_isArray38<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3184"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span>_i40 <span class="token operator">>=</span> _iterator38<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3185"></td><td><pre>      _ref35 <span class="token operator">=</span> _iterator38<span class="token punctuation">[</span>_i40<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3186"></td><td><pre>    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3187"></td><td><pre>      _i40 <span class="token operator">=</span> _iterator38<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3188"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span>_i40<span class="token punctuation">.</span>done<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3189"></td><td><pre>      _ref35 <span class="token operator">=</span> _i40<span class="token punctuation">.</span>value<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3190"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3191"></td><td><pre></pre></td></tr><tr><td data-num="3192"></td><td><pre>    <span class="token keyword">var</span> validType <span class="token operator">=</span> _ref35<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3193"></td><td><pre></pre></td></tr><tr><td data-num="3194"></td><td><pre>    validType <span class="token operator">=</span> validType<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3195"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span>validType<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">"."</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3196"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span>file<span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>validType<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> file<span class="token punctuation">.</span>name<span class="token punctuation">.</span>length <span class="token operator">-</span> validType<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3197"></td><td><pre>        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3198"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3199"></td><td><pre>    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\/\*$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>validType<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3200"></td><td><pre>      <span class="token comment">// This is something like a image/* mime type</span></pre></td></tr><tr><td data-num="3201"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span>baseMimeType <span class="token operator">===</span> validType<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\/.*$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3202"></td><td><pre>        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3203"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3204"></td><td><pre>    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3205"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span>mimeType <span class="token operator">===</span> validType<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3206"></td><td><pre>        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3207"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3208"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3209"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3210"></td><td><pre></pre></td></tr><tr><td data-num="3211"></td><td><pre>  <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3212"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3213"></td><td><pre></pre></td></tr><tr><td data-num="3214"></td><td><pre><span class="token comment">// Augment jQuery</span></pre></td></tr><tr><td data-num="3215"></td><td><pre><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> jQuery <span class="token operator">!==</span> <span class="token string">'undefined'</span> <span class="token operator">&amp;&amp;</span> jQuery <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3216"></td><td><pre>  jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">.</span><span class="token function-variable function">dropzone</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3217"></td><td><pre>    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3218"></td><td><pre>      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Dropzone</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3219"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3220"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3221"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3222"></td><td><pre></pre></td></tr><tr><td data-num="3223"></td><td><pre><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> module <span class="token operator">!==</span> <span class="token string">'undefined'</span> <span class="token operator">&amp;&amp;</span> module <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3224"></td><td><pre>  module<span class="token punctuation">.</span>exports <span class="token operator">=</span> Dropzone<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3225"></td><td><pre><span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3226"></td><td><pre>  window<span class="token punctuation">.</span>Dropzone <span class="token operator">=</span> Dropzone<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3227"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3228"></td><td><pre></pre></td></tr><tr><td data-num="3229"></td><td><pre><span class="token comment">// Dropzone file status codes</span></pre></td></tr><tr><td data-num="3230"></td><td><pre>Dropzone<span class="token punctuation">.</span><span class="token constant">ADDED</span> <span class="token operator">=</span> <span class="token string">"added"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3231"></td><td><pre></pre></td></tr><tr><td data-num="3232"></td><td><pre>Dropzone<span class="token punctuation">.</span><span class="token constant">QUEUED</span> <span class="token operator">=</span> <span class="token string">"queued"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3233"></td><td><pre><span class="token comment">// For backwards compatibility. Now, if a file is accepted, it's either queued</span></pre></td></tr><tr><td data-num="3234"></td><td><pre><span class="token comment">// or uploading.</span></pre></td></tr><tr><td data-num="3235"></td><td><pre>Dropzone<span class="token punctuation">.</span><span class="token constant">ACCEPTED</span> <span class="token operator">=</span> Dropzone<span class="token punctuation">.</span><span class="token constant">QUEUED</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3236"></td><td><pre></pre></td></tr><tr><td data-num="3237"></td><td><pre>Dropzone<span class="token punctuation">.</span><span class="token constant">UPLOADING</span> <span class="token operator">=</span> <span class="token string">"uploading"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3238"></td><td><pre>Dropzone<span class="token punctuation">.</span><span class="token constant">PROCESSING</span> <span class="token operator">=</span> Dropzone<span class="token punctuation">.</span><span class="token constant">UPLOADING</span><span class="token punctuation">;</span> <span class="token comment">// alias</span></pre></td></tr><tr><td data-num="3239"></td><td><pre></pre></td></tr><tr><td data-num="3240"></td><td><pre>Dropzone<span class="token punctuation">.</span><span class="token constant">CANCELED</span> <span class="token operator">=</span> <span class="token string">"canceled"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3241"></td><td><pre>Dropzone<span class="token punctuation">.</span><span class="token constant">ERROR</span> <span class="token operator">=</span> <span class="token string">"error"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3242"></td><td><pre>Dropzone<span class="token punctuation">.</span><span class="token constant">SUCCESS</span> <span class="token operator">=</span> <span class="token string">"success"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3243"></td><td><pre></pre></td></tr><tr><td data-num="3244"></td><td><pre><span class="token comment">/*</span></pre></td></tr><tr><td data-num="3245"></td><td><pre></pre></td></tr><tr><td data-num="3246"></td><td><pre> Bugfix for iOS 6 and 7</pre></td></tr><tr><td data-num="3247"></td><td><pre> Source: http://stackoverflow.com/questions/11929099/html5-canvas-drawimage-ratio-bug-ios</pre></td></tr><tr><td data-num="3248"></td><td><pre> based on the work of https://github.com/stomita/ios-imagefile-megapixel</pre></td></tr><tr><td data-num="3249"></td><td><pre></pre></td></tr><tr><td data-num="3250"></td><td><pre> */</pre></td></tr><tr><td data-num="3251"></td><td><pre></pre></td></tr><tr><td data-num="3252"></td><td><pre><span class="token comment">// Detecting vertical squash in loaded image.</span></pre></td></tr><tr><td data-num="3253"></td><td><pre><span class="token comment">// Fixes a bug which squash image vertically while drawing into canvas for some images.</span></pre></td></tr><tr><td data-num="3254"></td><td><pre><span class="token comment">// This is a bug in iOS6 devices. This function from https://github.com/stomita/ios-imagefile-megapixel</span></pre></td></tr><tr><td data-num="3255"></td><td><pre><span class="token keyword">var</span> <span class="token function-variable function">detectVerticalSquash</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">detectVerticalSquash</span><span class="token punctuation">(</span><span class="token parameter">img</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3256"></td><td><pre>  <span class="token keyword">var</span> iw <span class="token operator">=</span> img<span class="token punctuation">.</span>naturalWidth<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3257"></td><td><pre>  <span class="token keyword">var</span> ih <span class="token operator">=</span> img<span class="token punctuation">.</span>naturalHeight<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3258"></td><td><pre>  <span class="token keyword">var</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"canvas"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3259"></td><td><pre>  canvas<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3260"></td><td><pre>  canvas<span class="token punctuation">.</span>height <span class="token operator">=</span> ih<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3261"></td><td><pre>  <span class="token keyword">var</span> ctx <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">"2d"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3262"></td><td><pre>  ctx<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3263"></td><td><pre></pre></td></tr><tr><td data-num="3264"></td><td><pre>  <span class="token keyword">var</span> _ctx$getImageData <span class="token operator">=</span> ctx<span class="token punctuation">.</span><span class="token function">getImageData</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> ih<span class="token punctuation">)</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3265"></td><td><pre>      data <span class="token operator">=</span> _ctx$getImageData<span class="token punctuation">.</span>data<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3266"></td><td><pre></pre></td></tr><tr><td data-num="3267"></td><td><pre>  <span class="token comment">// search image edge pixel position in case it is squashed vertically.</span></pre></td></tr><tr><td data-num="3268"></td><td><pre></pre></td></tr><tr><td data-num="3269"></td><td><pre></pre></td></tr><tr><td data-num="3270"></td><td><pre>  <span class="token keyword">var</span> sy <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3271"></td><td><pre>  <span class="token keyword">var</span> ey <span class="token operator">=</span> ih<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3272"></td><td><pre>  <span class="token keyword">var</span> py <span class="token operator">=</span> ih<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3273"></td><td><pre>  <span class="token keyword">while</span> <span class="token punctuation">(</span>py <span class="token operator">></span> sy<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3274"></td><td><pre>    <span class="token keyword">var</span> alpha <span class="token operator">=</span> data<span class="token punctuation">[</span><span class="token punctuation">(</span>py <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">4</span> <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3275"></td><td><pre></pre></td></tr><tr><td data-num="3276"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span>alpha <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3277"></td><td><pre>      ey <span class="token operator">=</span> py<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3278"></td><td><pre>    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3279"></td><td><pre>      sy <span class="token operator">=</span> py<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3280"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3281"></td><td><pre></pre></td></tr><tr><td data-num="3282"></td><td><pre>    py <span class="token operator">=</span> ey <span class="token operator">+</span> sy <span class="token operator">>></span> <span class="token number">1</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3283"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3284"></td><td><pre>  <span class="token keyword">var</span> ratio <span class="token operator">=</span> py <span class="token operator">/</span> ih<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3285"></td><td><pre></pre></td></tr><tr><td data-num="3286"></td><td><pre>  <span class="token keyword">if</span> <span class="token punctuation">(</span>ratio <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3287"></td><td><pre>    <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3288"></td><td><pre>  <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3289"></td><td><pre>    <span class="token keyword">return</span> ratio<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3290"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3291"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3292"></td><td><pre></pre></td></tr><tr><td data-num="3293"></td><td><pre><span class="token comment">// A replacement for context.drawImage</span></pre></td></tr><tr><td data-num="3294"></td><td><pre><span class="token comment">// (args are for source and destination).</span></pre></td></tr><tr><td data-num="3295"></td><td><pre><span class="token keyword">var</span> <span class="token function-variable function">drawImageIOSFix</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">drawImageIOSFix</span><span class="token punctuation">(</span><span class="token parameter">ctx<span class="token punctuation">,</span> img<span class="token punctuation">,</span> sx<span class="token punctuation">,</span> sy<span class="token punctuation">,</span> sw<span class="token punctuation">,</span> sh<span class="token punctuation">,</span> dx<span class="token punctuation">,</span> dy<span class="token punctuation">,</span> dw<span class="token punctuation">,</span> dh</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3296"></td><td><pre>  <span class="token keyword">var</span> vertSquashRatio <span class="token operator">=</span> <span class="token function">detectVerticalSquash</span><span class="token punctuation">(</span>img<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3297"></td><td><pre>  <span class="token keyword">return</span> ctx<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> sx<span class="token punctuation">,</span> sy<span class="token punctuation">,</span> sw<span class="token punctuation">,</span> sh<span class="token punctuation">,</span> dx<span class="token punctuation">,</span> dy<span class="token punctuation">,</span> dw<span class="token punctuation">,</span> dh <span class="token operator">/</span> vertSquashRatio<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3298"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3299"></td><td><pre></pre></td></tr><tr><td data-num="3300"></td><td><pre><span class="token comment">// Based on MinifyJpeg</span></pre></td></tr><tr><td data-num="3301"></td><td><pre><span class="token comment">// Source: http://www.perry.cz/files/ExifRestorer.js</span></pre></td></tr><tr><td data-num="3302"></td><td><pre><span class="token comment">// http://elicon.blog57.fc2.com/blog-entry-206.html</span></pre></td></tr><tr><td data-num="3303"></td><td><pre></pre></td></tr><tr><td data-num="3304"></td><td><pre><span class="token keyword">var</span> <span class="token function-variable function">ExifRestore</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3305"></td><td><pre>  <span class="token keyword">function</span> <span class="token function">ExifRestore</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3306"></td><td><pre>    <span class="token function">_classCallCheck</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> ExifRestore<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3307"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3308"></td><td><pre></pre></td></tr><tr><td data-num="3309"></td><td><pre>  <span class="token function">_createClass</span><span class="token punctuation">(</span>ExifRestore<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3310"></td><td><pre>    key<span class="token operator">:</span> <span class="token string">"initClass"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3311"></td><td><pre>    <span class="token function-variable function">value</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">initClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3312"></td><td><pre>      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token constant">KEY_STR</span> <span class="token operator">=</span> <span class="token string">'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/='</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3313"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3314"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3315"></td><td><pre>    key<span class="token operator">:</span> <span class="token string">"encode64"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3316"></td><td><pre>    <span class="token function-variable function">value</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">encode64</span><span class="token punctuation">(</span><span class="token parameter">input</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3317"></td><td><pre>      <span class="token keyword">var</span> output <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3318"></td><td><pre>      <span class="token keyword">var</span> chr1 <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3319"></td><td><pre>      <span class="token keyword">var</span> chr2 <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3320"></td><td><pre>      <span class="token keyword">var</span> chr3 <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3321"></td><td><pre>      <span class="token keyword">var</span> enc1 <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3322"></td><td><pre>      <span class="token keyword">var</span> enc2 <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3323"></td><td><pre>      <span class="token keyword">var</span> enc3 <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3324"></td><td><pre>      <span class="token keyword">var</span> enc4 <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3325"></td><td><pre>      <span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3326"></td><td><pre>      <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3327"></td><td><pre>        chr1 <span class="token operator">=</span> input<span class="token punctuation">[</span>i<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3328"></td><td><pre>        chr2 <span class="token operator">=</span> input<span class="token punctuation">[</span>i<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3329"></td><td><pre>        chr3 <span class="token operator">=</span> input<span class="token punctuation">[</span>i<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3330"></td><td><pre>        enc1 <span class="token operator">=</span> chr1 <span class="token operator">>></span> <span class="token number">2</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3331"></td><td><pre>        enc2 <span class="token operator">=</span> <span class="token punctuation">(</span>chr1 <span class="token operator">&amp;</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token number">4</span> <span class="token operator">|</span> chr2 <span class="token operator">>></span> <span class="token number">4</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3332"></td><td><pre>        enc3 <span class="token operator">=</span> <span class="token punctuation">(</span>chr2 <span class="token operator">&amp;</span> <span class="token number">15</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token number">2</span> <span class="token operator">|</span> chr3 <span class="token operator">>></span> <span class="token number">6</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3333"></td><td><pre>        enc4 <span class="token operator">=</span> chr3 <span class="token operator">&amp;</span> <span class="token number">63</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3334"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isNaN</span><span class="token punctuation">(</span>chr2<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3335"></td><td><pre>          enc3 <span class="token operator">=</span> enc4 <span class="token operator">=</span> <span class="token number">64</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3336"></td><td><pre>        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isNaN</span><span class="token punctuation">(</span>chr3<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3337"></td><td><pre>          enc4 <span class="token operator">=</span> <span class="token number">64</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3338"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3339"></td><td><pre>        output <span class="token operator">=</span> output <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token constant">KEY_STR</span><span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>enc1<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token constant">KEY_STR</span><span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>enc2<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token constant">KEY_STR</span><span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>enc3<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token constant">KEY_STR</span><span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>enc4<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3340"></td><td><pre>        chr1 <span class="token operator">=</span> chr2 <span class="token operator">=</span> chr3 <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3341"></td><td><pre>        enc1 <span class="token operator">=</span> enc2 <span class="token operator">=</span> enc3 <span class="token operator">=</span> enc4 <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3342"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>i <span class="token operator">&lt;</span> input<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3343"></td><td><pre>          <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3344"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3345"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3346"></td><td><pre>      <span class="token keyword">return</span> output<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3347"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3348"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3349"></td><td><pre>    key<span class="token operator">:</span> <span class="token string">"restore"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3350"></td><td><pre>    <span class="token function-variable function">value</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">restore</span><span class="token punctuation">(</span><span class="token parameter">origFileBase64<span class="token punctuation">,</span> resizedFileBase64</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3351"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>origFileBase64<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token string">'data:image/jpeg;base64,'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3352"></td><td><pre>        <span class="token keyword">return</span> resizedFileBase64<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3353"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3354"></td><td><pre>      <span class="token keyword">var</span> rawImage <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">decode64</span><span class="token punctuation">(</span>origFileBase64<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">'data:image/jpeg;base64,'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3355"></td><td><pre>      <span class="token keyword">var</span> segments <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">slice2Segments</span><span class="token punctuation">(</span>rawImage<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3356"></td><td><pre>      <span class="token keyword">var</span> image <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">exifManipulation</span><span class="token punctuation">(</span>resizedFileBase64<span class="token punctuation">,</span> segments<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3357"></td><td><pre>      <span class="token keyword">return</span> <span class="token string">"data:image/jpeg;base64,"</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">encode64</span><span class="token punctuation">(</span>image<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3358"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3359"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3360"></td><td><pre>    key<span class="token operator">:</span> <span class="token string">"exifManipulation"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3361"></td><td><pre>    <span class="token function-variable function">value</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">exifManipulation</span><span class="token punctuation">(</span><span class="token parameter">resizedFileBase64<span class="token punctuation">,</span> segments</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3362"></td><td><pre>      <span class="token keyword">var</span> exifArray <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getExifArray</span><span class="token punctuation">(</span>segments<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3363"></td><td><pre>      <span class="token keyword">var</span> newImageArray <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">insertExif</span><span class="token punctuation">(</span>resizedFileBase64<span class="token punctuation">,</span> exifArray<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3364"></td><td><pre>      <span class="token keyword">var</span> aBuffer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Uint8Array</span><span class="token punctuation">(</span>newImageArray<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3365"></td><td><pre>      <span class="token keyword">return</span> aBuffer<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3366"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3367"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3368"></td><td><pre>    key<span class="token operator">:</span> <span class="token string">"getExifArray"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3369"></td><td><pre>    <span class="token function-variable function">value</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">getExifArray</span><span class="token punctuation">(</span><span class="token parameter">segments</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3370"></td><td><pre>      <span class="token keyword">var</span> seg <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3371"></td><td><pre>      <span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3372"></td><td><pre>      <span class="token keyword">while</span> <span class="token punctuation">(</span>x <span class="token operator">&lt;</span> segments<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3373"></td><td><pre>        seg <span class="token operator">=</span> segments<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3374"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span>seg<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token number">255</span> <span class="token operator">&amp;</span> seg<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token number">225</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3375"></td><td><pre>          <span class="token keyword">return</span> seg<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3376"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3377"></td><td><pre>        x<span class="token operator">++</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3378"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3379"></td><td><pre>      <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3380"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3381"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3382"></td><td><pre>    key<span class="token operator">:</span> <span class="token string">"insertExif"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3383"></td><td><pre>    <span class="token function-variable function">value</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">insertExif</span><span class="token punctuation">(</span><span class="token parameter">resizedFileBase64<span class="token punctuation">,</span> exifArray</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3384"></td><td><pre>      <span class="token keyword">var</span> imageData <span class="token operator">=</span> resizedFileBase64<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">'data:image/jpeg;base64,'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3385"></td><td><pre>      <span class="token keyword">var</span> buf <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">decode64</span><span class="token punctuation">(</span>imageData<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3386"></td><td><pre>      <span class="token keyword">var</span> separatePoint <span class="token operator">=</span> buf<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3387"></td><td><pre>      <span class="token keyword">var</span> mae <span class="token operator">=</span> buf<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> separatePoint<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3388"></td><td><pre>      <span class="token keyword">var</span> ato <span class="token operator">=</span> buf<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>separatePoint<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3389"></td><td><pre>      <span class="token keyword">var</span> array <span class="token operator">=</span> mae<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3390"></td><td><pre>      array <span class="token operator">=</span> array<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>exifArray<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3391"></td><td><pre>      array <span class="token operator">=</span> array<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>ato<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3392"></td><td><pre>      <span class="token keyword">return</span> array<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3393"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3394"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3395"></td><td><pre>    key<span class="token operator">:</span> <span class="token string">"slice2Segments"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3396"></td><td><pre>    <span class="token function-variable function">value</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">slice2Segments</span><span class="token punctuation">(</span><span class="token parameter">rawImageArray</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3397"></td><td><pre>      <span class="token keyword">var</span> head <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3398"></td><td><pre>      <span class="token keyword">var</span> segments <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3399"></td><td><pre>      <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3400"></td><td><pre>        <span class="token keyword">var</span> length<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3401"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span>rawImageArray<span class="token punctuation">[</span>head<span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token number">255</span> <span class="token operator">&amp;</span> rawImageArray<span class="token punctuation">[</span>head <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token number">218</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3402"></td><td><pre>          <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3403"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3404"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span>rawImageArray<span class="token punctuation">[</span>head<span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token number">255</span> <span class="token operator">&amp;</span> rawImageArray<span class="token punctuation">[</span>head <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token number">216</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3405"></td><td><pre>          head <span class="token operator">+=</span> <span class="token number">2</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3406"></td><td><pre>        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3407"></td><td><pre>          length <span class="token operator">=</span> rawImageArray<span class="token punctuation">[</span>head <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token number">256</span> <span class="token operator">+</span> rawImageArray<span class="token punctuation">[</span>head <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3408"></td><td><pre>          <span class="token keyword">var</span> endPoint <span class="token operator">=</span> head <span class="token operator">+</span> length <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3409"></td><td><pre>          <span class="token keyword">var</span> seg <span class="token operator">=</span> rawImageArray<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>head<span class="token punctuation">,</span> endPoint<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3410"></td><td><pre>          segments<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>seg<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3411"></td><td><pre>          head <span class="token operator">=</span> endPoint<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3412"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3413"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span>head <span class="token operator">></span> rawImageArray<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3414"></td><td><pre>          <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3415"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3416"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3417"></td><td><pre>      <span class="token keyword">return</span> segments<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3418"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3419"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3420"></td><td><pre>    key<span class="token operator">:</span> <span class="token string">"decode64"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3421"></td><td><pre>    <span class="token function-variable function">value</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">decode64</span><span class="token punctuation">(</span><span class="token parameter">input</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3422"></td><td><pre>      <span class="token keyword">var</span> output <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3423"></td><td><pre>      <span class="token keyword">var</span> chr1 <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3424"></td><td><pre>      <span class="token keyword">var</span> chr2 <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3425"></td><td><pre>      <span class="token keyword">var</span> chr3 <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3426"></td><td><pre>      <span class="token keyword">var</span> enc1 <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3427"></td><td><pre>      <span class="token keyword">var</span> enc2 <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3428"></td><td><pre>      <span class="token keyword">var</span> enc3 <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3429"></td><td><pre>      <span class="token keyword">var</span> enc4 <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3430"></td><td><pre>      <span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3431"></td><td><pre>      <span class="token keyword">var</span> buf <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3432"></td><td><pre>      <span class="token comment">// remove all characters that are not A-Z, a-z, 0-9, +, /, or =</span></pre></td></tr><tr><td data-num="3433"></td><td><pre>      <span class="token keyword">var</span> base64test <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[^A-Za-z0-9\+\/\=]</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3434"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span>base64test<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>input<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3435"></td><td><pre>        console<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span><span class="token string">'There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, \'+\', \'/\',and \'=\'\nExpect errors in decoding.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3436"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3437"></td><td><pre>      input <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[^A-Za-z0-9\+\/\=]</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3438"></td><td><pre>      <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3439"></td><td><pre>        enc1 <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token constant">KEY_STR</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>input<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3440"></td><td><pre>        enc2 <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token constant">KEY_STR</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>input<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3441"></td><td><pre>        enc3 <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token constant">KEY_STR</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>input<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3442"></td><td><pre>        enc4 <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token constant">KEY_STR</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>input<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3443"></td><td><pre>        chr1 <span class="token operator">=</span> enc1 <span class="token operator">&lt;&lt;</span> <span class="token number">2</span> <span class="token operator">|</span> enc2 <span class="token operator">>></span> <span class="token number">4</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3444"></td><td><pre>        chr2 <span class="token operator">=</span> <span class="token punctuation">(</span>enc2 <span class="token operator">&amp;</span> <span class="token number">15</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token number">4</span> <span class="token operator">|</span> enc3 <span class="token operator">>></span> <span class="token number">2</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3445"></td><td><pre>        chr3 <span class="token operator">=</span> <span class="token punctuation">(</span>enc3 <span class="token operator">&amp;</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token number">6</span> <span class="token operator">|</span> enc4<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3446"></td><td><pre>        buf<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>chr1<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3447"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span>enc3 <span class="token operator">!==</span> <span class="token number">64</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3448"></td><td><pre>          buf<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>chr2<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3449"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3450"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span>enc4 <span class="token operator">!==</span> <span class="token number">64</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3451"></td><td><pre>          buf<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>chr3<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3452"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3453"></td><td><pre>        chr1 <span class="token operator">=</span> chr2 <span class="token operator">=</span> chr3 <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3454"></td><td><pre>        enc1 <span class="token operator">=</span> enc2 <span class="token operator">=</span> enc3 <span class="token operator">=</span> enc4 <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3455"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>i <span class="token operator">&lt;</span> input<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3456"></td><td><pre>          <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3457"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3458"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3459"></td><td><pre>      <span class="token keyword">return</span> buf<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3460"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3461"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3462"></td><td><pre></pre></td></tr><tr><td data-num="3463"></td><td><pre>  <span class="token keyword">return</span> ExifRestore<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3464"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3465"></td><td><pre></pre></td></tr><tr><td data-num="3466"></td><td><pre>ExifRestore<span class="token punctuation">.</span><span class="token function">initClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3467"></td><td><pre></pre></td></tr><tr><td data-num="3468"></td><td><pre><span class="token comment">/*</span></pre></td></tr><tr><td data-num="3469"></td><td><pre> * contentloaded.js</pre></td></tr><tr><td data-num="3470"></td><td><pre> *</pre></td></tr><tr><td data-num="3471"></td><td><pre> * Author: Diego Perini (diego.perini at gmail.com)</pre></td></tr><tr><td data-num="3472"></td><td><pre> * Summary: cross-browser wrapper for DOMContentLoaded</pre></td></tr><tr><td data-num="3473"></td><td><pre> * Updated: 20101020</pre></td></tr><tr><td data-num="3474"></td><td><pre> * License: MIT</pre></td></tr><tr><td data-num="3475"></td><td><pre> * Version: 1.2</pre></td></tr><tr><td data-num="3476"></td><td><pre> *</pre></td></tr><tr><td data-num="3477"></td><td><pre> * URL:</pre></td></tr><tr><td data-num="3478"></td><td><pre> * http://javascript.nwbox.com/ContentLoaded/</pre></td></tr><tr><td data-num="3479"></td><td><pre> * http://javascript.nwbox.com/ContentLoaded/MIT-LICENSE</pre></td></tr><tr><td data-num="3480"></td><td><pre> */</pre></td></tr><tr><td data-num="3481"></td><td><pre></pre></td></tr><tr><td data-num="3482"></td><td><pre><span class="token comment">// @win window reference</span></pre></td></tr><tr><td data-num="3483"></td><td><pre><span class="token comment">// @fn function reference</span></pre></td></tr><tr><td data-num="3484"></td><td><pre><span class="token keyword">var</span> <span class="token function-variable function">contentLoaded</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">contentLoaded</span><span class="token punctuation">(</span><span class="token parameter">win<span class="token punctuation">,</span> fn</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3485"></td><td><pre>  <span class="token keyword">var</span> done <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3486"></td><td><pre>  <span class="token keyword">var</span> top <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3487"></td><td><pre>  <span class="token keyword">var</span> doc <span class="token operator">=</span> win<span class="token punctuation">.</span>document<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3488"></td><td><pre>  <span class="token keyword">var</span> root <span class="token operator">=</span> doc<span class="token punctuation">.</span>documentElement<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3489"></td><td><pre>  <span class="token keyword">var</span> add <span class="token operator">=</span> doc<span class="token punctuation">.</span>addEventListener <span class="token operator">?</span> <span class="token string">"addEventListener"</span> <span class="token operator">:</span> <span class="token string">"attachEvent"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3490"></td><td><pre>  <span class="token keyword">var</span> rem <span class="token operator">=</span> doc<span class="token punctuation">.</span>addEventListener <span class="token operator">?</span> <span class="token string">"removeEventListener"</span> <span class="token operator">:</span> <span class="token string">"detachEvent"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3491"></td><td><pre>  <span class="token keyword">var</span> pre <span class="token operator">=</span> doc<span class="token punctuation">.</span>addEventListener <span class="token operator">?</span> <span class="token string">""</span> <span class="token operator">:</span> <span class="token string">"on"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3492"></td><td><pre>  <span class="token keyword">var</span> <span class="token function-variable function">init</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3493"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">"readystatechange"</span> <span class="token operator">&amp;&amp;</span> doc<span class="token punctuation">.</span>readyState <span class="token operator">!==</span> <span class="token string">"complete"</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3494"></td><td><pre>      <span class="token keyword">return</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3495"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3496"></td><td><pre>    <span class="token punctuation">(</span>e<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">"load"</span> <span class="token operator">?</span> win <span class="token operator">:</span> doc<span class="token punctuation">)</span><span class="token punctuation">[</span>rem<span class="token punctuation">]</span><span class="token punctuation">(</span>pre <span class="token operator">+</span> e<span class="token punctuation">.</span>type<span class="token punctuation">,</span> init<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3497"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>done <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>done <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3498"></td><td><pre>      <span class="token keyword">return</span> <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>win<span class="token punctuation">,</span> e<span class="token punctuation">.</span>type <span class="token operator">||</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3499"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3500"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3501"></td><td><pre></pre></td></tr><tr><td data-num="3502"></td><td><pre>  <span class="token keyword">var</span> <span class="token function-variable function">poll</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">poll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3503"></td><td><pre>    <span class="token keyword">try</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3504"></td><td><pre>      root<span class="token punctuation">.</span><span class="token function">doScroll</span><span class="token punctuation">(</span><span class="token string">"left"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3505"></td><td><pre>    <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3506"></td><td><pre>      <span class="token function">setTimeout</span><span class="token punctuation">(</span>poll<span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3507"></td><td><pre>      <span class="token keyword">return</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3508"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3509"></td><td><pre>    <span class="token keyword">return</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token string">"poll"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3510"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3511"></td><td><pre></pre></td></tr><tr><td data-num="3512"></td><td><pre>  <span class="token keyword">if</span> <span class="token punctuation">(</span>doc<span class="token punctuation">.</span>readyState <span class="token operator">!==</span> <span class="token string">"complete"</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3513"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span>doc<span class="token punctuation">.</span>createEventObject <span class="token operator">&amp;&amp;</span> root<span class="token punctuation">.</span>doScroll<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3514"></td><td><pre>      <span class="token keyword">try</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3515"></td><td><pre>        top <span class="token operator">=</span> <span class="token operator">!</span>win<span class="token punctuation">.</span>frameElement<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3516"></td><td><pre>      <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3517"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span>top<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3518"></td><td><pre>        <span class="token function">poll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3519"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3520"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3521"></td><td><pre>    doc<span class="token punctuation">[</span>add<span class="token punctuation">]</span><span class="token punctuation">(</span>pre <span class="token operator">+</span> <span class="token string">"DOMContentLoaded"</span><span class="token punctuation">,</span> init<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3522"></td><td><pre>    doc<span class="token punctuation">[</span>add<span class="token punctuation">]</span><span class="token punctuation">(</span>pre <span class="token operator">+</span> <span class="token string">"readystatechange"</span><span class="token punctuation">,</span> init<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3523"></td><td><pre>    <span class="token keyword">return</span> win<span class="token punctuation">[</span>add<span class="token punctuation">]</span><span class="token punctuation">(</span>pre <span class="token operator">+</span> <span class="token string">"load"</span><span class="token punctuation">,</span> init<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3524"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3525"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3526"></td><td><pre></pre></td></tr><tr><td data-num="3527"></td><td><pre><span class="token comment">// As a single function to be able to write tests.</span></pre></td></tr><tr><td data-num="3528"></td><td><pre>Dropzone<span class="token punctuation">.</span><span class="token function-variable function">_autoDiscoverFunction</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3529"></td><td><pre>  <span class="token keyword">if</span> <span class="token punctuation">(</span>Dropzone<span class="token punctuation">.</span>autoDiscover<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3530"></td><td><pre>    <span class="token keyword">return</span> Dropzone<span class="token punctuation">.</span><span class="token function">discover</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3531"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3532"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3533"></td><td><pre><span class="token function">contentLoaded</span><span class="token punctuation">(</span>window<span class="token punctuation">,</span> Dropzone<span class="token punctuation">.</span>_autoDiscoverFunction<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3534"></td><td><pre></pre></td></tr><tr><td data-num="3535"></td><td><pre><span class="token keyword">function</span> <span class="token function">__guard__</span><span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span> transform</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3536"></td><td><pre>  <span class="token keyword">return</span> <span class="token keyword">typeof</span> value <span class="token operator">!==</span> <span class="token string">'undefined'</span> <span class="token operator">&amp;&amp;</span> value <span class="token operator">!==</span> <span class="token keyword">null</span> <span class="token operator">?</span> <span class="token function">transform</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3537"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3538"></td><td><pre><span class="token keyword">function</span> <span class="token function">__guardMethod__</span><span class="token punctuation">(</span><span class="token parameter">obj<span class="token punctuation">,</span> methodName<span class="token punctuation">,</span> transform</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3539"></td><td><pre>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> obj <span class="token operator">!==</span> <span class="token string">'undefined'</span> <span class="token operator">&amp;&amp;</span> obj <span class="token operator">!==</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> obj<span class="token punctuation">[</span>methodName<span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">'function'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3540"></td><td><pre>    <span class="token keyword">return</span> <span class="token function">transform</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> methodName<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3541"></td><td><pre>  <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3542"></td><td><pre>    <span class="token keyword">return</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3543"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3544"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3545"></td><td><pre></pre></td></tr><tr><td data-num="3546"></td><td><pre>    <span class="token keyword">return</span> module<span class="token punctuation">.</span>exports<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3547"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3548"></td><td><pre><span class="token function">define</span><span class="token punctuation">(</span><span class="token string">'lib/base64'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token string">"use strict"</span><span class="token punctuation">;</span><span class="token keyword">return</span><span class="token punctuation">&#123;</span>_keyStr<span class="token operator">:</span><span class="token string">"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="</span><span class="token punctuation">,</span><span class="token function-variable function">_utf8_encode</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">string</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> utftext<span class="token operator">=</span><span class="token string">""</span><span class="token punctuation">,</span>c<span class="token punctuation">,</span>n<span class="token punctuation">;</span>string<span class="token operator">=</span>string<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\r\n</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span><span class="token string">"\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span>n<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>n<span class="token operator">&lt;</span>string<span class="token punctuation">.</span>length<span class="token punctuation">;</span>n<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>c<span class="token operator">=</span>string<span class="token punctuation">.</span><span class="token function">charCodeAt</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>c<span class="token operator">&lt;</span><span class="token number">128</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>utftext<span class="token operator">+=</span>String<span class="token punctuation">.</span><span class="token function">fromCharCode</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>c<span class="token operator">></span><span class="token number">127</span><span class="token operator">&amp;&amp;</span>c<span class="token operator">&lt;</span><span class="token number">2048</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>utftext<span class="token operator">+=</span>String<span class="token punctuation">.</span><span class="token function">fromCharCode</span><span class="token punctuation">(</span>c<span class="token operator">>></span><span class="token number">6</span><span class="token operator">|</span><span class="token number">192</span><span class="token punctuation">)</span><span class="token punctuation">;</span>utftext<span class="token operator">+=</span>String<span class="token punctuation">.</span><span class="token function">fromCharCode</span><span class="token punctuation">(</span>c<span class="token operator">&amp;</span><span class="token number">63</span><span class="token operator">|</span><span class="token number">128</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span>utftext<span class="token operator">+=</span>String<span class="token punctuation">.</span><span class="token function">fromCharCode</span><span class="token punctuation">(</span>c<span class="token operator">>></span><span class="token number">12</span><span class="token operator">|</span><span class="token number">224</span><span class="token punctuation">)</span><span class="token punctuation">;</span>utftext<span class="token operator">+=</span>String<span class="token punctuation">.</span><span class="token function">fromCharCode</span><span class="token punctuation">(</span>c<span class="token operator">>></span><span class="token number">6</span><span class="token operator">&amp;</span><span class="token number">63</span><span class="token operator">|</span><span class="token number">128</span><span class="token punctuation">)</span><span class="token punctuation">;</span>utftext<span class="token operator">+=</span>String<span class="token punctuation">.</span><span class="token function">fromCharCode</span><span class="token punctuation">(</span>c<span class="token operator">&amp;</span><span class="token number">63</span><span class="token operator">|</span><span class="token number">128</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> utftext<span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">_utf8_decode</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">utftext</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> string<span class="token operator">=</span><span class="token string">""</span><span class="token punctuation">,</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>c<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>c1<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>c2<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>i<span class="token operator">&lt;</span>utftext<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>c<span class="token operator">=</span>utftext<span class="token punctuation">.</span><span class="token function">charCodeAt</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>c<span class="token operator">&lt;</span><span class="token number">128</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>string<span class="token operator">+=</span>String<span class="token punctuation">.</span><span class="token function">fromCharCode</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">&#125;</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>c<span class="token operator">></span><span class="token number">191</span><span class="token operator">&amp;&amp;</span>c<span class="token operator">&lt;</span><span class="token number">224</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>c1<span class="token operator">=</span>utftext<span class="token punctuation">.</span><span class="token function">charCodeAt</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>string<span class="token operator">+=</span>String<span class="token punctuation">.</span><span class="token function">fromCharCode</span><span class="token punctuation">(</span><span class="token punctuation">(</span>c<span class="token operator">&amp;</span><span class="token number">31</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span><span class="token number">6</span><span class="token operator">|</span>c1<span class="token operator">&amp;</span><span class="token number">63</span><span class="token punctuation">)</span><span class="token punctuation">;</span>i<span class="token operator">+=</span><span class="token number">2</span><span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span>c1<span class="token operator">=</span>utftext<span class="token punctuation">.</span><span class="token function">charCodeAt</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>c2<span class="token operator">=</span>utftext<span class="token punctuation">.</span><span class="token function">charCodeAt</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>string<span class="token operator">+=</span>String<span class="token punctuation">.</span><span class="token function">fromCharCode</span><span class="token punctuation">(</span><span class="token punctuation">(</span>c<span class="token operator">&amp;</span><span class="token number">15</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span><span class="token number">12</span><span class="token operator">|</span><span class="token punctuation">(</span>c1<span class="token operator">&amp;</span><span class="token number">63</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span><span class="token number">6</span><span class="token operator">|</span>c2<span class="token operator">&amp;</span><span class="token number">63</span><span class="token punctuation">)</span><span class="token punctuation">;</span>i<span class="token operator">+=</span><span class="token number">3</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> string<span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">_hexEncode</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">input</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> output<span class="token operator">=</span><span class="token string">""</span><span class="token punctuation">,</span>i<span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>input<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>output<span class="token operator">+=</span>input<span class="token punctuation">.</span><span class="token function">charCodeAt</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> output<span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">_hexDecode</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">input</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> output<span class="token operator">=</span><span class="token string">""</span><span class="token punctuation">,</span>i<span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>input<span class="token punctuation">.</span>length<span class="token operator">%</span><span class="token number">2</span><span class="token operator">></span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>input<span class="token operator">=</span><span class="token string">"0"</span><span class="token operator">+</span>input<span class="token punctuation">&#125;</span><span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>input<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">=</span>i<span class="token operator">+</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>output<span class="token operator">+=</span>String<span class="token punctuation">.</span><span class="token function">fromCharCode</span><span class="token punctuation">(</span><span class="token function">parseInt</span><span class="token punctuation">(</span>input<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token operator">+</span>input<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> output<span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">encode</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">input</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> output<span class="token operator">=</span><span class="token string">""</span><span class="token punctuation">,</span>chr1<span class="token punctuation">,</span>chr2<span class="token punctuation">,</span>chr3<span class="token punctuation">,</span>enc1<span class="token punctuation">,</span>enc2<span class="token punctuation">,</span>enc3<span class="token punctuation">,</span>enc4<span class="token punctuation">,</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>input<span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_utf8_encode</span><span class="token punctuation">(</span>input<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>i<span class="token operator">&lt;</span>input<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>chr1<span class="token operator">=</span>input<span class="token punctuation">.</span><span class="token function">charCodeAt</span><span class="token punctuation">(</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">;</span>chr2<span class="token operator">=</span>input<span class="token punctuation">.</span><span class="token function">charCodeAt</span><span class="token punctuation">(</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">;</span>chr3<span class="token operator">=</span>input<span class="token punctuation">.</span><span class="token function">charCodeAt</span><span class="token punctuation">(</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">;</span>enc1<span class="token operator">=</span>chr1<span class="token operator">>></span><span class="token number">2</span><span class="token punctuation">;</span>enc2<span class="token operator">=</span><span class="token punctuation">(</span>chr1<span class="token operator">&amp;</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span><span class="token number">4</span><span class="token operator">|</span>chr2<span class="token operator">>></span><span class="token number">4</span><span class="token punctuation">;</span>enc3<span class="token operator">=</span><span class="token punctuation">(</span>chr2<span class="token operator">&amp;</span><span class="token number">15</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span><span class="token number">2</span><span class="token operator">|</span>chr3<span class="token operator">>></span><span class="token number">6</span><span class="token punctuation">;</span>enc4<span class="token operator">=</span>chr3<span class="token operator">&amp;</span><span class="token number">63</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">isNaN</span><span class="token punctuation">(</span>chr2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>enc3<span class="token operator">=</span>enc4<span class="token operator">=</span><span class="token number">64</span><span class="token punctuation">&#125;</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">isNaN</span><span class="token punctuation">(</span>chr3<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>enc4<span class="token operator">=</span><span class="token number">64</span><span class="token punctuation">&#125;</span>output<span class="token operator">+=</span><span class="token keyword">this</span><span class="token punctuation">.</span>_keyStr<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>enc1<span class="token punctuation">)</span><span class="token punctuation">;</span>output<span class="token operator">+=</span><span class="token keyword">this</span><span class="token punctuation">.</span>_keyStr<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>enc2<span class="token punctuation">)</span><span class="token punctuation">;</span>output<span class="token operator">+=</span><span class="token keyword">this</span><span class="token punctuation">.</span>_keyStr<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>enc3<span class="token punctuation">)</span><span class="token punctuation">;</span>output<span class="token operator">+=</span><span class="token keyword">this</span><span class="token punctuation">.</span>_keyStr<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>enc4<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> output<span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">decode</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">input</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> output<span class="token operator">=</span><span class="token string">""</span><span class="token punctuation">,</span>chr1<span class="token punctuation">,</span>chr2<span class="token punctuation">,</span>chr3<span class="token punctuation">,</span>enc1<span class="token punctuation">,</span>enc2<span class="token punctuation">,</span>enc3<span class="token punctuation">,</span>enc4<span class="token punctuation">,</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>input<span class="token operator">!=</span><span class="token keyword">undefined</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>input<span class="token operator">=</span>input<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[^A-Za-z0-9\+\/\=]</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>i<span class="token operator">&lt;</span>input<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>enc1<span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">.</span>_keyStr<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>input<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>enc2<span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">.</span>_keyStr<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>input<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>enc3<span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">.</span>_keyStr<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>input<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>enc4<span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">.</span>_keyStr<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>input<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>chr1<span class="token operator">=</span>enc1<span class="token operator">&lt;&lt;</span><span class="token number">2</span><span class="token operator">|</span>enc2<span class="token operator">>></span><span class="token number">4</span><span class="token punctuation">;</span>chr2<span class="token operator">=</span><span class="token punctuation">(</span>enc2<span class="token operator">&amp;</span><span class="token number">15</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span><span class="token number">4</span><span class="token operator">|</span>enc3<span class="token operator">>></span><span class="token number">2</span><span class="token punctuation">;</span>chr3<span class="token operator">=</span><span class="token punctuation">(</span>enc3<span class="token operator">&amp;</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span><span class="token number">6</span><span class="token operator">|</span>enc4<span class="token punctuation">;</span>output<span class="token operator">+=</span>String<span class="token punctuation">.</span><span class="token function">fromCharCode</span><span class="token punctuation">(</span>chr1<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>enc3<span class="token operator">!==</span><span class="token number">64</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>output<span class="token operator">+=</span>String<span class="token punctuation">.</span><span class="token function">fromCharCode</span><span class="token punctuation">(</span>chr2<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">if</span><span class="token punctuation">(</span>enc4<span class="token operator">!==</span><span class="token number">64</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>output<span class="token operator">+=</span>String<span class="token punctuation">.</span><span class="token function">fromCharCode</span><span class="token punctuation">(</span>chr3<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_utf8_decode</span><span class="token punctuation">(</span>output<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">decodeToHex</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">input</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_hexEncode</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span>input<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">encodeFromHex</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">input</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_hexDecode</span><span class="token punctuation">(</span>input<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3549"></td><td><pre><span class="token function">define</span><span class="token punctuation">(</span><span class="token string">'lib/cache'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token string">'lib/base64'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">base64</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3550"></td><td><pre>    <span class="token keyword">var</span> _info <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3551"></td><td><pre>        <span class="token string">'version'</span><span class="token operator">:</span> <span class="token string">'0.1.0'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3552"></td><td><pre>        <span class="token string">'author'</span><span class="token operator">:</span> <span class="token string">'malaohu(laohu_ma#163.com)'</span></pre></td></tr><tr><td data-num="3553"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3554"></td><td><pre></pre></td></tr><tr><td data-num="3555"></td><td><pre>    <span class="token comment">// 调试模式</span></pre></td></tr><tr><td data-num="3556"></td><td><pre>    <span class="token keyword">var</span> _is_debuger <span class="token operator">=</span> <span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3557"></td><td><pre></pre></td></tr><tr><td data-num="3558"></td><td><pre>    <span class="token keyword">return</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3559"></td><td><pre>        <span class="token function-variable function">setStorage</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> obj</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3560"></td><td><pre>            localStorage<span class="token punctuation">.</span><span class="token function">removeItem</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3561"></td><td><pre>            localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> _is_debuger <span class="token operator">?</span> obj <span class="token operator">:</span> base64<span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3562"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3563"></td><td><pre></pre></td></tr><tr><td data-num="3564"></td><td><pre>        <span class="token function-variable function">getStorage</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3565"></td><td><pre>            <span class="token keyword">return</span> localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">?</span> <span class="token keyword">null</span> <span class="token operator">:</span> _is_debuger <span class="token operator">?</span> localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token operator">:</span> base64<span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span>localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3566"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3567"></td><td><pre>    </pre></td></tr><tr><td data-num="3568"></td><td><pre>        <span class="token function-variable function">delStorage</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3569"></td><td><pre>            localStorage<span class="token punctuation">.</span><span class="token function">removeItem</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3570"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3571"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3572"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3573"></td><td><pre><span class="token comment">// 本地存储</span></pre></td></tr><tr><td data-num="3574"></td><td><pre><span class="token function">define</span><span class="token punctuation">(</span><span class="token string">'lib/store'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token string">'lib/cache'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">cache</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3575"></td><td><pre>    <span class="token keyword">const</span> key <span class="token operator">=</span> <span class="token string">'localcache'</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3576"></td><td><pre>    <span class="token keyword">function</span> <span class="token function">setStorage</span><span class="token punctuation">(</span><span class="token parameter">title<span class="token punctuation">,</span> url</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3577"></td><td><pre>        <span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>cache<span class="token punctuation">.</span><span class="token function">getStorage</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token string">'[]'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3578"></td><td><pre>        arr<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token string">"title"</span><span class="token operator">:</span>title<span class="token punctuation">,</span> <span class="token string">"url"</span><span class="token operator">:</span>url<span class="token punctuation">,</span> <span class="token string">"time_s"</span><span class="token operator">:</span>Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3579"></td><td><pre>        cache<span class="token punctuation">.</span><span class="token function">setStorage</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3580"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3581"></td><td><pre></pre></td></tr><tr><td data-num="3582"></td><td><pre>    <span class="token keyword">function</span> <span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3583"></td><td><pre>        cache<span class="token punctuation">.</span><span class="token function">setStorage</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3584"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3585"></td><td><pre>    <span class="token keyword">return</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3586"></td><td><pre>        set<span class="token operator">:</span> setStorage<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3587"></td><td><pre>        <span class="token function-variable function">get</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">page<span class="token punctuation">,</span> size</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3588"></td><td><pre>            <span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>cache<span class="token punctuation">.</span><span class="token function">getStorage</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token string">'[]'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3589"></td><td><pre>            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>size<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3590"></td><td><pre>                <span class="token keyword">return</span> arr<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3591"></td><td><pre>            <span class="token keyword">else</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3592"></td><td><pre>                <span class="token keyword">let</span> count <span class="token operator">=</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3593"></td><td><pre>                <span class="token keyword">let</span> rArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3594"></td><td><pre>                <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> page<span class="token operator">*</span>size<span class="token punctuation">;</span> i<span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token punctuation">(</span>page<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> size<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> i <span class="token operator">&lt;</span> count<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3595"></td><td><pre>                    rArr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3596"></td><td><pre>                <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3597"></td><td><pre>                <span class="token keyword">return</span> rArr<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3598"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3599"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3600"></td><td><pre>        clear<span class="token operator">:</span>clear</pre></td></tr><tr><td data-num="3601"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3602"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3603"></td><td><pre></pre></td></tr><tr><td data-num="3604"></td><td><pre><span class="token comment">// 文件上传成功后回调！由于前台和后台上传方式不一样！</span></pre></td></tr><tr><td data-num="3605"></td><td><pre><span class="token function">define</span><span class="token punctuation">(</span><span class="token string">'lib/callback'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token string">'lib/store'</span><span class="token punctuation">,</span><span class="token string">'lib/cache'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">store<span class="token punctuation">,</span> cache</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3606"></td><td><pre>    <span class="token keyword">function</span> <span class="token function">doit</span><span class="token punctuation">(</span><span class="token parameter">title<span class="token punctuation">,</span> url</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3607"></td><td><pre>        <span class="token keyword">if</span><span class="token punctuation">(</span>cache<span class="token punctuation">.</span><span class="token function">getStorage</span><span class="token punctuation">(</span><span class="token string">"localstore"</span><span class="token punctuation">)</span><span class="token operator">!=</span><span class="token number">0</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3608"></td><td><pre>            store<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>title<span class="token punctuation">,</span> url<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3609"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3610"></td><td><pre>    <span class="token keyword">return</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3611"></td><td><pre>        success<span class="token operator">:</span> doit</pre></td></tr><tr><td data-num="3612"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3613"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3614"></td><td><pre><span class="token function">define</span><span class="token punctuation">(</span><span class="token string">'model/ali'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3615"></td><td><pre>    <span class="token keyword">return</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3616"></td><td><pre>        url<span class="token operator">:</span> <span class="token string">"https://kfupload.alibaba.com/mupload?jiketuchuang=1"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3617"></td><td><pre>        method<span class="token operator">:</span> <span class="token string">"post"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3618"></td><td><pre>        headers<span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3619"></td><td><pre>            <span class="token string">'Authorization'</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3620"></td><td><pre>            <span class="token string">'Cache-Control'</span><span class="token operator">:</span> <span class="token string">"no-cache"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3621"></td><td><pre>            <span class="token string">'cookie'</span><span class="token operator">:</span><span class="token keyword">null</span></pre></td></tr><tr><td data-num="3622"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3623"></td><td><pre>        paramName<span class="token operator">:</span> <span class="token string">'file'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3624"></td><td><pre>        otherParams<span class="token operator">:</span> <span class="token punctuation">&#123;</span> <span class="token string">"scene"</span><span class="token operator">:</span> <span class="token string">"photobankImageNsRule"</span><span class="token punctuation">,</span> <span class="token string">"name"</span><span class="token operator">:</span> <span class="token string">"ruyo.net.png"</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3625"></td><td><pre>        maxFilesize<span class="token operator">:</span> <span class="token number">51200</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3626"></td><td><pre>        acceptedFiles<span class="token operator">:</span> <span class="token string">".jpg,.jpeg,.gif,.bmp,.png"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3627"></td><td><pre>        <span class="token function-variable function">callback</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3628"></td><td><pre>            <span class="token keyword">try</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3629"></td><td><pre>                result <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3630"></td><td><pre>            <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token keyword">return</span> <span class="token string">''</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3631"></td><td><pre>            <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>code <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3632"></td><td><pre>                <span class="token keyword">let</span> hosts <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"https://ae01.alicdn.com/kf/"</span><span class="token punctuation">,</span> <span class="token string">"https://ae02.alicdn.com/kf/"</span><span class="token punctuation">,</span> <span class="token string">"https://ae03.alicdn.com/kf/"</span><span class="token punctuation">,</span> <span class="token string">"https://ae04.alicdn.com/kf/"</span><span class="token punctuation">,</span> <span class="token string">"https://ae05.alicdn.com/kf/"</span><span class="token punctuation">,</span> <span class="token string">"https://ae06.alicdn.com/kf/"</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="3633"></td><td><pre>                <span class="token keyword">let</span> index <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> hosts<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3634"></td><td><pre>                <span class="token keyword">return</span> hosts<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">+</span> result<span class="token punctuation">.</span>fs_url<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3635"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3636"></td><td><pre>            <span class="token keyword">return</span> <span class="token string">''</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3637"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3638"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3639"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3640"></td><td><pre><span class="token function">define</span><span class="token punctuation">(</span><span class="token string">'model/mt'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3641"></td><td><pre>    <span class="token keyword">return</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3642"></td><td><pre>        url<span class="token operator">:</span> <span class="token string">"https://chat.dianping.com/upload"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3643"></td><td><pre>        method<span class="token operator">:</span> <span class="token string">"post"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3644"></td><td><pre>        headers<span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3645"></td><td><pre>            <span class="token string">'Authorization'</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3646"></td><td><pre>            <span class="token string">'Cache-Control'</span><span class="token operator">:</span> <span class="token string">"no-cache"</span></pre></td></tr><tr><td data-num="3647"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3648"></td><td><pre>        paramName<span class="token operator">:</span> <span class="token string">'file'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3649"></td><td><pre>        otherParams<span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3650"></td><td><pre>        maxFilesize<span class="token operator">:</span> <span class="token number">51200</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3651"></td><td><pre>        acceptedFiles<span class="token operator">:</span> <span class="token string">".jpg,.jpeg,.png,.bmp,.gif"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3652"></td><td><pre>        <span class="token function-variable function">callback</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3653"></td><td><pre>            <span class="token keyword">if</span><span class="token punctuation">(</span>result <span class="token operator">&amp;&amp;</span> result<span class="token punctuation">.</span>success <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3654"></td><td><pre>                <span class="token keyword">return</span> result<span class="token punctuation">.</span>path<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3655"></td><td><pre>            <span class="token keyword">return</span> <span class="token string">''</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3656"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3657"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3658"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3659"></td><td><pre><span class="token function">define</span><span class="token punctuation">(</span><span class="token string">'model/baidu'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3660"></td><td><pre>    <span class="token keyword">return</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3661"></td><td><pre>        url<span class="token operator">:</span> <span class="token string">"https://baijiahao.baidu.com/builderinner/api/content/file/upload"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3662"></td><td><pre>        method<span class="token operator">:</span> <span class="token string">"post"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3663"></td><td><pre>        headers<span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3664"></td><td><pre>            <span class="token string">'Authorization'</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3665"></td><td><pre>            <span class="token string">'Cache-Control'</span><span class="token operator">:</span> <span class="token string">"no-cache"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3666"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3667"></td><td><pre>        paramName<span class="token operator">:</span> <span class="token string">'media'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3668"></td><td><pre>        otherParams<span class="token operator">:</span> <span class="token punctuation">&#123;</span> <span class="token string">"no_compress"</span><span class="token operator">:</span> <span class="token string">"1"</span><span class="token punctuation">,</span> <span class="token string">"id"</span><span class="token operator">:</span> <span class="token string">"WU_FILE_0"</span><span class="token punctuation">,</span> <span class="token string">"is_avatar"</span><span class="token operator">:</span><span class="token string">"0"</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3669"></td><td><pre>        maxFilesize<span class="token operator">:</span> <span class="token number">51200</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3670"></td><td><pre>        acceptedFiles<span class="token operator">:</span> <span class="token string">".jpg,.jpeg,.png,.bmp"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3671"></td><td><pre>        <span class="token function-variable function">callback</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3672"></td><td><pre>            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>ret<span class="token punctuation">.</span>org_url<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3673"></td><td><pre>            <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>errno <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3674"></td><td><pre>                <span class="token keyword">return</span> result<span class="token punctuation">.</span>ret<span class="token punctuation">.</span>org_url<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3675"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3676"></td><td><pre>            <span class="token keyword">return</span> <span class="token string">'error'</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3677"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3678"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3679"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3680"></td><td><pre><span class="token function">define</span><span class="token punctuation">(</span><span class="token string">'model/58'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3681"></td><td><pre>    <span class="token keyword">return</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3682"></td><td><pre>        url<span class="token operator">:</span> <span class="token string">"https://upload.58cdn.com.cn/json"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3683"></td><td><pre>        method<span class="token operator">:</span> <span class="token string">"post"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3684"></td><td><pre>        headers<span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3685"></td><td><pre>            <span class="token string">'Authorization'</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3686"></td><td><pre>            <span class="token string">'Cache-Control'</span><span class="token operator">:</span> <span class="token string">"no-cache"</span></pre></td></tr><tr><td data-num="3687"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3688"></td><td><pre>        paramName<span class="token operator">:</span> <span class="token string">'blob'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3689"></td><td><pre>        otherParams<span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3690"></td><td><pre>        maxFilesize<span class="token operator">:</span> <span class="token number">51200</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3691"></td><td><pre>        acceptedFiles<span class="token operator">:</span> <span class="token string">".jpg,.jpeg,.png,.bmp"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3692"></td><td><pre>        <span class="token function-variable function">callback</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3693"></td><td><pre>            <span class="token keyword">if</span> <span class="token punctuation">(</span>result <span class="token operator">&amp;&amp;</span> result<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">"n_v2"</span><span class="token punctuation">)</span><span class="token operator">></span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3694"></td><td><pre>                <span class="token keyword">let</span> index <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">9</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3695"></td><td><pre>                <span class="token keyword">return</span> <span class="token string">"https://pic"</span><span class="token operator">+</span>index<span class="token operator">+</span><span class="token string">".58cdn.com.cn/nowater/webim/big/"</span> <span class="token operator">+</span> result</pre></td></tr><tr><td data-num="3696"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3697"></td><td><pre>            <span class="token keyword">return</span> <span class="token string">''</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3698"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3699"></td><td><pre>        <span class="token function-variable function">sendPost</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">file<span class="token punctuation">,</span> fileName<span class="token punctuation">,</span> $<span class="token punctuation">,</span> progress<span class="token punctuation">,</span> success</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3700"></td><td><pre>            <span class="token keyword">var</span> reader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3701"></td><td><pre>            <span class="token keyword">var</span> parseUrl <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>callback<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3702"></td><td><pre>            reader<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3703"></td><td><pre>                <span class="token keyword">var</span> base64String <span class="token operator">=</span> event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>result<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3704"></td><td><pre>                <span class="token keyword">var</span> jsn <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token string">"Pic-Size"</span><span class="token operator">:</span><span class="token string">"0*0"</span><span class="token punctuation">,</span><span class="token string">"Pic-Encoding"</span><span class="token operator">:</span><span class="token string">"base64"</span><span class="token punctuation">,</span><span class="token string">"Pic-Path"</span><span class="token operator">:</span><span class="token string">"/nowater/webim/big/"</span><span class="token punctuation">,</span><span class="token string">"Pic-Data"</span><span class="token operator">:</span>base64String<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3705"></td><td><pre>                <span class="token keyword">var</span> settings <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3706"></td><td><pre>                    <span class="token string">"url"</span><span class="token operator">:</span> <span class="token string">"https://upload.58cdn.com.cn/json"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3707"></td><td><pre>                    <span class="token string">"method"</span><span class="token operator">:</span> <span class="token string">"POST"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3708"></td><td><pre>                    <span class="token string">"headers"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3709"></td><td><pre>                        <span class="token string">"Content-Type"</span><span class="token operator">:</span> <span class="token string">"application/json"</span></pre></td></tr><tr><td data-num="3710"></td><td><pre>                    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3711"></td><td><pre>                    <span class="token function-variable function">xhr</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3712"></td><td><pre>                        <span class="token keyword">var</span> xhr <span class="token operator">=</span> $<span class="token punctuation">.</span>ajaxSettings<span class="token punctuation">.</span><span class="token function">xhr</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3713"></td><td><pre>                        <span class="token keyword">if</span><span class="token punctuation">(</span>progress<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3714"></td><td><pre>                            xhr<span class="token punctuation">.</span>upload<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'progress'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">evt</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>  </pre></td></tr><tr><td data-num="3715"></td><td><pre>                                <span class="token keyword">var</span> per <span class="token operator">=</span> evt<span class="token punctuation">.</span>loaded <span class="token operator">/</span> evt<span class="token punctuation">.</span>total <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3716"></td><td><pre>                                <span class="token function">progress</span><span class="token punctuation">(</span>file<span class="token punctuation">,</span> per<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3717"></td><td><pre>                            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3718"></td><td><pre>                        <span class="token keyword">return</span> xhr<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3719"></td><td><pre>                    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3720"></td><td><pre>                    <span class="token string">"data"</span><span class="token operator">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>jsn<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3721"></td><td><pre>                <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3722"></td><td><pre>                $<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span>settings<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">done</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3723"></td><td><pre>                    <span class="token keyword">if</span><span class="token punctuation">(</span>progress<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3724"></td><td><pre>                        <span class="token function">progress</span><span class="token punctuation">(</span>file<span class="token punctuation">,</span> <span class="token number">101</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3725"></td><td><pre>                    <span class="token function">success</span><span class="token punctuation">(</span>fileName<span class="token punctuation">,</span> response<span class="token punctuation">,</span> parseUrl<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3726"></td><td><pre>                <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3727"></td><td><pre>            <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3728"></td><td><pre>            reader<span class="token punctuation">.</span><span class="token function">readAsDataURL</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3729"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3730"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3731"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3732"></td><td><pre><span class="token function">define</span><span class="token punctuation">(</span><span class="token string">'model/sina'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3733"></td><td><pre>    <span class="token keyword">return</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3734"></td><td><pre>        url<span class="token operator">:</span> <span class="token string">"https://iask.sina.com.cn/question/ajax/fileupload"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3735"></td><td><pre>        method<span class="token operator">:</span> <span class="token string">"post"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3736"></td><td><pre>        headers<span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3737"></td><td><pre>            <span class="token string">'Authorization'</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3738"></td><td><pre>            <span class="token string">'Cache-Control'</span><span class="token operator">:</span> <span class="token string">"no-cache"</span></pre></td></tr><tr><td data-num="3739"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3740"></td><td><pre>        paramName<span class="token operator">:</span> <span class="token string">'wenwoImage'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3741"></td><td><pre>        otherParams<span class="token operator">:</span> <span class="token punctuation">&#123;</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3742"></td><td><pre>        maxFilesize<span class="token operator">:</span> <span class="token number">51200</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3743"></td><td><pre>        acceptedFiles<span class="token operator">:</span> <span class="token string">'.jpg,.jpeg,.png,.gif'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3744"></td><td><pre>        <span class="token function-variable function">callback</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">result<span class="token punctuation">,</span> fileName</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3745"></td><td><pre>            <span class="token keyword">var</span> host <span class="token operator">=</span> <span class="token string">"https://pic.iask.cn/fimg/"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3746"></td><td><pre>            <span class="token keyword">try</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3747"></td><td><pre>                result <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3748"></td><td><pre>            <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token keyword">return</span> <span class="token string">''</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3749"></td><td><pre>            </pre></td></tr><tr><td data-num="3750"></td><td><pre>            <span class="token keyword">return</span> host <span class="token operator">+</span> result<span class="token punctuation">.</span>id <span class="token operator">+</span> <span class="token string">'.jpg'</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3751"></td><td><pre>            </pre></td></tr><tr><td data-num="3752"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3753"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3754"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3755"></td><td><pre><span class="token function">define</span><span class="token punctuation">(</span><span class="token string">'model/baidu2'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3756"></td><td><pre>    <span class="token keyword">return</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3757"></td><td><pre>        url<span class="token operator">:</span> <span class="token string">"https://bit.baidu.com/upload/fileUpload"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3758"></td><td><pre>        method<span class="token operator">:</span> <span class="token string">"post"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3759"></td><td><pre>        headers<span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3760"></td><td><pre>            <span class="token string">'Authorization'</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3761"></td><td><pre>            <span class="token string">'Cache-Control'</span><span class="token operator">:</span> <span class="token string">"no-cache"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3762"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3763"></td><td><pre>        paramName<span class="token operator">:</span> <span class="token string">'file'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3764"></td><td><pre>        otherParams<span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3765"></td><td><pre>        maxFilesize<span class="token operator">:</span> <span class="token number">51200</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3766"></td><td><pre>        acceptedFiles<span class="token operator">:</span> <span class="token string">".jpg,.jpeg,.png,.gif,.bmp"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3767"></td><td><pre>        <span class="token function-variable function">callback</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3768"></td><td><pre>            <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>status <span class="token operator">==</span> <span class="token string">'SUCCESS'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3769"></td><td><pre>                <span class="token keyword">return</span> <span class="token string">'https://bit-images.bj.bcebos.com/bit-new/'</span> <span class="token operator">+</span> result<span class="token punctuation">.</span>data<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3770"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3771"></td><td><pre>            <span class="token keyword">return</span> <span class="token string">''</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3772"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3773"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3774"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3775"></td><td><pre><span class="token function">define</span><span class="token punctuation">(</span><span class="token string">'model/qq'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3776"></td><td><pre>    <span class="token keyword">return</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3777"></td><td><pre>        url<span class="token operator">:</span> <span class="token string">"https://om.qq.com/image/orginalupload"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3778"></td><td><pre>        method<span class="token operator">:</span> <span class="token string">"post"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3779"></td><td><pre>        headers<span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3780"></td><td><pre>            <span class="token string">'Authorization'</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3781"></td><td><pre>            <span class="token string">'Cache-Control'</span><span class="token operator">:</span> <span class="token string">"no-cache"</span></pre></td></tr><tr><td data-num="3782"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3783"></td><td><pre>        paramName<span class="token operator">:</span> <span class="token string">'Filedata'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3784"></td><td><pre>        otherParams<span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3785"></td><td><pre>        maxFilesize<span class="token operator">:</span> <span class="token number">51200</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3786"></td><td><pre>        acceptedFiles<span class="token operator">:</span> <span class="token string">".jpg,.jpeg,.png,.bmp"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3787"></td><td><pre>        <span class="token function-variable function">callback</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3788"></td><td><pre>            <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>response<span class="token punctuation">.</span>code <span class="token operator">==</span> <span class="token string">"0"</span> <span class="token operator">&amp;&amp;</span> result<span class="token punctuation">.</span>data <span class="token operator">&amp;&amp;</span> result<span class="token punctuation">.</span>data<span class="token punctuation">.</span>url<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3789"></td><td><pre>                <span class="token keyword">return</span> result<span class="token punctuation">.</span>data<span class="token punctuation">.</span>url<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">"http://"</span><span class="token punctuation">,</span> <span class="token string">"https://"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3790"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3791"></td><td><pre>            <span class="token keyword">return</span> <span class="token string">''</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3792"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3793"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3794"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3795"></td><td><pre><span class="token function">define</span><span class="token punctuation">(</span><span class="token string">'model/jd'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3796"></td><td><pre>    <span class="token keyword">return</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3797"></td><td><pre>        url<span class="token operator">:</span> <span class="token string">"https://imio.jd.com/uploadfile/file/post.do"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3798"></td><td><pre>        method<span class="token operator">:</span> <span class="token string">"post"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3799"></td><td><pre>        headers<span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3800"></td><td><pre>            <span class="token string">'Authorization'</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3801"></td><td><pre>            <span class="token string">'Cache-Control'</span><span class="token operator">:</span> <span class="token string">"no-cache"</span></pre></td></tr><tr><td data-num="3802"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3803"></td><td><pre>        paramName<span class="token operator">:</span> <span class="token string">'file'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3804"></td><td><pre>        otherParams<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3805"></td><td><pre>        maxFilesize<span class="token operator">:</span> <span class="token number">51200</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3806"></td><td><pre>        acceptedFiles<span class="token operator">:</span> <span class="token string">".jpg,.jpeg,.png,.bmp"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3807"></td><td><pre>        <span class="token function-variable function">callback</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3808"></td><td><pre>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">path":"([^"']+)"</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">)</span> </pre></td></tr><tr><td data-num="3809"></td><td><pre>                <span class="token keyword">return</span> RegExp<span class="token punctuation">.</span>$<span class="token number">1.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">"http://"</span><span class="token punctuation">,</span> <span class="token string">"https://"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3810"></td><td><pre>            <span class="token keyword">return</span> <span class="token string">''</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3811"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3812"></td><td><pre>        <span class="token function-variable function">sendPost</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">file<span class="token punctuation">,</span> fileName<span class="token punctuation">,</span> $<span class="token punctuation">,</span> progress<span class="token punctuation">,</span> success</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3813"></td><td><pre>            <span class="token keyword">var</span> reader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3814"></td><td><pre>            <span class="token keyword">var</span> parseUrl <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>callback<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3815"></td><td><pre>            reader<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3816"></td><td><pre>                <span class="token keyword">var</span> base64String <span class="token operator">=</span> event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>result<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3817"></td><td><pre>                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>base64String<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3818"></td><td><pre>                <span class="token keyword">var</span> form <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3819"></td><td><pre>                form<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"appId"</span><span class="token punctuation">,</span> <span class="token string">"im.customer"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3820"></td><td><pre>                form<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"aid"</span><span class="token punctuation">,</span> <span class="token string">"undefined"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3821"></td><td><pre>                form<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"clientType"</span><span class="token punctuation">,</span> <span class="token string">"comet"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3822"></td><td><pre>                form<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"pin"</span><span class="token punctuation">,</span> <span class="token string">"undefined"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3823"></td><td><pre>                form<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"s"</span><span class="token punctuation">,</span> base64String<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3824"></td><td><pre>                <span class="token keyword">var</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3825"></td><td><pre>                xhr<span class="token punctuation">.</span>withCredentials <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3826"></td><td><pre>                xhr<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"readystatechange"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3827"></td><td><pre>                    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>readyState <span class="token operator">===</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3828"></td><td><pre>                        <span class="token keyword">if</span><span class="token punctuation">(</span>progress<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3829"></td><td><pre>                            <span class="token function">progress</span><span class="token punctuation">(</span>file<span class="token punctuation">,</span> <span class="token number">101</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3830"></td><td><pre>                        <span class="token function">success</span><span class="token punctuation">(</span>fileName<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>responseText<span class="token punctuation">,</span> parseUrl<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3831"></td><td><pre>                    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3832"></td><td><pre>                <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3833"></td><td><pre></pre></td></tr><tr><td data-num="3834"></td><td><pre>                <span class="token keyword">if</span><span class="token punctuation">(</span>progress<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3835"></td><td><pre>                    xhr<span class="token punctuation">.</span>upload<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'progress'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">evt</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3836"></td><td><pre>                        <span class="token keyword">var</span> per <span class="token operator">=</span> evt<span class="token punctuation">.</span>loaded <span class="token operator">/</span> evt<span class="token punctuation">.</span>total <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3837"></td><td><pre>                        <span class="token function">progress</span><span class="token punctuation">(</span>file<span class="token punctuation">,</span> per<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3838"></td><td><pre>                    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3839"></td><td><pre></pre></td></tr><tr><td data-num="3840"></td><td><pre>                xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">"POST"</span><span class="token punctuation">,</span> <span class="token string">"https://imio.jd.com/uploadfile/file/post.do"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3841"></td><td><pre>                xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>form<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3842"></td><td><pre>            <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3843"></td><td><pre>            reader<span class="token punctuation">.</span><span class="token function">readAsDataURL</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3844"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3845"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3846"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3847"></td><td><pre><span class="token function">define</span><span class="token punctuation">(</span><span class="token string">'config'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token string">'model/ali'</span><span class="token punctuation">,</span> <span class="token string">'model/mt'</span><span class="token punctuation">,</span> <span class="token string">'model/baidu'</span><span class="token punctuation">,</span><span class="token string">'model/58'</span><span class="token punctuation">,</span><span class="token string">'model/sina'</span><span class="token punctuation">,</span> <span class="token string">'model/baidu2'</span><span class="token punctuation">,</span> <span class="token string">'model/qq'</span><span class="token punctuation">,</span> <span class="token string">'model/jd'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> </pre></td></tr><tr><td data-num="3848"></td><td><pre>    <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">ali<span class="token punctuation">,</span> mt<span class="token punctuation">,</span> baidu<span class="token punctuation">,</span> _58<span class="token punctuation">,</span> sina<span class="token punctuation">,</span> baidu2<span class="token punctuation">,</span> qq<span class="token punctuation">,</span> jd</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3849"></td><td><pre>    <span class="token keyword">return</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3850"></td><td><pre>        <span class="token function-variable function">getConfig</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">server</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3851"></td><td><pre>            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>server<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3852"></td><td><pre>            <span class="token keyword">switch</span> <span class="token punctuation">(</span>server<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3853"></td><td><pre>                <span class="token keyword">case</span> <span class="token string">'ali'</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="3854"></td><td><pre>                    <span class="token keyword">return</span> ali<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3855"></td><td><pre>                <span class="token keyword">case</span> <span class="token string">'mt'</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="3856"></td><td><pre>                    <span class="token keyword">return</span> mt<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3857"></td><td><pre>                <span class="token keyword">case</span> <span class="token string">'baidu'</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="3858"></td><td><pre>                    <span class="token keyword">return</span> baidu<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3859"></td><td><pre>                <span class="token keyword">case</span> <span class="token string">'58'</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="3860"></td><td><pre>                    <span class="token keyword">return</span> _58<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3861"></td><td><pre>                <span class="token keyword">case</span> <span class="token string">'sina'</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="3862"></td><td><pre>                    <span class="token keyword">return</span> sina<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3863"></td><td><pre>                <span class="token keyword">case</span> <span class="token string">'baidu2'</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="3864"></td><td><pre>                    <span class="token keyword">return</span> baidu2<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3865"></td><td><pre>                <span class="token keyword">case</span> <span class="token string">'qq'</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="3866"></td><td><pre>                    <span class="token keyword">return</span> qq<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3867"></td><td><pre>                <span class="token keyword">case</span> <span class="token string">'jd'</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="3868"></td><td><pre>                    <span class="token keyword">return</span> jd<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3869"></td><td><pre>                <span class="token keyword">default</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="3870"></td><td><pre>                    <span class="token keyword">return</span> ali<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3871"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3872"></td><td><pre></pre></td></tr><tr><td data-num="3873"></td><td><pre></pre></td></tr><tr><td data-num="3874"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3875"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3876"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3877"></td><td><pre><span class="token function">define</span><span class="token punctuation">(</span><span class="token string">'pp_init'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token string">'jquery'</span><span class="token punctuation">,</span> <span class="token string">'lib/dropzone'</span><span class="token punctuation">,</span> <span class="token string">'lib/cache'</span><span class="token punctuation">,</span> <span class="token string">'lib/callback'</span><span class="token punctuation">,</span> <span class="token string">'config'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">$<span class="token punctuation">,</span> dropzone<span class="token punctuation">,</span> cache<span class="token punctuation">,</span> cb<span class="token punctuation">,</span> conf</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3878"></td><td><pre>    <span class="token keyword">return</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3879"></td><td><pre>        <span class="token function-variable function">initPopup</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3880"></td><td><pre></pre></td></tr><tr><td data-num="3881"></td><td><pre>            <span class="token keyword">var</span> _file_urls <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3882"></td><td><pre></pre></td></tr><tr><td data-num="3883"></td><td><pre>            dropzone<span class="token punctuation">.</span>autoDiscover <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3884"></td><td><pre>            <span class="token keyword">var</span> dropz <span class="token operator">=</span> <span class="token function">createDZ</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3885"></td><td><pre></pre></td></tr><tr><td data-num="3886"></td><td><pre>            <span class="token keyword">function</span> <span class="token function">createDZ</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3887"></td><td><pre>                <span class="token keyword">let</span> config <span class="token operator">=</span> conf<span class="token punctuation">.</span><span class="token function">getConfig</span><span class="token punctuation">(</span>cache<span class="token punctuation">.</span><span class="token function">getStorage</span><span class="token punctuation">(</span><span class="token string">"server"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3888"></td><td><pre>                <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">dropzone</span><span class="token punctuation">(</span><span class="token string">".dropzone"</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3889"></td><td><pre>                    url<span class="token operator">:</span> config<span class="token punctuation">.</span>url<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3890"></td><td><pre>                    method<span class="token operator">:</span> config<span class="token punctuation">.</span>method<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3891"></td><td><pre>                    maxFilesize<span class="token operator">:</span> config<span class="token punctuation">.</span>maxFilesize<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3892"></td><td><pre>                    acceptedFiles<span class="token operator">:</span> config<span class="token punctuation">.</span>acceptedFiles<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3893"></td><td><pre>                    paramName<span class="token operator">:</span> config<span class="token punctuation">.</span>paramName<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3894"></td><td><pre>                    params<span class="token operator">:</span> config<span class="token punctuation">.</span>otherParams<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3895"></td><td><pre>                    autoProcessQueue<span class="token operator">:</span> <span class="token operator">!</span>config<span class="token punctuation">.</span>sendPost<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3896"></td><td><pre>                    addRemoveLinks<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3897"></td><td><pre>                    headers<span class="token operator">:</span> config<span class="token punctuation">.</span>headers<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3898"></td><td><pre>                    dictDefaultMessage<span class="token operator">:</span> <span class="token string">'&lt;p>&lt;i class="fa fa-cloud-upload fa-3x" aria-hidden="true">&lt;/i>&lt;/p>&lt;p>&lt;a href="#">点击选择图片&lt;/a>&lt;b>或者&lt;/b>拖拽图片到这里&lt;b>或者&lt;/b>截图后粘贴(Ctrl+V)&lt;/p>'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3899"></td><td><pre>                    dictCancelUpload<span class="token operator">:</span> <span class="token string">'取消'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3900"></td><td><pre>                    dictRemoveFile<span class="token operator">:</span> <span class="token string">'删除'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3901"></td><td><pre>                    dictFallbackMessage<span class="token operator">:</span> <span class="token string">'不好意思，您的浏览器不支持！'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3902"></td><td><pre>                    dictInvalidFileType<span class="token operator">:</span> <span class="token string">'该文件不允许上传'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3903"></td><td><pre>                    dictResponseError<span class="token operator">:</span> <span class="token string">'上传失败，请稍后重试'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3904"></td><td><pre>                    <span class="token function-variable function">init</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3905"></td><td><pre>                        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">"success"</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">file<span class="token punctuation">,</span> result</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3906"></td><td><pre>                            <span class="token function">success</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span>name<span class="token punctuation">,</span> result<span class="token punctuation">,</span> config<span class="token punctuation">.</span>callback<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3907"></td><td><pre>                        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3908"></td><td><pre>                        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">"addedfile"</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">file<span class="token punctuation">,</span>data</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3909"></td><td><pre>                            <span class="token keyword">if</span><span class="token punctuation">(</span>config<span class="token punctuation">.</span>sendPost<span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3910"></td><td><pre>                                config<span class="token punctuation">.</span><span class="token function">sendPost</span><span class="token punctuation">(</span>file<span class="token punctuation">,</span> file<span class="token punctuation">.</span>name<span class="token punctuation">,</span> $<span class="token punctuation">,</span> progress<span class="token punctuation">,</span> success<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3911"></td><td><pre>                            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3912"></td><td><pre>                        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3913"></td><td><pre>                    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3914"></td><td><pre>                <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3915"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3916"></td><td><pre>            <span class="token keyword">function</span> <span class="token function">success</span><span class="token punctuation">(</span><span class="token parameter">fileName<span class="token punctuation">,</span> result<span class="token punctuation">,</span> parseUrl</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3917"></td><td><pre>                <span class="token keyword">try</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3918"></td><td><pre>                    url <span class="token operator">=</span> <span class="token function">parseUrl</span><span class="token punctuation">(</span>result<span class="token punctuation">,</span> fileName<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3919"></td><td><pre>                    _file_urls<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> <span class="token string">"name"</span><span class="token operator">:</span> fileName<span class="token punctuation">,</span> <span class="token string">"url"</span><span class="token operator">:</span> url <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3920"></td><td><pre>                    cb<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span>fileName<span class="token punctuation">,</span> url<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3921"></td><td><pre>                    <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3922"></td><td><pre>                <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3923"></td><td><pre>                    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"文件上传出错，请重试一下！"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3924"></td><td><pre>                <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3925"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3926"></td><td><pre></pre></td></tr><tr><td data-num="3927"></td><td><pre>            <span class="token keyword">function</span> <span class="token function">progress</span><span class="token punctuation">(</span><span class="token parameter">file<span class="token punctuation">,</span> per</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3928"></td><td><pre>                <span class="token keyword">if</span><span class="token punctuation">(</span>per <span class="token operator">></span> <span class="token number">100</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3929"></td><td><pre>                    <span class="token function">$</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span>previewElement<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">"dz-success"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">"dz-complete"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3930"></td><td><pre>                <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">".dz-upload"</span><span class="token punctuation">,</span> file<span class="token punctuation">.</span>previewElement<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">"style"</span><span class="token punctuation">,</span><span class="token string">"width:"</span><span class="token operator">+</span>per<span class="token operator">+</span><span class="token string">"%"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3931"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3932"></td><td><pre></pre></td></tr><tr><td data-num="3933"></td><td><pre>            <span class="token keyword">function</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3934"></td><td><pre>                <span class="token keyword">var</span> _type <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"input[name='optionsRadios']:checked"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3935"></td><td><pre>                <span class="token keyword">if</span> <span class="token punctuation">(</span>_file_urls<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3936"></td><td><pre>                    <span class="token keyword">var</span> _text <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="3937"></td><td><pre>                    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> _file_urls<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3938"></td><td><pre>                        <span class="token keyword">var</span> __url <span class="token operator">=</span> _file_urls<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>url<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3939"></td><td><pre>                        <span class="token keyword">var</span> __name <span class="token operator">=</span> _file_urls<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3940"></td><td><pre>                        <span class="token keyword">if</span> <span class="token punctuation">(</span>_type <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3941"></td><td><pre>                            _text<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>__url<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3942"></td><td><pre>                        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>_type <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3943"></td><td><pre>                            _text<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'&lt;img src="'</span> <span class="token operator">+</span> __url <span class="token operator">+</span> <span class="token string">'" alt="'</span> <span class="token operator">+</span> __name <span class="token operator">+</span> <span class="token string">'" title="'</span> <span class="token operator">+</span> __name <span class="token operator">+</span> <span class="token string">'" />'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3944"></td><td><pre>                        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>_type <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3945"></td><td><pre>                            _text<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'[img]'</span> <span class="token operator">+</span> __url <span class="token operator">+</span> <span class="token string">'[/img]'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3946"></td><td><pre>                        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>_type <span class="token operator">==</span> <span class="token number">4</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3947"></td><td><pre>                            _text<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'!['</span> <span class="token operator">+</span> __name <span class="token operator">+</span> <span class="token string">']('</span> <span class="token operator">+</span> __url <span class="token operator">+</span> <span class="token string">')'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3948"></td><td><pre>                        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>_type <span class="token operator">==</span> <span class="token number">5</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3949"></td><td><pre>                            _text<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'[!['</span> <span class="token operator">+</span> __name <span class="token operator">+</span> <span class="token string">']('</span> <span class="token operator">+</span> __url <span class="token operator">+</span> <span class="token string">')]('</span> <span class="token operator">+</span> __url <span class="token operator">+</span> <span class="token string">')'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3950"></td><td><pre>                    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3951"></td><td><pre>                    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#int_urls"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span>_text<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">'\r\n'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3952"></td><td><pre>                <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3953"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3954"></td><td><pre></pre></td></tr><tr><td data-num="3955"></td><td><pre>            <span class="token keyword">function</span> <span class="token function">setDefaultSelect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3956"></td><td><pre>                <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"input[name='optionsRadios'][value='"</span><span class="token operator">+</span> <span class="token punctuation">(</span>cache<span class="token punctuation">.</span><span class="token function">getStorage</span><span class="token punctuation">(</span><span class="token string">"urlformat"</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token string">"']"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">"checked"</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3957"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3958"></td><td><pre></pre></td></tr><tr><td data-num="3959"></td><td><pre>            <span class="token keyword">function</span> <span class="token function">cacheDefaultSelect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3960"></td><td><pre>                cache<span class="token punctuation">.</span><span class="token function">setStorage</span><span class="token punctuation">(</span><span class="token string">"urlformat"</span><span class="token punctuation">,</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"input[name='optionsRadios']:checked"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3961"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3962"></td><td><pre>           </pre></td></tr><tr><td data-num="3963"></td><td><pre></pre></td></tr><tr><td data-num="3964"></td><td><pre>            document<span class="token punctuation">.</span><span class="token function-variable function">onpaste</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3965"></td><td><pre>                <span class="token keyword">var</span> items <span class="token operator">=</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>clipboardData <span class="token operator">||</span> event<span class="token punctuation">.</span>originalEvent<span class="token punctuation">.</span>clipboardData<span class="token punctuation">)</span><span class="token punctuation">.</span>items<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3966"></td><td><pre>                <span class="token keyword">for</span> <span class="token punctuation">(</span>index <span class="token keyword">in</span> items<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3967"></td><td><pre>                    <span class="token keyword">var</span> item <span class="token operator">=</span> items<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3968"></td><td><pre>                    <span class="token keyword">if</span> <span class="token punctuation">(</span>item<span class="token punctuation">.</span>kind <span class="token operator">===</span> <span class="token string">'file'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3969"></td><td><pre>                        dropz<span class="token punctuation">.</span><span class="token function">addFile</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span><span class="token function">getAsFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3970"></td><td><pre>                    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3971"></td><td><pre>                <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3972"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3973"></td><td><pre></pre></td></tr><tr><td data-num="3974"></td><td><pre>            <span class="token function">$</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ready</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3975"></td><td><pre>                <span class="token function">setDefaultSelect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3976"></td><td><pre>                <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"input[name='optionsRadios']"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">change</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3977"></td><td><pre>                    <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3978"></td><td><pre>                    <span class="token function">cacheDefaultSelect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3979"></td><td><pre>                <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3980"></td><td><pre>            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3981"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3982"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3983"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3984"></td><td><pre>requirejs<span class="token punctuation">.</span><span class="token function">config</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3985"></td><td><pre>    baseUrl<span class="token operator">:</span> <span class="token string">'js'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3986"></td><td><pre>    paths<span class="token operator">:</span> <span class="token punctuation">&#123;</span> <span class="token string">'jquery'</span><span class="token operator">:</span><span class="token string">'lib/jquery'</span><span class="token punctuation">,</span> <span class="token string">'dropzone'</span><span class="token operator">:</span> <span class="token string">'lib/dropzone'</span> <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3987"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3988"></td><td><pre></pre></td></tr><tr><td data-num="3989"></td><td><pre><span class="token function">require</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'pp_init'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">client</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3990"></td><td><pre>    client<span class="token punctuation">.</span><span class="token function">initPopup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3991"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3992"></td><td><pre><span class="token function">define</span><span class="token punctuation">(</span><span class="token string">"popup"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure></div><footer><div class="meta"></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/2021/9/Wallhaven%E5%A3%81%E7%BA%B8%E7%88%AC%E8%99%AB/" itemprop="url" rel="prev" data-background-image="https:&#x2F;&#x2F;images.pexels.com&#x2F;photos&#x2F;325185&#x2F;pexels-photo-325185.jpeg?auto&#x3D;compress&amp;cs&#x3D;tinysrgb&amp;dpr&#x3D;2&amp;h&#x3D;650&amp;w&#x3D;940" title="Wallhaven壁纸爬虫-自动上传到指定图床"><span class="type">上一篇</span> <span class="category"><i class="ic i-flag"></i> Hexo</span><h3>Wallhaven壁纸爬虫-自动上传到指定图床</h3></a></div><div class="item right"><a href="/2021/9/%E7%B4%AB%E7%8B%90%E5%88%86%E8%BA%ABPJ%E8%BF%87%E7%A8%8B/" itemprop="url" rel="next" data-background-image="https:&#x2F;&#x2F;dd-static.jd.com&#x2F;ddimg&#x2F;jfs&#x2F;t1&#x2F;167633&#x2F;5&#x2F;24923&#x2F;468187&#x2F;614f2f32E90219cff&#x2F;8b5764bf0032c662.jpg" title="紫狐分身PJ过程"><span class="type">下一篇</span> <span class="category"><i class="ic i-flag"></i> 逆向</span><h3>紫狐分身PJ过程</h3></a></div></div><div class="wrap" id="comments"></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="文章目录"></div><div class="related panel pjax" data-title="系列文章"><ul><li><a href="/2021/8/hexo%E4%B8%BB%E9%A2%98%E7%BE%8E%E5%8C%96%E6%A0%B7%E4%BE%8B%E5%8D%9A%E5%AE%A2%E6%94%B6%E9%9B%86/" rel="bookmark" title="hexo主题美化样例博客收集">hexo主题美化样例博客收集</a></li><li><a href="/2021/8/VSCODE%E5%86%99HEXO%E5%8D%9A%E5%AE%A2%E6%97%B6%E8%87%AA%E5%8A%A8%E6%8F%92%E5%85%A5FrontMatter%E7%9A%84%E5%AE%9E%E7%8E%B0/" rel="bookmark" title="VSCODE写HEXO博客时自动插入FrontMatter的实现">VSCODE写HEXO博客时自动插入FrontMatter的实现</a></li><li><a href="/2021/8/vscode-hexo-utils%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/" rel="bookmark" title="vscode-hexo-utils使用教程">vscode-hexo-utils使用教程</a></li><li><a href="/2021/8/shoka%E9%85%8D%E7%BD%AE%E7%AC%94%E8%AE%B0/" rel="bookmark" title="shoka配置笔记">shoka配置笔记</a></li><li><a href="/2021/9/Wallhaven%E5%A3%81%E7%BA%B8%E7%88%AC%E8%99%AB/" rel="bookmark" title="Wallhaven壁纸爬虫-自动上传到指定图床">Wallhaven壁纸爬虫-自动上传到指定图床</a></li><li class="active"><a href="/2021/9/%E5%8D%B3%E5%88%BB%E5%9B%BE%E5%BA%8A%E6%BA%90%E7%A0%81/" rel="bookmark" title="即刻图床源码">即刻图床源码</a></li><li><a href="/2021/9/%E5%88%A9%E7%94%A8%E5%A4%A7%E5%8E%82API%E4%BD%9C%E4%B8%BA%E5%9B%BE%E5%BA%8A/" rel="bookmark" title="利用大厂API作为图床">利用大厂API作为图床</a></li><li><a href="/2021/10/%E9%9A%8F%E6%9C%BA%E4%BD%BF%E7%94%A8Pexels%E6%94%B6%E8%97%8F%E5%A3%81%E7%BA%B8%E4%B8%BA%E5%8D%9A%E5%AE%A2%E8%83%8C%E6%99%AF%E5%9B%BE/" rel="bookmark" title="随机使用Pexels收藏壁纸为博客背景图">随机使用Pexels收藏壁纸为博客背景图</a></li><li><a href="/2021/10/wallhaven%E5%AE%89%E5%8D%93%E5%AE%A2%E6%88%B7%E7%AB%AF%E4%B9%A6%E7%AD%BE%E7%9A%84%E5%AF%BC%E5%87%BA%E4%B8%8E%E5%9C%A8%E7%BA%BF%E6%94%B6%E8%97%8F/" rel="bookmark" title="wallhaven安卓客户端书签的导出与在线收藏">wallhaven安卓客户端书签的导出与在线收藏</a></li><li><a href="/2021/10/%E3%80%90%E8%BD%AC%E8%BD%BD%E3%80%91%E4%B8%80%E4%BA%9B%E5%85%8D%E8%B4%B9%E5%9B%BE%E7%89%87%E4%B8%8B%E8%BD%BD%E7%BD%91%E7%AB%99%EF%BC%88%E5%86%85%E9%99%84%E9%83%A8%E5%88%86%E7%88%AC%E8%99%AB%E4%BB%A3%E7%A0%81%EF%BC%89/" rel="bookmark" title="【转载】一些免费图片下载网站（内附部分爬虫代码）">【转载】一些免费图片下载网站（内附部分爬虫代码）</a></li><li><a href="/2021/10/LeanCloud%E4%BA%91%E5%87%BD%E6%95%B0%E6%90%AD%E5%BB%BA%E9%9A%8F%E6%9C%BA%E5%9B%BE%E5%BA%8AAPI%E6%9C%8D%E5%8A%A1/" rel="bookmark" title="云函数搭建随机图床API服务">云函数搭建随机图床API服务</a></li></ul></div><div class="overview panel" data-title="站点概览"><div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="image" itemprop="image" alt="黑麋鹿" data-src="/images/avatar.jpg"><p class="name" itemprop="name">黑麋鹿</p><div class="description" itemprop="description">折腾之路</div></div><nav class="state"><div class="item posts"><a href="/archives/"><span class="count">212</span> <span class="name">文章</span></a></div><div class="item categories"><a href="/categories/"><span class="count">54</span> <span class="name">分类</span></a></div><div class="item tags"><a href="/tags/"><span class="count">136</span> <span class="name">标签</span></a></div></nav><div class="social"></div><ul class="menu"><li class="item"><a href="/" rel="section"><i class="ic i-home"></i>首页</a></li><li class="item"><a href="/archives/" rel="section"><i class="ic i-list-alt"></i>归档</a></li><li class="item"><a href="/categories/" rel="section"><i class="ic i-th"></i>分类</a></li><li class="item"><a href="/tags/" rel="section"><i class="ic i-tags"></i>标签</a></li></ul></div></div></div><ul id="quick"><li class="prev pjax"><a href="/2021/9/Wallhaven%E5%A3%81%E7%BA%B8%E7%88%AC%E8%99%AB/" rel="prev" title="上一篇"><i class="ic i-chevron-left"></i></a></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href="/2021/9/%E7%B4%AB%E7%8B%90%E5%88%86%E8%BA%ABPJ%E8%BF%87%E7%A8%8B/" rel="next" title="下一篇"><i class="ic i-chevron-right"></i></a></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"></div><div class="status"><div class="count"><span class="post-meta-item-icon"><i class="ic i-chart-area"></i> </span><span title="站点总字数">869k 字</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="ic i-coffee"></i> </span><span title="站点阅读时长">13:10</span></div><div class="powered-by">基于 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & Theme.<a href="https://github.com/amehime/hexo-theme-shoka" rel="noopener" target="_blank">Shoka</a></div></div></div></footer></div><script data-config type="text/javascript">var LOCAL={path:"2021/9/即刻图床源码/",favicon:{show:"BlackELK",hide:"看看再走吧"},search:{placeholder:"文章搜索",empty:"关于 「 ${query} 」，什么也没搜到",stats:"${time} ms 内找到 ${hits} 条结果"},valine:!0,fancybox:!0,copyright:'复制成功，转载请遵守 <i class="ic i-creative-commons"></i>BY-NC-SA 协议。',ignores:[function(e){return e.includes("#")},function(e){return new RegExp(LOCAL.path+"$").test(e)}]}</script><script src="https://cdn.polyfill.io/v2/polyfill.js"></script><script src="//cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script><script src="/js/app.js?v=0.2.5"></script></body></html><!-- rebuild by hrmmi -->