# Mysql或者Postgresql判断一个点是否存在于MULTIPOLYGON(多多边形)


## Postgresql

转载自：`https://blog.csdn.net/weixin_47553445/article/details/115268077`

### 语法

```mysql
SELECT ST_Contains( ST_GeomFromText('这里放需要查找的MULTIPOLYGON'),st_point(103.2366313,28.81767612))
```

### demo

```mysql
SELECT ST_Contains( ST_GeomFromText(
'MULTIPOLYGON(((103.236631342762 28.8176761290501,103.223402196754 28.8067721559103,103.209070714842 28.8142367294416,103.180091207643 28.798947455161,103.14654213721 28.824723076309,103.130331635197 28.828001337192,103.134297395409 28.8452254641839,103.167231778324 28.8643948670295,103.176539598724 28.8840813692598,103.169919000262 28.9045950607135,103.172633909627 28.932211552721,103.146715816082 28.9448446028962,103.13471930785 28.9692321042783,103.150374074704 28.9703423083509,103.161580849577 28.9891424738461,103.15734975159 29.0005456111911,103.177684162294 29.032308821395,103.176350962327 29.0694099108388,103.160365421227 29.0944466696781,103.180453467154 29.1056188206521,103.2017136031 29.1071235950779,103.201687387863 29.0940476602714,103.191523992039 29.0799538880615,103.199963856947 29.0731856649865,103.219618568142 29.0694447325884,103.227025387212 29.0507195660552,103.259157118007 29.0312680863532,103.281320228146 28.996955444738,103.274604182837 28.9814130607642,103.25969996678 28.9740033773541,103.245668694754 28.9457143516361,103.251277767255 28.9258500057732,103.245698980324 28.915184451901,103.272321285299 28.8964177393872,103.246358179786 28.870089342749,103.228214409667 28.8654235673438,103.236631342762 28.8176761290501))) '
),st_point(103.2366313,28.81767612))
```

### 执行结果

<img src="20210327171152526.png" alt="运行结果" style="zoom:100%;" />

### 注意事项：

1. st_point函数中,经度纬度不能是字符串类型
2. ST_GeomFromText函数中的MULTIPOLYGON为geom空间函数通过
   sT_AsText函数转换得来，不需要二次处理。
3. 愿大家永不脱发！！！

## Mysql

转载自：https://www.cnblogs.com/TTonly/p/12737780.html

MySQL5.6中查询多边形包含点情况（ST_Contains、ST_Within）

```mysql
SET @x = 121;
SET @y = 30;  
-- SET @point = CONCAT('POINT(',@x,' ',@y,')'); 
set @point= Point(@x,@y);
set @geometry=ST_GeomFromText('POLYGON((121 30, 121 30, ..., 121 30, 121 30))');
SELECT ST_Contains(@geometry,@point);//面包含点
SELECT ST_Within(@point, @geometry);//点在面
```

https://blog.csdn.net/zshtiger2414/article/details/77975958
https://dev.mysql.com/doc/refman/5.6/en/spatial-relation-functions-object-shapes.html#function_st-overlaps
